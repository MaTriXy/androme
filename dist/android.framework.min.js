var android=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u,f;!function(t){t[t.PIE=28]="PIE",t[t.OREO_1=27]="OREO_1",t[t.OREO=26]="OREO",t[t.NOUGAT_1=25]="NOUGAT_1",t[t.NOUGAT=24]="NOUGAT",t[t.MARSHMALLOW=23]="MARSHMALLOW",t[t.LOLLIPOP_1=22]="LOLLIPOP_1",t[t.LOLLIPOP=21]="LOLLIPOP",t[t.KITKAT_1=20]="KITKAT_1",t[t.KITKAT=19]="KITKAT",t[t.JELLYBEAN_2=18]="JELLYBEAN_2",t[t.JELLYBEAN_1=17]="JELLYBEAN_1",t[t.JELLYBEAN=16]="JELLYBEAN",t[t.ICE_CREAM_SANDWICH_1=15]="ICE_CREAM_SANDWICH_1",t[t.ICE_CREAM_SANDWICH=14]="ICE_CREAM_SANDWICH",t[t.ALL=0]="ALL",t[t.LATEST=28]="LATEST"}(u||(u={})),function(t){t[t.LDPI=120]="LDPI",t[t.MDPI=160]="MDPI",t[t.HDPI=240]="HDPI",t[t.XHDPI=320]="XHDPI",t[t.XXHDPI=480]="XXHDPI",t[t.XXXHDPI=640]="XXXHDPI"}(f||(f={}));var p,m,g={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",SELECT:"Spinner",RANGE:"SeekBar",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",LINE:"View",SPACE:"Space",WEB_VIEW:"WebView",FRAME:"FrameLayout",LINEAR:"LinearLayout",RADIO_GROUP:"RadioGroup",GRID:"android.support.v7.widget.GridLayout",RELATIVE:"RelativeLayout",CONSTRAINT:"android.support.constraint.ConstraintLayout",SCROLL_HORIZONTAL:"HorizontalScrollView",SCROLL_VERTICAL:"android.support.v4.widget.NestedScrollView",GUIDELINE:"android.support.constraint.Guideline"},v={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},y={HORIZONTAL:"horizontal",VERTICAL:"vertical"},b={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",tools:"http://schemas.android.com/tools"},A={"sans-serif":u.ICE_CREAM_SANDWICH,"sans-serif-thin":u.JELLYBEAN,"sans-serif-light":u.JELLYBEAN,"sans-serif-condensed":u.JELLYBEAN,"sans-serif-condensed-light":u.JELLYBEAN,"sans-serif-medium":u.LOLLIPOP,"sans-serif-black":u.LOLLIPOP,"sans-serif-smallcaps":u.LOLLIPOP,"serif-monospace":u.LOLLIPOP,serif:u.LOLLIPOP,casual:u.LOLLIPOP,cursive:u.LOLLIPOP,monospace:u.LOLLIPOP,"sans-serif-condensed-medium":u.OREO},T={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},_={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif"},N={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},D=["STRONG","B","EM","CITE","DFN","I","BIG","SMALL","FONT","BLOCKQUOTE","TT","A","U","SUP","SUB","STRIKE","H1","H2","H3","H4","H5","H6","DEL","LABEL","BR","PLAINTEXT"],E=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"],R=(r(p={},u.PIE,{android:[],app:[],customizations:{}}),r(p,u.OREO_1,{android:[],app:[],customizations:{}}),r(p,u.OREO,{android:["fontWeight","layout_marginHorizontal","layout_marginVertical","paddingHorizontal","paddingVertical"],app:[],customizations:{}}),r(p,u.NOUGAT_1,{android:[],app:[],customizations:{}}),r(p,u.NOUGAT,{android:[],app:[],customizations:{}}),r(p,u.MARSHMALLOW,{android:[],app:[],customizations:{}}),r(p,u.LOLLIPOP_1,{android:[],app:[],customizations:{}}),r(p,u.LOLLIPOP,{android:["layout_columnWeight"],app:[],customizations:{}}),r(p,u.KITKAT_1,{android:[],app:[],customizations:{}}),r(p,u.KITKAT,{android:[],app:[],customizations:{}}),r(p,u.JELLYBEAN_2,{android:[],app:[],customizations:{}}),r(p,u.JELLYBEAN_1,{android:["labelFor"],app:[],customizations:{}}),r(p,u.JELLYBEAN,{android:[],app:[],customizations:{}}),r(p,u.ICE_CREAM_SANDWICH_1,{android:[],app:[],customizations:{}}),r(p,u.ICE_CREAM_SANDWICH,{android:[],app:[],customizations:{}}),r(p,u.ALL,{android:[],app:[],customizations:{SUB:{android:{layout_marginTop:"6px"}},SUP:{android:{layout_marginTop:"-4px"}},Button:{android:{textAllCaps:"false"}}}}),p);function w(){m={android:["parent"]}}function I(t,e){var n=e,i=1,r=e.match(/^(\w+)_([0-9]+)$/);for(r&&(n=r[1],i=parseInt(r[2])),null==m[t]&&(m[t]=[]);;){if(!m[t].includes(e)){m[t].push(e);break}e="".concat(n,"_").concat(i++)}return e}function O(t){return t?t.replace(/@\+?id\//,""):""}function S(t,e,n,i){var r=i.dimensResourceValue;return void 0===r||r?"{%".concat(t.toLowerCase(),",").concat(e,",").concat(n,"}"):n}function x(t,e){var n=e.density,i=void 0===n?160:n,r=e.convertPixels,a=void 0===r?"dp":r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(a){case"dp":return t.replace(/("|>)(-)?([0-9]+(?:\.[0-9]+)?px)("|<)/g,function(t){return(arguments.length<=1?void 0:arguments[1])+((arguments.length<=2?void 0:arguments[2])||"")+function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:160,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&(t=parseFloat(t),!isNaN(t))?(t=(t/=e/160)>=1||0===t?Math.floor(t):t.toFixed(2))+(n?"sp":"dp"):"0dp"}(arguments.length<=3?void 0:arguments[3],i,o)+(arguments.length<=4?void 0:arguments[4])});default:return t}}function L(t,e,n){return parseFloat(Math.max(0===t?0:0===e?1:t/(t+e),0).toFixed(n))}function B(t,e){var n=e.supportRTL,i=void 0===n||n,r=e.targetAPI,a=void 0===r?u.JELLYBEAN_1:r;return i&&a>=u.JELLYBEAN_1&&(t=(t=t.replace(/left/g,"start").replace(/right/g,"end")).replace(/Left/g,"Start").replace(/Right/g,"End")),t}var C=androme.lib.enumeration,k=androme.lib.constant,P=androme.lib.util,M=androme.lib.dom,X=androme.lib.base.NodeList,G=function(t){return function(n){function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return e(this,r),(t=s(this,o(r).call(this,n,i))).api=0,t.children=[],t.renderChildren=[],t._namespaces=new Set(["android","app"]),t._boxAdjustment=M.getBoxModel(),t._boxReset=M.getBoxModel(),t._android={},t._app={},t.constraint={current:{}},t}return a(r,t),i(r,[{key:"attr",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.supported(t,e)?d(o(r.prototype),"attr",this).call(this,t,e,n,i):""}},{key:"android",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.attr("android",t,e,n),this._android[t]||""}},{key:"app",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.attr("app",t,e,n),this._app[t]||""}},{key:"apply",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},t);for(var n in d(o(r.prototype),"apply",this).call(this,e),e)this.formatted("".concat(n,'="').concat(e[n],'"'))}},{key:"formatted",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.match(/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/);n&&this.attr(n[1]||"_",n[2],n[3],e)}},{key:"anchor",value:function(t,e,n,i){(1===arguments.length||null==this.constraint.current[t]||!this.constraint.current[t].overwrite||n&&!this.constraint[n])&&(null==i&&(i="parent"===e||"true"===e),this[this.renderParent.controlName===g.RELATIVE?"android":"app"](t,e,i),n&&(this.constraint[n]=!0),this.constraint.current[t]={adjacent:e,orientation:n,overwrite:i})}},{key:"alignParent",value:function(t,e){if(this.renderParent.is(C.NODE_STANDARD.CONSTRAINT,C.NODE_STANDARD.RELATIVE)){var n=this.renderParent.controlName===g.CONSTRAINT,i=P.capitalize(B(t,e)),r=n?"layout_constraint".concat(i,"_to").concat(i,"Of"):"layout_alignParent".concat(i);return this[n?"app":"android"](r)===(n?"parent":"true")}return!1}},{key:"horizontalBias",value:function(t){var e=t.constraintPercentAccuracy,n=void 0===e?4:e,i=this.documentParent;return i!==this?L(Math.max(0,this.linear.left-i.box.left),Math.max(0,i.box.right-this.linear.right),n):.5}},{key:"verticalBias",value:function(t){var e=t.constraintPercentAccuracy,n=void 0===e?4:e,i=this.documentParent;return i!==this?L(Math.max(0,this.linear.top-i.box.top),Math.max(0,i.box.bottom-this.linear.bottom),n):.5}},{key:"modifyBox",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="number"==typeof t?P.convertEnum(t,C.BOX_STANDARD,v):"";if(0!==e&&(""!==i||P.isString(t))){var r=P.isString(t)?t:i.replace("layout_","");null!=this._boxReset[r]&&(null==e?this._boxReset[r]=1:(this._boxAdjustment[r]+=e,n||(this._boxAdjustment[r]=Math.max(0,this._boxAdjustment[r]))))}}},{key:"valueBox",value:function(t){var e=P.convertEnum(t,C.BOX_STANDARD,v);if(""!==e){var n=e.replace("layout_","");return[this._boxReset[n]||0,this._boxAdjustment[n]||0]}return[0,0]}},{key:"supported",value:function(t,e){if(this.api>0)for(var n=this.api+1;n<=u.LATEST;n++){var i=R[n];if(i&&i[t]&&i[t].includes(e))return!1}return!0}},{key:"combine",value:function(){for(var t=[],e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=!0,a=!1,o=void 0;try{for(var l,s=this._namespaces.values()[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var d=l.value,c=this["_".concat(d)];if(0===n.length||n.includes(d))for(var h in c)"_"!==d?t.push("".concat(d,":").concat(h,'="').concat(c[h],'"')):t.push("".concat(h,'="').concat(c[h],'"'))}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return t.sort(function(t,e){return t.startsWith("android:id=")?-1:e.startsWith("android:id=")?1:t>e?1:-1})}},{key:"clone",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new r(t||this.id,this.element);return n.api=this.api,n.nodeId=this.nodeId,n.nodeType=this.nodeType,n.controlName=this.controlName,n.alignmentType=this.alignmentType,n.depth=this.depth,n.rendered=this.rendered,n.renderDepth=this.renderDepth,n.renderParent=this.renderParent,n.renderExtension=this.renderExtension,n.documentRoot=this.documentRoot,n.documentParent=this.documentParent,e&&(n.children=this.children.slice()),n.inherit(this,"initial","base","style","styleMap"),n}},{key:"setNodeType",value:function(t){for(var e in g)if(g[e]===t&&null!=C.NODE_STANDARD[e]){this.nodeType=C.NODE_STANDARD[e];break}if(this.controlName=t,""!==this.android("id")&&(this.nodeId=O(this.android("id"))),!this.nodeId){var n=this.element,i=P.trimNull(n.id||n.name);E.includes(i)&&(i+="_1"),this.nodeId=P.convertWord(I("android",i||"".concat(P.lastIndexOf(this.controlName,".").toLowerCase(),"_1"))),this.android("id",this.stringId)}}},{key:"setLayout",value:function(){var t=this;if(this.nodeType>=C.NODE_STANDARD.SCROLL_HORIZONTAL)this.android("layout_width",this.nodeType===C.NODE_STANDARD.SCROLL_HORIZONTAL&&this.has("width",C.CSS_STANDARD.UNIT)?this.css("width"):"wrap_content"),this.android("layout_height",this.nodeType===C.NODE_STANDARD.SCROLL_VERTICAL&&this.has("height",C.CSS_STANDARD.UNIT)?this.css("height"):"wrap_content");else if(this.renderParent.nodeType>=C.NODE_STANDARD.SCROLL_HORIZONTAL)this.renderParent.is(C.NODE_STANDARD.SCROLL_HORIZONTAL)?(this.android("layout_width","wrap_content",!1),this.android("layout_height","match_parent",!1)):(this.android("layout_width","match_parent",!1),this.android("layout_height","wrap_content",!1));else{var e=this.documentParent,n=this.renderParent,i=this.renderChildren,r=this.linear?this.linear.width:this.hasElement?this.element.clientWidth+this.borderLeftWidth+this.borderRightWidth+this.marginLeft+this.marginRight:0,a=this.linear?this.linear.height:this.hasElement?this.element.clientHeight+this.borderTopWidth+this.borderBottomWidth+this.marginTop+this.marginBottom:0,o=e.initial.box?e.initial.box.width:e.element instanceof HTMLElement?e.element.offsetWidth-(e.paddingLeft+e.paddingRight+e.borderLeftWidth+e.borderRightWidth):0,l=e.initial.box?e.initial.box.height:e.element instanceof HTMLElement?e.element.offsetHeight-(e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth):0,s=this.styleMap,d=this.constraint,c="TABLE"===this.tagName;if((this.documentBody||this.documentRoot&&!this.flex.enabled&&this.is(C.NODE_STANDARD.FRAME,C.NODE_STANDARD.CONSTRAINT,C.NODE_STANDARD.RELATIVE))&&(this.hasWidth||!this.block||d.layoutHorizontal||this.android("layout_width","match_parent",!1),this.hasHeight||!this.cascade().some(function(t){return!t.pageflow})||d.layoutHeight||d.layoutVertical||this.android("layout_height","match_parent",!1)),this.of(C.NODE_STANDARD.GRID,C.NODE_ALIGNMENT.PERCENT))this.android("layout_width","match_parent");else{if("0px"!==this.android("layout_width")){if(this.toInt("width")>0&&(!this.inlineStatic||n.is(C.NODE_STANDARD.GRID)||!this.has("width",0,{map:"initial"})))if(this.has("width",C.CSS_STANDARD.PERCENT))if("100%"===s.width)this.android("layout_width","match_parent",!1);else if(n.of(C.NODE_STANDARD.GRID,C.NODE_ALIGNMENT.PERCENT))this.android("layout_width","0px"),this.app("layout_columnWeight",(parseInt(s.width)/100).toFixed(2));else{var h=Math.ceil(this.bounds.width)-(c?0:this.paddingLeft+this.paddingRight+this.borderLeftWidth+this.borderRightWidth);this.android("layout_width",P.formatPX(h),!1)}else this.android("layout_width",P.convertInt(e.android("layout_width"))>0&&e.viewWidth>0&&this.viewWidth>=e.viewWidth?"match_parent":s.width,"TABLE"!==n.tagName);if(d.layoutWidth&&(d.layoutHorizontal?this.android("layout_width",e.hasWidth?"match_parent":"wrap_content",!1):this.android("layout_width",this.bounds.width>=o?"match_parent":P.formatPX(this.bounds.width),!1)),this.has("minWidth",C.CSS_STANDARD.UNIT)&&(this.android("layout_width","wrap_content",!1),this.android("minWidth",s.minWidth,!1)),!this.documentBody&&this.has("maxWidth",C.CSS_STANDARD.UNIT)&&this.layoutVertical){var u=this.css("maxWidth"),f=!0,p=!1,m=void 0;try{for(var g,v=i[Symbol.iterator]();!(f=(g=v.next()).done);f=!0){var y=g.value;y.is(C.NODE_STANDARD.TEXT)&&!y.has("maxWidth")&&y.android("maxWidth",u)}}catch(t){p=!0,m=t}finally{try{f||null==v.return||v.return()}finally{if(p)throw m}}}}if(""===this.android("layout_width")){var b=i.filter(function(t){return!t.autoMargin&&t.has("width",C.CSS_STANDARD.UNIT,{map:"initial"})});if(P.convertFloat(this.app("layout_columnWeight"))>0)this.android("layout_width","0px");else if(b.length>0&&b.some(function(e){return e.bounds.width>=t.box.width}))this.android("layout_width","wrap_content");else if(this.blockStatic&&this.hasAlign(C.NODE_ALIGNMENT.VERTICAL)||!this.documentRoot&&i.some(function(t){return t.hasAlign(C.NODE_ALIGNMENT.VERTICAL)&&!t.has("width")}))this.android("layout_width","match_parent");else{var A=Math.max.apply(null,i.filter(function(t){return t.inlineElement&&"right"!==t.float}).map(function(t){return t.linear.right}))||0,T=this.nodeType<C.NODE_STANDARD.INLINE||this.inlineElement||!this.pageflow||!this.siblingflow||"table"===this.display||e.flex.enabled||n.inlineElement&&!n.hasWidth&&!this.inlineElement&&this.nodeType>C.NODE_STANDARD.BLOCK||n.is(C.NODE_STANDARD.GRID);if(this.is(C.NODE_STANDARD.GRID)&&P.withinFraction(A,this.box.right))this.android("layout_width","wrap_content");else if(!T||this.blockStatic&&!this.has("maxWidth")){var _=this.previousSibling(),N=this.nextSibling();(r>=o||this.linearVertical&&!this.floating&&!this.autoMargin||this.hasElement&&this.blockStatic&&(this.documentParent.documentBody||this.ascend().every(function(t){return t.blockStatic})||this.documentParent.blockStatic&&this.nodeType<=C.NODE_STANDARD.LINEAR&&(!_||!_.floating)&&(!N||!N.floating))||this.is(C.NODE_STANDARD.FRAME)&&i.some(function(t){return t.blockStatic&&(t.autoMarginHorizontal||t.autoMarginLeft)})||!this.hasElement&&this.length>0&&i.some(function(e){return e.linear.width>=t.documentParent.box.width})&&!i.some(function(t){return t.plainText&&t.multiLine}))&&this.android("layout_width","match_parent")}this.android("layout_width","wrap_content",!1)}}}if("0px"!==this.android("layout_height")){if(this.toInt("height")>0&&(!this.inlineStatic||!this.has("height",0,{map:"initial"})))if(this.has("height",C.CSS_STANDARD.PERCENT))if("100%"===s.height)this.android("layout_height","match_parent",!1);else{var D=Math.ceil(this.bounds.height);c||(D-=this.paddingTop+this.paddingBottom+this.borderTopWidth+this.borderBottomWidth),this.android("layout_height",P.formatPX(D),!1)}else this.android("layout_height","hidden"===this.css("overflow")&&this.toInt("height")<this.box.height?"wrap_content":s.height);if(d.layoutHeight)if(d.layoutVertical)this.android("layout_height","wrap_content",!1);else if(this.documentRoot){var E=Math.max.apply(null,i.filter(function(t){return t.pageflow}).map(function(t){return t.linear.bottom}))||0;this.android("layout_height",E>0?P.formatPX(E+this.paddingBottom+this.borderBottomWidth):"match_parent",!1)}else this.android("layout_height",this.actualHeight<l?P.formatPX(this.actualHeight):"match_parent",!1);if(this.has("minHeight",C.CSS_STANDARD.UNIT)&&(this.android("layout_height","wrap_content",!1),this.android("minHeight",s.minHeight,!1)),!this.documentBody&&this.has("maxHeight",C.CSS_STANDARD.UNIT)&&this.layoutHorizontal){var R=this.css("maxHeight"),w=!0,I=!1,O=void 0;try{for(var S,x=i[Symbol.iterator]();!(w=(S=x.next()).done);w=!0){var L=S.value;L.is(C.NODE_STANDARD.TEXT)&&!L.has("maxWidth")&&L.android("maxWidth",R)}}catch(t){I=!0,O=t}finally{try{w||null==x.return||x.return()}finally{if(I)throw O}}}}if(""===this.android("layout_height"))if(!(a>=l&&e.hasHeight)||this.inlineElement&&this.nodeType<C.NODE_STANDARD.INLINE||n.is(C.NODE_STANDARD.RELATIVE)&&n.inlineHeight){if(this.lineHeight>0&&!this.plainText&&!n.linearHorizontal){var B=this.actualHeight+n.paddingTop+n.paddingBottom;this.inlineElement&&B>0&&this.lineHeight>=B?(this.android("layout_height",P.formatPX(B)),this.modifyBox(C.BOX_STANDARD.PADDING_TOP,null),this.modifyBox(C.BOX_STANDARD.PADDING_BOTTOM,null)):this.block&&this.box.height>0&&this.lineHeight===this.box.height&&this.android("layout_height",P.formatPX(B))}this.android("layout_height","wrap_content",!1)}else this.android("layout_height","match_parent")}"hidden"===this.cssParent("visibility",!0)&&this.android("visibility","invisible")}},{key:"setAlignment",value:function(t){var e=this.renderParent,n=this.cssParent("textAlign"),i=e.is(C.NODE_STANDARD.GRID)?"app":"android",r=B("left",t),a=B("right",t),o=this.styleMap.textAlign||"",l="",s="";function d(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=h(P.trimNull(t).split("|")).concat(n).filter(function(t){return t});switch(r.length){case 0:return"";case 1:return r[0];default:for(var a="",o="",l="",s=0;s<r.length;s++){var d=r[s];switch(d){case"center":a="center_horizontal",o="center_vertical";break;case"left":case"start":case"right":case"end":case"center_horizontal":a=d;break;case"top":case"bottom":case"center_vertical":o=d;break;default:l+=(""!==l?"|":"")+d}}var c=[a,o].filter(function(t){return t}),u=2===c.filter(function(t){return-1!==t.indexOf("center")}).length?"center":c.join("|");return""!==u?""!==l?"".concat(u,"|").concat(l):u:l}}function c(t){if(!t.blockWidth){var e=[],n="auto"===t.css("marginLeft"),o="auto"===t.css("marginRight"),l="auto"===t.css("marginTop"),s="auto"===t.css("marginBottom");if(n&&o?e.push("center_horizontal"):n&&!o?e.push(a):!n&&o&&e.push(r),l&&s?e.push("center_vertical"):l&&!s?e.push("bottom"):!l&&s&&e.push("top"),e.length>0){var c=t.blockWidth?"gravity":"layout_gravity";return t[i](c,d.apply(void 0,[t[i](c)].concat(e))),!0}}return!1}function u(t){switch(t){case"left":case"start":return r;case"right":case"end":return a;case"center":return"center_horizontal";default:return""}}function f(t){return""===o||t===a?t:o}if(!this.floating&&!e.of(C.NODE_STANDARD.RELATIVE,C.NODE_ALIGNMENT.MULTILINE))switch(this.styleMap.verticalAlign){case"top":case"text-top":l="top",e.linearHorizontal&&this.inlineHeight&&this.android("layout_height","match_parent");break;case"middle":(this.inline||"table-cell"===this.documentParent.css("display")||this.inlineStatic&&this.documentParent.lineHeight>0)&&(l="center_vertical");break;case"bottom":case"text-bottom":l="bottom"}""===l&&this.lineHeight>0&&!this.blockHeight&&(l="center_vertical"),(e.linearVertical||this.documentRoot&&this.linearVertical)&&("right"===this.float?this[i]("layout_gravity",a):c(this)),this.hasAlign(C.NODE_ALIGNMENT.FLOAT)&&(this.hasAlign(C.NODE_ALIGNMENT.RIGHT)||this.renderChildren.some(function(t){return t.hasAlign(C.NODE_ALIGNMENT.RIGHT)})?s=a:(this.hasAlign(C.NODE_ALIGNMENT.LEFT)||this.renderChildren.some(function(t){return t.hasAlign(C.NODE_ALIGNMENT.LEFT)}))&&(s=r)),"TABLE"===e.tagName&&(this[i]("layout_gravity",d(this[i]("layout_gravity"),"fill")),""===o&&"TH"===this.tagName&&(o="center"),""===l&&(l="center_vertical")),e.is(C.NODE_STANDARD.FRAME)?c(this)||"none"!==(s=s||this.float)&&(e.inlineWidth||this.singleChild&&!e.documentRoot?e.android("layout_gravity",d(e.android("layout_gravity"),B(s,t))):this.blockWidth?o=f(s):this.android("layout_gravity",d(this.android("layout_gravity"),B(s,t)))):""!==s&&(this.is(C.NODE_STANDARD.LINEAR)?this.blockWidth?o=f(s):this[i]("layout_gravity",d(this[i]("layout_gravity"),s)):e.hasAlign(C.NODE_ALIGNMENT.VERTICAL)&&(o=f(s))),""!==n&&B(n,t)!==r&&(e.is(C.NODE_STANDARD.FRAME)&&this.singleChild&&!this.floating&&!this.autoMargin&&this[i]("layout_gravity",d(this[i]("layout_gravity"),u(n))),""===o&&(o=n)),""!==l&&e.linearHorizontal&&(this[i]("layout_gravity",d(this[i]("layout_gravity"),l)),l=""),this.documentRoot&&(this.blockWidth||this.is(C.NODE_STANDARD.FRAME))&&this.delete(i,"layout_gravity"),this.android("gravity",d(this.android("gravity"),u(o),l))}},{key:"setBoxSpacing",value:function(t){var e=this;this.hasBit("excludeResource",C.NODE_RESOURCE.BOX_SPACING)||(["padding","margin"].forEach(function(n){["Top","Left","Right","Bottom"].forEach(function(i){var r=n+i,a=(0===e._boxReset[r]?e[r]:0)+e._boxAdjustment[r];if(0!==a){var o=B(v["".concat(n.toUpperCase(),"_").concat(i.toUpperCase())],t);e.android(o,P.formatPX(a))}})}),this.api>=u.OREO&&["layout_margin","padding"].forEach(function(n,i){var r=P.convertInt(e.android("".concat(n,"Top"))),a=P.convertInt(e.android(B("".concat(n,"Right"),t))),o=P.convertInt(e.android("".concat(n,"Bottom"))),l=P.convertInt(e.android(B("".concat(n,"Left"),t)));0!==r&&r===o&&o===l&&l===a?(e.delete("android","".concat(n,"*")),e.android(n,P.formatPX(r))):e.renderParent.is(C.NODE_STANDARD.GRID)&&0===i||(0!==r&&r===o&&(e.delete("android","".concat(n,"Top"),"".concat(n,"Bottom")),e.android("".concat(n,"Vertical"),P.formatPX(r))),0!==l&&l===a&&(e.delete("android",B("".concat(n,"Left"),t),B("".concat(n,"Right"),t)),e.android("".concat(n,"Horizontal"),P.formatPX(l))))}))}},{key:"applyOptimizations",value:function(t){var e=this,n=this.renderParent,i=this.renderChildren;function a(t){return t.paddingTop+t.paddingBottom+t.borderTopWidth+t.borderBottomWidth}if(this.is(C.NODE_STANDARD.LINEAR,C.NODE_STANDARD.RADIO_GROUP)){var o=this.linearHorizontal;if(this.blockWidth&&!this.blockStatic&&[[o,this.inlineElement,"width"],[!o,!0,"height"]].forEach(function(t){var n="inline".concat(P.capitalize(t[2]));t[0]&&t[1]&&!e[n]&&i.every(function(t){return t[n]})&&e.android("layout_".concat(t[2]),"wrap_content")}),o){if(i.some(function(t){return t.imageElement&&t.baseline})||!this.hasAlign(C.NODE_ALIGNMENT.FLOAT)&&!i.some(function(t){return t.floating||!t.siblingflow})){var l=n.android("baselineAlignedChildIndex");if(i.some(function(t){return!t.alignOrigin||!t.baseline})||""!==l&&this.renderParent.renderChildren.findIndex(function(t){return t===e})===parseInt(l)||i.some(function(t){return t.nodeType<C.NODE_STANDARD.TEXT})&&i.some(function(t){return t.textElement&&t.baseline})||n.is(C.NODE_STANDARD.GRID)&&!i.some(function(t){return t.textElement&&t.baseline})){var s=X.textBaseline(i);s.length>0&&this.android("baselineAlignedChildIndex",i.indexOf(s[0]).toString())}}else this.android("baselineAligned","false");if(t.ellipsisOnTextOverflow&&this.length>1&&i.every(function(t){return t.textElement&&!t.floating})){var d=i[i.length-1];d.textElement&&!d.multiLine&&d.textContent.trim().split(String.fromCharCode(32)).length>1&&d.android("singleLine","true")}}}if(this.pageflow&&(!n.documentBody&&n.blockStatic&&this.documentParent===n&&[["firstElementChild","Top",C.BOX_STANDARD.MARGIN_TOP,C.BOX_STANDARD.PADDING_TOP],["lastElementChild","Bottom",C.BOX_STANDARD.MARGIN_BOTTOM,C.BOX_STANDARD.PADDING_BOTTOM]].forEach(function(t,i){var r=M.getNodeFromElement(n[t[0]]);!r||r.lineBreak||r!==e&&r!==e.renderChildren[0===i?0:e.renderChildren.length-1]||n["margin".concat(t[1])]>0&&0===n["padding".concat(t[1])]&&0===n["border".concat(t[1],"Width")]&&r.modifyBox(t[2],null)}),this.hasElement&&this.blockStatic))for(var c=function(t){var n=e.element.children[t],i=M.getNodeFromElement(n);if(i&&i.pageflow&&i.blockStatic&&!i.lineBreak){var r=i.previousSibling();if(r&&r.pageflow&&!r.lineBreak){var a=P.convertInt(i.cssInitial("marginTop",!0)),o=P.convertInt(r.cssInitial("marginBottom",!0));o>0&&a>0&&(a<=o?i.modifyBox(C.BOX_STANDARD.MARGIN_TOP,null):r.modifyBox(C.BOX_STANDARD.MARGIN_BOTTOM,null))}[n.previousElementSibling,n.nextElementSibling].forEach(function(t,e){var n=M.getNodeFromElement(t);if(n&&n.excluded){var r=Math.min(n.marginTop,n.marginBottom);r<0&&(0===e?i.modifyBox(C.BOX_STANDARD.MARGIN_TOP,r,!0):i.modifyBox(C.BOX_STANDARD.MARGIN_BOTTOM,r,!0))}})}},h=0;h<this.element.children.length;h++)c(h);if(this.bindWhiteSpace(t),t.autoSizePaddingAndBorderWidth&&!this.hasBit("excludeProcedure",C.NODE_PROCEDURE.AUTOFIT)){var u=P.convertInt(this.android("layout_width")),f=P.convertInt(this.android("layout_height")),p=!1;if(this.imageElement){var m=this.borderTopWidth,g=this.borderRightWidth,v=this.borderBottomWidth,y=this.borderLeftWidth,b=0,A=0;m>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_TOP,m),A+=m),g>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_RIGHT,g),b+=g),v>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_BOTTOM,v),A+=v),y>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_LEFT,y),b+=y),A+=this.paddingTop+this.paddingBottom,(b+=this.paddingLeft+this.paddingRight)>0&&(u>0?this.android("layout_width",P.formatPX(u+b)):(u=P.convertInt(n.android("layout_width")))>0&&this.singleChild&&n.android("layout_width",P.formatPX(u+this.marginLeft+b))),A>0&&(f>0?this.android("layout_height",P.formatPX(f+A)):(f=P.convertInt(n.android("layout_height")))>0&&this.singleChild&&n.android("layout_height",P.formatPX(f+this.marginTop+A)))}else if(this.is(C.NODE_STANDARD.BUTTON)&&0===f)this.android("layout_height",P.formatPX(this.bounds.height+("outset"===this.css("borderStyle")?P.convertInt(this.css("borderWidth")):0)));else if(this.is(C.NODE_STANDARD.LINE))f>0&&this.has("height",0,{map:"initial"})&&"HR"!==this.tagName&&this.android("layout_height",P.formatPX(f+this.borderTopWidth+this.borderBottomWidth));else if("TABLE"===this.tagName){var T=P.convertInt(this.android("layout_width"));if(T>0&&(this.bounds.width>T&&this.android("layout_width",P.formatPX(this.bounds.width)),this.has("width",C.CSS_STANDARD.AUTO,{map:"initial"})&&i.every(function(t){return t.inlineWidth}))){var _=!0,N=!1,D=void 0;try{for(var E,R=i[Symbol.iterator]();!(_=(E=R.next()).done);_=!0){var w=E.value;w.android("layout_width","0px"),w.app("layout_columnWeight","1")}}catch(t){N=!0,D=t}finally{try{_||null==R.return||R.return()}finally{if(N)throw D}}}p="content-box"===this.css("boxSizing")}else if(this.hasElement&&!this.hasBit("excludeResource",C.NODE_RESOURCE.BOX_SPACING)){if("TABLE"!==n.tagName&&"border-box"!==this.css("boxSizing")){var I=P.convertInt(this.android("minWidth")),O=P.convertInt(this.android("minHeight")),S=this.paddingLeft+this.paddingRight+this.borderLeftWidth+this.borderRightWidth,x=a(this);u>0&&this.toInt("width",0,{map:"initial"})>0&&S>0&&this.android("layout_width",P.formatPX(u+S)),f>0&&this.toInt("height",0,{map:"initial"})>0&&x>0&&(0===this.lineHeight||this.lineHeight<this.box.height||this.lineHeight===this.toInt("height"))&&this.android("layout_height",P.formatPX(f+x)),I>0&&S>0&&this.android("minWidth",P.formatPX(I+S)),O>0&&x>0&&this.android("minHeight",P.formatPX(O+x))}p=!0}p&&(this.modifyBox(C.BOX_STANDARD.PADDING_TOP,this.borderTopWidth),this.modifyBox(C.BOX_STANDARD.PADDING_RIGHT,this.borderRightWidth),this.modifyBox(C.BOX_STANDARD.PADDING_BOTTOM,this.borderBottomWidth),this.modifyBox(C.BOX_STANDARD.PADDING_LEFT,this.borderLeftWidth))}if(this.linearHorizontal||this.of(C.NODE_STANDARD.RELATIVE,C.NODE_ALIGNMENT.HORIZONTAL)){var L=i.filter(function(t){return!t.floating&&(t.hasElement||0===t.renderChildren.length)});if(L.length>0&&L.every(function(t){return t.baseline||t.has("verticalAlign",C.CSS_STANDARD.UNIT)})&&(L.some(function(t){return t.imageElement&&0!==t.toInt("verticalAlign")})||L.some(function(t){return t.toInt("verticalAlign")<0})&&L.some(function(t){return t.toInt("verticalAlign")>0}))){var B=Math.max.apply(null,L.map(function(t){return t.toInt("verticalAlign")})),k=[],G=0;B>0&&(L.forEach(function(t){var e=t.toInt("verticalAlign"),n=(t.imageElement?t.bounds.height:0)+(e>0?e:0);n>=G&&(n>G&&(k.length=0),k.push(t),G=n)}),k.sort(function(t){return t.imageElement?-1:1}),L.forEach(function(t){if(!k.includes(t)){var e=t.toInt("verticalAlign");B>0&&t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,G-(k[0].imageElement?t.bounds.height:0)),0!==e&&(t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,-1*e,!0),t.css("verticalAlign","0px"))}}),k.forEach(function(t){return t.css("verticalAlign","0px")}))}if(i.some(function(t){return"SUB"===t.tagName})&&this.inlineHeight){var H=P.convertInt(r.getCustomizationValue(this.api,"SUB","android","layout_marginTop"));H>0&&this.android("layout_height",P.formatPX(this.bounds.height+H+a(this)))}}if(this.inline&&!this.floating){var W=this.toInt("verticalAlign");0!==W&&(this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,-1*W,!0),W<0&&n.layoutHorizontal&&n.inlineHeight&&n.android("layout_height",P.formatPX(n.bounds.height+a(n))))}if("relative"===this.position||n.is(C.NODE_STANDARD.FRAME)){var z=this.toInt("top"),V=this.toInt("bottom"),F=this.toInt("left");if(0!==z)if(z<0&&n.is(C.NODE_STANDARD.RELATIVE,C.NODE_STANDARD.LINEAR)&&this.floating&&this.data("RESOURCE","backgroundImage")){var U=!1;n.renderChildren.some(function(t){if(t===e)U=!0;else{if(""!==t.android("layout_below"))return!0;U&&t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,Math.abs(z))}return!1})}else this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,z,!0);else 0!==V&&this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,-1*V,!0);0!==F&&("right"===this.float||"relative"===this.position&&this.autoMarginLeft?this.modifyBox(C.BOX_STANDARD.MARGIN_RIGHT,-1*F,!0):this.modifyBox(C.BOX_STANDARD.MARGIN_LEFT,F,!0))}if(!this.plainText&&!n.linearHorizontal){var j=this.lineHeight+this.toInt("verticalAlign")-this.actualHeight;j>0&&(this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,Math.floor(j/2)),this.modifyBox(C.BOX_STANDARD.MARGIN_BOTTOM,Math.ceil(j/2)))}}},{key:"applyCustomizations",value:function(t){for(var e=[R[0],R[this.api]],n=0;n<e.length;n++){var i=e[n];if(i&&i.customizations)for(var r=[this.tagName,this.controlName],a=0;a<r.length;a++){var o=r[a],l=i.customizations[o];if(l)for(var s in l)for(var d in l[s])this.attr(s,d,l[s][d],t.customizationsOverwritePrivilege)}}}},{key:"bindWhiteSpace",value:function(t){var e=this;if(!this.hasAlign(C.NODE_ALIGNMENT.FLOAT)&&(this.linearHorizontal||this.of(C.NODE_STANDARD.RELATIVE,C.NODE_ALIGNMENT.HORIZONTAL,C.NODE_ALIGNMENT.MULTILINE)||this.of(C.NODE_STANDARD.CONSTRAINT,C.NODE_ALIGNMENT.HORIZONTAL))){var n=this.css("textAlign"),i=this.toInt("textIndent"),r=this.valueBox(C.BOX_STANDARD.PADDING_LEFT),a=this.is(C.NODE_STANDARD.RELATIVE),o=this.box.left+(i>0?this.toInt("textIndent"):i<0&&1===r[0]?r[0]:0);this.each(function(e,i){if(!(e.floating||a&&e.alignParent("left",t)||0===i&&("left"!==n||e.plainText)||["SUP","SUB"].includes(e.tagName))){var r=Math.round(e.actualLeft()-o);r>=1&&e.modifyBox(C.BOX_STANDARD.MARGIN_LEFT,r)}o=e.actualRight()},!0)}else this.linearVertical&&this.each(function(t){var n=function(){var n=t;do{n=n.previousSibling(!0,!1,!1)}while(n&&!e.initial.children.includes(n));return n}(),i=M.getElementsBetweenSiblings(n?n.length>0&&!n.hasElement?n.lastElementChild:n.baseElement:null,t.baseElement).filter(function(t){var e=M.getNodeFromElement(t);return!(!e||!(e.lineBreak||e.excluded&&e.blockStatic))});if(i.length>0){var r;if(r=n?n.layoutHorizontal&&n.length>0&&n.renderChildren.some(function(t){return!t.floating})?n.renderChildren.filter(function(t){return!t.floating}).sort(function(t,e){return t.linear.bottom<e.linear.bottom?1:-1})[0].linear.bottom:n.linear.bottom:e.box.top,1===i.length&&"BR"===i[0].tagName&&n&&n.inline&&t.inline)return;var a=Math.round(t.linear.top-r);a>=1&&t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,a)}},!0)}},{key:"stringId",get:function(){return this.nodeId?"@+id/".concat(this.nodeId):""}},{key:"controlName",set:function(t){this._controlName=t},get:function(){if(this._controlName)return this._controlName;var t=k.MAP_ELEMENT[this.nodeName];return null!=t?r.getControlName(t):""}},{key:"documentParent",set:function(t){this._documentParent=t},get:function(){return this._documentParent?this._documentParent:0===this.id?this:this.getParentElementAsNode(!1)||r.documentBody()}},{key:"renderParent",set:function(t){t!==this&&t.renderAppend(this),this._renderParent=t},get:function(){return this._renderParent||r.documentBody()}},{key:"anchored",get:function(){return this.constraint.horizontal&&this.constraint.vertical}},{key:"layoutHorizontal",get:function(){return this.linearHorizontal||this.hasAlign(C.NODE_ALIGNMENT.HORIZONTAL)||this.is(C.NODE_STANDARD.FRAME)&&this.nodes.every(function(t){return t.domElement})||this.nodes.filter(function(t){return t.pageflow}).length>1&&X.linearX(this.nodes)}},{key:"layoutVertical",get:function(){return this.linearVertical||this.hasAlign(C.NODE_ALIGNMENT.VERTICAL)||this.is(C.NODE_STANDARD.FRAME)&&this.nodes.some(function(t){return t.linearVertical})||this.nodes.filter(function(t){return t.pageflow}).length>1&&X.linearY(this.nodes)}},{key:"linearHorizontal",get:function(){return this._android.orientation===y.HORIZONTAL&&this.is(C.NODE_STANDARD.LINEAR,C.NODE_STANDARD.RADIO_GROUP)}},{key:"linearVertical",get:function(){return this._android.orientation===y.VERTICAL&&this.is(C.NODE_STANDARD.LINEAR,C.NODE_STANDARD.RADIO_GROUP)}},{key:"inlineWidth",get:function(){return"wrap_content"===this._android.layout_width}},{key:"inlineHeight",get:function(){return"wrap_content"===this._android.layout_height}},{key:"blockWidth",get:function(){return"match_parent"===this._android.layout_width}},{key:"blockHeight",get:function(){return"match_parent"===this._android.layout_height}}],[{key:"documentBody",value:function(){if(null==r._documentBody){var t=new r(0,document.body);t.hide(),t.setBounds(),r._documentBody=t}return r._documentBody}},{key:"getCustomizationValue",value:function(t,e,n,i){for(var r=[R[t],R[0]],a=0;a<r.length;a++){var o=r[a];if(o&&o.customizations&&o.customizations[e]&&o.customizations[e][n]&&P.isString(o.customizations[e][n][i]))return o.customizations[e][n][i]}return""}},{key:"getControlName",value:function(t){return g[C.NODE_STANDARD[t]]}}]),r}()},H=function(t){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return e(this,n),s(this,o(n).call(this,t,i))}return a(n,G(androme.lib.base.Node)),n}(),W=function(t){function n(t,i,r,a){var l;return e(this,n),(l=s(this,o(n).call(this,t))).api=i.api,l.parent=r,l.children=a,l.depth=i.depth,l.nodeName="".concat(i.nodeName,"_GROUP"),l.documentParent=i.documentParent,a.length>0&&l.init(),l}return a(n,G(androme.lib.base.NodeGroup)),n}(),z=["!0",'<?xml version="1.0" encoding="utf-8"?>','<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">',"!1",'\t<stroke android:width="{&width}" {borderStyle} />',"!1","!2",'\t<solid android:color="@color/{&color}" />',"!2","!3",'\t<corners android:radius="{&radius}" />',"!3","</shape>","!0"].join("\n"),V=["!0",'<?xml version="1.0" encoding="utf-8"?>','<layer-list xmlns:android="http://schemas.android.com/apk/res/android">',"!1","\t<item>",'\t\t<shape android:shape="rectangle">','\t\t\t<solid android:color="@color/{&color}" />',"\t\t</shape>","\t</item>","!1","!2",'\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}" android:drawable="@drawable/{image}" width="{@width}" height="{@height}" />',"!2","!3",'\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">','\t\t<bitmap android:src="@drawable/{image}" android:gravity="{@gravity}" android:tileMode="{@tileMode}" android:tileModeX="{@tileModeX}" android:tileModeY="{@tileModeY}" />',"\t</item>","!3","!7",'\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">','\t\t<shape android:shape="rectangle">',"!8",'\t\t\t<stroke android:width="{&width}" {borderStyle} />',"!8","\t\t</shape>","\t</item>","!7","!4",'\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">','\t\t<shape android:shape="rectangle">',"!5",'\t\t\t<stroke android:width="{&width}" {borderStyle} />',"!5","!6",'\t\t\t<corners android:radius="{@radius}" android:topLeftRadius="{@topLeftRadius}" android:topRightRadius="{@topRightRadius}" android:bottomRightRadius="{@bottomRightRadius}" android:bottomLeftRadius="{@bottomLeftRadius}" />',"!6","\t\t</shape>","\t</item>","!4","</layer-list>","!0"].join("\n"),F=androme.lib.enumeration,U=androme.lib.util,j=androme.lib.dom,Y=androme.lib.xml,Z=androme.lib.color,$=androme.lib.base.Resource,K={background:'android:background="@drawable/{0}"',backgroundColor:'android:background="@color/{0}"'},J={fontFamily:'android:fontFamily="{0}"',fontStyle:'android:textStyle="{0}"',fontWeight:'android:fontWeight="{0}"',fontSize:'android:textSize="{0}"',color:'android:textColor="@color/{0}"',backgroundColor:'android:background="@color/{0}"'},q={text:'android:text="{0}"'},Q={entries:'android:entries="@array/{0}"'},tt={src:'android:src="@drawable/{0}"'},et=function(n){function r(t){var n;return e(this,r),(n=s(this,o(r).call(this,t))).tagStyle={},n.tagCount={},n.file.stored=$.STORED,n}return a(r,androme.lib.base.Resource),i(r,[{key:"reset",value:function(){d(o(r.prototype),"reset",this).call(this),this.file.reset(),this.tagStyle={},this.tagCount={}}},{key:"finalize",value:function(t){this.processFontStyle(t);var e={},n=!0,i=!1,r=void 0;try{for(var a,o=t.cache[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value,s=l.renderChildren.filter(function(t){return t.auto&&t.visible});s.length>1&&function(){for(var t=new Map,n="",i=!0,r=function(e){var r=!1;if(s[e].combine("_","android").some(function(a){if(a.startsWith("style=")){if(0===e)n=a;else if(""===n||a!==n)return i=!1,!0;r=!0}else t.has(a)||t.set(a,0),t.set(a,t.get(a)+1);return!1}),!i||""!==n&&!r)return i=!1,"break"},a=0;a<s.length;a++){if("break"===r(a))break}if(i){var o=!0,d=!1,c=void 0;try{for(var h,u=t.keys()[Symbol.iterator]();!(o=(h=u.next()).done);o=!0){var f=h.value;t.get(f)!==s.length&&t.delete(f)}}catch(t){d=!0,c=t}finally{try{o||null==u.return||u.return()}finally{if(d)throw c}}if(t.size>1){""!==n&&(n=U.trimString(n.substring(n.indexOf("/")+1),'"'));var p=[],m=!0,g=!1,v=void 0;try{for(var y,b=function(){var t=y.value.match(/(\w+):(\w+)="(.*?)"/);t&&(s.forEach(function(e){return e.delete(t[1],t[2])}),p.push(t[0]))},A=t.keys()[Symbol.iterator]();!(m=(y=A.next()).done);m=!0)b()}catch(t){g=!0,v=t}finally{try{m||null==A.return||A.return()}finally{if(g)throw v}}p.sort();var T="";for(var _ in e)if(e[_].join(";")===p.join(";")){T=_;break}""!==T&&""!==n&&T.startsWith("".concat(n,"."))||(T=(""!==n?"".concat(n,"."):"")+U.capitalize(l.nodeId),e[T]=p),s.forEach(function(t){return t.attr("_","style","@style/".concat(T))})}}}()}}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}for(var d in e)$.STORED.styles.set(d,{attributes:e[d].join(";")})}},{key:"setBoxSpacing",value:function(){var t=this;d(o(r.prototype),"setBoxSpacing",this).call(this),this.cache.elements.filter(function(t){return!t.hasBit("excludeResource",F.NODE_RESOURCE.BOX_SPACING)}).each(function(e){var n=j.getElementCache(e.element,"boxSpacing");n&&(n.marginLeft!==n.marginRight||!e.alignParent("left",t.settings)||!e.alignParent("right",t.settings)||e.blockWidth||"relative"===e.position&&e.alignNegative||(e.modifyBox(F.BOX_STANDARD.MARGIN_LEFT,null),e.modifyBox(F.BOX_STANDARD.MARGIN_RIGHT,null)),"auto"===e.css("marginLeft")&&e.modifyBox(F.BOX_STANDARD.MARGIN_LEFT,null),"auto"===e.css("marginRight")&&e.modifyBox(F.BOX_STANDARD.MARGIN_RIGHT,null))})}},{key:"setBoxStyle",value:function(){var e=this;d(o(r.prototype),"setBoxStyle",this).call(this),this.cache.elements.filter(function(t){return!t.hasBit("excludeResource",F.NODE_RESOURCE.BOX_STYLE)}).each(function(n){var i=j.getElementCache(n.element,"boxStyle");if(i){Array.isArray(i.backgroundColor)&&i.backgroundColor.length>0&&(i.backgroundColor=r.addColor(i.backgroundColor[0],i.backgroundColor[2]));for(var a=i.backgroundImage.split(",").map(function(t){return t.trim()}),o=i.backgroundRepeat.split(",").map(function(t){return t.trim()}),l=i.backgroundPosition.split(",").map(function(t){return t.trim()}),s=[],d=[],h=0;h<a.length;h++)if(""!==a[h]&&"none"!==a[h]){s.push(a[h]);var u=e.imageDimensions.get(j.parseBackgroundUrl(a[h]));d.push(u),a[h]=r.addImageURL(a[h])}else a[h]="",o[h]="",l[h]="";a=a.filter(function(t){return""!==t}),o=o.filter(function(t){return""!==t}),l=l.filter(function(t){return""!==t});var f=K,p=n.companion;if(p&&p.hasElement&&!j.cssFromParent(p.element,"backgroundColor")){var m=j.getElementCache(p.element,"boxStyle");Array.isArray(m.backgroundColor)&&m.backgroundColor.length>0&&(i.backgroundColor=r.addColor(m.backgroundColor[0],m.backgroundColor[2]))}var g=e.borderVisible(i.borderTop)||e.borderVisible(i.borderRight)||e.borderVisible(i.borderBottom)||e.borderVisible(i.borderLeft)||i.borderRadius.length>0;if(g||a.length>0){var v,y=function(t,e,n,i,r,a){var o=parseInt(e.width),l=Math.floor(o/3),s=o%3,d=l+(2===s?1:0),c=l+(2===s?1:0),h="-".concat(U.formatPX(d+1)),u="-".concat(U.formatPX(d));t[4].push({top:n?"":u,right:i?"":h,bottom:r?"":u,left:a?"":h,5:[{width:U.formatPX(d),borderStyle:this.getBorderStyle(e)}],6:I}),h="-".concat(U.formatPX(o+1)),u="-".concat(U.formatPX(o));var f="".concat(U.formatPX(o-l));t[4].push({top:n?f:h,right:i?f:u,bottom:r?f:u,left:a?f:h,5:[{width:U.formatPX(c),borderStyle:this.getBorderStyle(e)}],6:I})},b=[i.borderTop,i.borderRight,i.borderBottom,i.borderLeft];b.forEach(function(t){Array.isArray(t.color)&&t.color.length>0&&(t.color=r.addColor(t.color[0],t.color[2]))});for(var A=[],T=[],_=null,N="",D=function(t){var s="",h="",u="",f="",p=c(r.parseBackgroundPosition(l[t],n.css("fontSize")),2),m=p[0],v=p[1],y="",b="",_=d[t];switch(o[t]){case"repeat-x":(null==_||_.width<n.bounds.width)&&(u="repeat");break;case"repeat-y":(null==_||_.height<n.bounds.height)&&(f="repeat");break;case"no-repeat":h="disabled";break;case"repeat":(null==_||_.width<n.bounds.width||_.height<n.bounds.height)&&(h="repeat")}if(""===m){switch(l[t]){case"left top":case"0% 0%":s="left|top";break;case"left center":case"0% 50%":s="left|center_vertical";break;case"left bottom":case"0% 100%":s="left|bottom";break;case"right top":case"100% 0%":s="right|top";break;case"right center":case"100% 50%":s="right|center_vertical";break;case"right bottom":case"100% 100%":s="right|bottom";break;case"center top":case"50% 0%":s="center_horizontal|top";break;case"center bottom":case"50% 100%":s="center_horizontal|bottom";break;case"center center":case"50% 50%":s="center";break;default:var N=l[t].split(" ");if(2===N.length){var D=function(t,e){return t+(""!==t?"|":"")+e};N.forEach(function(t,e){if(U.isPercent(t))switch(e){case 0:"0%"===t?s=D(s,"left"):"100%"===t?s=D(s,"right"):m=U.formatPX(n.bounds.width*(U.convertInt(t)/100));break;case 1:"0%"===t?s=D(s,"top"):"100%"===t?s=D(s,"bottom"):v=U.formatPX(n.actualHeight*(U.convertInt(t)/100))}else if(/^[a-z]+$/.test(t))s=D(s,t);else{var i=U.convertPX(t,n.css("fontSize"));"0px"!==i&&(0===e?m=i:v=i),s=D(s,0===e?"left":"top")}})}}if(""!==s&&_&&_.width>0&&_.height>0){if("repeat"===f){var E=n.viewWidth;if(E>0?e.settings.autoSizePaddingAndBorderWidth&&!n.hasBit("excludeResource",F.NODE_RESOURCE.BOX_SPACING)&&(E=n.viewWidth+n.paddingLeft+n.paddingRight):E=n.bounds.width-(n.borderLeftWidth+n.borderRightWidth),_.width<E){var R=U.convertInt(n.android("layout_width"));-1!==s.indexOf("left")?(y=U.formatPX(E-_.width),0===n.viewWidth&&E>R&&n.android("layout_width",U.formatPX(n.bounds.width))):-1!==s.indexOf("right")?(m=U.formatPX(E-_.width),0===n.viewWidth&&E>R&&n.android("layout_width",U.formatPX(n.bounds.width))):"center"!==s&&-1===s.indexOf("center_horizontal")||(y=U.formatPX(Math.floor((E-_.width)/2)),0===n.viewWidth&&E>R&&n.android("layout_width",U.formatPX(n.bounds.width)))}}if("repeat"===u){var w=n.viewHeight;if(w>0?e.settings.autoSizePaddingAndBorderWidth&&!n.hasBit("excludeResource",F.NODE_RESOURCE.BOX_SPACING)&&(w=n.viewHeight+n.paddingTop+n.paddingBottom):w=n.bounds.height-(n.borderTopWidth+n.borderBottomWidth),_.height<w){var I=U.convertInt(n.android("layout_height"));-1!==s.indexOf("top")?(b=U.formatPX(w-_.height),0===n.viewHeight&&w>I&&n.android("layout_height",U.formatPX(n.bounds.height))):-1!==s.indexOf("bottom")?(v=U.formatPX(w-_.height),0===n.viewHeight&&w>I&&n.android("layout_height",U.formatPX(n.bounds.height))):"center"!==s&&-1===s.indexOf("center_vertical")||(b=U.formatPX(Math.floor((w-_.height)/2)),0===n.viewHeight&&w>I&&n.android("layout_height",U.formatPX(n.bounds.height)))}}}}if(i.backgroundSize.length>0&&(U.isPercent(i.backgroundSize[0])||U.isPercent(i.backgroundSize[1]))&&("100%"===i.backgroundSize[0]&&"100%"===i.backgroundSize[1]?(h="",u="",f="",s=""):"100%"===i.backgroundSize[0]?u="":"100%"===i.backgroundSize[1]&&(f=""),i.backgroundSize=[]),n.of(F.NODE_STANDARD.IMAGE,F.NODE_ALIGNMENT.SINGLE)&&1===l.length){n.android("src","@drawable/".concat(a[0])),U.convertInt(m)>0&&n.modifyBox(F.BOX_STANDARD.MARGIN_LEFT,U.convertInt(m)),U.convertInt(v)>0&&n.modifyBox(F.BOX_STANDARD.MARGIN_TOP,U.convertInt(v));var O="";switch(s){case"left|top":case"left|center_vertical":case"left|bottom":O="fitStart";break;case"right|top":case"right|center_vertical":case"right|bottom":O="fitEnd";break;case"center":case"center_horizontal|top":case"center_horizontal|bottom":O="center"}if(n.android("scaleType",O),!g)return{v:void 0};a.length=0}else""!==s||""!==h||""!==u||""!==f?T.push({top:v,right:y,bottom:b,left:m,gravity:s,tileMode:h,tileModeX:u,tileModeY:f,width:"",height:"",image:a[t]}):A.push({top:v,right:y,bottom:b,left:m,gravity:s,tileMode:h,tileModeX:u,tileModeY:f,width:i.backgroundSize.length>0?i.backgroundSize[0]:"",height:i.backgroundSize.length>0?i.backgroundSize[1]:"",image:a[t]})},E=0;E<a.length;E++){var R=D(E);if("object"===t(R))return R.v}T.sort(function(t,e){return"repeat"!==t.tileModeX&&"repeat"!==t.tileModeY&&"repeat"!==t.tileMode?1:"repeat"!==e.tileModeX&&"repeat"!==e.tileModeY&&"repeat"!==e.tileMode?-1:"repeat"===t.tileMode?-1:"repeat"===e.tileMode?1:"repeat"===e.tileModeX||"repeat"===e.tileModeY?1:-1});var w=e.getShapeAttribute(i,"backgroundColor"),I=e.getShapeAttribute(i,"radius");if(i.border&&e.borderVisible(i.border)&&!(parseInt(i.border.width)>1&&("groove"===i.border.style||"ridge"===i.border.style)||parseInt(i.border.width)>2&&"double"===i.border.style))0===a.length?(_=Y.parseTemplate(z),v={0:[{1:e.getShapeAttribute(i,"stroke"),2:w,3:I}]}):(_=Y.parseTemplate(V),v={0:[{1:w,2:A.length>0&&A,3:T.length>0&&T,4:[{5:e.getShapeAttribute(i,"stroke"),6:I}],7:!1}]});else{_=Y.parseTemplate(V),v={0:[{1:w,2:A.length>0&&A,3:T.length>0&&T,4:[],7:[]}]};var O=Y.getTemplateLevel(v,"0"),S=b.filter(function(t){return e.borderVisible(t)}),x=new Set(S.map(function(t){return t.width})),L=new Set(S.map(function(t){return e.getBorderStyle(t)})),B=S[0];if(1===x.size&&1===L.size&&"groove"!==B.style&&"ridge"!==B.style){var C=parseInt(B.width);if(C>2&&"double"===B.style)y.apply(e,[O,B,e.borderVisible(i.borderTop),e.borderVisible(i.borderRight),e.borderVisible(i.borderBottom),e.borderVisible(i.borderLeft)]);else{var k="-".concat(U.formatPX(C+1)),P="-".concat(U.formatPX(C));O[4].push({top:e.borderVisible(i.borderTop)?"":k,right:e.borderVisible(i.borderRight)?"":P,bottom:e.borderVisible(i.borderBottom)?"":P,left:e.borderVisible(i.borderLeft)?"":k,5:e.getShapeAttribute({border:S[0]},"stroke"),6:I})}}else for(var M=0;M<b.length;M++){var X=b[M];if(e.borderVisible(X)){var G=parseInt(X.width);if(G>2&&"double"===X.style)y.apply(e,[O,X,0===M,1===M,2===M,3===M]);else{var H=G>1&&("groove"===X.style||"ridge"===X.style),W=H?Math.ceil(G/2):G,Z="-".concat(U.formatPX(W+1)),J="-".concat(U.formatPX(W));O[4].push({top:0===M?"":Z,right:1===M?"":J,bottom:2===M?"":J,left:3===M?"":Z,5:e.getShapeAttribute({border:X},"stroke",M,H),6:I}),H&&(Z="-".concat(U.formatPX(G+1)),J="-".concat(U.formatPX(G)),O[7].push({top:0===M?"":Z,right:1===M?"":J,bottom:2===M?"":J,left:3===M?"":Z,8:e.getShapeAttribute({border:X},"stroke",M,!0,!0)}))}}}0===O[4].length&&(O[4]=!1),0===O[7].length&&(O[7]=!1)}if(_){var q=Y.insertTemplateData(_,v),Q=!0,tt=!1,et=void 0;try{for(var nt,it=$.STORED.drawables.entries()[Symbol.iterator]();!(Q=(nt=it.next()).done);Q=!0){var rt=c(nt.value,2),at=rt[0];if(rt[1]===q){N=at;break}}}catch(t){tt=!0,et=t}finally{try{Q||null==it.return||it.return()}finally{if(tt)throw et}}""===N&&(N="".concat(n.nodeName.toLowerCase(),"_").concat(n.nodeId),$.STORED.drawables.set(N,q))}if(n.formatted(U.formatString(f.background,N),0===n.renderExtension.size),a.length>0&&(n.data("RESOURCE","backgroundImage",!0),e.settings.autoSizeBackgroundImage&&!n.documentRoot&&!n.imageElement&&"TABLE"!==n.renderParent.tagName&&!n.hasBit("excludeProcedure",F.NODE_PROCEDURE.AUTOFIT))){var ot={width:0,height:0};if(d.forEach(function(t){t&&(ot.width=Math.max(ot.width,t.width),ot.height=Math.max(ot.height,t.height))}),0===ot.width)for(var lt=n;lt&&!lt.documentBody&&(lt.hasWidth&&(ot.width=lt.bounds.width),lt.hasHeight&&(ot.height=lt.bounds.height),lt.pageflow&&!(ot.width>0&&ot.height>0));)lt=lt.documentParent;if(!n.has("width",F.CSS_STANDARD.UNIT)){var st=n.bounds.width+(n.is(F.NODE_STANDARD.LINE)?0:n.borderLeftWidth+n.borderRightWidth);(0===ot.width||st>0&&st<ot.width)&&n.css("width",U.formatPX(st))}if(!n.has("height",F.CSS_STANDARD.UNIT)){var dt=n.actualHeight+(n.is(F.NODE_STANDARD.LINE)?0:n.borderTopWidth+n.borderBottomWidth);(0===ot.height||dt>0&&dt<ot.height)&&(n.css("height",U.formatPX(dt)),n.marginTop<0&&n.modifyBox(F.BOX_STANDARD.MARGIN_TOP,null),n.marginBottom<0&&n.modifyBox(F.BOX_STANDARD.MARGIN_BOTTOM,null))}}}else!j.getElementCache(n.element,"fontStyle")&&U.isString(i.backgroundColor)&&n.formatted(U.formatString(f.backgroundColor,i.backgroundColor),0===n.renderExtension.size)}})}},{key:"setFontStyle",value:function(){d(o(r.prototype),"setFontStyle",this).call(this);var t={};for(var e in this.cache.filter(function(t){return t.visible&&!t.hasBit("excludeResource",F.NODE_RESOURCE.FONT_STYLE)}).each(function(e){j.getElementCache(e.element,"fontStyle")&&(null==t[e.nodeName]&&(t[e.nodeName]=[]),t[e.nodeName].push(e));var n=e.css("textShadow").match(/(rgb(?:a)?\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}(?:, [0-9\.]+)?\)) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2})/);if(n){var i=Z.parseRGBA(n[1]);i.length>0&&e.android("shadowColor","@color/".concat(r.addColor(i[0],i[2]))),e.android("shadowDx",U.convertInt(n[2]).toString()),e.android("shadowDy",U.convertInt(n[3]).toString()),e.android("shadowRadius",U.convertInt(n[4]).toString())}}),t){var n=new androme.lib.base.NodeList(t[e]),i=[],a=!0,l=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var f=c.value,p=!1,m=f.id;f.companion&&(f.companion.textElement||"LABEL"===f.companion.tagName)&&(f=f.companion);var g=f.element,v=Object.assign({},j.getElementCache(g,"fontStyle"));if(Array.isArray(v.backgroundColor)&&v.backgroundColor.length>0&&(v.backgroundColor=r.addColor(v.backgroundColor[0],v.backgroundColor[2])),v.fontFamily){var y=v.fontFamily.split(",")[0].replace(/"/g,"").toLowerCase().trim(),b="",D="";if(Array.isArray(v.color)&&v.color.length>0&&(v.color=r.addColor(v.color[0],v.color[2])),this.settings.fontAliasResourceValue&&_[y]&&(y=_[y]),A[y]&&this.settings.targetAPI>=A[y]||this.settings.fontAliasResourceValue&&T[y]&&this.settings.targetAPI>=A[T[y]]?(p=!0,v.fontFamily=y,"normal"===v.fontStyle&&delete v.fontStyle,"400"===v.fontWeight&&delete v.fontWeight):(y=U.convertWord(y),v.fontFamily="@font/".concat(y+("normal"!==v.fontStyle?"_".concat(v.fontStyle):"")+("400"!==v.fontWeight?"_".concat(N[v.fontWeight]||v.fontWeight):"")),b=v.fontStyle,D=v.fontWeight,delete v.fontStyle,delete v.fontWeight),!p){var E=$.STORED.fonts.get(y)||{};E["".concat(b,"-").concat(D)]=!0,$.STORED.fonts.set(y,E)}}for(var R=J,w=Object.keys(R),I=0;I<w.length;I++){null==i[I]&&(i[I]={});var O=v[w[I]];if(U.hasValue(O)&&f.supported("android",w[I])){var S=U.formatString(R[w[I]],O);null==i[I][S]&&(i[I][S]=[]),i[I][S].push(m)}}}}catch(t){l=!0,s=t}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}var x=this.tagStyle[e];if(x){for(var L=0;L<x.length;L++)for(var B in x[L]){var C;if(i[L][B])(C=i[L][B]).push.apply(C,h(x[L][B]));else i[L][B]=x[L][B]}this.tagCount[e]+=n.visible.length}else this.tagCount[e]=n.visible.length;this.tagStyle[e]=i}}},{key:"setImageSource",value:function(){var t=this;this.cache.filter(function(t){return t.visible&&(t.imageElement||"INPUT"===t.tagName&&"image"===t.element.type)&&!t.hasBit("excludeResource",F.NODE_RESOURCE.IMAGE_SOURCE)}).each(function(e){var n=e.element;if(!j.getElementCache(n,"imageSource")||t.settings.alwaysReevaluateResources){var i=e.imageElement?r.addImageSrcSet(n):r.addImage({mdpi:n.src});if(""!==i){var a=tt;e.formatted(U.formatString(a.src,i),0===e.renderExtension.size),j.setElementCache(n,"imageSource",i)}}})}},{key:"setOptionArray",value:function(){var t=this;d(o(r.prototype),"setOptionArray",this).call(this),this.cache.filter(function(t){return t.visible&&"SELECT"===t.tagName&&!t.hasBit("excludeResource",F.NODE_RESOURCE.OPTION_ARRAY)}).each(function(e){var n=j.getElementCache(e.element,"optionArray");if(n){var i=Q,a=[];n.numberArray&&(t.settings.numberResourceValue?n.stringArray=n.numberArray:a=n.numberArray),n.stringArray&&(a=n.stringArray.map(function(e){var n=r.addString(e,"",t.settings);return""!==n?"@string/".concat(n):""}).filter(function(t){return t}));var o="",l=a.join("-"),s=!0,d=!1,h=void 0;try{for(var u,f=$.STORED.arrays.entries()[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var p=c(u.value,2),m=p[0];if(l===p[1].join("-")){o=m;break}}}catch(t){d=!0,h=t}finally{try{s||null==f.return||f.return()}finally{if(d)throw h}}""===o&&(o="".concat(e.nodeId,"_array"),$.STORED.arrays.set(o,a)),e.formatted(U.formatString(i.entries,o),0===e.renderExtension.size)}})}},{key:"setValueString",value:function(){var t=this;d(o(r.prototype),"setValueString",this).call(this),this.cache.filter(function(t){return t.visible&&!t.hasBit("excludeResource",F.NODE_RESOURCE.VALUE_STRING)}).each(function(e){var n=j.getElementCache(e.element,"valueString");if(n){if(e.renderParent.is(F.NODE_STANDARD.RELATIVE)&&e.alignParent("left",t.settings)&&!j.cssParent(e.element,"whiteSpace","pre","pre-wrap")){for(var i=e.textContent,a=0,o=0;o<i.length;o++){switch(i.charCodeAt(o)){case 32:continue;case 160:a++;continue}break}0===a&&(n.value=n.value.replace(/^(\s|&#160;)+/,""))}if(e.hasElement&&e.is(F.NODE_STANDARD.TEXT)){switch(e.css("fontVariant")){case"small-caps":n.value=n.value.toUpperCase()}var l=e.css("textDecoration").match(/(underline|line-through)/);if(l)switch(l[0]){case"underline":n.value="<u>".concat(n.value,"</u>");break;case"line-through":n.value="<strike>".concat(n.value,"</strike>")}}var s=r.addString(n.value,n.name,t.settings);if(""!==s){var d=q;e.toInt("textIndent")+e.bounds.width>0&&e.formatted(U.formatString(d.text,isNaN(parseInt(s))||parseInt(s).toString()!==s?"@string/".concat(s):s),0===e.renderExtension.size)}}})}},{key:"addTheme",value:function(t,e,n){var i=Y.parseTemplate(t);if(n.item){var a=Y.getTemplateLevel(e,"0");for(var o in n.item){var l=n.item[o],s=Z.parseHex(l);""!==s&&(l="@color/".concat(r.addColor(s))),a[1].push({name:o,value:l})}}var d=Y.insertTemplateData(i,e);this.addFile(n.output.path,n.output.file,d)}},{key:"processFontStyle",value:function(t){var e=this,n={},i={},r={},a=new Set,o={};for(var l in this.tagStyle){n[l]={},i[l]={};var s=this.tagCount[l],d=this.tagStyle[l].filter(function(t){return Object.keys(t).length>0}).sort(function(t,e){var n=0,i=0,r=0,a=0;for(var o in t)n=Math.max(t[o].length,n),r+=t[o].length;for(var l in e)e[l]&&(i=Math.max(e[l].length,i),a+=e[l].length);return n!==i?n>i?-1:1:r>=a?-1:1});do{if(1===d.length){for(var c in d[0]){var u=d[0][c];1===u.length?i[l][c]=u:u.length>1&&(n[l][c]=u)}d.length=0}else{for(var f={},p={},m=function(t){if(!d[t])return"continue";var i={},r={},a=new Set;for(var o in d[t]){var c=d[t][o],u=!1;if(c&&0!==c.length&&(c.length===s?(f[o]=c.slice(),d[t]={},u=!0):1===c.length&&(p[o]=c.slice(),d[t][o]=[],u=!0),!u)){for(var m={},g=!1,v=0;v<d.length;v++)if(t!==v&&d[v])for(var y in d[v]){var b=d[v][y];if(b.length>0){var A=!0,T=!1,_=void 0;try{for(var N,D=c[Symbol.iterator]();!(A=(N=D.next()).done);A=!0){var E=N.value;b.includes(E)&&(null==m[y]&&(m[y]=[]),m[y].push(E))}}catch(t){T=!0,_=t}finally{try{A||null==D.return||D.return()}finally{if(T)throw _}}}}for(var R in m)m[R].length>1&&(i[[o,R].sort().join(";")]=m[R],g=!0);g||(i[o]=c)}}for(var w in i)for(var I in i)if(w!==I&&i[w].join("")===i[I].join("")){var O=i[w].join(",");r[O]?r[O]=new Set(h(r[O]).concat(h(I.split(";")))):r[O]=new Set(h(w.split(";")).concat(h(I.split(";")))),a.add(w).add(I)}for(var S in a.forEach(function(t){return delete i[t]}),i)e.deleteStyleAttribute(d,S,i[S]),n[l][S]=i[S];for(var x in r){var L=Array.from(r[x]).sort().join(";"),B=x.split(",").map(function(t){return parseInt(t)});e.deleteStyleAttribute(d,L,B),n[l][L]=B}},g=0;g<d.length;g++)m(g);var v=Object.keys(f);for(var y in v.length>0&&(v.length>1||f[v[0]].length>1?n[l][v.join(";")]=f[v[0]]:Object.assign(p,f)),p)i[l][y]=p[y];for(g=0;g<d.length;g++)d[g]&&0===Object.keys(d[g]).length&&delete d[g];d=d.filter(function(t){if(t)for(var e in t)if(t[e]&&t[e].length>0)return!0;return!1})}}while(d.length>0)}var b=function(t){var e=n[t],i=[];for(var a in e)i.push({name:"",attributes:a,ids:e[a]});i.sort(function(t,e){var n=[t.ids.length,e.ids.length],i=n[0],r=n[1];if(i===r){var a=[t.attributes.split(";").length,e.attributes.split(";").length];i=a[0],r=a[1]}return i>=r?-1:1}),i.forEach(function(e,n){return e.name=U.capitalize(t)+(n>0?"_".concat(n):"")}),r[t]=i};for(var A in n)b(A);for(var A in r){var T=!0,_=!1,N=void 0;try{for(var D,E=r[A][Symbol.iterator]();!(T=(D=E.next()).done);T=!0){var R=D.value,w=!0,I=!1,O=void 0;try{for(var S,L=R.ids[Symbol.iterator]();!(w=(S=L.next()).done);w=!0){var B=S.value;null==o[B]&&(o[B]={styles:[],attributes:[]}),o[B].styles.push(R.name)}}catch(t){I=!0,O=t}finally{try{w||null==L.return||L.return()}finally{if(I)throw O}}}}catch(t){_=!0,N=t}finally{try{T||null==E.return||E.return()}finally{if(_)throw N}}var C=i[A];if(C)for(var k in C){var P=!0,M=!1,X=void 0;try{for(var G,H=C[k][Symbol.iterator]();!(P=(G=H.next()).done);P=!0){var W=G.value;null==o[W]&&(o[W]={styles:[],attributes:[]}),o[W].attributes.push(k)}}catch(t){M=!0,X=t}finally{try{P||null==H.return||H.return()}finally{if(M)throw X}}}}var z=function(n){var i=t.cache.locate("id",parseInt(n));if(i){var r=o[n].styles,l=o[n].attributes;r.length>0&&(a.add(r.join(".")),i.attr("_","style","@style/".concat(r.pop()))),l.length>0&&l.sort().forEach(function(t){return i.formatted(x(t,e.settings,!0),!1)})}};for(var V in o)z(V);var F=!0,j=!1,Y=void 0;try{for(var Z,K=function(){var t=Z.value,e="";t.split(".").forEach(function(t){var n=t.match(/^(\w*?)(?:_([0-9]+))?$/);if(n){var i=r[n[1].toUpperCase()][null==n[2]?0:parseInt(n[2])];$.STORED.styles.set(t,{parent:e,attributes:i.attributes}),e=t}})},J=a[Symbol.iterator]();!(F=(Z=J.next()).done);F=!0)K()}catch(t){j=!0,Y=t}finally{try{F||null==J.return||J.return()}finally{if(j)throw Y}}}},{key:"deleteStyleAttribute",value:function(t,e,n){e.split(";").forEach(function(e){for(var i=0;i<t.length;i++)if(t[i]){var r=-1,a="";for(var o in t[i])if(o===e){r=i,a=o,i=t.length;break}if(-1!==r){t[r][a]=t[r][a].filter(function(t){return!n.includes(t)}),0===t[r][a].length&&delete t[r][a];break}}})}},{key:"getShapeAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];switch(e){case"stroke":if(t.border&&"0px"!==t.border.width){if(!i||r)return[{width:t.border.width,borderStyle:this.getBorderStyle(t.border,r?n:-1)}];if(i)return[{width:U.formatPX(Math.ceil(parseInt(t.border.width)/2)),borderStyle:this.getBorderStyle(t.border,n,!0)}]}return!1;case"backgroundColor":return 0!==t.backgroundColor.length&&""!==t.backgroundColor&&[{color:t.backgroundColor}];case"radius":if(1===t.borderRadius.length){if("0px"!==t.borderRadius[0])return[{radius:t.borderRadius[0]}]}else if(t.borderRadius.length>1){var a={};return t.borderRadius.forEach(function(t,e){return a["".concat(["topLeft","topRight","bottomRight","bottomLeft"][e],"Radius")]=t}),[a]}return!1}return!1}},{key:"getBorderStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={solid:'android:color="@color/'.concat(t.color,'"'),groove:"",ridge:""};Object.assign(i,{double:i.solid,inset:i.solid,outset:i.solid,dotted:"".concat(i.solid,' android:dashWidth="3px" android:dashGap="1px"'),dashed:"".concat(i.solid,' android:dashWidth="1px" android:dashGap="1px"')});var a="groove"===t.style;if(parseInt(t.width)>1&&(a||"ridge"===t.style)){var o=t.color,l=r.getColor(o);if(""!==l){var s="1";9===l.length&&(l="#".concat(l.substring(3)),s="0.".concat(l.substring(1,3)));var d=Z.parseRGBA(Z.reduceHexToRGB(l,a||"#000000"===l?.3:-.3));d.length>0&&(o=r.addColor(d[0],s))}var c='android:color="@color/'.concat(o,'"');if(a)if(n)switch(e){case 0:case 1:i.groove=c;break;case 2:case 3:i.groove=i.solid}else switch(e){case 0:case 1:i.groove=i.solid;break;case 2:case 3:i.groove=c}else if(n)switch(e){case 0:case 1:i.ridge=i.solid;break;case 2:case 3:i.ridge=c}else switch(e){case 0:case 1:i.ridge=c;break;case 2:case 3:i.ridge=i.solid}}return i[t.style]||i.solid}}],[{key:"getStored",value:function(t){return $.STORED[t]}},{key:"formatOptions",value:function(e,n){for(var i in e){var a=e[i];if("object"===t(a))for(var o in a)if(null!=a[o]){var l=a[o].toString();switch(i){case"android":switch(o){case"text":if(!l.startsWith("@string/")&&""!==(l=r.addString(l,"",n))){a[o]="@string/".concat(l);continue}break;case"src":if(/^\w+:\/\//.test(l)&&""!==(l=r.addImage({mdpi:l}))){a[o]="@drawable/".concat(l);continue}}}var s=Z.parseHex(l);""!==s&&(a[o]="@color/".concat(r.addColor(s)))}}return e}},{key:"addString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(arguments.length>2?arguments[2]:void 0).numberResourceValue,i=void 0!==n&&n;if(""!==t){""===e&&(e=t);var r=U.isNumber(t);if(i||!r){var a=!0,o=!1,l=void 0;try{for(var s,d=$.STORED.strings.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var h=c(s.value,2),u=h[0];if(h[1]===t)return u}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=e.trim().toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").split("_").slice(0,4).join("_").replace(/_+$/g,""),r||/^[0-9]/.test(e)||E.includes(e)?e="__".concat(e):""===e&&(e="__symbol".concat(Math.ceil(1e5*Math.random()))),$.STORED.strings.has(e)&&(e=I("strings","".concat(e,"_1"))),$.STORED.strings.set(e,t)}return e}return""}},{key:"addImageSrcSet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.srcset.trim(),i={};if(""!==n){var a=t.src.substring(0,t.src.lastIndexOf("/")+1);n.split(",").forEach(function(t){var e=/^(.*?)\s*([0-9]+\.?[0-9]*x)?$/.exec(t.trim());if(e){null==e[2]&&(e[2]="1x");var n=a+U.lastIndexOf(e[1]);switch(e[2]){case"0.75x":i.ldpi=n;break;case"1x":i.mdpi=n;break;case"1.5x":i.hdpi=n;break;case"2x":i.xhdpi=n;break;case"3x":i.xxhdpi=n;break;case"4x":i.xxxhdpi=n}}})}return null==i.mdpi&&(i.mdpi=t.src),r.addImage(i,e)}},{key:"addImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";if(t&&t.mdpi){n=U.lastIndexOf(t.mdpi);var i=U.lastIndexOf(n,".").toLowerCase();switch(n=n.replace(/.\w+$/,"").replace(/-/g,"_"),i){case"bmp":case"cur":case"gif":case"ico":case"jpg":case"png":n=$.insertStoredAsset("images",e+n,t);break;default:n=""}}return n}},{key:"addImageURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=j.parseBackgroundUrl(t);return""!==n?r.addImage({mdpi:n},e):""}},{key:"addColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";t=t.toUpperCase().trim();var n=parseFloat(e)<1?"#".concat(parseFloat(e).toFixed(2).substring(2)+t.substring(1)):t;if(""!==t){var i="";if($.STORED.colors.has(n))i=$.STORED.colors.get(n);else{var r=Z.getColorNearest(t);""!==r&&(r.name=U.cameltoLowerCase(r.name),i=t===r.hex&&t===n?r.name:I("color","".concat(r.name,"_1")),$.STORED.colors.set(n,i))}return i}return""}},{key:"getColor",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=$.STORED.colors.entries()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=c(r.value,2),l=o[0];if(o[1]===t)return l}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return""}},{key:"parseBackgroundPosition",value:function(t,e){var n=new RegExp(/([0-9]+[a-z]{2}) ([0-9]+[a-z]{2})/).exec(t);return n?[U.convertPX(n[1],e),U.convertPX(n[2],e)]:["",""]}}]),r}(),nt=androme.lib.enumeration,it=androme.lib.util,rt=androme.lib.dom,at=androme.lib.xml,ot=androme.lib.base.NodeList,lt={top:"layout_alignParentTop",bottom:"layout_alignParentBottom"},st={top:"layout_alignTop",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",bottomTop:"layout_above",topBottom:"layout_below"},dt={top:"layout_constraintTop_toTopOf",bottom:"layout_constraintBottom_toBottomOf",baseline:"layout_constraintBaseline_toBaselineOf",bottomTop:"layout_constraintBottom_toTopOf",topBottom:"layout_constraintTop_toBottomOf"},ct={leftTop:["left","top"],rightBottom:["right","bottom"],rightLeftBottomTop:["rightLeft","bottomTop"],leftRightTopBottom:["leftRight","topBottom"],widthHeight:["Width","Height"],horizontalVertical:["Horizontal","Vertical"]},ht=function(n){function l(){var t;return e(this,l),(t=s(this,o(l).call(this)))._merge={},w(),t}return a(l,androme.lib.base.Controller),i(l,[{key:"initNode",value:function(t){t.api=this.settings.targetAPI}},{key:"finalize",value:function(t){this.setAttributes(t);for(var e=h(t.views).concat(h(t.includes)),n=0;n<e.length;n++){var i=e[n];i.content=at.removePlaceholders(i.content).replace(/\n\n/g,"\n"),this.settings.dimensResourceValue&&(i.content=this.parseDimensions(i.content)),i.content=x(i.content,this.settings),i.content=at.replaceTab(i.content,this.settings)}}},{key:"reset",value:function(){d(o(l.prototype),"reset",this).call(this),w(),this._merge={}}},{key:"setConstraints",value:function(){var t=this;Object.assign(lt,{left:B("layout_alignParentLeft",this.settings),right:B("layout_alignParentRight",this.settings)}),Object.assign(st,{left:B("layout_alignLeft",this.settings),right:B("layout_alignRight",this.settings),leftRight:B("layout_toRightOf",this.settings),rightLeft:B("layout_toLeftOf",this.settings)}),Object.assign(dt,{left:B("layout_constraintLeft_toLeftOf",this.settings),right:B("layout_constraintRight_toRightOf",this.settings),leftRight:B("layout_constraintLeft_toRightOf",this.settings),rightLeft:B("layout_constraintRight_toLeftOf",this.settings)});var e,n=lt,i=!1,r=!1;function a(t,r){return i?"parent"===t.app(e[r]):"true"===t.android(n[r])}function o(t,n){return t[i?"app":"android"](e[n])}function l(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t.delete.apply(t,[i?"app":"android"].concat(h(r.map(function(t){return e[t]}))))}function s(t,e,n){if(!t.constraint[n]){for(var i=t;i;){var r=o(i,n===y.HORIZONTAL?"leftRight":"topBottom");if(r){if((i=e.locate("nodeId",O(r)))&&i.constraint[n])return!0}else i=null}return!1}return!0}var d=!0,u=!1,f=void 0;try{for(var p,m=function(){var d=p.value;r=d.is(nt.NODE_STANDARD.RELATIVE),i=d.is(nt.NODE_STANDARD.CONSTRAINT);var u=d.flex;r||i||u.enabled?function(){var i=new androme.lib.base.NodeList(d.renderChildren.filter(function(t){return t.auto}),d),f=ot.cleared(d.initial.children);if(r){e=st;var p=[],m=[],g=d.toInt("textIndent"),v="nowrap"===d.css("whiteSpace"),b=d.box.width;if(d.renderParent.overflowX)b=d.viewWidth||b||d.renderParent.toInt("width",0,{map:"initial"});else if(d.renderParent.hasAlign(nt.NODE_ALIGNMENT.FLOAT)){var A=Math.min.apply(null,i.list.map(function(t){return t.linear.left}));b=Math.max.apply(null,i.list.map(function(t){return t.linear.right}))-A}else{var T=Math.max.apply(null,d.documentParent.initial.children.filter(function(t){return"left"===t.float&&t.siblingIndex<d.siblingIndex}).map(function(t){return t.linear.right}));i.list.some(function(t){return t.linear.left===T})&&(b=d.box.right-T)}b=Math.ceil(b);var _=0,N=0,D=null,E=null;g<0&&Math.abs(g)<=d.paddingLeft&&(N=Math.abs(g),d.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,d.paddingLeft+g),d.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,null));for(var R=0;R<i.length;R++){var w=i.get(R),I=i.get(R-1),x=w.bounds;if(w.inlineText&&!w.hasWidth){var L=c(rt.getRangeClientRect(w.element),2),C=L[0],k=L[1];C&&(k||C.width<x.width)&&(x=C)}var P=n["right"===w.float?"right":"left"],M=e["right"===w.float?"rightLeft":"leftRight"];if(0===R)w.android(P,"true"),!d.inline&&g>0&&w.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,g),(!w.siblingflow||w.floating&&"relative"===w.position||w.multiLine&&g<0)&&(D=w),p[p.length]=[w];else{var X=p[p.length-1],G=rt.getElementsBetweenSiblings(I.baseElement,w.baseElement,!1,!0),H=w instanceof W&&!w.hasAlign(nt.NODE_ALIGNMENT.SEGMENTED),z=w.previousSibling(),V=_+w.marginLeft+x.width,F=!1;if(1===R&&I.textElement&&w.textElement&&(F=0===G.length&&!/\s+$/.test(I.textContent)&&!/^\s+/.test(w.textContent)),v||F||["SUP","SUB"].includes(w.tagName)||!("left"!==I.float||w.linear.top>=I.linear.bottom)||!("right"!==w.float&&V-(w.hasElement&&w.inlineStatic?w.paddingLeft+w.paddingRight:0)>b||w.multiLine&&rt.hasLineBreak(w.element)||I.multiLine&&""!==I.textContent.trim()&&!/^\s*\n+/.test(I.textContent)&&!/\n+\s*$/.test(I.textContent)&&rt.hasLineBreak(I.element)||z&&z.lineBreak||w.blockStatic||f.has(w)||H||w.floating&&("left"===w.float&&it.withinFraction(w.linear.left,d.box.left)||"right"===w.float&&it.withinFraction(w.linear.right,d.box.right)||w.linear.top>=I.linear.bottom)||G.length>0&&G.some(function(t){return rt.isLineBreak(t)})))1===R&&N>0&&!I.plainText?(w.anchor(P,"true"),w.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,N)):w.anchor(M,I.stringId),(F||V>b)&&t.checkSingleLine(w),E&&w.anchor(e.topBottom,E.stringId),X.push(w);else{E=X.filter(function(t){return!t.floating})[0]||X[0];for(var U=0;U<X.length;U++)X[U]!==E&&X[U].linear.bottom>E.linear.bottom&&(!X[U].floating||X[U].floating&&E.floating)&&(E=X[U]);(H||I instanceof W&&R===i.length-1)&&(w.constraint.marginVertical=E.stringId),w.anchor(e.topBottom,E.stringId),D&&w.linear.top<D.bounds.bottom&&!it.withinRange(w.bounds.top,D.bounds.top,1)&&!it.withinRange(w.bounds.bottom,D.bounds.bottom,1)?w.anchor(M,D.stringId):(w.anchor(P,"true"),D=null),t.settings.ellipsisOnTextOverflow&&I.linearHorizontal&&t.checkSingleLine(I.children[I.children.length-1],!0),N>0&&(t.settings.ellipsisOnTextOverflow&&1===p.length&&1===p[0].length&&p[0][0].textElement&&t.checkSingleLine(p[0][0],!0),w.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,N)),t.adjustBaseline(m),d.alignmentType^=nt.NODE_ALIGNMENT.HORIZONTAL,d.alignmentType|=nt.NODE_ALIGNMENT.MULTILINE,_=0,m.length=0,p.push([w])}}_+=x.width+w.marginLeft+w.marginRight+(!I||I.floating||I.plainText||I.preserveWhiteSpace||""===I.textContent.trim()||/\s+$/.test(I.textContent)||w.floating||w.plainText||w.preserveWhiteSpace||""===w.textContent.trim()||/^\s+/.test(w.textContent)?0:t.settings.whitespaceHorizontalOffset),w.floating||m.push(w)}if(t.adjustBaseline(m),d.marginTop<0&&"relative"===i.get(0).position&&p[0].forEach(function(t,e){return t.modifyBox(nt.BOX_STANDARD.MARGIN_TOP,d.marginTop*(0===e?1:-1),!0)}),1===p.length&&d.baseline&&p[0].forEach(function(t){switch(t.css("verticalAlign")){case"top":t.anchor(n.top,"true");break;case"middle":t.anchor("layout_centerVertical","true"),p[0].forEach(function(e){e!==t&&e.bounds.height<t.bounds.height&&e.anchor("layout_centerVertical","true")})}}),t.settings.ellipsisOnTextOverflow){var j=!d.ascend().some(function(t){return t.hasWidth});if(1!==p.length&&!d.hasAlign(nt.NODE_ALIGNMENT.HORIZONTAL)||d.ascend(!0).some(function(t){return t.is(nt.NODE_STANDARD.GRID)}))for(var Y=0;Y<p.length;Y++){var Z=p[Y];if(Z.length>1){var $=Z[Z.length-1];$.inlineText&&t.checkSingleLine($,!1,j)}}else for(var K=1;K<i.length;K++){var J=i.get(K);J.multiLine||J.floating||J.alignParent("left",t.settings)||t.checkSingleLine(J,!1,j)}}}else if(e=dt,d.hasAlign(nt.NODE_ALIGNMENT.HORIZONTAL)){var q=ot.textBaseline(i.list)[0],Q=i.list.filter(function(t){return t.textElement&&t.baseline}).sort(function(t,e){return t.bounds.height>=e.bounds.height?-1:1}),tt=i.list.filter(function(t){return t.imageElement&&t.baseline}).sort(function(t,e){return t.bounds.height>=e.bounds.height?-1:1});if(tt.length>0){var et=tt[0];tt.forEach(function(t,n){return n>0&&t.app(e.baseline,et.stringId)}),q.imageElement||q.app(e.bottom,et.stringId),tt=tt.filter(function(t){return t!==et})}for(var at=function(n){var r=i.get(n),a=q;if(0===n)r.app(e.left,"parent");else{var o=i.get(n-1);r.app(e.leftRight,o.stringId),o.floating||r.floating||(r.constraint.marginHorizontal=o.stringId)}if(tt.includes(r))return"continue";var l=r.css("verticalAlign");switch("baseline"!==l||"RadioGroup"!==r.controlName&&"TEXTAREA"!==r.tagName||(l="text-bottom"),a&&!l.startsWith("text")&&q!==r||(Q.some(function(t){return t!==r&&(a=t,!0)}),a||i.list.slice().sort(function(t,e){return t.nodeType<=e.nodeType?-1:1}).some(function(t){return t!==r&&(a=t,!0)})),l){case"text-top":a&&r.app(e.top,a.stringId);break;case"top":r.app(e.top,"parent");break;case"middle":t.setAlignParent(r,y.VERTICAL);break;case"baseline":a&&r.app(e.baseline,a.stringId);break;case"text-bottom":a&&r.app(e.bottom,a.stringId);break;case"bottom":r.app(e.bottom,"parent")}},lt=0;lt<i.length;lt++)at(lt)}else!function(){var n=c(i.partition(function(t){return!t.pageflow||"relative"===t.position&&t.alignNegative}),2),r=n[0],f=n[1],p=d.hasAlign(nt.NODE_ALIGNMENT.PERCENT),m=d.toInt("columnCount");if(p)d.android("layout_width","match_parent");else if(0===m){var g=!0,v=!1,b=void 0;try{for(var A,T=f[Symbol.iterator]();!(g=(A=T.next()).done);g=!0){var _=A.value,N=_.documentParent;_.autoMarginHorizontal?t.setAlignParent(_,y.HORIZONTAL):((_.linear.left<=N.box.left||it.withinFraction(_.linear.left,N.box.left))&&_.anchor(e.left,"parent",y.HORIZONTAL),(_.linear.right>=N.box.right||it.withinFraction(_.linear.right,N.box.right))&&_.anchor(e.right,"parent",N.hasWidth||"right"===_.float||_.autoMarginLeft?y.HORIZONTAL:"")),_.linear.top<=N.box.top||it.withinFraction(_.linear.top,N.box.top)?_.anchor(e.top,"parent",y.VERTICAL):(_.linear.bottom>=N.box.bottom||it.withinFraction(_.linear.bottom,N.box.bottom))&&_.anchor(e.bottom,"parent",N.hasHeight?y.VERTICAL:"");var D=!0,E=!1,R=void 0;try{for(var w,I=f[Symbol.iterator]();!(D=(w=I.next()).done);D=!0){var x=w.value;if(_!==x){var L=x.stringId,C=s(x,i,y.HORIZONTAL)?y.HORIZONTAL:"",k=s(x,i,y.VERTICAL)?y.VERTICAL:"",P=_.intersectY(x.linear),M=_.alignOrigin&&x.alignOrigin;_.hasWidth||_.linear.left!==x.linear.left||_.linear.right!==x.linear.right||(a(_,"right")||_.anchor(e.left,L),a(_,"left")||_.anchor(e.right,L)),(it.withinFraction(_.linear.left,x.linear.right)||M&&it.withinRange(_.linear.left,x.linear.right,t.settings.whitespaceHorizontalOffset))&&("right"===_.float&&_.float!==x.float||_.anchor(e.leftRight,L,C,_.withinX(x.linear))),(it.withinFraction(_.linear.right,x.linear.left)||M&&it.withinRange(_.linear.right,x.linear.left,t.settings.whitespaceHorizontalOffset))&&_.anchor(e.rightLeft,L,C,_.withinX(x.linear));var X=a(_,"top"),G=a(_,"bottom"),H=!u.enabled&&!_.inlineElement;(it.withinFraction(_.linear.top,x.linear.bottom)||M&&it.withinRange(_.linear.top,x.linear.bottom,t.settings.whitespaceVerticalOffset))&&(P||!G||H)&&_.anchor(e.topBottom,L,k,P),(it.withinFraction(_.linear.bottom,x.linear.top)||M&&it.withinRange(_.linear.bottom,x.linear.top,t.settings.whitespaceVerticalOffset))&&(P||!X||H)&&_.anchor(e.bottomTop,L,k,P),X||G||(_.linear.top===x.linear.top&&_.anchor(e.top,L,k),_.linear.bottom===x.linear.bottom&&_.anchor(e.bottom,L,k))}}}catch(t){E=!0,R=t}finally{try{D||null==I.return||I.return()}finally{if(E)throw R}}}}catch(t){v=!0,b=t}finally{try{g||null==T.return||T.return()}finally{if(v)throw b}}var W=!0,z=!1,V=void 0;try{for(var F,U=f[Symbol.iterator]();!(W=(F=U.next()).done);W=!0){var j=F.value,Y=o(j,"leftRight");Y&&(j.constraint.horizontal||(j.constraint.horizontal=u.enabled||s(j,i,y.HORIZONTAL)),j.constraint.marginHorizontal=Y);var Z=o(j,"topBottom");if(Z&&(j.constraint.vertical||(j.constraint.vertical=u.enabled||s(j,i,y.VERTICAL)),j.constraint.marginVertical=Z,l(j,"top")),a(j,"left")&&a(j,"right"))if(j.autoMargin)j.autoMarginLeft&&l(j,"left"),j.autoMarginRight&&l(j,"right"),j.autoMarginHorizontal&&(d.hasWidth&&!j.has("width",nt.CSS_STANDARD.PERCENT)?j.android("layout_width","match_parent"):j.inlineElement&&!j.hasWidth&&j.android("layout_width","wrap_content"));else if(j.floating)l(j,"right"===j.float?"left":"right");else if(j.inlineElement)if(j.nodeType<=nt.NODE_STANDARD.IMAGE)switch(j.css("textAlign")){case"center":break;case"right":case"end":l(j,"left");break;default:l(j,"right")}else l(j,"right");else l(j,"right"),j.android("layout_width","match_parent");if(o(j,"bottomTop")&&l(j,"bottom"),j.plainText||!j.hasElement&&j.renderChildren.some(function(t){return t.textElement})){var $=j.cssParent("textAlign");"right"===$?(j.anchor(e.right,"parent",y.HORIZONTAL),j.constraint.horizontal=!0):"center"===$&&(j.constraint.horizontal=!1,t.setAlignParent(j,y.HORIZONTAL))}}}catch(t){z=!0,V=t}finally{try{W||null==U.return||U.return()}finally{if(z)throw V}}for(var K=0;K<f.length;K++){var J=f.get(K);if(!J.anchored){var q=it.searchObject(J.get("app"),"*constraint*"),Q=!0,tt=!1,et=void 0;try{for(var at,ot=q[Symbol.iterator]();!(Q=(at=ot.next()).done);Q=!0){var lt=c(at.value,2),st=lt[0],dt=lt[1];"parent"!==dt&&f.filter(function(t){return t.anchored}).locate("stringId",dt)&&(-1!==it.indexOf(st,B("Left",t.settings),B("Right",t.settings))&&(J.constraint.horizontal=!0),-1!==it.indexOf(st,"Top","Bottom","Baseline","above","below")&&(J.constraint.vertical=!0))}}catch(t){tt=!0,et=t}finally{try{Q||null==ot.return||ot.return()}finally{if(tt)throw et}}J.anchored&&(K=-1)}}if(r.length>0){var ht=!0,ut=!1,ft=void 0;try{for(var pt,mt=r[Symbol.iterator]();!(ht=(pt=mt.next()).done);ht=!0){var gt=pt.value,vt=!1;null!=gt.right&&gt.toInt("right")>=0&&(gt.anchor(e.right,"parent",y.HORIZONTAL),gt.toInt("left")>0&&(gt.anchor(e.left,"parent"),gt.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,gt.toInt("left")),vt=!0)),vt||null==gt.left||0!==gt.toInt("left")||(gt.anchor(e.left,"parent",y.HORIZONTAL),gt.toInt("right")>0&&(gt.anchor(e.right,"parent"),gt.modifyBox(nt.BOX_STANDARD.MARGIN_RIGHT,gt.toInt("right")))),null!=gt.top&&0===gt.toInt("top")&&gt.anchor(e.top,"parent",y.VERTICAL),null!=gt.bottom&&gt.toInt("bottom")>=0&&gt.anchor(e.bottom,"parent",y.VERTICAL),0!==gt.left||0!==gt.right||gt.floating||gt.has("width",nt.CSS_STANDARD.PERCENT)||gt.android("layout_width","match_parent"),0===gt.top&&0===gt.bottom&&gt.android("layout_height","match_parent")}}catch(t){ut=!0,ft=t}finally{try{ht||null==mt.return||mt.return()}finally{if(ut)throw ft}}}}if(u.enabled||m>0||!t.settings.constraintChainDisabled&&f.length>1){var yt=[],bt=[];if(u.enabled)if("nowrap"===u.wrap)switch(u.direction){case"row-reverse":var At=f.clone();At.list.reverse(),yt.push(At);break;case"row":yt.push(f.clone());break;case"column-reverse":var Tt=f.clone();Tt.list.reverse(),bt.push(Tt);break;case"column":bt.push(f.clone())}else{var _t=function(){for(var t in Dt)Dt[t].reverse()},Nt=f.clone(),Dt={},Et=[];switch(u.direction){case"row-reverse":case"column-reverse":Nt.list.reverse()}var Rt=!0,wt=!1,It=void 0;try{for(var Ot,St=Nt[Symbol.iterator]();!(Rt=(Ot=St.next()).done);Rt=!0){var xt=Ot.value,Lt=xt.linear.top;null==Dt[Lt]&&(Dt[Lt]=[],Et.push(Lt)),Dt[Lt].push(xt)}}catch(t){wt=!0,It=t}finally{try{Rt||null==St.return||St.return()}finally{if(wt)throw It}}switch(u.wrap){case"wrap":"column-reverse"===u.direction&&_t();break;case"wrap-reverse":-1!==u.direction.indexOf("row")?Et.reverse():"column"===u.direction&&_t()}for(var Bt=0;Bt<Et.length;Bt++){var Ct=Et[Bt];yt.push(new androme.lib.base.NodeList(Dt[Ct]))}}else if(m>0)!function(){for(var e=[],n=Math.ceil(f.length/Math.min(m,f.length)),i=0,r=0;i<f.length;i++){var a=f.get(i);i%n==0&&(i>0&&r++,null==e[r]&&(e[r]=[])),e[r].push(a)}for(var o=[],l=it.convertInt(d.css("columnGap"))||16,s=e.map(function(t){return Math.max.apply(null,t.map(function(t){return t.marginLeft+t.marginRight}))}).reduce(function(t,e){return t+e},0),c=Math.max((s+l*(m-1))/d.box.width/m,.01),h=0;h<e.length;h++){var u=e[h],p=u[0];h>0&&p.android("layout_".concat(B("marginLeft",t.settings)),it.formatPX(p.marginLeft+l)),o.push(p),u.forEach(function(t){t.hasWidth||(t.android("layout_width","0px"),t.app("layout_constraintWidth_percent",(1/m-c).toFixed(2)))}),bt.push(new androme.lib.base.NodeList(u))}yt.push(new androme.lib.base.NodeList(o))}();else{var kt=f.list.filter(function(t){return!t.constraint.horizontal}),Pt=f.list.filter(function(t){return!t.constraint.vertical});f.list.some(function(e){var n=[],i=[];return kt.includes(e)&&(n.push.apply(n,h(t.partitionChain(e,f,y.HORIZONTAL,!p))),n.length>0&&yt.push(new androme.lib.base.NodeList(it.sortAsc(n,"linear.left")))),Pt.includes(e)&&!p&&(i.push.apply(i,h(t.partitionChain(e,f,y.HORIZONTAL,!0))),i.length>0&&bt.push(new androme.lib.base.NodeList(it.sortAsc(i,"linear.top")))),n.length===f.length||i.length===f.length}),yt.sort(function(t,e){return t.length>=e.length?-1:1}),bt.sort(function(t,e){return t.length>=e.length?-1:1})}[yt,bt].forEach(function(n,r){if(n.length>0){var c=new Set,h=[];n.filter(function(t){var e=t.list.map(function(t){return t.id}).sort().join("-");return!c.has(e)&&(c.add(e),!0)}).forEach(function(c,f){if(c.length>(u.enabled?0:1)){var g=0===r?1:0,v=[ct.horizontalVertical[r],ct.horizontalVertical[g]],b=v[0],A=v[1],T=[ct.leftTop[r],ct.leftTop[g]],_=T[0],N=T[1],D=[ct.rightBottom[r],ct.rightBottom[g]],E=D[0],R=D[1],w=[ct.widthHeight[r],ct.widthHeight[g]],I=w[0],O=w[1],S=b.toLowerCase(),x=A.toLowerCase(),L=I.toLowerCase();if(u.enabled)c.list.some(function(t){return t.flex.order>0})&&c[-1!==u.direction.indexOf("reverse")?"sortDesc":"sortAsc"]("flex.order");else if(!p&&0===m&&c.list.every(function(t){return s(t,i,S)}))return;c.parent=d;for(var B=c.get(0),C=c.get(),k=!1,P=!1,M=-1,X=0===r?["left","leftRight","top",y.VERTICAL,"hasWidth","right","marginHorizontal"]:["top","topBottom","left",y.HORIZONTAL,"hasHeight","bottom","marginVertical"],G=0;G<c.length;G++){var H=c.get(G);if(0===G){if(!a(H,X[0])){k=!0;break}}else if(!o(H,X[1])){k=!0;break}}if(!k){if(c.list.every(function(t){return it.sameValue(B,t,"linear.".concat(X[2]))}))for(var W=1;W<c.length;W++){var z=c.get(W);z.constraint[X[3]]||z.anchor(e[X[2]],B.stringId,X[3])}u.enabled||0!==d[X[4]]||(l(C,X[5]),C.constraint[X[6]]=o(C,X[1]))}p?(B.anchor(e[_],"parent",S),C.anchor(e[E],"parent",S),d.renderParent.autoMarginHorizontal||("right"===B.float&&"right"===C.float?B.app("layout_constraint".concat(b,"_bias"),"1"):B.app("layout_constraint".concat(b,"_bias"),"0"))):(B.anchor(e[_],"parent",S),C.anchor(e[E],"parent",S));for(var V=function(i){var s=c.get(i),g=c.get(i+1),v=c.get(i-1);if(u.enabled){s.linear[N]===d.box[N]&&s.linear[R]===d.box[R]&&t.setAlignParent(s,x);var y=n[f+1];if(y){var T=y.get(i);T&&s.withinY(T.linear)&&(s.anchor(e.bottomTop,T.stringId),a(s,"bottom")||l(s,"bottom"))}}else if(p){if(0===h.length)s.anchor(e.top,"parent");else{var D,w=h[h.length-1],S=Math.max.apply(null,w.list.map(function(t){return t.linear.bottom}));(D=c.length===w.length?w.get(i):w.list.find(function(t){return t.linear.bottom===S}))&&s.anchor(e.topBottom,D.stringId)}var C=s.css("width");it.isPercent(C)&&(s.android("layout_width","0px"),s.app("layout_constraint".concat(I,"_percent"),(parseInt(C)/100).toFixed(2))),s.constraint.horizontal=!0,s.constraint.vertical=!0}else m>0&&(0===r&&s.app("layout_constraint".concat(A,"_bias"),"0"),1===r&&i>0&&s.anchor(e.left,B.stringId),s.constraint.horizontal=!0,s.constraint.vertical=!0);if(g&&(s.anchor(e[ct.rightLeftBottomTop[r]],g.stringId),M=Math.max(g.linear[_]-s.linear[E],M)),v&&(s.anchor(e[ct.leftRightTopBottom[r]],v.stringId),s.constraint["margin".concat(b)]=v.stringId),s.constraint["chain".concat(b)]=!0,!s.has(L)||s.has(L,nt.CSS_STANDARD.PERCENT)){var k=s.styleMap["min".concat(I)],P=s.styleMap["max".concat(I)];it.isUnit(k)&&(s.app("layout_constraint".concat(I,"_min"),k),s.android("layout_".concat(L),"0px")),it.isUnit(P)&&(s.app("layout_constraint".concat(I,"_max"),P),s.android("layout_".concat(L),"0px"))}if(u.enabled){switch(s.app("layout_constraint".concat(b,"_weight"),s.flex.grow.toString()),0===s["view".concat(I)]&&0===s.flex.grow&&s.flex.shrink<=1?s.android("layout_".concat(L),"wrap_content"):s.flex.grow>0&&s.android("layout_".concat(L),"0px"),0===s.flex.shrink&&s.app("layout_constrained".concat(I),"true"),s.flex.alignSelf){case"flex-start":s.anchor(e[N],"parent",x);break;case"flex-end":s.anchor(e[R],"parent",x);break;case"baseline":if(c.list.some(function(t){return t!==s&&t.nodeType<=nt.NODE_STANDARD.TEXT&&(s.anchor(e.baseline,t.stringId),!0)})){l(s,"top","bottom");var X=!0,G=!1,H=void 0;try{for(var W,z=c[Symbol.iterator]();!(X=(W=z.next()).done);X=!0){var V=W.value;o(V,"top")===s.stringId&&l(V,"top"),o(V,"bottom")===s.stringId&&l(V,"bottom")}}catch(t){G=!0,H=t}finally{try{X||null==z.return||z.return()}finally{if(G)throw H}}s.constraint.vertical=!0}break;case"center":case"stretch":"center"!==s.flex.alignSelf&&s.android("layout_".concat(O.toLowerCase()),"0px"),s.constraint[x]=!1,t.setAlignParent(s,x)}if("auto"!==s.flex.basis){var F=it.convertInt(s.flex.basis);F>0&&(it.isPercent(s.flex.basis)?s.app("layout_constraint".concat(I,"_percent"),(F/100).toFixed(2)):(s.app("layout_constraint".concat(I,"_min"),it.formatPX(F)),s.constraint["min".concat(I)]=!0))}}},F=0;F<c.length;F++)V(F);var U="layout_constraint".concat(b,"_chainStyle");if(u.enabled&&"normal"!==u.justifyContent&&0===Math.max.apply(null,c.list.map(function(t){return t.flex.grow}))){switch(u.justifyContent){case"space-between":B.app(U,"spread_inside");break;case"space-evenly":B.app(U,"spread");var j=!0,Y=!1,Z=void 0;try{for(var $,K=c[Symbol.iterator]();!(j=($=K.next()).done);j=!0){var J=$.value;J.app("layout_constraint".concat(b,"_weight"),(J.flex.grow||1).toString())}}catch(t){Y=!0,Z=t}finally{try{j||null==K.return||K.return()}finally{if(Y)throw Z}}break;case"space-around":B.app("layout_constraint".concat(b,"_chainStyle"),"spread_inside"),B.constraint[S]=!1,C.constraint[S]=!1,t.addGuideline(B,S,!0,!1),t.addGuideline(C,S,!0,!0);break;default:var q=u.justifyContent;if(-1!==u.direction.indexOf("reverse"))switch(u.justifyContent){case"flex-start":q="flex-end";break;case"flex-end":q="flex-start"}var Q="0.5";switch(q){case"flex-start":Q="0";break;case"flex-end":Q="1"}B.app(U,"packed"),B.app("layout_constraint".concat(b,"_bias"),Q)}P=!0}else if(p)B.app(U,"packed");else if(!u.enabled&&m>0)B.app(U,0===r?"spread_inside":"packed");else{var tt=it.withinFraction(d.box.left,B.linear.left),et=it.withinFraction(C.linear.right,d.box.right),rt=it.withinFraction(d.box.top,B.linear.top),at=it.withinFraction(C.linear.bottom,d.box.bottom);if(S===y.HORIZONTAL&&tt&&et||S===y.VERTICAL&&rt&&at)u.enabled||c.length>2?!u.enabled&&d.inlineElement?(B.app(U,"packed"),B.app("layout_constraint".concat(b,"_bias"),0===r&&"right"===d.float?"1":"0")):(B.app(U,"spread_inside"),P=!0):M>t.settings["constraintChainPacked".concat(b,"Offset")]&&(a(B,_)&&l(B,ct.rightLeftBottomTop[r]),a(C,E)&&l(C,ct.leftRightTopBottom[r]));else if(M<=t.settings["chainPacked".concat(b,"Offset")]||"nowrap"!==d.flex.wrap||S===y.HORIZONTAL&&(tt||et)){B.app(U,"packed");var ot="";S===y.HORIZONTAL&&(tt?ot="0":et&&(ot="1")),""===ot&&(ot=c["".concat(S,"Bias")]),B.app("layout_constraint".concat(b,"_bias"),ot)}else B.app(U,"spread"),P=!0;if(u.enabled)P=!0;else{(0===r?[[N,R],[R,N]]:[[_,E],[E,_]]).forEach(function(t){if(c.list.every(function(e){return it.sameValue(B,e,"linear.".concat(t[0]))&&c.list.some(function(e){return!it.sameValue(B,e,"linear.".concat(t[1]))})})){var e=!0,n=!1,i=void 0;try{for(var r,a=c[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){l(r.value,t[1])}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}});var lt=!0,st=!1,dt=void 0;try{for(var ht,ut=c[Symbol.iterator]();!(lt=(ht=ut.next()).done);lt=!0){var ft=ht.value,pt=!0,mt=!1,gt=void 0;try{for(var vt,yt=n[Symbol.iterator]();!(pt=(vt=yt.next()).done);pt=!0){var bt=vt.value;bt.locate("id",ft.id)&&bt.clear()}}catch(t){mt=!0,gt=t}finally{try{pt||null==yt.return||yt.return()}finally{if(mt)throw gt}}}}catch(t){st=!0,dt=t}finally{try{lt||null==ut.return||ut.return()}finally{if(st)throw dt}}}}if(P){var At=!0,Tt=!1,_t=void 0;try{for(var Nt,Dt=c[Symbol.iterator]();!(At=(Nt=Dt.next()).done);At=!0){var Et=Nt.value;delete Et.constraint.marginHorizontal,delete Et.constraint.marginVertical}}catch(t){Tt=!0,_t=t}finally{try{At||null==Dt.return||Dt.return()}finally{if(Tt)throw _t}}}h.push(c)}})}})}var Mt=!0,Xt=!1,Gt=void 0;try{for(var Ht,Wt=f[Symbol.iterator]();!(Mt=(Ht=Wt.next()).done);Mt=!0){var zt=Ht.value;zt.constraint.horizontal=s(zt,i,y.HORIZONTAL),zt.constraint.vertical=s(zt,i,y.VERTICAL)}}catch(t){Xt=!0,Gt=t}finally{try{Mt||null==Wt.return||Wt.return()}finally{if(Xt)throw Gt}}u.enabled?"nowrap"!==u.wrap&&["topBottom","bottomTop"].forEach(function(t,n){var r=!0,s=!1,d=void 0;try{for(var c,h=f[Symbol.iterator]();!(r=(c=h.next()).done);r=!0){var u=c.value;if(a(u,0===n?"bottom":"top")){for(var p=[u],m=!1,g=u;g;){var v=o(g,t);if(v){if((g=i.locate("nodeId",O(v)))&&u.withinY(g.linear)&&(p.push(g),m=a(g,0===n?"top":"bottom")))break}else g=null}if(!m)for(var y=function(){var t=p[b];f.list.some(function(n){return t!==n&&n.linear.top===t.linear.top&&n.linear.bottom===t.linear.bottom&&(l(t,"topBottom","bottomTop"),t.app(e.top,n.stringId),t.app(e.bottom,n.stringId),!0)})},b=0;b<p.length;b++)y()}}}catch(t){s=!0,d=t}finally{try{r||null==h.return||h.return()}finally{if(s)throw d}}}):0===m&&function(){var n=function(t,e){l(t,e),U[t.stringId][e]=null},r=!0,h=!1,u=void 0;try{for(var p,m=function(){var t=p.value;[["top","bottom","topBottom"],["bottom","top","bottomTop"]].forEach(function(n){a(t,n[1])&&!o(t,n[2])&&["leftRight","rightLeft"].forEach(function(i){var r=o(t,i);if(r){var a=f.locate("stringId",r);a&&o(a,n[2])&&(it.withinFraction(t.linear[n[0]],a.linear[n[0]])&&t.anchor(e[n[0]],a.stringId),it.withinFraction(t.linear[n[1]],a.linear[n[1]])&&t.anchor(e[n[1]],a.stringId))}})})},g=f[Symbol.iterator]();!(r=(p=g.next()).done);r=!0)m()}catch(t){h=!0,u=t}finally{try{r||null==g.return||g.return()}finally{if(h)throw u}}var v=f.filter(function(t){return!t.anchored&&(a(t,"top")||a(t,"right")||a(t,"bottom")||a(t,"left"))});0===i.filter(function(t){return t.anchored}).length&&0===v.length&&v.append(i.get(0));var b=!0,A=!1,T=void 0;try{for(var _,N=v[Symbol.iterator]();!(b=(_=N.next()).done);b=!0){var D=_.value;t.addGuideline(D,"",!1,!1)}}catch(t){A=!0,T=t}finally{try{b||null==N.return||N.return()}finally{if(A)throw T}}var E=c(i.partition(function(t){return t.anchored}),2),R=E[0],w=E[1],I=!0,O=!1,x=void 0;try{for(var L,B=w[Symbol.iterator]();!(I=(L=B.next()).done);I=!0){var C=L.value;if(it.withinRange(C.horizontalBias(t.settings),.5,.01)&&it.withinRange(C.verticalBias(t.settings),.5,.01))t.setAlignParent(C);else if(t.settings.constraintCirclePositionAbsolute&&R.length>0&&!C.constraint.horizontal&&!C.constraint.vertical){var k=R.get(0),P=C.center,M=k.center,X=Math.abs(P.x-M.x),G=Math.abs(P.y-M.y),H=Math.round(Math.atan(Math.min(X,G)/Math.max(X,G))*(180/Math.PI)),W=Math.round(Math.sqrt(Math.pow(X,2)+Math.pow(G,2)));P.y>M.y?P.x>M.x?X>G?H+=90:H=180-H:X>G?H=270-H:H+=180:P.y<M.y?M.x>P.x?X>G?H+=270:H=360-H:X>G&&(H=90-H):H=P.x>M.x?90:270,C.delete("app","layout_constraint*"),C.app("layout_constraintCircle",k.stringId),C.app("layout_constraintCircleRadius",S("".concat(C.nodeName),"constraintcircleradius",it.formatPX(W),t.settings)),C.app("layout_constraintCircleAngle",H.toString()),C.constraint.horizontal=!0,C.constraint.vertical=!0}else t.addGuideline(C)}}catch(t){O=!0,x=t}finally{try{I||null==B.return||B.return()}finally{if(O)throw x}}for(var z=null,V=null,F=Math.max.apply(null,i.list.map(function(t){return t.linear.bottom})),U={},j=function(n){var r=i.get(n),c=a(r,"top"),h=a(r,"right"),u=a(r,"bottom"),f=a(r,"left");if(U[r.stringId]={leftRight:o(r,"leftRight"),rightLeft:o(r,"rightLeft"),topBottom:o(r,"topBottom"),bottomTop:o(r,"bottomTop")},(u&&o(r,"topBottom")&&r.hasHeight||c&&u&&!r.has("marginTop",nt.CSS_STANDARD.AUTO)&&r.linear.bottom<F)&&(l(r,"bottom"),u=!1),r.pageflow)[[f,h,"rightLeft","leftRight","right","left","Horizontal"],[c,u,"bottomTop","topBottom","bottom","top","Vertical"]].forEach(function(e,n){if(e[0]||e[1]){var i=e[0]&&e[1],s=r;if(!i)do{var c=o(s,e[0]?e[2]:e[3]);if(c){if((s=t.findByStringId(c))&&(e[0]&&a(s,e[4])||e[1]&&a(s,e[5]))){i=!0;break}}else s=null}while(s);if(i&&(d.constraint["layout".concat(e[6])]=!0),!r.constraint["chain".concat(e[6])])if(e[0]&&e[1])r.autoMargin||r.linearVertical||r.android("layout_".concat(0===n?"width":"height"),"match_parent",!1);else if(e[1]&&i){var h=t.findByStringId(o(r,e[3]));h&&0===h.marginBottom&&l(r,e[4])}}}),h?V||(V=!1,V=s(r,i,y.HORIZONTAL)):f&&(r.is(nt.NODE_STANDARD.TEXT)&&"center"===r.cssParent("textAlign",!0)&&r.anchor(e.right,"parent"),!r.textElement||r.hasWidth||0!==r.toInt("maxWidth")||!r.multiLine||rt.hasLineBreak(r.element)||i.list.some(function(t){return o(t,"rightLeft")===r.stringId})||r.android("layout_width","match_parent")),u&&(z||(z=!1,z=s(r,i,y.VERTICAL)));else{if(f&&h&&null==r.right&&r.hasWidth)switch(r.cssParent("textAlign",!0)){case"center":case"right":case"end":break;default:l(r,"right")}if(c&&u&&null==r.bottom&&r.hasHeight)switch(r.css("verticalAlign")){case"bottom":case"text-bottom":case"middle":break;default:l(r,"bottom")}f&&h&&!d.hasWidth&&(d.constraint.layoutWidth=!0),c&&u&&!d.hasHeight&&(d.constraint.layoutHeight=!0),h&&r.toInt("right")>0&&r.modifyBox(nt.BOX_STANDARD.MARGIN_RIGHT,Math.max(r.toInt("right")-d.paddingRight,0)),u&&r.toInt("bottom")>0&&r.modifyBox(nt.BOX_STANDARD.MARGIN_BOTTOM,Math.max(r.toInt("bottom")-d.paddingBottom,0)),h&&u&&d.documentRoot&&(d.hasWidth||(d.constraint.layoutWidth=!1,d.constraint.layoutHorizontal=!1),d.hasHeight||(d.constraint.layoutHeight=!1,d.constraint.layoutVertical=!1))}},Y=0;Y<i.length;Y++)j(Y);var Z=function(t){var e=function(e){t!==e&&["leftRight","rightLeft","bottomTop","topBottom"].forEach(function(r){if(U[t][r]&&U[t][r]===U[e][r]){var a=i.locate("stringId",U[t][r]);a&&[i.locate("stringId",t),i.locate("stringId",e)].some(function(i,l){if(i){var s=0===l?t:e;switch(r){case"leftRight":case"rightLeft":if((o(i,"left")||o(i,"right"))&&o(a,"rightLeft"===r?"leftRight":"rightLeft")!==s)return n(i,r),!0;break;case"bottomTop":case"topBottom":if((o(i,"top")||o(i,"bottom"))&&o(a,"topBottom"===r?"bottomTop":"topBottom")!==s)return n(i,r),!0}}return!1})}})};for(var r in U)e(r)};for(var $ in U)Z($);!1===V&&(d.constraint.layoutWidth=!0),!1===z&&(d.constraint.layoutHeight=!0)}()}();var ht=!0,ut=!1,ft=void 0;try{for(var pt,mt=i[Symbol.iterator]();!(ht=(pt=mt.next()).done);ht=!0){var gt=pt.value;if(gt.constraint.marginHorizontal){var vt=t.findByStringId(gt.constraint.marginHorizontal);if(vt){var yt=gt.linear.left-vt.actualRight();yt>=1&&gt.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,yt)}}if(gt.constraint.marginVertical){var bt=t.findByStringId(gt.constraint.marginVertical);if(bt){var At=gt.linear.top-bt.linear.bottom;At>=1&&gt.modifyBox(nt.BOX_STANDARD.MARGIN_TOP,At)}}}}catch(t){ut=!0,ft=t}finally{try{ht||null==mt.return||mt.return()}finally{if(ut)throw ft}}}():d.linearHorizontal&&t.adjustLineHeight(d.renderChildren,d)},g=this.cache.visible[Symbol.iterator]();!(d=(p=g.next()).done);d=!0)m()}catch(t){u=!0,f=t}finally{try{d||null==g.return||g.return()}finally{if(u)throw f}}}},{key:"getEmptySpacer",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a="",o=n&&it.isPercent(n)?(parseInt(n)/100).toFixed(2):"";switch(t){case nt.NODE_STANDARD.GRID:a=this.renderNodeStatic(nt.NODE_STANDARD.SPACE,e,{app:{layout_columnWeight:o,layout_columnSpan:r.toString()}},""!==o?"0px":"wrap_content",i?it.formatPX(i):"wrap_content")}return a}},{key:"createGroup",value:function(t,e,n){var i=new W(this.cache.nextId,e,t,n);return n.length>0&&n.forEach(function(t){return t.inherit(i,"data")}),this.cache.append(i),i}},{key:"renderGroup",value:function(t,e,n,i){var r=this,a=it.hasValue(t.dataset.target)&&!it.hasValue(t.dataset.include),o="",l="";switch("number"==typeof n&&(n=H.getControlName(n)),n){case g.LINEAR:i={android:{orientation:i&&i.horizontal?y.HORIZONTAL:y.VERTICAL}};break;case g.GRID:i={app:{columnCount:i&&i.columns>0?i.columns.toString():"2",rowCount:i&&i.rows>0?i.rows.toString():""}};break;default:i={}}if(t.setNodeType(n),t.overflowX||t.overflowY){var s=[];t.overflowX&&t.overflowY?s.push(g.SCROLL_HORIZONTAL,g.SCROLL_VERTICAL):(t.overflowX&&s.push(g.SCROLL_HORIZONTAL),t.overflowY&&s.push(g.SCROLL_VERTICAL));var d=null,c=s.map(function(n,i){var a=new H(r.cache.nextId,0===i?t.element:void 0);a.api=r.settings.targetAPI,a.nodeName=t.nodeName,a.documentParent=t.documentParent,a.setNodeType(n),0===i?(a.inherit(t,"initial","base","data","style","styleMap"),a.parent=e,a.render(e)):(a.init(),a.inherit(t,"dimensions"),a.inherit(t,"initial","style","styleMap"),d&&(d.css("overflow","visible scroll"),d.css("overflowX","scroll"),d.css("overflowY","visible"),a.parent=d,a.render(d)),a.css("overflow","scroll visible"),a.css("overflowX","visible"),a.css("overflowY","scroll"),t.has("height",nt.CSS_STANDARD.UNIT)&&a.css("height",it.formatPX(t.toInt("height")+t.paddingTop+t.paddingBottom))),a.resetBox(nt.BOX_STANDARD.PADDING);var s=it.repeat(a.renderDepth);return o+="{<".concat(a.id,"}").concat(s,"<").concat(n,"{@").concat(a.id,"}>\n")+"{:".concat(a.id,"}"),l="".concat(s,"</").concat(n,">\n{>").concat(a.id,"}")+(1===i?"\n":"")+l,d=a,r.cache.append(a),a});2===c.length?(t.android("layout_width","wrap_content"),t.android("layout_height","wrap_content")):t.android(t.overflowX?"layout_width":"layout_height","wrap_content"),t.removeElement(),t.resetBox(nt.BOX_STANDARD.MARGIN),t.parent=c[c.length-1],t.render(t.parent)}else t.render(a?t:e);return t.apply(i),this.getEnclosingTag(a||it.hasValue(e.dataset.target)||0===t.renderDepth&&!t.documentRoot?-1:t.renderDepth,n,t.id,at.formatPlaceholder(t.id),o,l)}},{key:"renderNode",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=it.hasValue(t.dataset.target)&&!it.hasValue(t.dataset.include);switch("number"==typeof n&&(n=H.getControlName(n)),t.setNodeType(n),t.tagName){case"IMG":if(!i){var a=t.element,o=t.has("width",nt.CSS_STANDARD.PERCENT),l=t.has("height",nt.CSS_STANDARD.PERCENT),s=t.toInt("width"),d=t.toInt("height"),c="";if(o||l)c=o&&l?"fitXY":"fitCenter";else{if(0===s){var h=/width="([0-9]+)"/.exec(a.outerHTML);h&&(s=parseInt(h[1]),t.css("width",it.formatPX(h[1])))}if(0===d){var u=/height="([0-9]+)"/.exec(a.outerHTML);u&&(d=parseInt(u[1]),t.css("height",it.formatPX(u[1])))}switch(t.css("objectFit")){case"contain":c="centerInside";break;case"cover":c="centerCrop";break;case"scale-down":c="fitCenter";break;case"none":c="matrix";break;default:c="fitXY"}}if(""!==c&&t.android("scaleType",c),(s>0&&0===d||0===s&&d>0)&&t.android("adjustViewBounds","true"),t.pageflow)e.layoutHorizontal&&t.baseline&&t.android("baselineAlignBottom","true");else{var f=t.toInt("left"),p=t.toInt("top");if(f<0||p<0){var m=new H(this.cache.nextId,t.element);return m.api=this.settings.targetAPI,m.excludeProcedure|=nt.NODE_PROCEDURE.ALL,m.excludeResource|=nt.NODE_RESOURCE.ALL,m.android("layout_width",s>0?it.formatPX(s):"wrap_content"),m.android("layout_height",d>0?it.formatPX(d):"wrap_content"),m.setBounds(),m.setNodeType(g.FRAME),m.render(e),f<0&&(t.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,f,!0),m.css("left","0px")),p<0&&(t.modifyBox(nt.BOX_STANDARD.MARGIN_TOP,p,!0),m.css("top","0px")),t.parent=m,this.cache.append(m),this.getEnclosingTag(m.renderDepth,g.FRAME,m.id,this.renderNode(t,m,n,!0))}}}break;case"TEXTAREA":var v=t.element;if(t.android("minLines","2"),v.rows>2&&t.android("maxLines",v.rows.toString()),v.maxLength>0&&t.android("maxLength",v.maxLength.toString()),!t.hasWidth){var b=it.convertInt(v.cols);b>0&&t.css("width",it.formatPX(10*b))}t.android("hint",v.placeholder),t.android("scrollbars",y.VERTICAL),t.android("inputType","textMultiLine"),t.overflowX&&t.android("scrollHorizontally","true");break;case"INPUT":var A=t.element;switch(A.type){case"radio":if(!i){var T=e.children.map(function(t){t.renderAs&&(t=t.renderAs);var e=t.element;return t.visible&&!t.rendered&&"radio"===e.type&&e.name===A.name?t:null}).filter(function(t){return t});if(T.length>1){var _=this.createGroup(e,t,T);_.setNodeType(g.RADIO_GROUP),_.inherit(t,"alignment"),_.render(e);var N="",D="",E=!0,R=!1,w=void 0;try{for(var I,O=_.children[Symbol.iterator]();!(E=(I=O.next()).done);E=!0){var S=I.value;S.element.checked&&(D=S.stringId),N+=this.renderNode(S,_,nt.NODE_STANDARD.RADIO,!0)}}catch(t){R=!0,w=t}finally{try{E||null==O.return||O.return()}finally{if(R)throw w}}return _.android("orientation",ot.linearX(T,T.every(function(t){return t.documentParent===T[0].documentParent}))?y.HORIZONTAL:y.VERTICAL),_.alignmentType|=nt.NODE_ALIGNMENT.SEGMENTED,""!==D&&_.android("checkedButton",D),this.getEnclosingTag(_.renderDepth,g.RADIO_GROUP,_.id,N)}}break;case"password":t.android("inputType","textPassword");break;case"text":t.android("inputType","text");break;case"range":it.hasValue(A.min)&&t.android("min",A.min),it.hasValue(A.max)&&t.android("max",A.max),it.hasValue(A.value)&&t.android("progess",A.value)}switch(A.type){case"text":case"search":case"tel":case"url":case"email":case"password":if(!t.hasWidth){var x=it.convertInt(A.size);x>0&&t.css("width",it.formatPX(10*x))}}}switch(t.controlName){case g.TEXT:var L=[];t.overflowX&&L.push(y.HORIZONTAL),t.overflowY&&L.push(y.VERTICAL),L.length>0&&t.android("scrollbars",L.join("|")),t.has("maxWidth",nt.CSS_STANDARD.UNIT)&&t.android("maxWidth",t.css("maxWidth")),t.has("maxHeight",nt.CSS_STANDARD.UNIT)&&t.android("maxHeight",t.css("maxHeight")),"nowrap"===t.css("whiteSpace")&&t.android("singleLine","true");break;case g.LINE:t.hasHeight||t.android("layout_height",it.formatPX(t.borderTopWidth+t.borderBottomWidth+t.paddingTop+t.paddingBottom||1))}return t.render(r?t:e),this.getEnclosingTag(r||it.hasValue(e.dataset.target)||0===t.renderDepth&&!t.documentRoot?-1:t.renderDepth,t.controlName,t.id)}},{key:"renderNodeStatic",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;a||((a=new H).api=this.settings.targetAPI),a.apply(et.formatOptions(n,this.settings));var l=Math.max(0,e),s="number"==typeof t?H.getControlName(t):t;switch(s){case"include":case"merge":case"menu":break;default:a.setNodeType(s)}var d=a.hasElement?a.nodeName:s;it.hasValue(i)&&(isNaN(parseInt(i))||(i=S(d,"width",i,this.settings)),a.android("layout_width",i,!1)),it.hasValue(r)&&(isNaN(parseInt(r))||(r=S(d,"height",r,this.settings)),a.android("layout_height",r,!1)),a.renderDepth=l;var c=this.getEnclosingTag(a.documentRoot||0!==e?e:-1,s,a.id,o?at.formatPlaceholder(a.id):"");if(this.settings.showAttributes&&0===a.id){var h=it.repeat(l+1),u=a.combine().map(function(t){return"\n".concat(h+t)}).join("");c=c.replace(at.formatPlaceholder(a.id,"@"),u)}return n.stringId=a.stringId,c}},{key:"renderInclude",value:function(t,e,n){return this._merge[n]="true"===t.dataset.includeMerge,t.documentRoot=!this._merge[n],this.renderNodeStatic("include",e.renderDepth+1,{layout:"@layout/".concat(n)})}},{key:"renderMerge",value:function(t,e){var n=e.join("");if(this._merge[t]){var i=new H;i.api=this.settings.targetAPI,i.documentRoot=!0,n=this.renderNodeStatic("merge",0,{},"","",i,!0).replace("{:0}",n)}return n}},{key:"baseRenderDepth",value:function(t){return this._merge[t]?0:-1}},{key:"setBoxSpacing",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=t.cache.visible[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){r.value.setBoxSpacing(this.settings)}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setDimensions",value:function(t){var e=this;function n(t,e,n,r,a){var o=i[t],l=n;if(5===arguments.length){if(!a||!/(px|dp|sp)$/.test(a))return;l="".concat(n,",").concat(r,",").concat(a)}null==o[l]&&(o[l]=[]),o[l].push(e)}var i={},r=!0,a=!1,o=void 0;try{for(var l,s=function(){var t=l.value;if(e.settings.dimensResourceValue){var r=t.nodeName.toLowerCase();null==i[r]&&(i[r]={});for(var a=Object.keys(nt.BOX_STANDARD),o=0;o<a.length;o++){var s=a[o],d=e.valueBox(t,s);if(""!==d[0]&&"0px"!==d[1]){var h="".concat(nt.BOX_STANDARD[s].toLowerCase(),",").concat(d[0],",").concat(d[1]);n(r,t,h)}}["android:layout_width:width","android:layout_height:height","android:minWidth:min_width","android:minHeight:min_height","app:layout_constraintWidth_min:constraint_width_min","app:layout_constraintHeight_min:constraint_height_min"].forEach(function(e){var i=c(e.split(":"),3),a=i[0],o=i[1],l=i[2];n(r,t,l,o,t[a](o))})}},d=t.cache.visible[Symbol.iterator]();!(r=(l=d.next()).done);r=!0)s()}catch(t){a=!0,o=t}finally{try{r||null==d.return||d.return()}finally{if(a)throw o}}if(this.settings.dimensResourceValue){var h=et.getStored("dimens");for(var u in i){var f=i[u],p=function(t){var n=c(t.split(","),3),i=n[0],r=n[1],a=n[2],o=e.getDimensResourceKey(h,"".concat(u,"_").concat(B(i,e.settings)),a);f[t].forEach(function(t){return t[-1!==r.indexOf("constraint")?"app":"android"](r,"@dimen/".concat(o))}),h.set(o,a)};for(var m in f)p(m)}}}},{key:"getEnclosingTag",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=it.repeat(Math.max(0,t)),l=r+"{<".concat(n,"}");return l+=""!==i?o+"<".concat(e).concat(0===t?"{#0}":"","{@").concat(n,"}>\n")+i+o+"</".concat(e,">\n"):o+"<".concat(e).concat(0===t?"{#0}":"","{@").concat(n,"} />\n"),l+="{>".concat(n,"}")+a}},{key:"valueBox",value:function(t,e){var n=it.convertEnum(parseInt(e),nt.BOX_STANDARD,v);if(""!==n){var i=B(n,this.settings);return[i,t.android(i)||"0px"]}return["","0px"]}},{key:"parseDimensions",value:function(t){for(var e,n=et.getStored("dimens"),i=/\s+\w+:\w+="({%(\w+),(\w+),(-?\w+)})"/g;null!=(e=i.exec(t));){var r=this.getDimensResourceKey(n,"".concat(e[2],"_").concat(B(e[3],this.settings)),e[4]);n.set(r,e[4]),t=t.replace(new RegExp(e[1],"g"),"@dimen/".concat(r))}return t}},{key:"setAttributes",value:function(t){var e=this;if(this.settings.showAttributes)for(var n=t.cache.visible.list.map(function(t){return{pattern:at.formatPlaceholder(t.id,"@"),attributes:e.parseAttributes(t)}}),i=h(t.views).concat(h(t.includes)),r=function(){var t=i[a];n.forEach(function(e){return t.content=t.content.replace(e.pattern,e.attributes)}),t.content=t.content.replace("{#0}",e.getRootNamespace(t.content))},a=0;a<i.length;a++)r()}},{key:"parseAttributes",value:function(t){for(var e in"rtl"===t.dir&&(t.nodeType<nt.NODE_STANDARD.INLINE?t.android("textDirection","rtl"):t.length>0&&t.android("layoutDirection","rtl")),t.dataset)/^attr[A-Z]+/.test(e)&&function(){var n=it.capitalize(e.substring(4),!1);t.dataset[e].split(";").forEach(function(e){var i=c(e.split("::"),2),r=i[0],a=i[1];it.hasValue(r)&&it.hasValue(a)&&t.attr(n,r,a)})}();var n=it.repeat(t.renderDepth+1);return t.combine().map(function(t){return"\n".concat(n+t)}).join("")}},{key:"getRootNamespace",value:function(t){var e="";for(var n in b)new RegExp("\\s+".concat(n,":")).test(t)&&(e+="\n\txmlns:".concat(n,'="').concat(b[n],'"'));return e}},{key:"getDimensResourceKey",value:function(t,e,n){return t.has(e)&&t.get(e)!==n&&(e=I("dimens","".concat(e,"_1"))),e}},{key:"setAlignParent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=dt;[y.HORIZONTAL,y.VERTICAL].forEach(function(r,a){t.constraint[r]||""!==e&&r!==e||(t.app(i[0===a?"left":"top"],"parent"),t.app(i[0===a?"right":"bottom"],"parent"),t.constraint[r]=!0,n&&t.app("layout_constraint".concat(r.charAt(0).toUpperCase()+r.substring(1),"_bias"),t["".concat(r,"Bias")]))})}},{key:"partitionChain",value:function(e,n,i,r){var a=dt,o=[],l=[],s=[];switch(i){case y.HORIZONTAL:o.push(a.left,a.right),l.push("linear.top","linear.bottom"),s.push(a.leftRight,a.rightLeft);break;case y.VERTICAL:o.push(a.top,a.bottom),l.push("linear.left","linear.right"),s.push(a.topBottom,a.bottomTop)}return l.map(function(i){var a=it.sortAsc(n.list.filter(function(t){return it.sameValue(e,t,i)}),l[0]);if(a.length>1){if(!r||!a.some(function(t){return t.floating})&&"parent"===a[0].app(o[0])&&"parent"===a[a.length-1].app(o[1]))return a;var d=function(){var t,n=new Set([e]);do{t=!1,Array.from(n).some(function(e){return a.some(function(i){return n.has(i)||i.app(s[0])!==e.stringId&&i.app(s[1])!==e.stringId||(n.add(i),t=!0),t})})}while(t);return{v:Array.from(n)}}();if("object"===t(d))return d.v}return[]}).reduce(function(t,e){return t.length>=e.length?t:e})}},{key:"addGuideline",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=dt;t.pageflow&&(null==a&&(a="right"===t.float||null==t.left&&null!=t.right||t.textElement&&"right"===t.css("textAlign")||t.alignParent("right",this.settings)),null==i&&!0===a&&(i=!0)),t.dataset.constraintPercent&&(i="true"===t.dataset.constraintPercent);var l=t.documentParent,s="layout_constraintGuide_".concat(i?"percent":"begin");[y.HORIZONTAL,y.VERTICAL].forEach(function(d,c){if(!t.constraint[d]&&(""===n||d===n)){var h="",u="",f="",p="",m=!1,v=0;switch(c){case 0:h=a?"right":"left",u=a?"left":"right",f=a?"rightLeft":"leftRight",p=a?"leftRight":"rightLeft","relative"===t.position&&t.toInt("left")<0&&(v=t.toInt("left"));break;case 1:h=a?"bottom":"top",u=a?"top":"bottom",f=a?"bottomTop":"topBottom",p=a?"topBottom":"bottomTop","relative"===t.position&&t.toInt("top")<0&&(v=t.toInt("top"))}var b=t.pageflow?"bounds":"linear",A=i?Math.abs(t[b][h]+v-(l.documentBody?0:l.box[h]))/l.box[0===c?"width":"height"]:0;if(i||(m=l.renderChildren.some(function(e){if(e.constraint[d]&&(!e.constraint["chain".concat(it.capitalize(d))]||e.constraint["margin".concat(it.capitalize(d))])){if(it.withinFraction(t.linear[h]+v,e.linear[u]))return t.anchor(o[f],e.stringId,d,!0),!0;if(it.withinFraction(t.linear[u]+v,e.linear[h]))return t.anchor(o[p],e.stringId,d,!0),!0;if(it.withinFraction(t.bounds[h]+v,e.bounds[h]))return t.anchor(o[1===c&&t.textElement&&t.baseline&&e.textElement&&e.baseline?"baseline":h],e.stringId,d,!0),!0;if(it.withinFraction(t.bounds[u]+v,e.bounds[u]))return t.anchor(o[u],e.stringId,d,!0),!0}return!1})),!m){var T=l.constraint.guideline||{},_=i?parseFloat(Math.abs(A-(a?1:0)).toFixed(e.settings.constraintPercentAccuracy)):a?t[b][h]+v-l.box[u]:t[b][h]+v-l.box[h];if(!i&&!a)if(_<0){var N=l["padding".concat(it.capitalize(h))];_=N>=Math.abs(_)?0:Math.abs(_)-N}else l.documentBody&&(_=t[b][h]+v);if(0===_)t.anchor(o[h],"parent",d,!0);else{var D={android:{orientation:0===c?y.VERTICAL:y.HORIZONTAL},app:r({},s,_.toString())},E=it.optional(T,"".concat(d,".").concat(s,".").concat(h),"object");if(E)for(var R in E)if(E[R]===_){t.anchor(o[h],R,d,!0),t.delete("app",o[u]),m=!0;break}if(!m){i||(D.app[s]=S(t.nodeName,"constraintguide_begin",it.formatPX(_),e.settings));var w=e.renderNodeStatic(g.GUIDELINE,t.renderDepth,D,"wrap_content","wrap_content"),I=D.stringId;e.appendAfter(t.id,w),t.anchor(o[h],I,d,!0),t.delete("app",o[u]),t.constraint["".concat(d,"Guideline")]=I,null==T[d]&&(T[d]={}),null==T[d][s]&&(T[d][s]={}),null==T[d][s][h]&&(T[d][s][h]={}),T[d][s][h][I]=_,l.constraint.guideline=T}}}}})}},{key:"adjustBaseline",value:function(t){if(t.length>1){var e=ot.textBaseline(t.filter(function(t){return t.baseline&&0===t.toInt("top")&&0===t.toInt("bottom")}));if(e.length>0){var n=st,i=e[0],r=[],a=null,o=!0,l=!1,s=void 0;try{for(var d,c=t[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){var h=d.value;h!==i&&(h.baseline&&(h.nodeType<=nt.NODE_STANDARD.INLINE||h.linearHorizontal&&h.renderChildren.some(function(t){return t.baseline&&t.nodeType<=nt.NODE_STANDARD.INLINE}))&&(!i.imageElement&&h.imageElement?r.push(h):h.alignOrigin?h.android(n[h.imageElement||h.is(nt.NODE_STANDARD.BUTTON)?"bottom":"baseline"],i.stringId):"relative"===i.position&&h.bounds.height<i.bounds.height&&0===h.lineHeight&&h.android(n[it.convertInt(i.top)>0?"top":"bottom"],i.stringId)),i.imageElement&&(!a||h.bounds.height>a.bounds.height)&&(a=h))}}catch(t){l=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(l)throw s}}if(r.length>0){r.sort(function(t,e){return t.bounds.height>=e.bounds.height?-1:1});for(var u=0;u<r.length;u++)0===u?i.android(n.bottom,r[u].stringId):r[u].android(n.bottom,r[0].stringId);a=null}a&&(a.imageElement?a.bounds.height>i.bounds.height?a.delete("android",n.bottom):a=null:a.delete("android",n.baseline),a&&i.android(n.bottom,a.stringId))}}}},{key:"checkSingleLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&t.textElement&&(e||n||!t.hasWidth&&!t.multiLine&&t.textContent.trim().split(String.fromCharCode(32)).length>1)&&t.android("singleLine","true")}},{key:"adjustLineHeight",value:function(t,e){var n=Math.max.apply(null,t.map(function(t){return t.toInt("lineHeight")}));if(n>0){var i=Number.MAX_VALUE,r=0;t.every(function(t){var e=n-t.bounds.height;return e>0&&(i=Math.min(e,i),n===t.toInt("lineHeight")&&(r=Math.max(t.toInt("top")<0?Math.abs(t.toInt("top")):0,r)),!0)})&&(e.modifyBox(nt.BOX_STANDARD.PADDING_TOP,Math.floor(i/2)),e.modifyBox(nt.BOX_STANDARD.PADDING_BOTTOM,Math.ceil(i/2)+r))}}},{key:"findByStringId",value:function(t){return this.cache.locate("stringId",t)}},{key:"baseTemplate",get:function(){return'<?xml version="1.0" encoding="utf-8"?>\n{:0}'}},{key:"supportInline",get:function(){return D}},{key:"supportInclude",get:function(){return!0}},{key:"settingsInternal",get:function(){return{layout:{directory:"res/layout",fileExtension:"xml"}}}}]),l}(),ut=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>","!1",'\t<string name="{name}">{value}</string>',"!1","</resources>","\x3c!-- filename: res/values/strings.xml --\x3e","!0"].join("\n"),ft=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>","!1",'\t<string-array name="{name}">',"!2","\t\t<item>{value}</item>","!2","\t</string-array>","!1","</resources>","\x3c!-- filename: res/values/string_arrays.xml --\x3e","!0"].join("\n"),pt=["!0",'<?xml version="1.0" encoding="utf-8"?>','<font-family xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="{#app=http://schemas.android.com/apk/res-auto}">',"!1",'\t<font android:fontStyle="{style}" android:fontWeight="{weight}" android:font="{font}" app:fontStyle="{#app=style}" app:fontWeight="{#app=weight}" app:font="{#app=font}" />',"!1","</font-family>","\x3c!-- filename: res/font/{name}.xml --\x3e","!0"].join("\n"),mt=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>","!1",'\t<color name="{value}">{name}</color>',"!1","</resources>","\x3c!-- filename: res/values/colors.xml --\x3e","!0"].join("\n"),gt=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>","!1",'\t<style name="{name1}" parent="{@parent}">',"!2",'\t\t<item name="{name2}">{value}</item>',"!2","\t</style>","!1","</resources>","\x3c!-- filename: res/values/styles.xml --\x3e","!0"].join("\n"),vt=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>","!1",'\t<dimen name="{name}">{value}</dimen>',"!1","</resources>","\x3c!-- filename: res/values/dimens.xml --\x3e","!0"].join("\n"),yt=["!0","{value}","\x3c!-- filename: {name} --\x3e","!0"].join("\n"),bt=androme.lib.util,At=androme.lib.xml;function Tt(t,e){return t.toString().toLowerCase()>=e.toString().toLowerCase()?1:-1}var _t=function(t){function n(t){var i;return e(this,n),(i=s(this,o(n).call(this,t.outputDirectory,t.outputMaxProcessingTime,t.outputArchiveFileType))).settings=t,i}return a(n,androme.lib.base.File),i(n,[{key:"saveAllToDisk",value:function(t){for(var e=[],n=h(t.views).concat(h(t.includes)),i=0;i<n.length;i++){var r=n[i];e.push(this.getLayoutFile(r.pathname,0===i?this.settings.outputMainFileName:"".concat(r.filename,".xml"),r.content))}var a=this.resourceDrawableToXml();e.push.apply(e,h(this.parseFileDetails(this.resourceStringToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceStringArrayToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceFontToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceColorToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceStyleToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceDimenToXml()))),e.push.apply(e,h(this.parseImageDetails(a)).concat(h(this.parseFileDetails(a)))),this.saveToDisk(e)}},{key:"layoutAllToXml",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},i=[],r=h(t.views).concat(h(t.includes)),a=0;a<r.length;a++){var o=r[a];n[o.filename]=o.content,e&&i.push(this.getLayoutFile(o.pathname,0===a?this.settings.outputMainFileName:"".concat(o.filename,".xml"),o.content))}return e&&this.saveToDisk(i),n}},{key:"resourceAllToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml()};for(var n in e)""===e[n]&&delete e[n];if(t){var i=[];for(var r in e)"drawable"===r&&i.push.apply(i,h(this.parseImageDetails(e[r]))),i.push.apply(i,h(this.parseFileDetails(e[r])));this.saveToDisk(i)}return e}},{key:"resourceStringToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";this.stored.strings=new Map(h(this.stored.strings.entries()).sort(Tt));var n=At.parseTemplate(ut),i={0:[{1:[]}]},r=At.getTemplateLevel(i,"0");""===this.appName||this.stored.strings.has("app_name")||r[1].push({name:"app_name",value:this.appName});var a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.strings.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2),f=u[0],p=u[1];r[1].push({name:f,value:p})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}return e=At.insertTemplateData(n,i),e=At.replaceTab(e,this.settings,!0),t&&this.saveToDisk(this.parseFileDetails(e)),e}},{key:"resourceStringArrayToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.arrays=new Map(h(this.stored.arrays.entries()).sort()),this.stored.arrays.size>0){var n=At.parseTemplate(ft),i={0:[{1:[]}]},r=At.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.arrays.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2),f=u[0],p=u[1],m={name:f,2:[]},g=m[2],v=!0,y=!1,b=void 0;try{for(var A,T=p[Symbol.iterator]();!(v=(A=T.next()).done);v=!0){var _=A.value;g.push({value:_})}}catch(t){y=!0,b=t}finally{try{v||null==T.return||T.return()}finally{if(y)throw b}}r[1].push(m)}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=At.insertTemplateData(n,i),e=At.replaceTab(e,this.settings,!0),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceFontToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.fonts=new Map(h(this.stored.fonts.entries()).sort()),this.stored.fonts.size>0){var n=At.parseTemplate(pt),i=!0,r=!1,a=void 0;try{for(var o,l=this.stored.fonts.entries()[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=c(o.value,2),d=s[0],f=s[1],p={"#include":{},"#exclude":{},0:[{name:d,1:[]}]};p[this.settings.targetAPI<u.OREO?"#include":"#exclude"].app=!0;var m=At.getTemplateLevel(p,"0");for(var g in f){var v=c(g.split("-"),2),y=v[0],b=v[1];m[1].push({style:y,weight:b,font:"@font/".concat(d+("normal"===y&&"400"===b?"_".concat(y):("normal"!==y?"_".concat(y):"")+("400"!==b?"_".concat(N[b]||b):"")))})}e+="\n\n"+At.insertTemplateData(n,p)}}catch(t){r=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}e=At.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e.trim()}},{key:"resourceColorToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.colors.size>0){this.stored.colors=new Map(h(this.stored.colors.entries()).sort());var n=At.parseTemplate(mt),i={0:[{1:[]}]},r=At.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.colors.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2),f=u[0],p=u[1];r[1].push({name:f,value:p})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=At.insertTemplateData(n,i),e=At.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceStyleToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.styles.size>0){this.stored.styles=new Map(h(this.stored.styles.entries()).sort(Tt));var n=At.parseTemplate(gt),i={0:[{1:[]}]},r=At.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=function(){var t=c(s.value,2),e=t[0],n=t[1],i={name1:e,parent:n.parent||"",2:[]};n.attributes.split(";").sort().forEach(function(t){var e=c(t.split("="),2),n=e[0],r=e[1];i[2].push({name2:n,value:r.replace(/"/g,"")})}),r[1].push(i)},u=this.stored.styles.entries()[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)d()}catch(t){o=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}e=x(e=At.insertTemplateData(n,i),this.settings,!0),e=At.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceDimenToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.dimens=new Map(h(this.stored.dimens.entries()).sort()),this.stored.dimens.size>0){var n=At.parseTemplate(vt),i={0:[{1:[]}]},r=At.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.dimens.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2),f=u[0],p=u[1];r[1].push({name:f,value:p})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=x(e=At.insertTemplateData(n,i),this.settings),e=At.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceDrawableToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.drawables.size>0||this.stored.images.size>0){var n=At.parseTemplate(yt),i={0:[]},r=i[0],a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.drawables.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2),f=u[0],p=u[1];r.push({name:"res/drawable/".concat(f,".xml"),value:p})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}var m=!0,g=!1,v=void 0;try{for(var y,b=this.stored.images.entries()[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var A=c(y.value,2),T=(f=A[0],A[1]);if(Object.keys(T).length>1)for(var _ in T)r.push({name:"res/drawable-".concat(_,"/").concat(f,".").concat(bt.lastIndexOf(T[_],".")),value:"\x3c!-- image: ".concat(T[_]," --\x3e")});else T.mdpi&&r.push({name:"res/drawable/".concat(f,".").concat(bt.lastIndexOf(T.mdpi,".")),value:"\x3c!-- image: ".concat(T.mdpi," --\x3e")})}}catch(t){g=!0,v=t}finally{try{m||null==b.return||b.return()}finally{if(g)throw v}}e=x(e=At.insertTemplateData(n,i),this.settings),e=At.replaceTab(e,this.settings),t&&this.saveToDisk(h(this.parseImageDetails(e)).concat(h(this.parseFileDetails(e))))}return e}},{key:"parseImageDetails",value:function(t){for(var e=[],n=/<!-- image: (.+) -->\n<!-- filename: (.+)\/(.*?\.\w+) -->/,i=null;null!=(i=n.exec(t));)e.push({uri:i[1],pathname:i[2],filename:i[3],content:""}),t=t.replace(i[0],"");return e}},{key:"parseFileDetails",value:function(t){for(var e=[],n=/<\?xml[\w\W]*?(<!-- filename: (.+)\/(.*?\.xml) -->)/,i=null;null!=(i=n.exec(t));)e.push({content:i[0].replace(i[1],"").trim(),pathname:i[2],filename:i[3]}),t=t.replace(i[0],"");return e}},{key:"getLayoutFile",value:function(t,e,n){return{pathname:t,filename:e,content:n}}}]),n}(),Nt={builtInExtensions:["androme.external","androme.origin","androme.custom","androme.accessibility","androme.list","androme.table","androme.grid","androme.widget"],targetAPI:u.OREO,density:f.MDPI,supportRTL:!0,dimensResourceValue:!0,numberResourceValue:!1,fontAliasResourceValue:!0,alwaysReevaluateResources:!0,renderInlineText:!0,ellipsisOnTextOverflow:!0,preloadImages:!0,autoSizeBackgroundImage:!0,autoSizePaddingAndBorderWidth:!0,whitespaceHorizontalOffset:3.5,whitespaceVerticalOffset:16,constraintChainDisabled:!1,constraintChainPackedHorizontalOffset:3.5,constraintChainPackedVerticalOffset:16,constraintCirclePositionAbsolute:!1,constraintPercentAccuracy:4,supportNegativeLeftTop:!0,floatOverlapDisabled:!1,collapseUnattributedElements:!0,customizationsOverwritePrivilege:!1,showAttributes:!0,insertSpaces:4,convertPixels:"dp",autoCloseOnWrite:!0,outputDirectory:"app/src/main",outputMainFileName:"activity_main.xml",outputArchiveFileType:"zip",outputMaxProcessingTime:30},Dt={FAB:"androme.widget.floatingactionbutton",MENU:"androme.widget.menu",COORDINATOR:"androme.widget.coordinator",TOOLBAR:"androme.widget.toolbar",DRAWER:"androme.widget.drawer",BOTTOM_NAVIGATION:"androme.widget.bottomnavigation"},Et="android.support.v4.widget.DrawerLayout",Rt="android.support.design.widget.NavigationView",wt="android.support.design.widget.CoordinatorLayout",It="android.support.design.widget.AppBarLayout",Ot="android.support.design.widget.CollapsingToolbarLayout",St="android.support.v7.widget.Toolbar",xt="android.support.design.widget.FloatingActionButton",Lt="android.support.design.widget.BottomNavigationView",Bt="menu",Ct="item",kt="group",Pt="ic_menu_",Mt="ic_dialog_",Xt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.External),n}(),Gt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Origin),n}(),Ht=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.extensions.Custom),i(n,[{key:"afterInsert",value:function(){var t=this.node,e=Object.assign({},this.options[t.element.id]);t.apply(et.formatOptions(e,this.application.settings))}}]),n}(),Wt=androme.lib.enumeration,zt=androme.lib.util,Vt=androme.lib.dom,Ft=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.extensions.Accessibility),i(n,[{key:"afterRender",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=function(){var t=i.value;if(!t.hasBit("excludeProcedure",Wt.NODE_PROCEDURE.ACCESSIBILITY)){var e=t.element;switch(t.controlName){case g.EDIT:t.companion||[t.nextElementSibling,t.previousElementSibling].some(function(n){var i=Vt.getNodeFromElement(n),r=n&&n.parentElement&&"LABEL"===n.parentElement.tagName?Vt.getNodeFromElement(n.parentElement):null;if(i&&i.visible&&i.pageflow){if(zt.hasValue(n.htmlFor)&&n.htmlFor===e.id)return i.android("labelFor",t.stringId),!0;if(i.textElement&&r)return r.android("labelFor",t.stringId),!0}return!1});case g.SELECT:case g.CHECKBOX:case g.RADIO:case g.BUTTON:e.disabled&&t.android("focusable","false")}}},a=this.application.cache.elements[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)r()}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}}}]),n}(),Ut=androme.lib.enumeration,jt=androme.lib.constant,Yt=androme.lib.util,Zt=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.extensions.List),i(n,[{key:"processChild",value:function(){var t=this.node,e=t.data(jt.EXT_NAME.LIST,"mainData");if(e){var n=this.parent,i=this.application.viewController,a=this.application.settings,o=Yt.convertInt(n.css("paddingLeft"))+Yt.convertInt(n.cssInitial("marginLeft",!0)),l=0,s=t.marginLeft;t.modifyBox(Ut.BOX_STANDARD.MARGIN_LEFT,null),n.is(Ut.NODE_STANDARD.GRID)?(l=Yt.convertInt(n.app("columnCount")),s+=o):n.children[0]===t&&(s+=o);var d=t.children.find(function(t){return"left"===t.float&&Yt.convertInt(t.cssInitial("marginLeft",!0))<0&&Math.abs(Yt.convertInt(t.cssInitial("marginLeft",!0)))<=Yt.convertInt(t.documentParent.cssInitial("marginLeft",!0))});if(d&&""===e.ordinal){var h="";d.parent=n,h=d.inlineText||0===d.children.length?i.renderNode(d,n,Ut.NODE_STANDARD.TEXT):d.children.every(function(t){return t.pageflow})?i.renderGroup(d,n,Ut.NODE_STANDARD.RELATIVE):i.renderGroup(d,n,Ut.NODE_STANDARD.CONSTRAINT),i.prependBefore(t.id,h),3===l&&t.app("layout_columnSpan","2"),s+=d.marginLeft,d.modifyBox(Ut.BOX_STANDARD.MARGIN_LEFT,null),!d.hasWidth&&s>0&&d.android("minWidth",Yt.formatPX(s))}else{var u=l>0?"0":"",f="inside"===t.css("listStylePosition"),p=!["","none"].includes(t.css("listStyleImage")),m="",v=0,y=0;if(""!==e.imageSrc){m=et.addImageURL(e.imageSrc);var b=c(et.parseBackgroundPosition(e.imagePosition,t.css("fontSize")).map(function(t){return Yt.convertInt(t)}),2);v=b[0],y=b[1]}var A=""!==m&&!p||0===o&&0===t.marginLeft?"":"right";""===A&&(s+=t.paddingLeft,t.modifyBox(Ut.BOX_STANDARD.PADDING_LEFT,null)),v>0&&s>v&&(s-=v);var T,_=(s=Math.max(s,20))>0?S(t.nodeName,B("min_width",a),Yt.formatPX(s),a):"",N=s<=24?6:s<=32?8:10,D=v>0?Yt.formatPX(v):"",E=""===A&&""===m?Yt.formatPX(N):20===s?"2px":"",R="right"===A&&s>20?Yt.formatPX(N):"",w={android:{},app:{layout_columnWeight:u}};if(f)""!==D&&(D=S(t.nodeName,B("margin_left",a),D,a)),i.prependBefore(t.id,i.renderNodeStatic(Ut.NODE_STANDARD.SPACE,n.renderDepth+1,{android:r({minWidth:_},B("layout_marginLeft",a),D),app:{layout_columnWeight:u}},"wrap_content","wrap_content")),Object.assign(w.android,{minWidth:S(t.nodeName,B("min_width",a),Yt.formatPX(24),a)});else Object.assign(w.android,(r(T={minWidth:_,gravity:s>20?B(A,a):""},B("layout_marginLeft",a),D),r(T,B("paddingLeft",a),E),r(T,B("paddingRight",a),R),r(T,"paddingTop",t.paddingTop>0?Yt.formatPX(t.paddingTop):""),T)),3===l&&t.app("layout_columnSpan","2");if("DT"===t.tagName&&""===m)t.app("layout_columnSpan",l.toString());else{""!==m?Object.assign(w.android,{src:"@drawable/".concat(m),layout_marginTop:y>0?Yt.formatPX(y):"",baselineAlignBottom:"true",scaleType:f||"right"!==A?"fitStart":"fitEnd"}):Object.assign(w.android,{text:e.ordinal});var I=new H(this.application.cache.nextId,document.createElement("SPAN"));I.api=t.api,I.alignmentType=Ut.NODE_ALIGNMENT.SPACE,I.nodeName="".concat(t.tagName,"_ORDINAL"),I.setNodeType(g.SPACE),I.inherit(t,"style"),""!==e.ordinal&&!/[A-Za-z0-9]+\./.test(e.ordinal)&&I.toInt("fontSize")>12&&I.css("fontSize","12px"),t.companion=I,this.application.cache.append(I),i.prependBefore(t.id,i.renderNodeStatic(""!==m?Ut.NODE_STANDARD.IMAGE:""!==e.ordinal?Ut.NODE_STANDARD.TEXT:Ut.NODE_STANDARD.SPACE,n.renderDepth+1,w,"wrap_content","wrap_content",I))}}l>0&&t.app("layout_columnWeight","1")}return{output:"",complete:!0}}},{key:"beforeInsert",value:function(){var t=this.node;if(t.is(Ut.NODE_STANDARD.GRID))for(var e=t.app("columnCount"),n=t.renderChildren,i=0;i<n.length;i++){var r=n[i],a=n[i-1],o=0;if(a)Yt.convertInt(a.android("layout_marginBottom"))>0&&(o+=Yt.convertInt(a.android("layout_marginBottom")),a.delete("android","layout_marginBottom"),a.modifyBox(Ut.BOX_STANDARD.MARGIN_BOTTOM,null));var l=Yt.convertInt(r.android("layout_marginTop"));l>0&&(o+=l,r.delete("android","layout_marginTop"),r.modifyBox(Ut.BOX_STANDARD.MARGIN_TOP,null)),o>0&&this.application.viewController.prependBefore(r.id,this.application.viewController.renderNodeStatic(Ut.NODE_STANDARD.SPACE,r.renderDepth,{app:{layout_columnSpan:e.toString()}},"match_parent",Yt.formatPX(o)),0)}}},{key:"afterInsert",value:function(){var t=this.node;t.is(Ut.NODE_STANDARD.GRID)&&t.blockStatic&&!t.has("width")&&t.android("layout_width","match_parent")}}]),n}(),$t=androme.lib.enumeration,Kt=androme.lib.constant,Jt=androme.lib.util,qt=androme.lib.dom,Qt=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.extensions.Grid),i(n,[{key:"processChild",value:function(){var t=this.node,e=t.data(Kt.EXT_NAME.GRID,"cellData");return e&&(e.rowSpan>1&&t.app("layout_rowSpan",e.rowSpan.toString()),e.columnSpan>1&&t.app("layout_columnSpan",e.columnSpan.toString()),"table"===t.parent.display&&"table-cell"===t.display&&t.app("layout_gravity","fill")),d(o(n.prototype),"processChild",this).call(this)}},{key:"afterRender",value:function(){var t=this,e=!0,n=!1,i=void 0;try{for(var r,a=this.subscribers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;"table"===o.display&&"collapse"===o.css("borderCollapse")||function(){var e=o.data(Kt.EXT_NAME.GRID,"mainData");e&&o.each(function(n){var i=n.data(Kt.EXT_NAME.GRID,"cellData");if(i){var r=qt.getBoxSpacing(n.documentParent.element,!0),a=e.padding;if(i.cellFirst&&(a.top=r.paddingTop+r.marginTop),i.rowStart&&(a.left=Math.max(r.marginLeft+r.paddingLeft,a.left)),i.rowEnd){var o=r.marginBottom+r.paddingBottom+(i.cellLast?0:r.marginTop+r.paddingTop);o>0&&(i.cellLast?a.bottom=o:t.application.viewController.appendAfter(n.id,t.application.viewController.renderNodeStatic(g.SPACE,n.renderDepth,{app:{layout_columnSpan:e.columnCount.toString()}},"match_parent",Jt.formatPX(o)))),a.right=Math.max(r.marginRight+r.paddingRight,a.right)}}},!0)}()}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}var l=!0,s=!1,d=void 0;try{for(var c,h=this.subscribers[Symbol.iterator]();!(l=(c=h.next()).done);l=!0){var u=c.value,f=u.data(Kt.EXT_NAME.GRID,"mainData");f&&(u.modifyBox($t.BOX_STANDARD.PADDING_TOP,f.padding.top),u.modifyBox($t.BOX_STANDARD.PADDING_RIGHT,f.padding.right),u.modifyBox($t.BOX_STANDARD.PADDING_BOTTOM,f.padding.bottom),u.modifyBox($t.BOX_STANDARD.PADDING_LEFT,f.padding.left))}}catch(t){s=!0,d=t}finally{try{l||null==h.return||h.return()}finally{if(s)throw d}}}}]),n}(),te=androme.lib.constant,ee=androme.lib.util,ne=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.extensions.Table),i(n,[{key:"processNode",value:function(){var t=d(o(n.prototype),"processNode",this).call(this),e=this.node;if(ee.convertInt(e.app("columnCount"))>1){var i=!!e.data(te.EXT_NAME.TABLE,"expand");if(e.each(function(t){if("0px"===t.css("width"))t.android("layout_width","0px"),t.app("layout_columnWeight",(t.element.colSpan||1).toString());else{var e=t.data(te.EXT_NAME.TABLE,"expand"),n=!!t.data(te.EXT_NAME.TABLE,"exceed"),r=!!t.data(te.EXT_NAME.TABLE,"downsized");if(null!=e)if(e){var a=ee.convertFloat(t.data(te.EXT_NAME.TABLE,"percent"))/100;a>0&&(t.android("layout_width","0px"),t.app("layout_columnWeight",ee.trimEnd(a.toFixed(3),"0")),i=!0)}else t.app("layout_columnWeight","0");r&&(n?t.app("layout_columnWeight","0.01"):(t.textElement&&t.android("maxLines","1"),t.has("width")&&t.toInt("width")<t.bounds.width&&t.android("layout_width",ee.formatPX(t.bounds.width))))}}),i&&!e.hasWidth){var r=0;e.ascend().some(function(t){return!!t.hasWidth&&(r=t.bounds.width,!0)}),e.bounds.width>=r?e.android("layout_width","match_parent"):e.css("width",ee.formatPX(e.bounds.width))}}return t}},{key:"processChild",value:function(){var t=this.node,e=ee.convertInt(t.data(te.EXT_NAME.TABLE,"rowSpan")),n=ee.convertInt(t.data(te.EXT_NAME.TABLE,"colSpan")),i=ee.convertInt(t.data(te.EXT_NAME.TABLE,"spaceSpan"));if(e>1&&t.app("layout_rowSpan",e.toString()),n>1&&t.app("layout_columnSpan",n.toString()),i>0){var r=this.parent;this.application.viewController.appendAfter(t.id,this.application.viewController.renderNodeStatic(g.SPACE,r.renderDepth+1,{app:{layout_columnSpan:i.toString()}},"wrap_content","wrap_content"))}return{output:"",complete:!0}}}]),n}(),ie=androme.lib.enumeration,re=androme.lib.util,ae=androme.lib.color,oe=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.extensions.Button),i(n,[{key:"processNode",value:function(){var t=this.node,e=this.parent,n=re.hasValue(t.dataset.target),i=t.element,r=Object.assign({},this.options[i.id]),a=ae.parseRGBA(t.css("backgroundColor"),t.css("opacity"));re.overwriteDefault(r,"android","backgroundTint",a.length>0?"@color/".concat(et.addColor(a[0],a[2])):"?attr/colorAccent"),t.hasBit("excludeProcedure",ie.NODE_PROCEDURE.ACCESSIBILITY)&&re.overwriteDefault(r,"android","focusable","false");var o="";switch(i.tagName){case"IMG":o=et.addImageSrcSet(i,Mt);break;case"INPUT":o="image"===i.type?et.addImage({mdpi:i.src},Mt):et.addImageURL(t.css("backgroundImage"),Mt);break;case"BUTTON":o=et.addImageURL(t.css("backgroundImage"),Mt)}""!==o&&re.overwriteDefault(r,"app","srcCompat","@drawable/".concat(o));var l=this.application.viewController.renderNodeStatic(xt,n?-1:e.renderDepth+1,r,"wrap_content","wrap_content",t);if(t.nodeType=ie.NODE_STANDARD.BUTTON,t.excludeResource|=ie.NODE_RESOURCE.BOX_STYLE|ie.NODE_RESOURCE.ASSET,!t.pageflow||n)if(t.auto=!1,this.setFrameGravity(t),n){var s=e.stringId;if(e.controlName===St){var d=e.data(Dt.TOOLBAR,"outerParent");d&&(s=d)}t.app("layout_anchor",s),t.app("layout_anchorGravity",t.android("layout_gravity")),t.delete("android","layout_gravity"),t.excludeProcedure|=ie.NODE_PROCEDURE.ALIGNMENT,t.render(t)}else t.render(e);else t.render(e);return{output:l,complete:!0}}},{key:"afterInsert",value:function(){var t=this.node;t.android("layout_width","wrap_content"),t.android("layout_height","wrap_content")}},{key:"setFrameGravity",value:function(t){var e=this.application.settings,n=t.documentParent,i=t.horizontalBias(e),r=t.verticalBias(e),a=[];i<.5?a.push(B("left",e)):i>.5?a.push(B("right",e)):a.push("center_horizontal"),r<.5?(a.push("top"),t.app("layout_dodgeInsetEdges","top")):r>.5?a.push("bottom"):a.push("center_vertical"),t.android("layout_gravity",2===a.filter(function(t){return-1!==t.indexOf("center")}).length?"center":a.join("|")),i>0&&i<1&&.5!==i&&(i<.5?t.css("marginLeft",re.formatPX(Math.floor(t.bounds.left-n.box.left))):t.css("marginRight",re.formatPX(Math.floor(n.box.right-t.bounds.right)))),r>0&&r<1&&.5!==r&&(r<.5?t.css("marginTop",re.formatPX(Math.floor(t.bounds.top-n.box.top))):t.css("marginBottom",re.formatPX(Math.floor(n.box.bottom-t.bounds.bottom))))}}]),n}(),le=androme.lib.enumeration,se={id:/^@\+id\/\w+$/,title:/^.+$/,titleCondensed:/^.+$/,icon:/^@drawable\/.+$/,onClick:/^.+$/,showAsAction:/^(ifRoom|never|withText|always|collapseActionView)$/,actionLayout:/^@layout\/.+$/,actionViewClass:/^.+$/,actionProviderClass:/^.+$/,alphabeticShortcut:/^[a-zA-Z]+$/,alphabeticModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,numericShortcut:/^[0-9]+$/,numericModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,checkable:/^(true|false)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^[0-9]+$/},de={id:/^@\+id\/\w+$/,checkableBehavior:/^(none|all|single)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^[0-9]+$/},ce=["showAsAction","actionViewClass","actionProviderClass"],he=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.extensions.Nav),i(n,[{key:"condition",value:function(){return this.included()}},{key:"processNode",value:function(){var t=this,e=this.node,n=this.application.viewController.renderNodeStatic(Bt,0,{},"","",e,!0);return e.documentRoot=!0,e.nodeType=le.NODE_STANDARD.BLOCK,e.excludeResource|=le.NODE_RESOURCE.ALL,e.excludeProcedure|=le.NODE_PROCEDURE.ALL,e.rendered=!0,e.cascade().forEach(function(e){return t.subscribersChild.add(e)}),{output:n,complete:!0}}},{key:"processChild",value:function(){var t=this,e=this.node,n=this.parent;if(e.plainText)return e.hide(),{output:"",complete:!0,next:!0};var i=e.element,r={android:{},app:{}},a=Ct,o="",l=!1,s=!1;if(e.children.some(function(t){return(!t.inlineElement||!t.blockStatic)&&t.children.length>0})){if(e.children.some(function(t){return"NAV"===t.tagName}))""!==i.title?o=i.title:Array.from(e.element.childNodes).some(function(t){return"#text"===t.nodeName?!(!t.textContent||""===(o=t.textContent.trim())):"NAV"!==t.tagName&&(o=t.innerText.trim(),!0)}),e.each(function(t){return"NAV"!==t.tagName&&t.hide()});else if("NAV"===e.tagName)a=Bt,l=!0;else{a=kt;var d="";e.children.every(function(e){return t.hasInputType(e,"radio")})?d="single":e.children.every(function(e){return t.hasInputType(e,"checkbox")})&&(d="all"),r.android.checkableBehavior=d}s=!0}else""===n.android("checkableBehavior")&&this.hasInputType(e,"checkbox")&&(r.android.checkable="true"),o=(i.title||i.innerText).trim();switch(a){case Ct:if(this.parseDataSet(se,i,r),""===e.android("icon")){var c=et.addImageURL(i.style.backgroundImage,Pt);if(""!==c)r.android.icon="@drawable/".concat(c);else{var h=e.children.find(function(t){return t.imageElement});h&&""!==(c=et.addImageSrcSet(h.element,Pt))&&(r.android.icon="@drawable/".concat(c))}}break;case kt:this.parseDataSet(de,i,r)}if(""===e.android("title")&&""!==o){var u=et.addString(o,"",this.application.settings);""!==u&&(o="@string/".concat(u)),r.android.title=o}r.android.id?e.controlName=a:e.setNodeType(a);var f=this.application.viewController.renderNodeStatic(a,n.renderDepth+1,r,"","",e,s);return e.excludeResource|=le.NODE_RESOURCE.ALL,e.excludeProcedure|=le.NODE_PROCEDURE.ALL,e.rendered=!0,{output:f,complete:!0,next:l}}},{key:"afterRender",value:function(){d(o(n.prototype),"afterRender",this).call(this),this.included(this.node.element)&&(this.application.layoutProcessing.pathname="res/menu")}},{key:"parseDataSet",value:function(t,e,n){for(var i in e.dataset){var r=e.dataset[i];if(r&&t[i]){var a=r.match(t[i]);if(a)n[null!=this.options.appCompat&&!0!==this.options.appCompat||!ce.includes(i)?"android":"app"][i]=Array.from(new Set(a)).join("|")}}}},{key:"hasInputType",value:function(t,e){return t.children.length>0&&t.children.some(function(t){return t.element.type===e})}}]),n}(),ue=androme.lib.enumeration,fe=androme.lib.dom,pe=function(t){function n(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;return e(this,n),s(this,o(n).call(this,t,i,r,a))}return a(n,androme.lib.base.Extension),i(n,[{key:"processNode",value:function(){var t=this.node,e=this.parent,n=this.application.viewController.renderGroup(t,e,wt);t.apply(this.options[t.element.id]),t.nodeType=ue.NODE_STANDARD.BLOCK,t.excludeResource|=ue.NODE_RESOURCE.ASSET;var i=fe.getNodeFromElement(fe.locateExtension(t.element,Dt.TOOLBAR));if(i){var r=this.application.getExtension(Dt.TOOLBAR);r&&r.options[i.element.id]&&r.options[i.element.id].collapsingToolbar&&t.android("fitsSystemWindows","true")}return{output:n,complete:!1}}},{key:"afterInsert",value:function(){var t=this.node;t.documentRoot&&(t.android("layout_width","match_parent"),t.android("layout_height","match_parent"))}}]),n}(),me=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>",'\t<style name="{@appTheme}" parent="{@parentTheme}">',"!1",'\t\t<item name="{name}">{value}</item>',"!1","\t</style>",'\t<style name="{@appTheme}.NoActionBar">','\t\t<item name="windowActionBar">false</item>','\t\t<item name="windowNoTitle">true</item>',"\t</style>",'\t<style name="AppTheme.AppBarOverlay" parent="{@appBarOverlay}" />','\t<style name="AppTheme.PopupOverlay" parent="{@popupOverlay}" />',"</resources>","!0"].join("\n"),ge=androme.lib.enumeration,ve=androme.lib.constant,ye=androme.lib.util,be=androme.lib.dom,Ae=androme.lib.xml,Te=function(t){function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;return e(this,n),(i=s(this,o(n).call(this,t,r,a,l))).require(Dt.MENU),i}return a(n,androme.lib.base.Extension),i(n,[{key:"init",value:function(t){if(this.included(t)&&(Array.from(t.children).some(function(t){return"NAV"===t.tagName&&!ye.includes(t.dataset.ext,ve.EXT_NAME.EXTERNAL)&&(t.dataset.ext=(ye.hasValue(t.dataset.ext)?"".concat(t.dataset.ext,", "):"")+ve.EXT_NAME.EXTERNAL,!0)}),t.dataset.target)){var e=document.getElementById(t.dataset.target);e&&t.parentElement!==e&&!ye.includes(e.dataset.ext,Dt.COORDINATOR)&&this.application.elements.add(t)}return!1}},{key:"processNode",value:function(){var t=this.application.viewController,e=this.node,n=this.parent,i=ye.hasValue(e.dataset.target),r=Object.assign({},this.options[e.element.id]),a=Object.assign({},r.toolbar),o=Object.assign({},r.appBar),l=Object.assign({},r.collapsingToolbar),s=null!=be.locateExtension(e.element,Dt.MENU),d=e.has("backgroundImage"),c=[],h=[],u="",f=i?0:e.depth,p=e.children.filter(function(t){return t.auto}).length;Array.from(e.element.children).forEach(function(t){if("IMG"===t.tagName){if(ye.hasValue(t.dataset.navigationIcon)){var e=et.addImageSrcSet(t,Pt);""!==e&&(ye.overwriteDefault(toolbar,"app","navigationIcon","@drawable/".concat(e)),"none"!==be.getStyle(t).display&&p--)}if(ye.hasValue(t.dataset.collapseIcon)){var n=et.addImageSrcSet(t,Pt);""!==n&&(ye.overwriteDefault(toolbar,"app","collapseIcon","@drawable/".concat(n)),"none"!==be.getStyle(t).display&&p--)}}if(ye.hasValue(t.dataset.target))p--;else{var i=be.getNodeFromElement(t);if(i)switch(t.dataset.targetModule){case"appBar":c.push(i),p--;break;case"collapsingToolbar":h.push(i),p--}}});var m=null!=r.collapsingToolbar||h.length>0,v=null!=r.appBar||c.length>0||m,y="",b="";m?ye.overwriteDefault(a,"app","layout_collapseMode","pin"):(v||ye.overwriteDefault(a,"android","fitsSystemWindows","true"),ye.overwriteDefault(a,"app","popupTheme","@style/ThemeOverlay.AppCompat.Light"),d?(ye.overwriteDefault(c.length>0?o:a,"android","background","@drawable/".concat(et.addImageURL(e.css("backgroundImage")))),e.excludeResource|=ge.NODE_RESOURCE.IMAGE_SOURCE):ye.overwriteDefault(a,"app","layout_scrollFlags","scroll|enterAlways")),c.length>0?ye.overwriteDefault(o,"android","layout_height","?android:attr/actionBarSize"):(ye.overwriteDefault(a,"android","layout_height","?android:attr/actionBarSize"),e.excludeProcedure|=ge.NODE_PROCEDURE.LAYOUT),s&&v&&(a.app.popupTheme&&(b=a.app.popupTheme.replace("@style/","")),a.app.popupTheme="@style/AppTheme.PopupOverlay");var A=f+(v?1:0)+(m?1:0);if(u=t.renderNodeStatic(St,A,a,"match_parent","wrap_content",e,p>0),m&&d){var T=Object.assign({},r.backgroundImage),_="center";switch(e.css("backgroundSize")){case"cover":case"100% auto":case"auto 100%":_="centerCrop";break;case"contain":case"100% 100%":_="fitXY";break;case"auto":_="matrix"}ye.overwriteDefault(T,"android","id","".concat(e.stringId,"_image")),ye.overwriteDefault(T,"android","src","@drawable/".concat(et.addImageURL(e.css("backgroundImage")))),ye.overwriteDefault(T,"android","scaleType",_),ye.overwriteDefault(T,"android","fitsSystemWindows","true"),ye.overwriteDefault(T,"app","layout_collapseMode","parallax"),u=t.renderNodeStatic(g.IMAGE,A,T,"match_parent","match_parent")+u,e.excludeResource|=ge.NODE_RESOURCE.IMAGE_SOURCE}var N="",D=null,E=null;if(v&&(ye.overwriteDefault(o,"android","id","".concat(e.stringId,"_appbar")),ye.overwriteDefault(o,"android","layout_height",e.viewHeight>0?S("appbar","height",ye.formatPX(e.viewHeight),this.application.settings):"wrap_content"),ye.overwriteDefault(o,"android","fitsSystemWindows","true"),s?(o.android.theme&&(y=o.android.theme),o.android.theme="@style/AppTheme.AppBarOverlay",this.createResourceTheme(y,b)):ye.overwriteDefault(o,"android","theme","@style/ThemeOverlay.AppCompat.Dark.ActionBar"),(D=this.createPlaceholder(this.application.cache.nextId,e,c)).parent=e.parent,D.nodeId=O(o.android.id),this.application.cache.append(D),N=t.renderNodeStatic(It,i?-1:f,o,"match_parent","wrap_content",D,!0),m&&(f++,ye.overwriteDefault(l,"android","id","".concat(e.stringId,"_collapsingtoolbar")),ye.overwriteDefault(l,"android","fitsSystemWindows","true"),d||ye.overwriteDefault(l,"app","contentScrim","?attr/colorPrimary"),ye.overwriteDefault(l,"app","layout_scrollFlags","scroll|exitUntilCollapsed"),ye.overwriteDefault(l,"app","toolbarId",e.stringId),(E=this.createPlaceholder(this.application.cache.nextId,e,h)).parent=D,E))){E.each(function(t){return t.dataset.target=E.nodeId}),this.application.cache.append(E);var R=t.renderNodeStatic(Ot,i&&!v?-1:f,l,"match_parent","match_parent",E,!0);N=Ae.replacePlaceholder(N,D.id,R)}return D?(u=E?Ae.replacePlaceholder(N,E.id,u):Ae.replacePlaceholder(N,D.id,u),D.render(i?D:n),E?(E.parent=D,E.render(D),e.parent=E):e.parent=D,e.data(Dt.TOOLBAR,"outerParent",D.stringId),e.render(e.parent)):E?(E.render(i?E:n),e.parent=E,e.render(E)):e.render(i?e:n),e.nodeType=ge.NODE_STANDARD.BLOCK,e.excludeResource|=ge.NODE_RESOURCE.FONT_STYLE,{output:u,complete:!1}}},{key:"processChild",value:function(){var t=this.node;return t.imageElement&&(ye.hasValue(t.dataset.navigationIcon)||ye.hasValue(t.dataset.collapseIcon))?(t.hide(),{output:"",complete:!0,next:!0}):{output:"",complete:!1}}},{key:"beforeInsert",value:function(){var t=this.node,e=ye.optional(be.locateExtension(t.element,Dt.MENU),"dataset.layoutName");if(""!==e){var n=Object.assign({},this.options[t.element.id]),i=Object.assign({},n.toolbar);ye.overwriteDefault(i,"app","menu","@menu/".concat(e)),t.app("menu",i.app.menu)}}},{key:"createResourceTheme",value:function(t,e){var n=Object.assign({},this.options.resource);ye.overwriteDefault(n,"","appTheme","AppTheme"),ye.overwriteDefault(n,"","parentTheme","Theme.AppCompat.Light.DarkActionBar");var i={0:[{appTheme:n.appTheme,parentTheme:n.parentTheme,appBarOverlay:t||"ThemeOverlay.AppCompat.Dark.ActionBar",popupOverlay:e||"ThemeOverlay.AppCompat.Light",1:[]}]};ye.overwriteDefault(n,"output","path","res/values"),ye.overwriteDefault(n,"output","file","".concat(Dt.TOOLBAR,".xml")),this.application.resourceHandler.addTheme(me,i,n)}},{key:"createPlaceholder",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=new H(t);i.init(),i.api=e.api;var r=!0,a=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){l.value.parent=i}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return i.inherit(e,"dimensions"),i.auto=!1,i.excludeResource|=ge.NODE_RESOURCE.ALL,i}}]),n}(),_e=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>",'\t<style name="{@appTheme}" parent="{@parentTheme}">',"!1",'\t\t<item name="{name}">{value}</item>',"!1","\t</style>","</resources>","!0"].join("\n"),Ne=androme.lib.enumeration,De=androme.lib.util,Ee=androme.lib.dom,Re=function(t){function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;return e(this,n),(i=s(this,o(n).call(this,t,r,a,l))).require(Dt.MENU),i}return a(n,androme.lib.base.Extension),i(n,[{key:"processNode",value:function(){var t=this,e=this.node,n=this.parent,i=Object.assign({},this.options[e.element.id]);De.overwriteDefault(i,"android","background","?android:attr/windowBackground");for(var r=this.application.viewController.renderNodeStatic(Lt,e.depth,i,n.is(Ne.NODE_STANDARD.CONSTRAINT)?"0px":"match_parent","wrap_content",e),a=5;a<e.children.length;a++)e.children[a].hide(),e.children[a].cascade().forEach(function(t){return t.hide()});return e.cascade().forEach(function(e){return t.subscribersChild.add(e)}),e.render(n),e.nodeType=Ne.NODE_STANDARD.BLOCK,e.excludeResource|=Ne.NODE_RESOURCE.ASSET,this.createResourceTheme(),{output:r,complete:!0}}},{key:"beforeInsert",value:function(){var t=this.node,e=De.optional(Ee.locateExtension(t.element,Dt.MENU),"dataset.layoutName");if(""!==e){var n=Object.assign({},this.options[t.element.id]);De.overwriteDefault(n,"app","menu","@menu/".concat(e)),t.app("menu",n.app.menu)}}},{key:"afterInsert",value:function(){var t=this.node;t.renderParent.has("width")||t.renderParent.android("layout_width","match_parent"),t.renderParent.has("height")||t.renderParent.android("layout_height","match_parent")}},{key:"createResourceTheme",value:function(){var t=Object.assign({},this.options.resource);De.overwriteDefault(t,"","appTheme","AppTheme"),De.overwriteDefault(t,"","parentTheme","Theme.AppCompat.Light.DarkActionBar");var e={0:[{appTheme:t.appTheme,parentTheme:t.parentTheme,1:[]}]};De.overwriteDefault(t,"output","path","res/values"),De.overwriteDefault(t,"output","file","".concat(Dt.BOTTOM_NAVIGATION,".xml")),this.application.resourceHandler.addTheme(_e,e,t)}}]),n}(),we=["!0",'<?xml version="1.0" encoding="utf-8"?>',"<resources>",'\t<style name="{@appTheme}" parent="{@parentTheme}">','\t\t<item name="android:windowDrawsSystemBarBackgrounds">true</item>','\t\t<item name="android:statusBarColor">@android:color/transparent</item>','\t\t<item name="android:windowTranslucentStatus">true</item>',"!1",'\t\t<item name="{name}">{value}</item>',"!1","\t</style>","</resources>","!0"].join("\n"),Ie=androme.lib.enumeration,Oe=androme.lib.constant,Se=androme.lib.util,xe=androme.lib.dom,Le=function(t){function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;return e(this,n),(i=s(this,o(n).call(this,t,r,a,l))).documentRoot=!0,i.require(Oe.EXT_NAME.EXTERNAL,!0),i.require(Dt.MENU),i.require(Dt.COORDINATOR),i}return a(n,androme.lib.base.Extension),i(n,[{key:"init",value:function(t){return!!(this.included(t)&&t.children.length>0)&&(Array.from(t.children).forEach(function(t){"NAV"!==t.tagName||Se.includes(t.dataset.ext,Oe.EXT_NAME.EXTERNAL)||(t.dataset.ext=(Se.hasValue(t.dataset.ext)?"".concat(t.dataset.ext,", "):"")+Oe.EXT_NAME.EXTERNAL)}),this.application.elements.add(t),!0)}},{key:"processNode",value:function(){var t=this.node,e=Object.assign({},this.options.self);if(xe.locateExtension(t.element,Dt.MENU))Se.overwriteDefault(e,"android","fitsSystemWindows","true"),this.createResourceTheme();else{var n=Object.assign({},this.options.navigationView);Se.overwriteDefault(n,"android","layout_gravity",B("left",this.application.settings));var i=t.children[t.children.length-1];i.android("layout_gravity",n.android.layout_gravity),i.android("layout_height","match_parent"),i.auto=!1}var r=this.application.viewController.renderNodeStatic(Et,t.depth,e,"match_parent","match_parent",t,!0);return t.documentRoot=!0,t.rendered=!0,t.nodeType=Ie.NODE_STANDARD.BLOCK,t.excludeResource|=Ie.NODE_RESOURCE.FONT_STYLE,{output:r,complete:!0}}},{key:"beforeInsert",value:function(){var t=this.application,e=this.node;if(t.renderQueue[e.nodeId]){var n=t.cacheSession.locate(function(t){return t.parent===e.parent&&t.controlName===wt});n&&(t.renderQueue[n.nodeId]=t.renderQueue[e.nodeId],delete t.renderQueue[e.nodeId])}var i=Se.optional(xe.locateExtension(e.element,Dt.MENU),"dataset.layoutName"),r=Se.optional(xe.locateExtension(e.element,Oe.EXT_NAME.EXTERNAL),"dataset.layoutName"),a=Object.assign({},this.options.navigation);if(""!==i&&Se.overwriteDefault(a,"app","menu","@menu/".concat(i)),""!==r&&Se.overwriteDefault(a,"app","headerLayout","@layout/".concat(r)),""!==i||""!==r){Se.overwriteDefault(a,"android","id","".concat(e.stringId,"_navigation")),Se.overwriteDefault(a,"android","fitsSystemWindows","true"),Se.overwriteDefault(a,"android","layout_gravity",B("left",this.application.settings));var o=t.viewController.renderNodeStatic(Rt,e.depth+1,a,"wrap_content","match_parent");t.addRenderQueue(e.id.toString(),[o])}}},{key:"afterInsert",value:function(){var t=xe.locateExtension(this.node.element,Oe.EXT_NAME.EXTERNAL);if(t){var e=xe.getNodeFromElement(t);e&&!e.hasHeight&&e.android("layout_height","wrap_content")}}},{key:"createResourceTheme",value:function(){var t=Object.assign({},this.options.resource);Se.overwriteDefault(t,"","appTheme","AppTheme"),Se.overwriteDefault(t,"","parentTheme","Theme.AppCompat.Light.NoActionBar");var e={0:[{appTheme:t.appTheme,parentTheme:t.parentTheme,1:[]}]};Se.overwriteDefault(t,"output","path","res/values-v21"),Se.overwriteDefault(t,"output","file","".concat(Dt.DRAWER,".xml")),this.application.resourceHandler.addTheme(we,e,t)}}]),n}();function Be(){var t=ke.application;return!(!t.settings.autoCloseOnWrite||t.loading||t.closed)&&(t.finalize(),!0)}var Ce,ke,Pe,Me,Xe,Ge,He=androme.lib.enumeration.APP_FRAMEWORK,We=!1,ze={create:function(){var t,e=androme.lib.constant.EXT_NAME;return Xe=Object.assign({},Nt),Ce=new androme.lib.base.Application(He.ANDROID),ke=new ht,Pe=new _t(Xe),Me=new et(Pe),r(t={},e.EXTERNAL,new Xt(e.EXTERNAL,He.ANDROID)),r(t,e.ORIGIN,new Gt(e.ORIGIN,He.ANDROID)),r(t,e.CUSTOM,new Ht(e.CUSTOM,He.ANDROID)),r(t,e.ACCESSIBILITY,new Ft(e.ACCESSIBILITY,He.ANDROID)),r(t,e.LIST,new Zt(e.LIST,He.ANDROID,["UL","OL","DL","DIV"])),r(t,e.TABLE,new ne(e.TABLE,He.ANDROID,["TABLE"])),r(t,e.GRID,new Qt(e.GRID,He.ANDROID,["FORM","UL","OL","DL","DIV","TABLE","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET","SPAN"])),r(t,Dt.FAB,new oe(Dt.FAB,He.ANDROID,["BUTTON","INPUT","IMG"])),r(t,Dt.MENU,new he(Dt.MENU,He.ANDROID,["NAV"])),r(t,Dt.COORDINATOR,new pe(Dt.COORDINATOR,He.ANDROID)),r(t,Dt.TOOLBAR,new Te(Dt.TOOLBAR,He.ANDROID)),r(t,Dt.BOTTOM_NAVIGATION,new Re(Dt.BOTTOM_NAVIGATION,He.ANDROID)),r(t,Dt.DRAWER,new Le(Dt.DRAWER,He.ANDROID)),Ge=t,We=!0,{framework:He.ANDROID,application:Ce,viewController:ke,resourceHandler:Me,nodeObject:H,builtInExtensions:Ge,settings:Xe}},cached:function(){return We?{framework:He.ANDROID,application:Ce,viewController:ke,resourceHandler:Me,nodeObject:H,builtInExtensions:Ge,settings:Xe}:ze.create()},system:{customize:function(t,e,n){if(R[t]){var i=R[t].customizations;null==i[e]&&(i[e]={}),Object.assign(i[e],n)}},addXmlNs:function(t,e){b[t]=e},writeLayoutAllXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We){var e=ke.application;if(e.closed||Be())return Me.file.layoutAllToXml(e.viewData,t)}return""},writeResourceAllXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceAllToXml(t);return""},writeResourceStringXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceStringToXml(t);return""},writeResourceArrayXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceStringArrayToXml(t);return""},writeResourceFontXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceFontToXml(t);return""},writeResourceColorXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceColorToXml(t);return""},writeResourceStyleXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceStyleToXml(t);return""},writeResourceDimenXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceDimenToXml(t);return""},writeResourceDrawableXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(We&&(ke.application.closed||Be()))return Me.file.resourceDrawableToXml(t);return""}}};return ze}();
