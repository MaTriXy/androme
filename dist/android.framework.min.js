var android=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u,f;!function(t){t[t.PIE=28]="PIE",t[t.OREO_1=27]="OREO_1",t[t.OREO=26]="OREO",t[t.NOUGAT_1=25]="NOUGAT_1",t[t.NOUGAT=24]="NOUGAT",t[t.MARSHMALLOW=23]="MARSHMALLOW",t[t.LOLLIPOP_1=22]="LOLLIPOP_1",t[t.LOLLIPOP=21]="LOLLIPOP",t[t.KITKAT_1=20]="KITKAT_1",t[t.KITKAT=19]="KITKAT",t[t.JELLYBEAN_2=18]="JELLYBEAN_2",t[t.JELLYBEAN_1=17]="JELLYBEAN_1",t[t.JELLYBEAN=16]="JELLYBEAN",t[t.ICE_CREAM_SANDWICH_1=15]="ICE_CREAM_SANDWICH_1",t[t.ICE_CREAM_SANDWICH=14]="ICE_CREAM_SANDWICH",t[t.ALL=0]="ALL",t[t.LATEST=28]="LATEST"}(u||(u={})),function(t){t[t.LDPI=120]="LDPI",t[t.MDPI=160]="MDPI",t[t.HDPI=240]="HDPI",t[t.XHDPI=320]="XHDPI",t[t.XXHDPI=480]="XXHDPI",t[t.XXXHDPI=640]="XXXHDPI"}(f||(f={}));var p,m,g={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",SELECT:"Spinner",RANGE:"SeekBar",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",LINE:"View",SPACE:"Space",WEB_VIEW:"WebView",FRAME:"FrameLayout",LINEAR:"LinearLayout",RADIO_GROUP:"RadioGroup",GRID:"GridLayout",RELATIVE:"RelativeLayout",CONSTRAINT:"android.support.constraint.ConstraintLayout",SCROLL_HORIZONTAL:"HorizontalScrollView",SCROLL_VERTICAL:"android.support.v4.widget.NestedScrollView",GUIDELINE:"android.support.constraint.Guideline"},v={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},y={HORIZONTAL:"horizontal",VERTICAL:"vertical"},b={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",tools:"http://schemas.android.com/tools"},A={"sans-serif":u.ICE_CREAM_SANDWICH,"sans-serif-thin":u.JELLYBEAN,"sans-serif-light":u.JELLYBEAN,"sans-serif-condensed":u.JELLYBEAN,"sans-serif-condensed-light":u.JELLYBEAN,"sans-serif-medium":u.LOLLIPOP,"sans-serif-black":u.LOLLIPOP,"sans-serif-smallcaps":u.LOLLIPOP,"serif-monospace":u.LOLLIPOP,serif:u.LOLLIPOP,casual:u.LOLLIPOP,cursive:u.LOLLIPOP,monospace:u.LOLLIPOP,"sans-serif-condensed-medium":u.OREO},T={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},_={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif"},N={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},E=["STRONG","B","EM","CITE","DFN","I","BIG","SMALL","FONT","BLOCKQUOTE","TT","A","U","SUP","SUB","STRIKE","H1","H2","H3","H4","H5","H6","DEL","LABEL","BR","PLAINTEXT"],D=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"],R=(r(p={},u.PIE,{android:[],app:[],customizations:{}}),r(p,u.OREO_1,{android:[],app:[],customizations:{}}),r(p,u.OREO,{android:["fontWeight","layout_marginHorizontal","layout_marginVertical","paddingHorizontal","paddingVertical"],app:[],customizations:{}}),r(p,u.NOUGAT_1,{android:[],app:[],customizations:{}}),r(p,u.NOUGAT,{android:[],app:[],customizations:{}}),r(p,u.MARSHMALLOW,{android:[],app:[],customizations:{}}),r(p,u.LOLLIPOP_1,{android:[],app:[],customizations:{}}),r(p,u.LOLLIPOP,{android:["layout_columnWeight"],app:[],customizations:{}}),r(p,u.KITKAT_1,{android:[],app:[],customizations:{}}),r(p,u.KITKAT,{android:[],app:[],customizations:{}}),r(p,u.JELLYBEAN_2,{android:[],app:[],customizations:{}}),r(p,u.JELLYBEAN_1,{android:["labelFor"],app:[],customizations:{}}),r(p,u.JELLYBEAN,{android:[],app:[],customizations:{}}),r(p,u.ICE_CREAM_SANDWICH_1,{android:[],app:[],customizations:{}}),r(p,u.ICE_CREAM_SANDWICH,{android:[],app:[],customizations:{}}),r(p,u.ALL,{android:[],app:[],customizations:{SUB:{android:{layout_marginTop:"6px"}},SUP:{android:{layout_marginTop:"-4px"}},Button:{android:{textAllCaps:"false"}}}}),p);function I(){m={android:["parent"]}}function O(t,e){null==m&&I();var n=e,i=1,r=e.match(/^(\w+)_([0-9]+)$/);for(r&&(n=r[1],i=parseInt(r[2])),null==m[t]&&(m[t]=[]);;){if(!m[t].includes(e)){m[t].push(e);break}e="".concat(n,"_").concat(i++)}return e}function w(t){return t?t.replace(/@\+?id\//,""):""}function S(t,e,n,i){var r=i.dimensResourceValue;return void 0===r||r?"{%".concat(t.toLowerCase(),",").concat(e,",").concat(n,"}"):n}function x(t,e){var n=e.density,i=void 0===n?160:n,r=e.convertPixels,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(void 0===r?"dp":r){case"dp":return t.replace(/("|>)(-)?([0-9]+(?:\.[0-9]+)?px)("|<)/g,function(t){return(arguments.length<=1?void 0:arguments[1])+((arguments.length<=2?void 0:arguments[2])||"")+function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:160,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&!isNaN(t=parseFloat(t))?(t=(t/=e/160)>=1||0===t?Math.floor(t):t.toFixed(2))+(n?"sp":"dp"):"0dp"}(arguments.length<=3?void 0:arguments[3],i,a)+(arguments.length<=4?void 0:arguments[4])});default:return t}}function L(t,e,n){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toFixed(n))}function B(t,e){var n=e.supportRTL,i=e.targetAPI;return(void 0===n||n)&&(void 0===i?u.JELLYBEAN_1:i)>=u.JELLYBEAN_1&&(t=(t=t.replace(/left/g,"start").replace(/right/g,"end")).replace(/Left/g,"Start").replace(/Right/g,"End")),t}var C=androme.lib.enumeration,k=androme.lib.constant,P=androme.lib.util,M=androme.lib.dom,X=androme.lib.base.NodeList,G=function(t){return function(n){function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return e(this,r),(t=s(this,o(r).call(this,n,i))).api=0,t.children=[],t.renderChildren=[],t._namespaces=new Set(["android","app"]),t._boxAdjustment=M.getBoxModel(),t._boxReset=M.getBoxModel(),t._android={},t._app={},t.constraint={current:{}},t}return a(r,t),i(r,[{key:"attr",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.supported(t,e)?d(o(r.prototype),"attr",this).call(this,t,e,n,i):""}},{key:"android",value:function(t){return this.attr("android",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",!(arguments.length>2&&void 0!==arguments[2])||arguments[2]),this._android[t]||""}},{key:"app",value:function(t){return this.attr("app",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",!(arguments.length>2&&void 0!==arguments[2])||arguments[2]),this._app[t]||""}},{key:"apply",value:function(){var t=Object.assign({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});for(var e in d(o(r.prototype),"apply",this).call(this,t),t)this.formatted("".concat(e,'="').concat(t[e],'"'))}},{key:"formatted",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.match(/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/);n&&this.attr(n[1]||"_",n[2],n[3],e)}},{key:"anchor",value:function(t,e,n,i){(1===arguments.length||null==this.constraint.current[t]||!this.constraint.current[t].overwrite||n&&!this.constraint[n])&&(null==i&&(i="parent"===e||"true"===e),this[this.renderParent.controlName===g.RELATIVE?"android":"app"](t,e,i),n&&(this.constraint[n]=!0),this.constraint.current[t]={adjacent:e,orientation:n,overwrite:i})}},{key:"alignParent",value:function(t,e){if(this.renderParent.is(C.NODE_STANDARD.CONSTRAINT,C.NODE_STANDARD.RELATIVE)){var n=P.capitalize(B(t,e));return this.renderParent.controlName===g.CONSTRAINT?"parent"===this.app("layout_constraint".concat(n,"_to").concat(n,"Of")):"true"===this.android("layout_alignParent".concat(n))}return!1}},{key:"horizontalBias",value:function(t){var e=t.constraintPercentAccuracy,n=void 0===e?4:e,i=this.documentParent;return i!==this?L(Math.max(0,this.linear.left-i.box.left),Math.max(0,i.box.right-this.linear.right),n):.5}},{key:"verticalBias",value:function(t){var e=t.constraintPercentAccuracy,n=void 0===e?4:e,i=this.documentParent;return i!==this?L(Math.max(0,this.linear.top-i.box.top),Math.max(0,i.box.bottom-this.linear.bottom),n):.5}},{key:"modifyBox",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="number"==typeof t?P.convertEnum(t,C.BOX_STANDARD,v):"";if(0!==e&&(""!==i||P.isString(t))){var r=P.isString(t)?t:i.replace("layout_","");null!=this._boxReset[r]&&(null==e?this._boxReset[r]=1:(this._boxAdjustment[r]+=e,n||(this._boxAdjustment[r]=Math.max(0,this._boxAdjustment[r]))))}}},{key:"valueBox",value:function(t){var e=P.convertEnum(t,C.BOX_STANDARD,v);if(""!==e){var n=e.replace("layout_","");return[this._boxReset[n]||0,this._boxAdjustment[n]||0]}return[0,0]}},{key:"supported",value:function(t,e){if(this.api>0)for(var n=this.api+1;n<=u.LATEST;n++){var i=R[n];if(i&&i[t]&&i[t].includes(e))return!1}return!0}},{key:"combine",value:function(){for(var t=[],e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=!0,a=!1,o=void 0;try{for(var l,s=this._namespaces.values()[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var d=l.value,c=this["_".concat(d)];if(0===n.length||n.includes(d))for(var h in c)t.push("_"!==d?"".concat(d,":").concat(h,'="').concat(c[h],'"'):"".concat(h,'="').concat(c[h],'"'))}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return t.sort(function(t,e){return t.startsWith("android:id=")?-1:e.startsWith("android:id=")?1:t>e?1:-1})}},{key:"clone",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new r(t||this.id,this.element);return n.api=this.api,n.nodeId=this.nodeId,n.nodeType=this.nodeType,n.controlName=this.controlName,n.alignmentType=this.alignmentType,n.depth=this.depth,n.rendered=this.rendered,n.renderDepth=this.renderDepth,n.renderParent=this.renderParent,n.renderExtension=this.renderExtension,n.documentRoot=this.documentRoot,n.documentParent=this.documentParent,e&&(n.children=this.children.slice()),n.inherit(this,"initial","base","style","styleMap"),n}},{key:"setNodeType",value:function(t){for(var e in g)if(g[e]===t&&null!=C.NODE_STANDARD[e]){this.nodeType=C.NODE_STANDARD[e];break}if(this.controlName=t,""!==this.android("id")&&(this.nodeId=w(this.android("id"))),!this.nodeId){var n=this.element,i=P.trimNull(n.id||n.name);D.includes(i)&&(i+="_1"),this.nodeId=P.convertWord(O("android",i||"".concat(P.lastIndexOf(this.controlName,".").toLowerCase(),"_1"))),this.android("id",this.stringId)}}},{key:"setLayout",value:function(){var t=this;if(this.nodeType>=C.NODE_STANDARD.SCROLL_HORIZONTAL)this.android("layout_width",this.nodeType===C.NODE_STANDARD.SCROLL_HORIZONTAL&&this.has("width",C.CSS_STANDARD.UNIT)?this.css("width"):"wrap_content"),this.android("layout_height",this.nodeType===C.NODE_STANDARD.SCROLL_VERTICAL&&this.has("height",C.CSS_STANDARD.UNIT)?this.css("height"):"wrap_content");else if(this.renderParent.nodeType>=C.NODE_STANDARD.SCROLL_HORIZONTAL)this.renderParent.is(C.NODE_STANDARD.SCROLL_HORIZONTAL)?(this.android("layout_width","wrap_content",!1),this.android("layout_height","match_parent",!1)):(this.android("layout_width","match_parent",!1),this.android("layout_height","wrap_content",!1));else{var e=this.documentParent,n=this.renderParent,i=this.renderChildren,r=t.plainText?t.bounds.width:t.linear&&t.linear.width>0?t.linear.width:t.hasElement?t.element.clientWidth+t.borderLeftWidth+t.borderRightWidth+t.marginLeft+t.marginRight:0,a=t.plainText?t.bounds.height:t.linear&&t.linear.height>0?t.linear.height:t.hasElement?t.element.clientHeight+t.borderTopWidth+t.borderBottomWidth+t.marginTop+t.marginBottom:0,o=e.initial.box&&e.initial.box.width>0?e.initial.box.width:e.box&&e.box.width>0?e.box.width:e.element instanceof HTMLElement?e.element.offsetWidth-(e.paddingLeft+e.paddingRight+e.borderLeftWidth+e.borderRightWidth):0,l=e.initial.box&&e.initial.box.height>0?e.initial.box.height:e.box&&e.box.height>0?e.box.height:e.element instanceof HTMLElement?e.element.offsetHeight-(e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth):0,s=this.styleMap,d=this.constraint,c="TABLE"===this.tagName;if((this.documentBody||this.documentRoot&&!this.flex.enabled&&this.is(C.NODE_STANDARD.FRAME,C.NODE_STANDARD.CONSTRAINT,C.NODE_STANDARD.RELATIVE))&&(this.hasWidth||!this.block||d.layoutHorizontal||this.android("layout_width","match_parent",!1),this.hasHeight||!this.cascade().some(function(t){return!t.pageflow})||d.layoutHeight||d.layoutVertical||this.android("layout_height","match_parent",!1)),this.of(C.NODE_STANDARD.GRID,C.NODE_ALIGNMENT.PERCENT))this.android("layout_width","match_parent");else{if("0px"!==this.android("layout_width")){if(this.toInt("width")>0&&(!this.inlineStatic||n.is(C.NODE_STANDARD.GRID)||!this.has("width",0,{map:"initial"})))if(this.has("width",C.CSS_STANDARD.PERCENT))if("100%"===s.width)this.android("layout_width","match_parent",!1);else if(n.of(C.NODE_STANDARD.GRID,C.NODE_ALIGNMENT.PERCENT))this.android("layout_width","0px"),this.android("layout_columnWeight",(parseInt(s.width)/100).toFixed(2));else{this.android("layout_width",P.formatPX(Math.ceil(this.bounds.width)-(c?0:this.paddingLeft+this.paddingRight+this.borderLeftWidth+this.borderRightWidth)),!1)}else this.android("layout_width",P.convertInt(e.android("layout_width"))>0&&e.viewWidth>0&&this.viewWidth>=e.viewWidth?"match_parent":s.width,"TABLE"!==n.tagName);if(d.layoutWidth&&this.android("layout_width",d.layoutHorizontal?e.hasWidth?"match_parent":"wrap_content":this.bounds.width>=o?"match_parent":P.formatPX(this.bounds.width),!1),this.has("minWidth",C.CSS_STANDARD.UNIT)&&(this.android("layout_width","wrap_content",!1),this.android("minWidth",s.minWidth,!1)),!this.documentBody&&this.has("maxWidth",C.CSS_STANDARD.UNIT)&&this.layoutVertical){var h=this.css("maxWidth"),u=!0,f=!1,p=void 0;try{for(var m,g=i[Symbol.iterator]();!(u=(m=g.next()).done);u=!0){var v=m.value;v.is(C.NODE_STANDARD.TEXT)&&!v.has("maxWidth")&&v.android("maxWidth",h)}}catch(t){f=!0,p=t}finally{try{u||null==g.return||g.return()}finally{if(f)throw p}}}}if(""===this.android("layout_width")){var y=i.filter(function(t){return!t.autoMargin&&t.has("width",C.CSS_STANDARD.UNIT,{map:"initial"})});if(P.convertFloat(this.android("layout_columnWeight"))>0)this.android("layout_width","0px");else if(y.length>0&&y.some(function(e){return e.bounds.width>=t.box.width}))this.android("layout_width","wrap_content");else if(this.blockStatic&&this.hasAlign(C.NODE_ALIGNMENT.VERTICAL)||!this.documentRoot&&i.some(function(t){return t.hasAlign(C.NODE_ALIGNMENT.VERTICAL)&&!t.has("width")}))this.android("layout_width","match_parent");else{var b=Math.max.apply(null,i.filter(function(t){return t.inlineElement&&"right"!==t.float}).map(function(t){return t.linear.right}))||0,A=this.nodeType<C.NODE_STANDARD.INLINE||this.inlineElement||!this.pageflow||!this.siblingflow||"table"===this.display||e.flex.enabled||n.inlineElement&&!n.hasWidth&&!this.inlineElement&&this.nodeType>C.NODE_STANDARD.BLOCK||n.is(C.NODE_STANDARD.GRID);if(this.is(C.NODE_STANDARD.GRID)&&P.withinFraction(b,this.box.right))this.android("layout_width","wrap_content");else if(!A||this.blockStatic&&!this.has("maxWidth")){var T=this.previousSibling(),_=this.nextSibling();(r>=o||this.linearVertical&&!this.floating&&!this.autoMargin||this.is(C.NODE_STANDARD.FRAME)&&i.some(function(t){return t.blockStatic&&(t.autoMarginHorizontal||t.autoMarginLeft)})||!this.hasElement&&this.length>0&&i.some(function(e){return e.linear.width>=t.documentParent.box.width})&&!i.some(function(t){return t.plainText&&t.multiLine})||this.hasElement&&this.blockStatic&&(this.documentParent.documentBody||this.ascend().every(function(t){return t.blockStatic})||this.documentParent.blockStatic&&this.nodeType<=C.NODE_STANDARD.LINEAR&&(!T||!T.floating)&&(!_||!_.floating)))&&this.android("layout_width","match_parent")}this.android("layout_width","wrap_content",!1)}}}if("0px"!==this.android("layout_height")){if(this.toInt("height")>0&&(!this.inlineStatic||!this.has("height",0,{map:"initial"})))if(this.has("height",C.CSS_STANDARD.PERCENT))if("100%"===s.height)this.android("layout_height","match_parent",!1);else{var N=Math.ceil(this.bounds.height);c||(N-=this.paddingTop+this.paddingBottom+this.borderTopWidth+this.borderBottomWidth),this.android("layout_height",P.formatPX(N),!1)}else this.android("layout_height","hidden"===this.css("overflow")&&this.toInt("height")<this.box.height?"wrap_content":s.height);if(d.layoutHeight)if(d.layoutVertical)this.android("layout_height","wrap_content",!1);else if(this.documentRoot){var E=Math.max.apply(null,i.filter(function(t){return t.pageflow}).map(function(t){return t.linear.bottom}));this.android("layout_height",E>0?P.formatPX(E+this.paddingBottom+this.borderBottomWidth):"match_parent",!1)}else this.android("layout_height",this.actualHeight<l?P.formatPX(this.actualHeight):"match_parent",!1);if(this.has("minHeight",C.CSS_STANDARD.UNIT)&&(this.android("layout_height","wrap_content",!1),this.android("minHeight",s.minHeight,!1)),!this.documentBody&&this.has("maxHeight",C.CSS_STANDARD.UNIT)&&this.layoutHorizontal){var D=this.css("maxHeight"),R=!0,I=!1,O=void 0;try{for(var w,S=i[Symbol.iterator]();!(R=(w=S.next()).done);R=!0){var x=w.value;x.is(C.NODE_STANDARD.TEXT)&&!x.has("maxWidth")&&x.android("maxWidth",D)}}catch(t){I=!0,O=t}finally{try{R||null==S.return||S.return()}finally{if(I)throw O}}}}if(""===this.android("layout_height"))if(!(a>=l&&e.hasHeight)||this.inlineElement&&this.nodeType<C.NODE_STANDARD.INLINE||n.is(C.NODE_STANDARD.RELATIVE)&&n.inlineHeight){if(this.lineHeight>0&&!this.plainText&&!n.linearHorizontal){var L=this.actualHeight+n.paddingTop+n.paddingBottom;this.inlineElement&&L>0&&this.lineHeight>=L?(this.android("layout_height",P.formatPX(L)),this.modifyBox(C.BOX_STANDARD.PADDING_TOP,null),this.modifyBox(C.BOX_STANDARD.PADDING_BOTTOM,null)):this.block&&this.box.height>0&&this.lineHeight===this.box.height&&this.android("layout_height",P.formatPX(L))}this.android("layout_height","wrap_content",!1)}else this.android("layout_height","match_parent")}"hidden"===this.cssParent("visibility",!0)&&this.android("visibility","invisible")}},{key:"setAlignment",value:function(t){var e=this.renderParent,n=this.cssParent("textAlign"),i=B("left",t),r=B("right",t),a=this.styleMap.textAlign||"",o="",l="";function s(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=h(P.trimNull(t).split("|")).concat(n).filter(function(t){return t});switch(r.length){case 0:return"";case 1:return r[0];default:for(var a="",o="",l="",s=0;s<r.length;s++){var d=r[s];switch(d){case"center":a="center_horizontal",o="center_vertical";break;case"left":case"start":case"right":case"end":case"center_horizontal":a=d;break;case"top":case"bottom":case"center_vertical":o=d;break;default:l+=(""!==l?"|":"")+d}}var c=[a,o].filter(function(t){return t}),u=2===c.filter(function(t){return-1!==t.indexOf("center")}).length?"center":c.join("|");return""!==u?""!==l?"".concat(u,"|").concat(l):u:l}}function d(t){if(!t.blockWidth){var e=[],n="auto"===t.css("marginLeft"),a="auto"===t.css("marginRight"),o="auto"===t.css("marginTop"),l="auto"===t.css("marginBottom");if(n&&a?e.push("center_horizontal"):n&&!a?e.push(r):!n&&a&&e.push(i),o&&l?e.push("center_vertical"):o&&!l?e.push("bottom"):!o&&l&&e.push("top"),e.length>0){var d=t.blockWidth?"gravity":"layout_gravity";return t.android(d,s.apply(void 0,[t.android(d)].concat(e))),!0}}return!1}function c(t){switch(t){case"left":case"start":return i;case"right":case"end":return r;case"center":return"center_horizontal";default:return""}}function u(t){return""===a||t===r?t:a}if(!this.floating&&!e.of(C.NODE_STANDARD.RELATIVE,C.NODE_ALIGNMENT.MULTILINE))switch(this.styleMap.verticalAlign){case"top":case"text-top":o="top",e.linearHorizontal&&this.inlineHeight&&this.android("layout_height","match_parent");break;case"middle":(this.inline||"table-cell"===this.documentParent.css("display")||this.inlineStatic&&this.documentParent.lineHeight>0)&&(o="center_vertical");break;case"bottom":case"text-bottom":o="bottom"}""===o&&this.lineHeight>0&&!this.blockHeight&&(o="center_vertical"),(e.linearVertical||this.documentRoot&&this.linearVertical)&&("right"===this.float?this.android("layout_gravity",r):d(this)),this.hasAlign(C.NODE_ALIGNMENT.FLOAT)&&(this.hasAlign(C.NODE_ALIGNMENT.RIGHT)||this.renderChildren.some(function(t){return t.hasAlign(C.NODE_ALIGNMENT.RIGHT)})?l=r:(this.hasAlign(C.NODE_ALIGNMENT.LEFT)||this.renderChildren.some(function(t){return t.hasAlign(C.NODE_ALIGNMENT.LEFT)}))&&(l=i)),"TABLE"===e.tagName&&(this.android("layout_gravity",s(this.android("layout_gravity"),"fill")),""===a&&"TH"===this.tagName&&(a="center"),""===o&&(o="center_vertical")),e.is(C.NODE_STANDARD.FRAME)?d(this)||"none"!==(l=l||this.float)&&(e.inlineWidth||this.singleChild&&!e.documentRoot?e.android("layout_gravity",s(e.android("layout_gravity"),B(l,t))):this.blockWidth?a=u(l):this.android("layout_gravity",s(this.android("layout_gravity"),B(l,t)))):""!==l&&(this.is(C.NODE_STANDARD.LINEAR)?this.blockWidth?a=u(l):this.android("layout_gravity",s(this.android("layout_gravity"),l)):e.hasAlign(C.NODE_ALIGNMENT.VERTICAL)&&(a=u(l))),""!==n&&B(n,t)!==i&&(e.is(C.NODE_STANDARD.FRAME)&&this.singleChild&&!this.floating&&!this.autoMargin&&this.android("layout_gravity",s(this.android("layout_gravity"),c(n))),""===a&&(a=n)),""!==o&&e.linearHorizontal&&(this.android("layout_gravity",s(this.android("layout_gravity"),o)),o=""),this.documentRoot&&(this.blockWidth||this.is(C.NODE_STANDARD.FRAME))&&this.delete("android","layout_gravity"),this.android("gravity",s(this.android("gravity"),c(a),o))}},{key:"setBoxSpacing",value:function(t){var e=this;this.hasBit("excludeResource",C.NODE_RESOURCE.BOX_SPACING)||(["padding","margin"].forEach(function(n){["Top","Left","Right","Bottom"].forEach(function(i){var r=n+i,a=(0===e._boxReset[r]?e[r]:0)+e._boxAdjustment[r];if(0!==a){var o=B(v["".concat(n.toUpperCase(),"_").concat(i.toUpperCase())],t);e.android(o,P.formatPX(a))}})}),this.api>=u.OREO&&["layout_margin","padding"].forEach(function(n,i){var r=P.convertInt(e.android("".concat(n,"Top"))),a=P.convertInt(e.android(B("".concat(n,"Right"),t))),o=P.convertInt(e.android("".concat(n,"Bottom"))),l=P.convertInt(e.android(B("".concat(n,"Left"),t)));0!==r&&r===o&&o===l&&l===a?(e.delete("android","".concat(n,"*")),e.android(n,P.formatPX(r))):e.renderParent.is(C.NODE_STANDARD.GRID)&&0===i||(0!==r&&r===o&&(e.delete("android","".concat(n,"Top"),"".concat(n,"Bottom")),e.android("".concat(n,"Vertical"),P.formatPX(r))),0!==l&&l===a&&(e.delete("android",B("".concat(n,"Left"),t),B("".concat(n,"Right"),t)),e.android("".concat(n,"Horizontal"),P.formatPX(l))))}))}},{key:"applyOptimizations",value:function(t,e){var n=this;function i(t){return t.paddingTop+t.paddingBottom+t.borderTopWidth+t.borderBottomWidth}var a=this.renderParent,o=this.renderChildren;if(this.is(C.NODE_STANDARD.LINEAR,C.NODE_STANDARD.RADIO_GROUP)){var l=this.linearHorizontal;if(this.blockWidth&&!this.blockStatic&&[[l,this.inlineElement,"width"],[!l,!0,"height"]].forEach(function(t){var e="inline".concat(P.capitalize(t[2]));t[0]&&t[1]&&!n[e]&&o.every(function(t){return t[e]})&&n.android("layout_".concat(t[2]),"wrap_content")}),l){if(o.some(function(t){return t.imageElement&&t.baseline})||!this.hasAlign(C.NODE_ALIGNMENT.FLOAT)&&!o.some(function(t){return t.floating||!t.siblingflow})){var s=a.android("baselineAlignedChildIndex");if(a.renderChildren.some(function(t){return t.baseline&&t.textElement})||""!==s&&a.renderChildren.findIndex(function(t){return t===n})===parseInt(s)||o.some(function(t){return!t.alignOrigin||!t.baseline})||o.some(function(t){return t.nodeType<C.NODE_STANDARD.TEXT})&&o.some(function(t){return t.textElement&&t.baseline})||a.is(C.NODE_STANDARD.GRID)&&!o.some(function(t){return t.textElement&&t.baseline})){var d=X.textBaseline(o,e);d.length>0&&this.android("baselineAlignedChildIndex",""+o.indexOf(d[0]))}}else this.android("baselineAligned","false");if(t.ellipsisOnTextOverflow&&this.length>1&&o.every(function(t){return t.textElement&&!t.floating})){var c=o[o.length-1];c.textElement&&!c.multiLine&&c.textContent.trim().split(" ").length>1&&c.android("singleLine","true")}}}if(this.pageflow&&(!a.documentBody&&a.blockStatic&&this.documentParent===a&&[["firstElementChild","Top",C.BOX_STANDARD.MARGIN_TOP,C.BOX_STANDARD.PADDING_TOP],["lastElementChild","Bottom",C.BOX_STANDARD.MARGIN_BOTTOM,C.BOX_STANDARD.PADDING_BOTTOM]].forEach(function(t,e){var i=M.getNodeFromElement(a[t[0]]);!i||i.lineBreak||i!==n&&i!==n.renderChildren[0===e?0:n.renderChildren.length-1]||a["margin".concat(t[1])]>0&&0===a["padding".concat(t[1])]&&0===a["border".concat(t[1],"Width")]&&i.modifyBox(t[2],null)}),this.hasElement&&this.blockStatic))for(var h=function(t){var e=n.element.children[t],i=M.getNodeFromElement(e);if(i&&i.pageflow&&i.blockStatic&&!i.lineBreak){var r=i.previousSibling();if(r&&r.pageflow&&!r.lineBreak){var a=P.convertInt(i.cssInitial("marginTop",!0)),o=P.convertInt(r.cssInitial("marginBottom",!0));o>0&&a>0&&(a<=o?i.modifyBox(C.BOX_STANDARD.MARGIN_TOP,null):r.modifyBox(C.BOX_STANDARD.MARGIN_BOTTOM,null))}[e.previousElementSibling,e.nextElementSibling].forEach(function(t,e){var n=M.getNodeFromElement(t);if(n&&n.excluded){var r=Math.min(n.marginTop,n.marginBottom);r<0&&i.modifyBox(0===e?C.BOX_STANDARD.MARGIN_TOP:C.BOX_STANDARD.MARGIN_BOTTOM,r,!0)}})}},u=0;u<this.element.children.length;u++)h(u);if(this.bindWhiteSpace(t),t.autoSizePaddingAndBorderWidth&&!this.hasBit("excludeProcedure",C.NODE_PROCEDURE.AUTOFIT)){var f=P.convertInt(this.android("layout_width")),p=P.convertInt(this.android("layout_height")),m=!1;if(this.imageElement){var g=this.borderTopWidth,v=this.borderRightWidth,y=this.borderBottomWidth,b=this.borderLeftWidth,A=0,T=0;g>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_TOP,g),T+=g),v>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_RIGHT,v),A+=v),y>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_BOTTOM,y),T+=y),b>0&&(this.modifyBox(C.BOX_STANDARD.PADDING_LEFT,b),A+=b),T+=this.paddingTop+this.paddingBottom,(A+=this.paddingLeft+this.paddingRight)>0&&(f>0?this.android("layout_width",P.formatPX(f+A)):(f=P.convertInt(a.android("layout_width")))>0&&this.singleChild&&a.android("layout_width",P.formatPX(f+this.marginLeft+A))),T>0&&(p>0?this.android("layout_height",P.formatPX(p+T)):(p=P.convertInt(a.android("layout_height")))>0&&this.singleChild&&a.android("layout_height",P.formatPX(p+this.marginTop+T)))}else if(this.is(C.NODE_STANDARD.BUTTON)&&0===p)this.android("layout_height",P.formatPX(this.bounds.height+("outset"===this.css("borderStyle")?P.convertInt(this.css("borderWidth")):0)));else if(this.is(C.NODE_STANDARD.LINE))p>0&&this.has("height",0,{map:"initial"})&&"HR"!==this.tagName&&this.android("layout_height",P.formatPX(p+this.borderTopWidth+this.borderBottomWidth));else if("TABLE"===this.tagName){var _=P.convertInt(this.android("layout_width"));if(_>0&&(this.bounds.width>_&&this.android("layout_width",P.formatPX(this.bounds.width)),this.has("width",C.CSS_STANDARD.AUTO,{map:"initial"})&&o.every(function(t){return t.inlineWidth}))){var N=!0,E=!1,D=void 0;try{for(var R,I=o[Symbol.iterator]();!(N=(R=I.next()).done);N=!0){var O=R.value;O.android("layout_width","0px"),O.android("layout_columnWeight","1")}}catch(t){E=!0,D=t}finally{try{N||null==I.return||I.return()}finally{if(E)throw D}}}m="content-box"===this.css("boxSizing")}else if(this.hasElement&&!this.hasBit("excludeResource",C.NODE_RESOURCE.BOX_SPACING)){if("TABLE"!==a.tagName&&"border-box"!==this.css("boxSizing")){var w=P.convertInt(this.android("minWidth")),S=P.convertInt(this.android("minHeight")),x=this.paddingLeft+this.paddingRight+this.borderLeftWidth+this.borderRightWidth,L=i(this);f>0&&this.toInt("width",0,{map:"initial"})>0&&x>0&&this.android("layout_width",P.formatPX(f+x)),p>0&&this.toInt("height",0,{map:"initial"})>0&&L>0&&(0===this.lineHeight||this.lineHeight<this.box.height||this.lineHeight===this.toInt("height"))&&this.android("layout_height",P.formatPX(p+L)),w>0&&x>0&&this.android("minWidth",P.formatPX(w+x)),S>0&&L>0&&this.android("minHeight",P.formatPX(S+L))}m=!0}m&&(this.modifyBox(C.BOX_STANDARD.PADDING_TOP,this.borderTopWidth),this.modifyBox(C.BOX_STANDARD.PADDING_RIGHT,this.borderRightWidth),this.modifyBox(C.BOX_STANDARD.PADDING_BOTTOM,this.borderBottomWidth),this.modifyBox(C.BOX_STANDARD.PADDING_LEFT,this.borderLeftWidth))}if(this.linearHorizontal||this.of(C.NODE_STANDARD.RELATIVE,C.NODE_ALIGNMENT.HORIZONTAL)){var B=o.filter(function(t){return!t.floating&&(t.hasElement||0===t.renderChildren.length)});if(B.length>0&&B.every(function(t){return t.baseline||t.has("verticalAlign",C.CSS_STANDARD.UNIT)})&&(B.some(function(t){return t.imageElement&&0!==t.toInt("verticalAlign")})||B.some(function(t){return t.toInt("verticalAlign")<0})&&B.some(function(t){return t.toInt("verticalAlign")>0}))){var k=Math.max.apply(null,B.map(function(t){return t.toInt("verticalAlign")})),G=[],H=0;k>0&&(B.forEach(function(t){var e=t.toInt("verticalAlign"),n=(t.imageElement?t.bounds.height:0)+(e>0?e:0);n>=H&&(n>H&&(G.length=0),G.push(t),H=n)}),G.sort(function(t){return t.imageElement?-1:1}),B.forEach(function(t){if(!G.includes(t)){var e=t.toInt("verticalAlign");k>0&&t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,H-(G[0].imageElement?t.bounds.height:0)),0!==e&&(t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,-1*e,!0),t.css("verticalAlign","0px"))}}),G.forEach(function(t){return t.css("verticalAlign","0px")}))}if(o.some(function(t){return"SUB"===t.tagName})&&this.inlineHeight){var W=P.convertInt(r.getCustomizationValue(this.api,"SUB","android","layout_marginTop"));W>0&&this.android("layout_height",P.formatPX(this.bounds.height+W+i(this)))}}if(this.inline&&!this.floating){var z=this.toInt("verticalAlign");0!==z&&(this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,-1*z,!0),z<0&&a.layoutHorizontal&&a.inlineHeight&&a.android("layout_height",P.formatPX(a.bounds.height+i(a))))}if("relative"===this.position||a.is(C.NODE_STANDARD.FRAME)){var V=this.toInt("top"),F=this.toInt("bottom"),U=this.toInt("left");if(0!==V)if(V<0&&a.is(C.NODE_STANDARD.RELATIVE,C.NODE_STANDARD.LINEAR)&&this.floating&&this.data("RESOURCE","backgroundImage")){var j=!1;a.renderChildren.some(function(t){if(t===n)j=!0;else{if(""!==t.android("layout_below"))return!0;j&&t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,Math.abs(V))}return!1})}else this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,V,!0);else 0!==F&&this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,-1*F,!0);0!==U&&("right"===this.float||"relative"===this.position&&this.autoMarginLeft?this.modifyBox(C.BOX_STANDARD.MARGIN_RIGHT,-1*U,!0):this.modifyBox(C.BOX_STANDARD.MARGIN_LEFT,U,!0))}if(!this.plainText&&!a.linearHorizontal){var Y=this.lineHeight+this.toInt("verticalAlign")-this.actualHeight;Y>0&&(this.modifyBox(C.BOX_STANDARD.MARGIN_TOP,Math.floor(Y/2)),this.modifyBox(C.BOX_STANDARD.MARGIN_BOTTOM,Math.ceil(Y/2)))}}},{key:"applyCustomizations",value:function(t){for(var e=[R[0],R[this.api]],n=0;n<e.length;n++){var i=e[n];if(i&&i.customizations)for(var r=[this.tagName,this.controlName],a=0;a<r.length;a++){var o=i.customizations[r[a]];if(o)for(var l in o)for(var s in o[l])this.attr(l,s,o[l][s],t.customizationsOverwritePrivilege)}}}},{key:"bindWhiteSpace",value:function(t){var e=this;if(!this.hasAlign(C.NODE_ALIGNMENT.FLOAT)&&(this.linearHorizontal||this.of(C.NODE_STANDARD.RELATIVE,C.NODE_ALIGNMENT.HORIZONTAL,C.NODE_ALIGNMENT.MULTILINE)||this.of(C.NODE_STANDARD.CONSTRAINT,C.NODE_ALIGNMENT.HORIZONTAL))){var n=this.css("textAlign"),i=this.toInt("textIndent"),r=this.valueBox(C.BOX_STANDARD.PADDING_LEFT),a=this.is(C.NODE_STANDARD.RELATIVE),o=this.box.left+(i>0?this.toInt("textIndent"):i<0&&1===r[0]?r[0]:0);this.each(function(e,i){if(!(e.floating||a&&e.alignParent("left",t)||0===i&&("left"!==n||e.plainText)||["SUP","SUB"].includes(e.tagName))){var r=Math.round(e.actualLeft()-o);r>=1&&e.modifyBox(C.BOX_STANDARD.MARGIN_LEFT,r)}o=e.actualRight()},!0)}else this.linearVertical&&this.each(function(t){var n=function(){var n=t;do{n=n.previousSibling(!0,!1,!1)}while(n&&!e.initial.children.includes(n));return n}(),i=M.getElementsBetweenSiblings(n?n.length>0&&!n.hasElement?n.lastElementChild:n.baseElement:null,t.baseElement).filter(function(t){var e=M.getNodeFromElement(t);return!(!e||!(e.lineBreak||e.excluded&&e.blockStatic))});if(i.length>0){var r;if(r=n?n.layoutHorizontal&&n.length>0&&n.renderChildren.some(function(t){return!t.floating})?n.renderChildren.filter(function(t){return!t.floating}).sort(function(t,e){return t.linear.bottom<e.linear.bottom?1:-1})[0].linear.bottom:n.linear.bottom:e.box.top,1===i.length&&"BR"===i[0].tagName&&n&&n.inline&&t.inline)return;var a=Math.round(t.linear.top-r);a>=1&&t.modifyBox(C.BOX_STANDARD.MARGIN_TOP,a)}},!0)}},{key:"stringId",get:function(){return this.nodeId?"@+id/".concat(this.nodeId):""}},{key:"controlName",set:function(t){this._controlName=t},get:function(){if(this._controlName)return this._controlName;var t=k.MAP_ELEMENT[this.nodeName];return null!=t?r.getControlName(t):""}},{key:"documentParent",set:function(t){this._documentParent=t},get:function(){return this._documentParent?this._documentParent:0===this.id?this:this.getParentElementAsNode(!1)||r.documentBody()}},{key:"renderParent",set:function(t){t!==this&&t.appendRendered(this),this._renderParent=t},get:function(){return this._renderParent||r.documentBody()}},{key:"anchored",get:function(){return this.constraint.horizontal&&this.constraint.vertical}},{key:"layoutHorizontal",get:function(){return this.linearHorizontal||this.hasAlign(C.NODE_ALIGNMENT.HORIZONTAL)||this.nodes.filter(function(t){return t.pageflow}).length>1&&(X.linearX(this.nodes)||this.is(C.NODE_STANDARD.FRAME)&&this.nodes.every(function(t){return t.domElement}))}},{key:"layoutVertical",get:function(){return this.linearVertical||this.hasAlign(C.NODE_ALIGNMENT.VERTICAL)||this.nodes.filter(function(t){return t.pageflow}).length>1&&X.linearY(this.nodes)||this.is(C.NODE_STANDARD.FRAME)&&this.nodes.some(function(t){return t.linearVertical})}},{key:"linearHorizontal",get:function(){return this._android.orientation===y.HORIZONTAL&&this.is(C.NODE_STANDARD.LINEAR,C.NODE_STANDARD.RADIO_GROUP)}},{key:"linearVertical",get:function(){return this._android.orientation===y.VERTICAL&&this.is(C.NODE_STANDARD.LINEAR,C.NODE_STANDARD.RADIO_GROUP)}},{key:"inlineWidth",get:function(){return"wrap_content"===this._android.layout_width}},{key:"inlineHeight",get:function(){return"wrap_content"===this._android.layout_height}},{key:"blockWidth",get:function(){return"match_parent"===this._android.layout_width}},{key:"blockHeight",get:function(){return"match_parent"===this._android.layout_height}}],[{key:"documentBody",value:function(){if(null==r._documentBody){var t=new r(0,document.body);t.hide(),t.setBounds(),r._documentBody=t}return r._documentBody}},{key:"getCustomizationValue",value:function(t,e,n,i){for(var r=[R[t],R[0]],a=0;a<r.length;a++){var o=r[a];if(o&&o.customizations&&o.customizations[e]&&o.customizations[e][n]&&P.isString(o.customizations[e][n][i]))return o.customizations[e][n][i]}return""}},{key:"getControlName",value:function(t){return g[C.NODE_STANDARD[t]]}}]),r}()},H=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,G(androme.lib.base.Node)),n}(),W=function(t){function n(t,i,r,a){var l;return e(this,n),(l=s(this,o(n).call(this,t))).api=i.api,l.parent=r,l.depth=i.depth,l.nodeName="".concat(i.nodeName,"_GROUP"),l.documentParent=i.documentParent,Array.isArray(a)&&a.length>0&&(l.children=a,l.init()),l}return a(n,G(androme.lib.base.NodeGroup)),n}(),z='!0\n<?xml version="1.0" encoding="utf-8"?>\n<layer-list xmlns:android="http://schemas.android.com/apk/res/android">\n!1\n\t<item>\n\t\t<shape android:shape="rectangle">\n\t\t\t<solid android:color="@color/{&color}" />\n\t\t</shape>\n\t</item>\n!1\n!2\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}" android:drawable="@drawable/{image}" width="{@width}" height="{@height}" />\n!2\n!3\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">\n\t\t<bitmap android:src="@drawable/{image}" android:gravity="{@gravity}" android:tileMode="{@tileMode}" android:tileModeX="{@tileModeX}" android:tileModeY="{@tileModeY}" />\n\t</item>\n!3\n!7\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">\n\t\t<shape android:shape="rectangle">\n!8\n\t\t\t<stroke android:width="{&width}" {borderStyle} />\n!8\n\t\t</shape>\n\t</item>\n!7\n!4\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">\n\t\t<shape android:shape="rectangle">\n!5\n\t\t\t<stroke android:width="{&width}" {borderStyle} />\n!5\n!6\n\t\t\t<corners android:radius="{@radius}" android:topLeftRadius="{@topLeftRadius}" android:topRightRadius="{@topRightRadius}" android:bottomRightRadius="{@bottomRightRadius}" android:bottomLeftRadius="{@bottomLeftRadius}" />\n!6\n\t\t</shape>\n\t</item>\n!4\n</layer-list>\n!0',V=androme.lib.enumeration,F=androme.lib.util,U=androme.lib.dom,j=androme.lib.xml,Y=androme.lib.color,Z=androme.lib.base.Resource,$=androme.lib.base.NodeList,K={background:'android:background="@drawable/{0}"',backgroundColor:'android:background="@color/{0}"'},J={fontFamily:'android:fontFamily="{0}"',fontStyle:'android:textStyle="{0}"',fontWeight:'android:fontWeight="{0}"',fontSize:'android:textSize="{0}"',color:'android:textColor="@color/{0}"',backgroundColor:'android:background="@color/{0}"'},q={text:'android:text="{0}"'},Q={entries:'android:entries="@array/{0}"'},tt={src:'android:src="@drawable/{0}"'},et=function(n){function r(){var t;return e(this,r),(t=s(this,o(r).apply(this,arguments)))._tagStyle={},t._tagCount={},t}return a(r,androme.lib.base.Resource),i(r,[{key:"reset",value:function(){d(o(r.prototype),"reset",this).call(this),this.file.reset(),this._tagStyle={},this._tagCount={}}},{key:"finalize",value:function(t){var e={};for(var n in this.processFontStyle(t),t.cache.each(function(t){var n=t.renderChildren.filter(function(t){return t.visible&&t.auto});n.length>1&&function(){for(var i=new Map,r="",a=!0,o=function(t){var e=!1;if(n[t].combine("_","android").some(function(n){if(n.startsWith("style=")){if(0===t)r=n;else if(""===r||n!==r)return a=!1,!0;e=!0}else i.has(n)||i.set(n,0),i.set(n,i.get(n)+1);return!1}),!a||""!==r&&!e)return a=!1,"break"},l=0;l<n.length;l++){if("break"===o(l))break}if(a){var s=!0,d=!1,h=void 0;try{for(var u,f=i.entries()[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var p=c(u.value,2);p[1]!==n.length&&i.delete(p[0])}}catch(t){d=!0,h=t}finally{try{s||null==f.return||f.return()}finally{if(d)throw h}}if(i.size>1){""!==r&&(r=F.trimString(r.substring(r.indexOf("/")+1),'"'));var m=[],g=!0,v=!1,y=void 0;try{for(var b,A=function(){var t=b.value.match(/(\w+):(\w+)="(.*?)"/);t&&(n.forEach(function(e){return e.delete(t[1],t[2])}),m.push(t[0]))},T=i.keys()[Symbol.iterator]();!(g=(b=T.next()).done);g=!0)A()}catch(t){v=!0,y=t}finally{try{g||null==T.return||T.return()}finally{if(v)throw y}}m.sort();var _="";for(var N in e)if(e[N].join(";")===m.join(";")){_=N;break}""!==_&&""!==r&&_.startsWith("".concat(r,"."))||(_=(""!==r?"".concat(r,"."):"")+F.capitalize(t.nodeId),e[_]=m),n.forEach(function(t){return t.attr("_","style","@style/".concat(_))})}}}()}),e)Z.STORED.styles.set(n,{attributes:e[n].join(";")})}},{key:"setBoxSpacing",value:function(){var t=this;d(o(r.prototype),"setBoxSpacing",this).call(this),this.cache.elements.forEach(function(e){var n=U.getElementCache(e.element,"boxSpacing");n&&!e.hasBit("excludeResource",V.NODE_RESOURCE.BOX_SPACING)&&(n.marginLeft!==n.marginRight||!e.alignParent("left",t.settings)||!e.alignParent("right",t.settings)||e.blockWidth||"relative"===e.position&&e.alignNegative||(e.modifyBox(V.BOX_STANDARD.MARGIN_LEFT,null),e.modifyBox(V.BOX_STANDARD.MARGIN_RIGHT,null)),"auto"===e.css("marginLeft")&&e.modifyBox(V.BOX_STANDARD.MARGIN_LEFT,null),"auto"===e.css("marginRight")&&e.modifyBox(V.BOX_STANDARD.MARGIN_RIGHT,null))})}},{key:"setBoxStyle",value:function(){var e=this;d(o(r.prototype),"setBoxStyle",this).call(this),this.cache.elements.forEach(function(n){var i=U.getElementCache(n.element,"boxStyle");if(i&&!n.hasBit("excludeResource",V.NODE_RESOURCE.BOX_STYLE)){Array.isArray(i.backgroundColor)&&i.backgroundColor.length>0&&(i.backgroundColor=r.addColor(i.backgroundColor[0],i.backgroundColor[2]));for(var a=i.backgroundImage.split(",").map(function(t){return t.trim()}),o=i.backgroundRepeat.split(",").map(function(t){return t.trim()}),l=i.backgroundPositionX.split(",").map(function(t){return t.trim()}),s=i.backgroundPositionY.split(",").map(function(t){return t.trim()}),d=[],h=[],u=[],f=0;f<a.length;f++)if(""!==a[f]&&"none"!==a[f]){d.push(a[f]);var p=e.imageDimensions.get(U.cssResolveUrl(a[f]));h.push(p),a[f]=r.addImageURL(a[f]),u[f]="".concat("initial"===l[f]?"0%":l[f]," ").concat("initial"===s[f]?"0%":s[f])}else a[f]="",o[f]="",u[f]="";a=a.filter(function(t){return""!==t}),o=o.filter(function(t){return""!==t}),u=u.filter(function(t){return""!==t});var m=K,g=n.companion;if(g&&!g.visible&&g.hasElement&&!U.cssFromParent(g.element,"backgroundColor")){var v=U.getElementCache(g.element,"boxStyle");Array.isArray(v.backgroundColor)&&v.backgroundColor.length>0&&(i.backgroundColor=r.addColor(v.backgroundColor[0],v.backgroundColor[2]))}var y=e.borderVisible(i.borderTop)||e.borderVisible(i.borderRight)||e.borderVisible(i.borderBottom)||e.borderVisible(i.borderLeft)||i.borderRadius.length>0;if(y||a.length>0){var b,A=function(t,e,n,i,r,a){var o=parseInt(e.width),l=Math.floor(o/3),s=o%3,d=l+(2===s?1:0),c=l+(2===s?1:0),h="-".concat(F.formatPX(d+1)),u="-".concat(F.formatPX(d));t[4].push({top:n?"":u,right:i?"":h,bottom:r?"":u,left:a?"":h,5:[{width:F.formatPX(d),borderStyle:this.getBorderStyle(e)}],6:S}),h="-".concat(F.formatPX(o+1)),u="-".concat(F.formatPX(o));var f="".concat(F.formatPX(o-l));t[4].push({top:n?f:h,right:i?f:u,bottom:r?f:u,left:a?f:h,5:[{width:F.formatPX(c),borderStyle:this.getBorderStyle(e)}],6:S})},T=[i.borderTop,i.borderRight,i.borderBottom,i.borderLeft];T.forEach(function(t){Array.isArray(t.color)&&t.color.length>0&&(t.color=r.addColor(t.color[0],t.color[2]))});for(var _=[],N=[],E=null,D="",R=function(t){var l="",s="",d="",f="",p=c(r.parseBackgroundPosition(u[t],n.css("fontSize")),2),m=p[0],g=p[1],v="",b="",A=h[t];switch(o[t]){case"repeat-x":(null==A||A.width<n.bounds.width)&&(d="repeat");break;case"repeat-y":(null==A||A.height<n.bounds.height)&&(f="repeat");break;case"no-repeat":s="disabled";break;case"repeat":(null==A||A.width<n.bounds.width||A.height<n.bounds.height)&&(s="repeat")}if(""===m){switch(u[t]){case"left top":case"0% 0%":l="left|top";break;case"left center":case"0% 50%":l="left|center_vertical";break;case"left bottom":case"0% 100%":l="left|bottom";break;case"right top":case"100% 0%":l="right|top";break;case"right center":case"100% 50%":l="right|center_vertical";break;case"right bottom":case"100% 100%":l="right|bottom";break;case"center top":case"50% 0%":l="center_horizontal|top";break;case"center bottom":case"50% 100%":l="center_horizontal|bottom";break;case"center center":case"50% 50%":l="center";break;default:var T=u[t].trim().split(" ");if(2===T.length){var E=function(t,e){return t+(""!==t?"|":"")+e};T.forEach(function(t,e){if(F.isPercent(t))switch(e){case 0:"0%"===t?l=E(l,"left"):"100%"===t?l=E(l,"right"):m=F.formatPX(n.bounds.width*(F.convertInt(t)/100));break;case 1:"0%"===t?l=E(l,"top"):"100%"===t?l=E(l,"bottom"):g=F.formatPX(n.actualHeight*(F.convertInt(t)/100))}else if(/^[a-z]+$/.test(t))l=E(l,t);else{var i=F.convertPX(t,n.css("fontSize"));"0px"!==i&&(0===e?m=i:g=i),l=E(l,0===e?"left":"top")}})}}if(""!==l&&A&&A.width>0&&A.height>0){if("repeat"===f){var D=n.viewWidth;if(D>0?e.settings.autoSizePaddingAndBorderWidth&&!n.hasBit("excludeResource",V.NODE_RESOURCE.BOX_SPACING)&&(D=n.viewWidth+n.paddingLeft+n.paddingRight):D=n.bounds.width-(n.borderLeftWidth+n.borderRightWidth),A.width<D){var R=F.convertInt(n.android("layout_width"));-1!==l.indexOf("left")?(v=F.formatPX(D-A.width),0===n.viewWidth&&D>R&&n.android("layout_width",F.formatPX(n.bounds.width))):-1!==l.indexOf("right")?(m=F.formatPX(D-A.width),0===n.viewWidth&&D>R&&n.android("layout_width",F.formatPX(n.bounds.width))):"center"!==l&&-1===l.indexOf("center_horizontal")||(v=F.formatPX(Math.floor((D-A.width)/2)),0===n.viewWidth&&D>R&&n.android("layout_width",F.formatPX(n.bounds.width)))}}if("repeat"===d){var I=n.viewHeight;if(I>0?e.settings.autoSizePaddingAndBorderWidth&&!n.hasBit("excludeResource",V.NODE_RESOURCE.BOX_SPACING)&&(I=n.viewHeight+n.paddingTop+n.paddingBottom):I=n.bounds.height-(n.borderTopWidth+n.borderBottomWidth),A.height<I){var O=F.convertInt(n.android("layout_height"));-1!==l.indexOf("top")?(b=F.formatPX(I-A.height),0===n.viewHeight&&I>O&&n.android("layout_height",F.formatPX(n.bounds.height))):-1!==l.indexOf("bottom")?(g=F.formatPX(I-A.height),0===n.viewHeight&&I>O&&n.android("layout_height",F.formatPX(n.bounds.height))):"center"!==l&&-1===l.indexOf("center_vertical")||(b=F.formatPX(Math.floor((I-A.height)/2)),0===n.viewHeight&&I>O&&n.android("layout_height",F.formatPX(n.bounds.height)))}}}}if(i.backgroundSize.length>0&&(F.isPercent(i.backgroundSize[0])||F.isPercent(i.backgroundSize[1]))&&("100%"===i.backgroundSize[0]&&"100%"===i.backgroundSize[1]?(s="",d="",f="",l=""):"100%"===i.backgroundSize[0]?d="":"100%"===i.backgroundSize[1]&&(f=""),i.backgroundSize=[]),n.of(V.NODE_STANDARD.IMAGE,V.NODE_ALIGNMENT.SINGLE)&&1===u.length){n.android("src","@drawable/".concat(a[0])),F.convertInt(m)>0&&n.modifyBox(V.BOX_STANDARD.MARGIN_LEFT,F.convertInt(m)),F.convertInt(g)>0&&n.modifyBox(V.BOX_STANDARD.MARGIN_TOP,F.convertInt(g));var w="";switch(l){case"left|top":case"left|center_vertical":case"left|bottom":w="fitStart";break;case"right|top":case"right|center_vertical":case"right|bottom":w="fitEnd";break;case"center":case"center_horizontal|top":case"center_horizontal|bottom":w="center"}if(n.android("scaleType",w),!y)return{v:void 0};a.length=0}else""!==l||""!==s||""!==d||""!==f?N.push({top:g,right:v,bottom:b,left:m,gravity:l,tileMode:s,tileModeX:d,tileModeY:f,width:"",height:"",image:a[t]}):_.push({top:g,right:v,bottom:b,left:m,gravity:l,tileMode:s,tileModeX:d,tileModeY:f,width:i.backgroundSize.length>0?i.backgroundSize[0]:"",height:i.backgroundSize.length>0?i.backgroundSize[1]:"",image:a[t]})},I=0;I<a.length;I++){var O=R(I);if("object"===t(O))return O.v}N.sort(function(t,e){return"repeat"!==t.tileModeX&&"repeat"!==t.tileModeY&&"repeat"!==t.tileMode?1:"repeat"!==e.tileModeX&&"repeat"!==e.tileModeY&&"repeat"!==e.tileMode?-1:"repeat"===t.tileMode?-1:"repeat"===e.tileMode?1:"repeat"===e.tileModeX||"repeat"===e.tileModeY?1:-1});var w=e.getShapeAttribute(i,"backgroundColor"),S=e.getShapeAttribute(i,"radius");if(i.border&&e.borderVisible(i.border)&&!(parseInt(i.border.width)>1&&("groove"===i.border.style||"ridge"===i.border.style)||parseInt(i.border.width)>2&&"double"===i.border.style))0===a.length?(E=j.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">\n!1\n\t<stroke android:width="{&width}" {borderStyle} />\n!1\n!2\n\t<solid android:color="@color/{&color}" />\n!2\n!3\n\t<corners android:radius="{&radius}" />\n!3\n</shape>\n!0'),b={0:[{1:e.getShapeAttribute(i,"stroke"),2:w,3:S}]}):(E=j.parseTemplate(z),b={0:[{1:w,2:_.length>0&&_,3:N.length>0&&N,4:[{5:e.getShapeAttribute(i,"stroke"),6:S}],7:!1}]});else{E=j.parseTemplate(z);var x=j.getTemplateLevel(b={0:[{1:w,2:_.length>0&&_,3:N.length>0&&N,4:[],7:[]}]},"0"),L=T.filter(function(t){return e.borderVisible(t)}),B=new Set(L.map(function(t){return t.width})),C=new Set(L.map(function(t){return e.getBorderStyle(t)})),k=L[0];if(1===B.size&&1===C.size&&"groove"!==k.style&&"ridge"!==k.style){var P=parseInt(k.width);if(P>2&&"double"===k.style)A.call(e,x,k,e.borderVisible(i.borderTop),e.borderVisible(i.borderRight),e.borderVisible(i.borderBottom),e.borderVisible(i.borderLeft));else{var M="-".concat(F.formatPX(P+1)),X="-".concat(F.formatPX(P));x[4].push({top:e.borderVisible(i.borderTop)?"":M,right:e.borderVisible(i.borderRight)?"":X,bottom:e.borderVisible(i.borderBottom)?"":X,left:e.borderVisible(i.borderLeft)?"":M,5:e.getShapeAttribute({border:L[0]},"stroke"),6:S})}}else for(var G=0;G<T.length;G++){var H=T[G];if(e.borderVisible(H)){var W=parseInt(H.width);if(W>2&&"double"===H.style)A.call(e,x,H,0===G,1===G,2===G,3===G);else{var Y=W>1&&("groove"===H.style||"ridge"===H.style),$=Y?Math.ceil(W/2):W,J="-".concat(F.formatPX($+1)),q="-".concat(F.formatPX($));x[4].push({top:0===G?"":J,right:1===G?"":q,bottom:2===G?"":q,left:3===G?"":J,5:e.getShapeAttribute({border:H},"stroke",G,Y),6:S}),Y&&(J="-".concat(F.formatPX(W+1)),q="-".concat(F.formatPX(W)),x[7].push({top:0===G?"":J,right:1===G?"":q,bottom:2===G?"":q,left:3===G?"":J,8:e.getShapeAttribute({border:H},"stroke",G,!0,!0)}))}}}0===x[4].length&&(x[4]=!1),0===x[7].length&&(x[7]=!1)}if(E){var Q=j.createTemplate(E,b),tt=!0,et=!1,nt=void 0;try{for(var it,rt=Z.STORED.drawables.entries()[Symbol.iterator]();!(tt=(it=rt.next()).done);tt=!0){var at=c(it.value,2);if(at[1]===Q){D=at[0];break}}}catch(t){et=!0,nt=t}finally{try{tt||null==rt.return||rt.return()}finally{if(et)throw nt}}""===D&&(D="".concat(n.nodeName.toLowerCase(),"_").concat(n.nodeId),Z.STORED.drawables.set(D,Q))}if(n.formatted(F.formatString(m.background,D),0===n.renderExtension.size),a.length>0&&(n.data("RESOURCE","backgroundImage",!0),e.settings.autoSizeBackgroundImage&&!n.documentRoot&&!n.imageElement&&"TABLE"!==n.renderParent.tagName&&!n.hasBit("excludeProcedure",V.NODE_PROCEDURE.AUTOFIT))){var ot={width:0,height:0};if(h.forEach(function(t){t&&(ot.width=Math.max(ot.width,t.width),ot.height=Math.max(ot.height,t.height))}),0===ot.width)for(var lt=n;lt&&!lt.documentBody&&(lt.hasWidth&&(ot.width=lt.bounds.width),lt.hasHeight&&(ot.height=lt.bounds.height),lt.pageflow&&!(ot.width>0&&ot.height>0));)lt=lt.documentParent;if(!n.has("width",V.CSS_STANDARD.UNIT)){var st=n.bounds.width+(n.is(V.NODE_STANDARD.LINE)?0:n.borderLeftWidth+n.borderRightWidth);(0===ot.width||st>0&&st<ot.width)&&n.css("width",F.formatPX(st))}if(!n.has("height",V.CSS_STANDARD.UNIT)){var dt=n.actualHeight+(n.is(V.NODE_STANDARD.LINE)?0:n.borderTopWidth+n.borderBottomWidth);(0===ot.height||dt>0&&dt<ot.height)&&(n.css("height",F.formatPX(dt)),n.marginTop<0&&n.modifyBox(V.BOX_STANDARD.MARGIN_TOP,null),n.marginBottom<0&&n.modifyBox(V.BOX_STANDARD.MARGIN_BOTTOM,null))}}}else!U.getElementCache(n.element,"fontStyle")&&F.isString(i.backgroundColor)&&n.formatted(F.formatString(m.backgroundColor,i.backgroundColor),0===n.renderExtension.size)}})}},{key:"setFontStyle",value:function(){var t=this;d(o(r.prototype),"setFontStyle",this).call(this);var e={};this.cache.visible.forEach(function(t){if(!t.hasBit("excludeResource",V.NODE_RESOURCE.FONT_STYLE)){U.getElementCache(t.element,"fontStyle")&&(null==e[t.nodeName]&&(e[t.nodeName]=[]),e[t.nodeName].push(t));var n=t.css("textShadow");"none"!==n&&[/^(rgb(?:a)?\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}(?:, [0-9\.]+)?\)) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2})$/,/^([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2}) (.+)$/].some(function(e,i){var a=n.match(e);if(a){var o=Y.parseRGBA(a[0===i?1:4]);return o.length>0&&t.android("shadowColor","@color/".concat(r.addColor(o[0],o[2]))),t.android("shadowDx",""+F.convertInt(a[0===i?2:1])),t.android("shadowDy",""+F.convertInt(a[0===i?3:2])),t.android("shadowRadius",""+F.convertInt(a[0===i?4:3])),!0}return!1})}});var n=function(n){var i=[],a=new $(e[n]);a.each(function(e){var n=!1,a=e.id,o=e.companion;!o||o.visible||!o.textElement&&"LABEL"!==o.tagName||(e=o);var l=Object.assign({},U.getElementCache(e.element,"fontStyle"));if(Array.isArray(l.backgroundColor)&&l.backgroundColor.length>0&&(l.backgroundColor=r.addColor(l.backgroundColor[0],l.backgroundColor[2])),l.fontFamily){var s=l.fontFamily.split(",")[0].replace(/"/g,"").toLowerCase().trim(),d="",c="";if(Array.isArray(l.color)&&l.color.length>0&&(l.color=r.addColor(l.color[0],l.color[2])),t.settings.fontAliasResourceValue&&_[s]&&(s=_[s]),A[s]&&t.settings.targetAPI>=A[s]||t.settings.fontAliasResourceValue&&T[s]&&t.settings.targetAPI>=A[T[s]]?(n=!0,l.fontFamily=s,"normal"===l.fontStyle&&delete l.fontStyle,"400"===l.fontWeight&&delete l.fontWeight):(s=F.convertWord(s),l.fontFamily="@font/".concat(s+("normal"!==l.fontStyle?"_".concat(l.fontStyle):"")+("400"!==l.fontWeight?"_".concat(N[l.fontWeight]||l.fontWeight):"")),d=l.fontStyle,c=l.fontWeight,delete l.fontStyle,delete l.fontWeight),!n){var h=Z.STORED.fonts.get(s)||{};h["".concat(d,"-").concat(c)]=!0,Z.STORED.fonts.set(s,h)}}for(var u=J,f=Object.keys(u),p=0;p<f.length;p++){null==i[p]&&(i[p]={});var m=l[f[p]];if(F.hasValue(m)&&e.supported("android",f[p])){var g=F.formatString(u[f[p]],m);null==i[p][g]&&(i[p][g]=[]),i[p][g].push(a)}}});var o=t._tagStyle[n];if(o){for(var l=0;l<o.length;l++)for(var s in o[l]){var d;if(i[l][s])(d=i[l][s]).push.apply(d,h(o[l][s]));else i[l][s]=o[l][s]}t._tagCount[n]+=a.visible.length}else t._tagCount[n]=a.visible.length;t._tagStyle[n]=i};for(var i in e)n(i)}},{key:"setImageSource",value:function(){var t=this;this.cache.list.filter(function(t){return t.visible&&(t.imageElement||"INPUT"===t.tagName&&"image"===t.element.type)&&!t.hasBit("excludeResource",V.NODE_RESOURCE.IMAGE_SOURCE)}).forEach(function(e){var n=e.element;if(!U.getElementCache(n,"imageSource")||t.settings.alwaysReevaluateResources){var i=e.imageElement?r.addImageSrcSet(n):r.addImage({mdpi:n.src});if(""!==i)e.formatted(F.formatString(tt.src,i),0===e.renderExtension.size),U.setElementCache(n,"imageSource",i)}})}},{key:"setOptionArray",value:function(){var t=this;d(o(r.prototype),"setOptionArray",this).call(this),this.cache.visible.forEach(function(e){var n=U.getElementCache(e.element,"optionArray");if(n&&!e.hasBit("excludeResource",V.NODE_RESOURCE.OPTION_ARRAY)){var i=Q,a=[];n.numberArray&&(t.settings.numberResourceValue?n.stringArray=n.numberArray:a=n.numberArray),n.stringArray&&(a=n.stringArray.map(function(e){var n=r.addString(e,"",t.settings);return""!==n?"@string/".concat(n):""}).filter(function(t){return t}));var o=a.join("-"),l="",s=!0,d=!1,h=void 0;try{for(var u,f=Z.STORED.arrays.entries()[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var p=c(u.value,2),m=p[0];if(o===p[1].join("-")){l=m;break}}}catch(t){d=!0,h=t}finally{try{s||null==f.return||f.return()}finally{if(d)throw h}}""===l&&Z.STORED.arrays.set(l="".concat(e.nodeId,"_array"),a),e.formatted(F.formatString(i.entries,l),0===e.renderExtension.size)}})}},{key:"setValueString",value:function(){var t=this;d(o(r.prototype),"setValueString",this).call(this),this.cache.visible.forEach(function(e){var n=U.getElementCache(e.element,"valueString");if(n&&!e.hasBit("excludeResource",V.NODE_RESOURCE.VALUE_STRING)){if(e.renderParent.is(V.NODE_STANDARD.RELATIVE)&&e.alignParent("left",t.settings)&&!U.cssParent(e.element,"whiteSpace","pre","pre-wrap")){for(var i=e.textContent,a=0,o=0;o<i.length;o++){switch(i.charCodeAt(o)){case 32:continue;case 160:a++;continue}break}0===a&&(n.value=n.value.replace(/^(\s|&#160;)+/,""))}if(e.hasElement){switch(e.css("fontVariant")){case"small-caps":n.value=n.value.toUpperCase()}var l=e.css("textDecoration").match(/(underline|line-through)/);if(l)switch(l[0]){case"underline":n.value="<u>".concat(n.value,"</u>");break;case"line-through":n.value="<strike>".concat(n.value,"</strike>")}}var s=r.addString(n.value,n.name,t.settings);if(""!==s){var d=q;e.toInt("textIndent")+e.bounds.width>0&&e.formatted(F.formatString(d.text,isNaN(parseInt(s))||""+parseInt(s)!==s?"@string/".concat(s):s),0===e.renderExtension.size)}}})}},{key:"addTheme",value:function(t,e,n){var i=j.parseTemplate(t);if(n.item){var a=j.getTemplateLevel(e,"0");for(var o in n.item){var l=n.item[o],s=Y.parseHex(l);""!==s&&(l="@color/".concat(r.addColor(s))),a[1].push({name:o,value:l})}}var d=j.createTemplate(i,e);this.addFile(n.output.path,n.output.file,d)}},{key:"processFontStyle",value:function(t){var e=this,n={},i={},r={},a={},o=new Set;for(var l in this._tagStyle){n[l]={},i[l]={};var s=this._tagCount[l],d=this._tagStyle[l].filter(function(t){return Object.keys(t).length>0}).sort(function(t,e){var n=0,i=0,r=0,a=0;for(var o in t)n=Math.max(t[o].length,n),r+=t[o].length;for(var l in e)e[l]&&(i=Math.max(e[l].length,i),a+=e[l].length);return n!==i?n>i?-1:1:r>=a?-1:1});do{if(1===d.length){for(var c in d[0]){var u=d[0][c];1===u.length?i[l][c]=u:u.length>1&&(n[l][c]=u)}d.length=0}else{for(var f={},p={},m=function(t){if(!d[t])return"continue";var i={},r={},a=new Set;for(var o in d[t]){var c=d[t][o],u=!1;if(c&&0!==c.length&&(c.length===s?(f[o]=c.slice(),d[t]={},u=!0):1===c.length&&(p[o]=c.slice(),d[t][o]=[],u=!0),!u)){for(var m={},g=!1,v=0;v<d.length;v++)if(t!==v&&d[v])for(var y in d[v]){var b=d[v][y];if(b.length>0){var A=!0,T=!1,_=void 0;try{for(var N,E=c[Symbol.iterator]();!(A=(N=E.next()).done);A=!0){var D=N.value;b.includes(D)&&(null==m[y]&&(m[y]=[]),m[y].push(D))}}catch(t){T=!0,_=t}finally{try{A||null==E.return||E.return()}finally{if(T)throw _}}}}for(var R in m)m[R].length>1&&(i[[o,R].sort().join(";")]=m[R],g=!0);g||(i[o]=c)}}for(var I in i)for(var O in i)if(I!==O&&i[I].join("")===i[O].join("")){var w=i[I].join(",");r[w]=r[w]?new Set(h(r[w]).concat(h(O.split(";")))):new Set(h(I.split(";")).concat(h(O.split(";")))),a.add(I).add(O)}for(var S in a.forEach(function(t){return delete i[t]}),i)e.deleteStyleAttribute(d,S,i[S]),n[l][S]=i[S];for(var x in r){var L=Array.from(r[x]).sort().join(";"),B=x.split(",").map(function(t){return parseInt(t)});e.deleteStyleAttribute(d,L,B),n[l][L]=B}},g=0;g<d.length;g++)m(g);var v=Object.keys(f);for(var y in v.length>0&&(v.length>1||f[v[0]].length>1?n[l][v.join(";")]=f[v[0]]:Object.assign(p,f)),p)i[l][y]=p[y];for(g=0;g<d.length;g++)d[g]&&0===Object.keys(d[g]).length&&delete d[g];d=d.filter(function(t){if(t)for(var e in t)if(t[e]&&t[e].length>0)return!0;return!1})}}while(d.length>0)}var b=function(t){var e=n[t],i=[];for(var a in e)i.push({name:"",attributes:a,ids:e[a]});i.sort(function(t,e){var n=[t.ids.length,e.ids.length],i=n[0],r=n[1];if(i===r){var a=[t.attributes.split(";").length,e.attributes.split(";").length];i=a[0],r=a[1]}return i>=r?-1:1}),i.forEach(function(e,n){return e.name=F.capitalize(t)+(n>0?"_".concat(n):"")}),r[t]=i};for(var A in n)b(A);for(var A in r){var T=!0,_=!1,N=void 0;try{for(var E,D=r[A][Symbol.iterator]();!(T=(E=D.next()).done);T=!0){var R=E.value,I=!0,O=!1,w=void 0;try{for(var S,L=R.ids[Symbol.iterator]();!(I=(S=L.next()).done);I=!0){var B=S.value;null==a[B]&&(a[B]={styles:[],attributes:[]}),a[B].styles.push(R.name)}}catch(t){O=!0,w=t}finally{try{I||null==L.return||L.return()}finally{if(O)throw w}}}}catch(t){_=!0,N=t}finally{try{T||null==D.return||D.return()}finally{if(_)throw N}}var C=i[A];if(C)for(var k in C){var P=!0,M=!1,X=void 0;try{for(var G,H=C[k][Symbol.iterator]();!(P=(G=H.next()).done);P=!0){var W=G.value;null==a[W]&&(a[W]={styles:[],attributes:[]}),a[W].attributes.push(k)}}catch(t){M=!0,X=t}finally{try{P||null==H.return||H.return()}finally{if(M)throw X}}}}var z=function(n){var i=t.cache.find("id",parseInt(n));if(i){var r=a[n].styles,l=a[n].attributes;r.length>0&&(o.add(r.join(".")),i.attr("_","style","@style/".concat(r.pop()))),l.length>0&&l.sort().forEach(function(t){return i.formatted(x(t,e.settings,!0),!1)})}};for(var V in a)z(V);var U=!0,j=!1,Y=void 0;try{for(var $,K=function(){var t="";$.value.split(".").forEach(function(e){var n=e.match(/^(\w*?)(?:_([0-9]+))?$/);if(n){var i=r[n[1].toUpperCase()][null==n[2]?0:parseInt(n[2])];Z.STORED.styles.set(e,{parent:t,attributes:i.attributes}),t=e}})},J=o[Symbol.iterator]();!(U=($=J.next()).done);U=!0)K()}catch(t){j=!0,Y=t}finally{try{U||null==J.return||J.return()}finally{if(j)throw Y}}}},{key:"deleteStyleAttribute",value:function(t,e,n){e.split(";").forEach(function(e){for(var i=0;i<t.length;i++)if(t[i]){var r=-1,a="";for(var o in t[i])if(o===e){r=i,a=o,i=t.length;break}if(-1!==r){t[r][a]=t[r][a].filter(function(t){return!n.includes(t)}),0===t[r][a].length&&delete t[r][a];break}}})}},{key:"getShapeAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];switch(e){case"stroke":if(t.border&&"0px"!==t.border.width){if(!i||r)return[{width:t.border.width,borderStyle:this.getBorderStyle(t.border,r?n:-1)}];if(i)return[{width:F.formatPX(Math.ceil(parseInt(t.border.width)/2)),borderStyle:this.getBorderStyle(t.border,n,!0)}]}return!1;case"backgroundColor":return 0!==t.backgroundColor.length&&""!==t.backgroundColor&&[{color:t.backgroundColor}];case"radius":if(1===t.borderRadius.length){if("0px"!==t.borderRadius[0])return[{radius:t.borderRadius[0]}]}else if(t.borderRadius.length>1){var a={};return t.borderRadius.forEach(function(t,e){return a["".concat(["topLeft","topRight","bottomRight","bottomLeft"][e],"Radius")]=t}),[a]}return!1}return!1}},{key:"getBorderStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={solid:'android:color="@color/'.concat(t.color,'"'),groove:"",ridge:""};Object.assign(i,{double:i.solid,inset:i.solid,outset:i.solid,dotted:"".concat(i.solid,' android:dashWidth="3px" android:dashGap="1px"'),dashed:"".concat(i.solid,' android:dashWidth="1px" android:dashGap="1px"')});var a="groove"===t.style;if(parseInt(t.width)>1&&(a||"ridge"===t.style)){var o=F.isString(t.color)?t.color:"",l=r.getColor(o);if(""!==l){var s="1";9===l.length&&(l="#".concat(l.substring(3)),s="0.".concat(l.substring(1,3)));var d=Y.parseRGBA(Y.reduceToRGB(l,a||"#000000"===l?.3:-.3));d.length>0&&(o=r.addColor(d[0],s))}var c='android:color="@color/'.concat(o,'"');if(a)if(n)switch(e){case 0:case 1:i.groove=c;break;case 2:case 3:i.groove=i.solid}else switch(e){case 0:case 1:i.groove=i.solid;break;case 2:case 3:i.groove=c}else if(n)switch(e){case 0:case 1:i.ridge=i.solid;break;case 2:case 3:i.ridge=c}else switch(e){case 0:case 1:i.ridge=c;break;case 2:case 3:i.ridge=i.solid}}return i[t.style]||i.solid}}],[{key:"getStored",value:function(t){return Z.STORED[t]}},{key:"formatOptions",value:function(e,n){for(var i in e){var a=e[i];if("object"===t(a))for(var o in a)if(null!=a[o]){var l=""+a[o];switch(i){case"android":switch(o){case"text":if(!l.startsWith("@string/")&&""!==(l=r.addString(l,"",n))){a[o]="@string/".concat(l);continue}break;case"src":if(/^\w+:\/\//.test(l)&&""!==(l=r.addImage({mdpi:l}))){a[o]="@drawable/".concat(l);continue}}}var s=Y.parseHex(l);""!==s&&(a[o]="@color/".concat(r.addColor(s)))}}return e}},{key:"addString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(arguments.length>2?arguments[2]:void 0).numberResourceValue,i=void 0!==n&&n;if(""!==t){""===e&&(e=t);var r=F.isNumber(t);if(i||!r){var a=!0,o=!1,l=void 0;try{for(var s,d=Z.STORED.strings.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var h=c(s.value,2);if(h[1]===t)return h[0]}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=e.trim().toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").split("_").slice(0,4).join("_").replace(/_+$/g,""),r||/^[0-9]/.test(e)||D.includes(e)?e="__".concat(e):""===e&&(e="__symbol".concat(Math.ceil(1e5*Math.random()))),Z.STORED.strings.has(e)&&(e=O("strings","".concat(e,"_1"))),Z.STORED.strings.set(e,t)}return e}return""}},{key:"addImageSrcSet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.srcset.trim(),i={};if(""!==n){var a=t.src.substring(0,t.src.lastIndexOf("/")+1);n.split(",").forEach(function(t){var e=/^(.*?)\s*([0-9]+\.?[0-9]*x)?$/.exec(t.trim());if(e){null==e[2]&&(e[2]="1x");var n=a+F.lastIndexOf(e[1]);switch(e[2]){case"0.75x":i.ldpi=n;break;case"1x":i.mdpi=n;break;case"1.5x":i.hdpi=n;break;case"2x":i.xhdpi=n;break;case"3x":i.xxhdpi=n;break;case"4x":i.xxxhdpi=n}}})}return null==i.mdpi&&(i.mdpi=t.src),r.addImage(i,e)}},{key:"addImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";if(t&&t.mdpi){n=F.lastIndexOf(t.mdpi);var i=F.lastIndexOf(n,".").toLowerCase();switch(n=n.replace(/.\w+$/,"").replace(/-/g,"_"),i){case"bmp":case"cur":case"gif":case"ico":case"jpg":case"png":n=Z.insertStoredAsset("images",e+n,t);break;default:n=""}}return n}},{key:"addImageURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=U.cssResolveUrl(t);return""!==n?r.addImage({mdpi:n},e):""}},{key:"addColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";t=t.toUpperCase().trim();var n=parseFloat(e)<1?"#".concat(parseFloat(e).toFixed(2).substring(2)+t.substring(1)):t;if(""!==t){var i=Z.STORED.colors.get(n)||"";if(""===i){var r=Y.getColorNearest(t);r&&(r.name=F.camelToLowerCase(r.name),i=t===r.hex&&t===n?r.name:O("color","".concat(r.name,"_1")),Z.STORED.colors.set(n,i))}return i}return""}},{key:"getColor",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=Z.STORED.colors.entries()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=c(r.value,2);if(o[1]===t)return o[0]}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return""}},{key:"parseBackgroundPosition",value:function(t,e){var n=/([0-9]+[a-z]{2}) ([0-9]+[a-z]{2})/.exec(t);return n?[F.convertPX(n[1],e),F.convertPX(n[2],e)]:["",""]}}]),r}(),nt=androme.lib.enumeration,it=androme.lib.util,rt=androme.lib.dom,at=androme.lib.xml,ot=androme.lib.base.NodeList,lt={top:"layout_alignParentTop",bottom:"layout_alignParentBottom"},st={top:"layout_alignTop",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",bottomTop:"layout_above",topBottom:"layout_below"},dt={top:"layout_constraintTop_toTopOf",bottom:"layout_constraintBottom_toBottomOf",baseline:"layout_constraintBaseline_toBaselineOf",bottomTop:"layout_constraintBottom_toTopOf",topBottom:"layout_constraintTop_toBottomOf"},ct={leftTop:["left","top"],rightBottom:["right","bottom"],rightLeftBottomTop:["rightLeft","bottomTop"],leftRightTopBottom:["leftRight","topBottom"],widthHeight:["Width","Height"],horizontalVertical:["Horizontal","Vertical"]},ht=function(n){function l(){var t;return e(this,l),(t=s(this,o(l).apply(this,arguments)))._merge={},t}return a(l,androme.lib.base.Controller),i(l,[{key:"initNode",value:function(t){t.api=this.settings.targetAPI}},{key:"finalize",value:function(t){this.setAttributes(t);for(var e=h(t.views).concat(h(t.includes)),n=0;n<e.length;n++){var i=e[n];i.content=at.removePlaceholderAll(i.content).replace(/\n\n/g,"\n"),this.settings.dimensResourceValue&&(i.content=this.parseDimensions(i.content)),i.content=x(i.content,this.settings),i.content=at.replaceTab(i.content,this.settings)}}},{key:"reset",value:function(){d(o(l.prototype),"reset",this).call(this),I(),this._merge={}}},{key:"setConstraints",value:function(){var t=this;Object.assign(lt,{left:B("layout_alignParentLeft",this.settings),right:B("layout_alignParentRight",this.settings)}),Object.assign(st,{left:B("layout_alignLeft",this.settings),right:B("layout_alignRight",this.settings),leftRight:B("layout_toRightOf",this.settings),rightLeft:B("layout_toLeftOf",this.settings)}),Object.assign(dt,{left:B("layout_constraintLeft_toLeftOf",this.settings),right:B("layout_constraintRight_toRightOf",this.settings),leftRight:B("layout_constraintLeft_toRightOf",this.settings),rightLeft:B("layout_constraintRight_toLeftOf",this.settings)});var e,n=lt,i=!1,r=!1;function a(t,r){return i?"parent"===t.app(e[r]):"true"===t.android(n[r])}function o(t,n){return t[i?"app":"android"](e[n])}function l(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];t.delete.apply(t,[i?"app":"android"].concat(h(r.map(function(t){return e[t]}))))}function s(t,e,n){if(!t.constraint[n]){for(var i=t;i;){var r=o(i,n===y.HORIZONTAL?"leftRight":"topBottom");if(r){if((i=e.find("nodeId",w(r)))&&i.constraint[n])return!0}else i=null}return!1}return!0}this.cache.visible.forEach(function(d){r=d.is(nt.NODE_STANDARD.RELATIVE),i=d.is(nt.NODE_STANDARD.CONSTRAINT);var u=d.flex;r||i||u.enabled?function(){var i=new ot(d.renderChildren.filter(function(t){return t.auto}),d),f=ot.cleared(d.initial.children);if(r){e=st;var p=[],m=[],g=d.toInt("textIndent"),v="nowrap"===d.css("whiteSpace"),b=d.box.width;if(d.renderParent.overflowX)b=d.viewWidth||b||d.renderParent.toInt("width",0,{map:"initial"});else if(d.renderParent.hasAlign(nt.NODE_ALIGNMENT.FLOAT)){var A=Math.min.apply(null,i.list.map(function(t){return t.linear.left}));b=Math.max.apply(null,i.list.map(function(t){return t.linear.right}))-A}else{var T=Math.max.apply(null,d.documentParent.initial.children.filter(function(t){return"left"===t.float&&t.siblingIndex<d.siblingIndex}).map(function(t){return t.linear.right}));i.list.some(function(t){return t.linear.left===T})&&(b=d.box.right-T)}b=Math.ceil(b);var _=0,N=0,E=null,D=null;g<0&&Math.abs(g)<=d.paddingLeft&&(N=Math.abs(g),d.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,d.paddingLeft+g),d.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,null));for(var R=[],I=it.hasBit(t.application.userAgent,nt.USER_AGENT.EDGE),O=0;O<i.length;O++){var x=i.get(O),L=i.get(O-1),C=x.bounds;if(x.inlineText&&!x.hasWidth){var k=c(rt.getRangeClientRect(x.element),2),P=k[0],M=k[1];P&&(M||P.width<x.box.width)&&(C=P,I&&M&&!/^\s*\n+/.test(x.textContent)&&R.push(x))}var X=n["right"===x.float?"right":"left"],G=e["right"===x.float?"rightLeft":"leftRight"];if(0===O)x.android(X,"true"),!d.inline&&g>0&&x.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,g),(!x.siblingflow||x.floating&&"relative"===x.position||x.multiLine&&g<0)&&(E=x),p[p.length]=[x];else{var H=p[p.length-1],z=rt.getElementsBetweenSiblings(L.baseElement,x.baseElement,!1,!0),V=x instanceof W&&!x.hasAlign(nt.NODE_ALIGNMENT.SEGMENTED),F=x.previousSibling(),U=_+x.marginLeft+C.width-(I?x.borderRightWidth:0),j=!1;if(1===O&&L.textElement&&x.textElement&&(j=0===z.length&&!/\s+$/.test(L.textContent)&&!/^\s+/.test(x.textContent)),v||j||["SUP","SUB"].includes(x.tagName)||!("left"!==L.float||x.linear.top>=L.linear.bottom)||!("right"!==x.float&&Math.floor(U)-(x.hasElement&&x.inlineStatic?x.paddingLeft+x.paddingRight:0)>b||x.multiLine&&rt.hasLineBreak(x.element)||L.multiLine&&""!==L.textContent.trim()&&!/^\s*\n+/.test(L.textContent)&&!/\n+\s*$/.test(L.textContent)&&rt.hasLineBreak(L.element)||F&&F.lineBreak||x.preserveWhiteSpace&&/^\n+/.test(x.textContent)||x.blockStatic||V||f.has(x)||R.includes(L)||z.length>0&&z.some(function(t){return rt.isLineBreak(t)})||x.floating&&("left"===x.float&&it.withinFraction(x.linear.left,d.box.left)||"right"===x.float&&it.withinFraction(x.linear.right,d.box.right)||x.linear.top>=L.linear.bottom)))1===O&&N>0&&!L.plainText?(x.anchor(X,"true"),x.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,N)):x.anchor(G,L.stringId),(j||U>b)&&t.checkSingleLine(x),D&&x.anchor(e.topBottom,D.stringId),H.push(x);else{D=H.filter(function(t){return!t.floating})[0]||H[0];for(var Y=0;Y<H.length;Y++)H[Y]!==D&&H[Y].linear.bottom>D.linear.bottom&&(!H[Y].floating||H[Y].floating&&D.floating)&&(D=H[Y]);(V||L instanceof W&&O===i.length-1)&&(x.constraint.marginVertical=D.stringId),x.anchor(e.topBottom,D.stringId),E&&x.linear.top<E.bounds.bottom&&!it.withinRange(x.bounds.top,E.bounds.top,1)&&!it.withinRange(x.bounds.bottom,E.bounds.bottom,1)?x.anchor(G,E.stringId):(x.anchor(X,"true"),E=null),t.settings.ellipsisOnTextOverflow&&L.linearHorizontal&&t.checkSingleLine(L.children[L.children.length-1],!0),N>0&&(t.settings.ellipsisOnTextOverflow&&1===p.length&&1===p[0].length&&p[0][0].textElement&&t.checkSingleLine(p[0][0],!0),x.modifyBox(nt.BOX_STANDARD.PADDING_LEFT,N)),t.adjustBaseline(m),d.alignmentType^=nt.NODE_ALIGNMENT.HORIZONTAL,d.alignmentType|=nt.NODE_ALIGNMENT.MULTILINE,_=0,m.length=0,p.push([x])}}_+=C.width+x.marginLeft+x.marginRight+(!L||L.floating||L.plainText||L.preserveWhiteSpace||""===L.textContent.trim()||/\s+$/.test(L.textContent)||x.floating||x.plainText||x.preserveWhiteSpace||""===x.textContent.trim()||/^\s+/.test(x.textContent)?0:t.settings.whitespaceHorizontalOffset),x.floating||m.push(x)}if(t.adjustBaseline(m),d.marginTop<0&&"relative"===i.get(0).position&&p[0].forEach(function(t,e){return t.modifyBox(nt.BOX_STANDARD.MARGIN_TOP,d.marginTop*(0===e?1:-1),!0)}),d.baseline&&1===p.length&&p[0].forEach(function(t){switch(t.css("verticalAlign")){case"top":t.anchor(n.top,"true");break;case"middle":p[0].forEach(function(e){e.bounds.height<=t.bounds.height&&e.anchor("layout_centerVertical","true")})}}),t.settings.ellipsisOnTextOverflow){var Z=!d.ascend().some(function(t){return t.hasWidth});if(d.ascend(!0).some(function(t){return t.is(nt.NODE_STANDARD.GRID)})||1!==p.length&&!d.hasAlign(nt.NODE_ALIGNMENT.HORIZONTAL))for(var $=0;$<p.length;$++){var K=p[$];if(K.length>1){var J=K[K.length-1];J.inlineText&&t.checkSingleLine(J,!1,Z)}}else for(var q=1;q<i.length;q++){var Q=i.get(q);Q.multiLine||Q.floating||Q.alignParent("left",t.settings)||t.checkSingleLine(Q,!1,Z)}}}else if(e=dt,d.hasAlign(nt.NODE_ALIGNMENT.HORIZONTAL)){var tt=function(t,e){return t.bounds.height>=e.bounds.height?-1:1},et=ot.textBaseline(i.list,t.application.userAgent)[0],at=i.list.filter(function(t){return t.textElement&&t.baseline}).sort(tt),lt=i.list.filter(function(t){return t.imageElement&&t.baseline}).sort(tt);if(lt.length>0){var ht=lt[0];lt.forEach(function(t,n){return n>0&&t.app(e.baseline,ht.stringId)}),et.imageElement||et.app(e.bottom,ht.stringId),lt=lt.filter(function(t){return t!==ht})}for(var ut=function(n){var r=i.get(n),a=et;if(0===n)r.app(e.left,"parent");else{var o=i.get(n-1);r.app(e.leftRight,o.stringId),o.floating||r.floating||(r.constraint.marginHorizontal=o.stringId)}if(lt.includes(r))return"continue";var l=r.css("verticalAlign");switch("baseline"===l&&"TEXTAREA"===r.tagName&&(l="text-bottom"),a&&!l.startsWith("text")&&et!==r||(at.some(function(t){return t!==r&&(a=t,!0)}),a||i.list.slice().sort(function(t,e){return t.nodeType<=e.nodeType?-1:1}).some(function(t){return t!==r&&(a=t,!0)})),l){case"text-top":a&&r.app(e.top,a.stringId);break;case"top":r.app(e.top,"parent");break;case"middle":t.setAlignParent(r,y.VERTICAL);break;case"baseline":a&&r.app(e.baseline,a.stringId);break;case"text-bottom":a&&r.app(e.bottom,a.stringId);break;case"bottom":r.app(e.bottom,"parent")}},ft=0;ft<i.length;ft++)ut(ft)}else!function(){var n=c(i.partition(function(t){return!t.pageflow||"relative"===t.position&&t.alignNegative}),2),r=n[0],f=n[1],p=d.hasAlign(nt.NODE_ALIGNMENT.PERCENT),m=d.toInt("columnCount");if(p)d.android("layout_width","match_parent");else if(0===m){f.each(function(n){var r=n.documentParent;n.autoMarginHorizontal?t.setAlignParent(n,y.HORIZONTAL):((n.linear.left<=r.box.left||it.withinFraction(n.linear.left,r.box.left))&&n.anchor(e.left,"parent",y.HORIZONTAL),(n.linear.right>=r.box.right||it.withinFraction(n.linear.right,r.box.right))&&n.anchor(e.right,"parent",r.hasWidth||"right"===n.float||n.autoMarginLeft?y.HORIZONTAL:"")),n.linear.top<=r.box.top||it.withinFraction(n.linear.top,r.box.top)?n.anchor(e.top,"parent",y.VERTICAL):(n.linear.bottom>=r.box.bottom||it.withinFraction(n.linear.bottom,r.box.bottom))&&n.anchor(e.bottom,"parent",r.hasHeight?y.VERTICAL:""),f.each(function(r){if(n!==r){var o=r.stringId,l=s(r,i,y.HORIZONTAL)?y.HORIZONTAL:"",d=s(r,i,y.VERTICAL)?y.VERTICAL:"",c=n.intersectY(r.linear),h=n.alignOrigin&&r.alignOrigin;n.hasWidth||n.linear.left!==r.linear.left||n.linear.right!==r.linear.right||(a(n,"right")||n.anchor(e.left,o),a(n,"left")||n.anchor(e.right,o)),(it.withinFraction(n.linear.left,r.linear.right)||h&&it.withinRange(n.linear.left,r.linear.right,t.settings.whitespaceHorizontalOffset))&&("right"===n.float&&n.float!==r.float||n.anchor(e.leftRight,o,l,n.withinX(r.linear))),(it.withinFraction(n.linear.right,r.linear.left)||h&&it.withinRange(n.linear.right,r.linear.left,t.settings.whitespaceHorizontalOffset))&&n.anchor(e.rightLeft,o,l,n.withinX(r.linear));var f=a(n,"top"),p=a(n,"bottom"),m=!u.enabled&&!n.inlineElement;(it.withinFraction(n.linear.top,r.linear.bottom)||h&&it.withinRange(n.linear.top,r.linear.bottom,t.settings.whitespaceVerticalOffset))&&(c||!p||m)&&n.anchor(e.topBottom,o,d,c),(it.withinFraction(n.linear.bottom,r.linear.top)||h&&it.withinRange(n.linear.bottom,r.linear.top,t.settings.whitespaceVerticalOffset))&&(c||!f||m)&&n.anchor(e.bottomTop,o,d,c),f||p||(n.linear.top===r.linear.top&&n.anchor(e.top,o,d),n.linear.bottom===r.linear.bottom&&n.anchor(e.bottom,o,d))}})}),f.each(function(n){var r=o(n,"leftRight");r&&(n.constraint.horizontal||(n.constraint.horizontal=u.enabled||s(n,i,y.HORIZONTAL)),n.constraint.marginHorizontal=r);var c=o(n,"topBottom");if(c&&(n.constraint.vertical||(n.constraint.vertical=u.enabled||s(n,i,y.VERTICAL)),n.constraint.marginVertical=c,l(n,"top")),a(n,"left")&&a(n,"right"))if(n.autoMargin)n.autoMarginLeft&&l(n,"left"),n.autoMarginRight&&l(n,"right"),n.autoMarginHorizontal&&(d.hasWidth&&!n.has("width",nt.CSS_STANDARD.PERCENT)?n.android("layout_width","match_parent"):n.inlineElement&&!n.hasWidth&&n.android("layout_width","wrap_content"));else if(n.floating)l(n,"right"===n.float?"left":"right");else if(n.inlineElement)if(n.nodeType<=nt.NODE_STANDARD.IMAGE)switch(n.css("textAlign")){case"center":break;case"right":case"end":l(n,"left");break;default:l(n,"right")}else l(n,"right");else l(n,"right"),n.android("layout_width","match_parent");if(o(n,"bottomTop")&&l(n,"bottom"),n.plainText||!n.hasElement&&n.renderChildren.some(function(t){return t.textElement})){var h=n.cssParent("textAlign");"right"===h?(n.anchor(e.right,"parent",y.HORIZONTAL),n.constraint.horizontal=!0):"center"===h&&(n.constraint.horizontal=!1,t.setAlignParent(n,y.HORIZONTAL))}});for(var g=0;g<f.length;g++){var v=f.get(g);if(!v.anchored){var b=it.searchObject(v.get("app"),"*constraint*"),A=!0,T=!1,_=void 0;try{for(var N,E=function(){var e=c(N.value,2),n=e[0],i=e[1];"parent"!==i&&f.list.filter(function(t){return t.anchored}).find(function(t){return t.stringId===i})&&(-1!==it.indexOf(n,B("Left",t.settings),B("Right",t.settings))&&(v.constraint.horizontal=!0),-1!==it.indexOf(n,"Top","Bottom","Baseline","above","below")&&(v.constraint.vertical=!0))},D=b[Symbol.iterator]();!(A=(N=D.next()).done);A=!0)E()}catch(t){T=!0,_=t}finally{try{A||null==D.return||D.return()}finally{if(T)throw _}}v.anchored&&(g=-1)}}r.length>0&&r.each(function(t){var n=!1;null!=t.right&&t.toInt("right")>=0&&(t.anchor(e.right,"parent",y.HORIZONTAL),t.toInt("left")>0&&(t.anchor(e.left,"parent"),t.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,t.toInt("left")),n=!0)),n||null==t.left||0!==t.toInt("left")||(t.anchor(e.left,"parent",y.HORIZONTAL),t.toInt("right")>0&&(t.anchor(e.right,"parent"),t.modifyBox(nt.BOX_STANDARD.MARGIN_RIGHT,t.toInt("right")))),null!=t.top&&0===t.toInt("top")&&t.anchor(e.top,"parent",y.VERTICAL),null!=t.bottom&&t.toInt("bottom")>=0&&t.anchor(e.bottom,"parent",y.VERTICAL),0!==t.left||0!==t.right||t.floating||t.has("width",nt.CSS_STANDARD.PERCENT)||t.android("layout_width","match_parent"),0===t.top&&0===t.bottom&&t.android("layout_height","match_parent")})}if(u.enabled||m>0||!t.settings.constraintChainDisabled&&f.length>1){var R=[],I=[];if(u.enabled)if("nowrap"===u.wrap)switch(u.direction){case"row-reverse":var O=f.clone();O.list.reverse(),R.push(O);break;case"row":R.push(f.clone());break;case"column-reverse":var x=f.clone();x.list.reverse(),I.push(x);break;case"column":I.push(f.clone())}else{var L=function(){for(var t in k)k[t].reverse()},C=f.clone(),k={},P=[];switch(u.direction){case"row-reverse":case"column-reverse":C.list.reverse()}switch(C.each(function(t){var e=t.linear.top;null==k[e]&&(k[e]=[],P.push(e)),k[e].push(t)}),u.wrap){case"wrap":"column-reverse"===u.direction&&L();break;case"wrap-reverse":-1!==u.direction.indexOf("row")?P.reverse():"column"===u.direction&&L()}for(var M=0;M<P.length;M++){R.push(new ot(k[P[M]]))}}else if(m>0)!function(){for(var e=[],n=Math.ceil(f.length/Math.min(m,f.length)),i=0,r=0;i<f.length;i++){var a=f.get(i);i%n==0&&(i>0&&r++,null==e[r]&&(e[r]=[])),e[r].push(a)}for(var o=[],l=it.convertInt(d.css("columnGap"))||16,s=e.map(function(t){return Math.max.apply(null,t.map(function(t){return t.marginLeft+t.marginRight}))}).reduce(function(t,e){return t+e},0),c=Math.max((s+l*(m-1))/d.box.width/m,.01),h=0;h<e.length;h++){var u=e[h],p=u[0];h>0&&p.android("layout_".concat(B("marginLeft",t.settings)),it.formatPX(p.marginLeft+l)),o.push(p),u.forEach(function(t){t.hasWidth||(t.android("layout_width","0px"),t.app("layout_constraintWidth_percent",(1/m-c).toFixed(2)))}),I.push(new ot(u))}R.push(new ot(o))}();else{var X=f.list.filter(function(t){return!t.constraint.horizontal}),G=f.list.filter(function(t){return!t.constraint.vertical});f.list.some(function(e){var n=[],i=[];return X.includes(e)&&(n.push.apply(n,h(t.partitionChain(e,f,y.HORIZONTAL,!p))),n.length>0&&R.push(new ot(n).sortAsc("linear.left"))),G.includes(e)&&!p&&(i.push.apply(i,h(t.partitionChain(e,f,y.HORIZONTAL,!0))),i.length>0&&I.push(new ot(i).sortAsc("linear.top"))),n.length===f.length||i.length===f.length}),R.sort(function(t,e){return t.length>=e.length?-1:1}),I.sort(function(t,e){return t.length>=e.length?-1:1})}[R,I].forEach(function(n,r){if(n.length>0){var c=new Set,h=[];n.filter(function(t){var e=t.list.map(function(t){return t.id}).sort().join("-");return!c.has(e)&&(c.add(e),!0)}).forEach(function(c,f){if(c.length>(u.enabled?0:1)){var g=0===r?1:0,v=[ct.horizontalVertical[r],ct.horizontalVertical[g]],b=v[0],A=v[1],T=[ct.leftTop[r],ct.leftTop[g]],_=T[0],N=T[1],E=[ct.rightBottom[r],ct.rightBottom[g]],D=E[0],R=E[1],I=[ct.widthHeight[r],ct.widthHeight[g]],O=I[0],w=I[1],S=b.toLowerCase(),x=A.toLowerCase(),L=O.toLowerCase();if(u.enabled)c.list.some(function(t){return t.flex.order>0})&&c[-1!==u.direction.indexOf("reverse")?"sortDesc":"sortAsc"]("flex.order");else if(!p&&0===m&&c.list.every(function(t){return s(t,i,S)}))return;c.parent=d;for(var B=c.get(0),C=c.get(),k=!1,P=!1,M=-1,X=0===r?["left","leftRight","top",y.VERTICAL,"hasWidth","right","marginHorizontal"]:["top","topBottom","left",y.HORIZONTAL,"hasHeight","bottom","marginVertical"],G=0;G<c.length;G++){var H=c.get(G);if(0===G){if(!a(H,X[0])){k=!0;break}}else if(!o(H,X[1])){k=!0;break}}if(!k){if(c.list.every(function(t){return it.sameValue(B,t,"linear.".concat(X[2]))}))for(var W=1;W<c.length;W++){var z=c.get(W);z.constraint[X[3]]||z.anchor(e[X[2]],B.stringId,X[3])}u.enabled||0!==d[X[4]]||(l(C,X[5]),C.constraint[X[6]]=o(C,X[1]))}p?(B.anchor(e[_],"parent",S),C.anchor(e[D],"parent",S),d.renderParent.autoMarginHorizontal||B.app("layout_constraint".concat(b,"_bias"),"right"===B.float&&"right"===C.float?"1":"0")):(B.anchor(e[_],"parent",S),C.anchor(e[D],"parent",S));for(var V=function(i){var s=c.get(i),g=c.get(i+1),v=c.get(i-1);if(u.enabled){s.linear[N]===d.box[N]&&s.linear[R]===d.box[R]&&t.setAlignParent(s,x);var y=n[f+1];if(y){var T=y.get(i);T&&s.withinY(T.linear)&&(s.anchor(e.bottomTop,T.stringId),a(s,"bottom")||l(s,"bottom"))}}else if(p){if(0===h.length)s.anchor(e.top,"parent");else{var E,I=h[h.length-1],S=Math.max.apply(null,I.list.map(function(t){return t.linear.bottom}));(E=c.length===I.length?I.get(i):I.list.find(function(t){return t.linear.bottom===S}))&&s.anchor(e.topBottom,E.stringId)}var C=s.css("width");it.isPercent(C)&&(s.android("layout_width","0px"),s.app("layout_constraint".concat(O,"_percent"),(parseInt(C)/100).toFixed(2))),s.constraint.horizontal=!0,s.constraint.vertical=!0}else m>0&&(0===r&&s.app("layout_constraint".concat(A,"_bias"),"0"),1===r&&i>0&&s.anchor(e.left,B.stringId),s.constraint.horizontal=!0,s.constraint.vertical=!0);if(g&&(s.anchor(e[ct.rightLeftBottomTop[r]],g.stringId),M=Math.max(g.linear[_]-s.linear[D],M)),v&&(s.anchor(e[ct.leftRightTopBottom[r]],v.stringId),s.constraint["margin".concat(b)]=v.stringId),s.constraint["chain".concat(b)]=!0,!s.has(L)||s.has(L,nt.CSS_STANDARD.PERCENT)){var k=s.styleMap["min".concat(O)],P=s.styleMap["max".concat(O)];it.isUnit(k)&&(s.app("layout_constraint".concat(O,"_min"),k),s.android("layout_".concat(L),"0px")),it.isUnit(P)&&(s.app("layout_constraint".concat(O,"_max"),P),s.android("layout_".concat(L),"0px"))}if(u.enabled){switch(s.app("layout_constraint".concat(b,"_weight"),""+s.flex.grow),0===s["view".concat(O)]&&0===s.flex.grow&&s.flex.shrink<=1?s.android("layout_".concat(L),"wrap_content"):s.flex.grow>0&&s.android("layout_".concat(L),"0px"),0===s.flex.shrink&&s.app("layout_constrained".concat(O),"true"),s.flex.alignSelf){case"flex-start":s.anchor(e[N],"parent",x);break;case"flex-end":s.anchor(e[R],"parent",x);break;case"baseline":c.list.some(function(t){return t!==s&&t.nodeType<=nt.NODE_STANDARD.TEXT&&(s.anchor(e.baseline,t.stringId),!0)})&&(l(s,"top","bottom"),c.each(function(t){o(t,"top")===s.stringId&&l(t,"top"),o(t,"bottom")===s.stringId&&l(t,"bottom")}),s.constraint.vertical=!0);break;case"center":case"stretch":"center"!==s.flex.alignSelf&&s.android("layout_".concat(w.toLowerCase()),"0px"),s.constraint[x]=!1,t.setAlignParent(s,x)}if("auto"!==s.flex.basis){var X=it.convertInt(s.flex.basis);X>0&&(it.isPercent(s.flex.basis)?s.app("layout_constraint".concat(O,"_percent"),(X/100).toFixed(2)):(s.app("layout_constraint".concat(O,"_min"),it.formatPX(X)),s.constraint["min".concat(O)]=!0))}}},F=0;F<c.length;F++)V(F);var U="layout_constraint".concat(b,"_chainStyle");if(u.enabled&&"normal"!==u.justifyContent&&0===Math.max.apply(null,c.list.map(function(t){return t.flex.grow}))){switch(u.justifyContent){case"space-between":B.app(U,"spread_inside");break;case"space-evenly":B.app(U,"spread"),c.each(function(t){return t.app("layout_constraint".concat(b,"_weight"),""+(t.flex.grow||1))});break;case"space-around":B.app("layout_constraint".concat(b,"_chainStyle"),"spread_inside"),B.constraint[S]=!1,C.constraint[S]=!1,t.addGuideline(B,S,!0,!1),t.addGuideline(C,S,!0,!0);break;default:var j=u.justifyContent;if(-1!==u.direction.indexOf("reverse"))switch(u.justifyContent){case"flex-start":j="flex-end";break;case"flex-end":j="flex-start"}var Y="0.5";switch(j){case"flex-start":Y="0";break;case"flex-end":Y="1"}B.app(U,"packed"),B.app("layout_constraint".concat(b,"_bias"),Y)}P=!0}else if(p)B.app(U,"packed");else if(!u.enabled&&m>0)B.app(U,0===r?"spread_inside":"packed");else{var Z=it.withinFraction(d.box.left,B.linear.left),$=it.withinFraction(C.linear.right,d.box.right),K=it.withinFraction(d.box.top,B.linear.top),J=it.withinFraction(C.linear.bottom,d.box.bottom);if(S===y.HORIZONTAL&&Z&&$||S===y.VERTICAL&&K&&J)u.enabled||c.length>2?!u.enabled&&d.inlineElement?(B.app(U,"packed"),B.app("layout_constraint".concat(b,"_bias"),0===r&&"right"===d.float?"1":"0")):(B.app(U,"spread_inside"),P=!0):M>t.settings["constraintChainPacked".concat(b,"Offset")]&&(a(B,_)&&l(B,ct.rightLeftBottomTop[r]),a(C,D)&&l(C,ct.leftRightTopBottom[r]));else if(M<=t.settings["chainPacked".concat(b,"Offset")]||"nowrap"!==d.flex.wrap||S===y.HORIZONTAL&&(Z||$)){B.app(U,"packed");var q="";S===y.HORIZONTAL&&(Z?q="0":$&&(q="1")),""===q&&(q=c["".concat(S,"Bias")]),B.app("layout_constraint".concat(b,"_bias"),q)}else B.app(U,"spread"),P=!0;u.enabled?P=!0:((0===r?[[N,R],[R,N]]:[[_,D],[D,_]]).forEach(function(t){c.list.every(function(e){return it.sameValue(B,e,"linear.".concat(t[0]))&&c.list.some(function(e){return!it.sameValue(B,e,"linear.".concat(t[1]))})})&&c.each(function(e){return l(e,t[1])})}),c.each(function(t){var e=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;l.find("id",t.id)&&l.clear()}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}}))}P&&c.each(function(t){delete t.constraint.marginHorizontal,delete t.constraint.marginVertical}),h.push(c)}})}})}f.each(function(t){t.constraint.horizontal=s(t,i,y.HORIZONTAL),t.constraint.vertical=s(t,i,y.VERTICAL)}),u.enabled?"nowrap"!==u.wrap&&["topBottom","bottomTop"].forEach(function(t,n){f.each(function(r){if(a(r,0===n?"bottom":"top")){for(var s=[r],d=!1,c=r;c;){var h=o(c,t);if(h){if((c=i.find("nodeId",w(h)))&&r.withinY(c.linear)&&(s.push(c),d=a(c,0===n?"top":"bottom")))break}else c=null}if(!d)for(var u=function(){var t=s[p];f.list.some(function(n){return t!==n&&n.linear.top===t.linear.top&&n.linear.bottom===t.linear.bottom&&(l(t,"topBottom","bottomTop"),t.app(e.top,n.stringId),t.app(e.bottom,n.stringId),!0)})},p=0;p<s.length;p++)u()}})}):0===m&&function(){var n=function(t,e){l(t,e),v[t.stringId][e]=null};f.each(function(t){[["top","bottom","topBottom"],["bottom","top","bottomTop"]].forEach(function(n){a(t,n[1])&&!o(t,n[2])&&["leftRight","rightLeft"].forEach(function(i){var r=o(t,i);if(r){var a=f.find("stringId",r);a&&o(a,n[2])&&(it.withinFraction(t.linear[n[0]],a.linear[n[0]])&&t.anchor(e[n[0]],a.stringId),it.withinFraction(t.linear[n[1]],a.linear[n[1]])&&t.anchor(e[n[1]],a.stringId))}})})});var r=f.list.filter(function(t){return!t.anchored&&(a(t,"top")||a(t,"right")||a(t,"bottom")||a(t,"left"))});0===i.list.filter(function(t){return t.anchored}).length&&0===r.length&&r.push(i.get(0)),r.forEach(function(e){return t.addGuideline(e,"",!1,!1)});var h=c(i.partition(function(t){return t.anchored}),2),u=h[0];h[1].each(function(e){if(it.withinRange(e.horizontalBias(t.settings),.5,.01)&&it.withinRange(e.verticalBias(t.settings),.5,.01))t.setAlignParent(e);else if(t.settings.constraintCirclePositionAbsolute&&u.length>0&&!e.constraint.horizontal&&!e.constraint.vertical){var n=u.get(0),i=e.center,r=n.center,a=Math.abs(i.x-r.x),o=Math.abs(i.y-r.y),l=Math.round(Math.atan(Math.min(a,o)/Math.max(a,o))*(180/Math.PI)),s=Math.round(Math.sqrt(Math.pow(a,2)+Math.pow(o,2)));i.y>r.y?i.x>r.x?a>o?l+=90:l=180-l:a>o?l=270-l:l+=180:i.y<r.y?r.x>i.x?a>o?l+=270:l=360-l:a>o&&(l=90-l):l=i.x>r.x?90:270,e.delete("app","layout_constraint*"),e.app("layout_constraintCircle",n.stringId),e.app("layout_constraintCircleRadius",S("".concat(e.nodeName),"constraintcircleradius",it.formatPX(s),t.settings)),e.app("layout_constraintCircleAngle",""+l),e.constraint.horizontal=!0,e.constraint.vertical=!0}else t.addGuideline(e)});for(var p=null,m=null,g=Math.max.apply(null,i.list.map(function(t){return t.linear.bottom})),v={},b=function(n){var r=i.get(n),c=a(r,"top"),h=a(r,"right"),u=a(r,"bottom"),f=a(r,"left");if(v[r.stringId]={leftRight:o(r,"leftRight"),rightLeft:o(r,"rightLeft"),topBottom:o(r,"topBottom"),bottomTop:o(r,"bottomTop")},(u&&o(r,"topBottom")&&r.hasHeight||c&&u&&!r.has("marginTop",nt.CSS_STANDARD.AUTO)&&r.linear.bottom<g)&&(l(r,"bottom"),u=!1),r.pageflow)[[f,h,"rightLeft","leftRight","right","left","Horizontal"],[c,u,"bottomTop","topBottom","bottom","top","Vertical"]].forEach(function(e,n){if(e[0]||e[1]){var i=e[0]&&e[1],s=r;if(!i)do{var c=o(s,e[0]?e[2]:e[3]);if(c){if((s=t.findByStringId(c))&&(e[0]&&a(s,e[4])||e[1]&&a(s,e[5]))){i=!0;break}}else s=null}while(s);if(i&&(d.constraint["layout".concat(e[6])]=!0),!r.constraint["chain".concat(e[6])])if(e[0]&&e[1])r.autoMargin||r.linearVertical||r.android("layout_".concat(0===n?"width":"height"),"match_parent",!1);else if(e[1]&&i){var h=t.findByStringId(o(r,e[3]));h&&0===h.marginBottom&&l(r,e[4])}}}),h?m||(m=!1,m=s(r,i,y.HORIZONTAL)):f&&(r.is(nt.NODE_STANDARD.TEXT)&&"center"===r.cssParent("textAlign",!0)&&r.anchor(e.right,"parent"),!r.textElement||r.hasWidth||0!==r.toInt("maxWidth")||!r.multiLine||rt.hasLineBreak(r.element)||i.list.some(function(t){return o(t,"rightLeft")===r.stringId})||r.android("layout_width","match_parent")),u&&(p||(p=!1,p=s(r,i,y.VERTICAL)));else{if(f&&h&&null==r.right&&r.hasWidth)switch(r.cssParent("textAlign",!0)){case"center":case"right":case"end":break;default:l(r,"right")}if(c&&u&&null==r.bottom&&r.hasHeight)switch(r.css("verticalAlign")){case"bottom":case"text-bottom":case"middle":break;default:l(r,"bottom")}f&&h&&!d.hasWidth&&(d.constraint.layoutWidth=!0),c&&u&&!d.hasHeight&&(d.constraint.layoutHeight=!0),h&&r.toInt("right")>0&&r.modifyBox(nt.BOX_STANDARD.MARGIN_RIGHT,Math.max(r.toInt("right")-d.paddingRight,0)),u&&r.toInt("bottom")>0&&r.modifyBox(nt.BOX_STANDARD.MARGIN_BOTTOM,Math.max(r.toInt("bottom")-d.paddingBottom,0)),h&&u&&d.documentRoot&&(d.hasWidth||(d.constraint.layoutWidth=!1,d.constraint.layoutHorizontal=!1),d.hasHeight||(d.constraint.layoutHeight=!1,d.constraint.layoutVertical=!1))}},A=0;A<i.length;A++)b(A);var T=function(t){var e=function(e){t!==e&&["leftRight","rightLeft","bottomTop","topBottom"].forEach(function(r){if(v[t][r]&&v[t][r]===v[e][r]){var a=i.find("stringId",v[t][r]);a&&[i.find("stringId",t),i.find("stringId",e)].some(function(i,l){if(i){var s=0===l?t:e;switch(r){case"leftRight":case"rightLeft":if((o(i,"left")||o(i,"right"))&&o(a,"rightLeft"===r?"leftRight":"rightLeft")!==s)return n(i,r),!0;break;case"bottomTop":case"topBottom":if((o(i,"top")||o(i,"bottom"))&&o(a,"topBottom"===r?"bottomTop":"topBottom")!==s)return n(i,r),!0}}return!1})}})};for(var r in v)e(r)};for(var _ in v)T(_);!1===m&&(d.constraint.layoutWidth=!0),!1===p&&(d.constraint.layoutHeight=!0)}()}();i.each(function(e){if(e.constraint.marginHorizontal){var n=t.findByStringId(e.constraint.marginHorizontal);if(n){var i=e.linear.left-n.actualRight();i>=1&&e.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,i)}}if(e.constraint.marginVertical){var r=t.findByStringId(e.constraint.marginVertical);if(r){var a=e.linear.top-r.linear.bottom;a>=1&&e.modifyBox(nt.BOX_STANDARD.MARGIN_TOP,a)}}})}():d.linearHorizontal&&t.adjustLineHeight(d.renderChildren,d)})}},{key:"createGroup",value:function(t,e,n){var i=new W(this.cache.nextId,e,t,n);return n.length>0&&n.forEach(function(t){return t.inherit(i,"data")}),this.cache.append(i),i}},{key:"renderGroup",value:function(t,e,n,i){var r=this,a=it.hasValue(t.dataset.target)&&!it.hasValue(t.dataset.include),o="",l="";switch("number"==typeof n&&(n=H.getControlName(n)),n){case g.LINEAR:i={android:{orientation:i&&i.horizontal?y.HORIZONTAL:y.VERTICAL}};break;case g.GRID:i={android:{columnCount:i&&it.convertInt(i.columnCount)>0?""+i.columnCount:"2",rowCount:i&&it.convertInt(i.rowCount>0)?""+i.rowCount:""}};break;default:i={}}if(t.setNodeType(n),t.overflowX||t.overflowY){var s=[];t.overflowX&&t.overflowY?s.push(g.SCROLL_HORIZONTAL,g.SCROLL_VERTICAL):(t.overflowX&&s.push(g.SCROLL_HORIZONTAL),t.overflowY&&s.push(g.SCROLL_VERTICAL));var d=null,c=s.map(function(n,i){var a=new H(r.cache.nextId,0===i?t.element:void 0);a.api=r.settings.targetAPI,a.nodeName=t.nodeName,a.documentParent=t.documentParent,a.setNodeType(n),0===i?(a.inherit(t,"initial","base","data","style","styleMap"),a.parent=e,a.render(e)):(a.init(),a.inherit(t,"dimensions"),a.inherit(t,"initial","style","styleMap"),d&&(d.css("overflow","visible scroll"),d.css("overflowX","scroll"),d.css("overflowY","visible"),a.parent=d,a.render(d)),a.css("overflow","scroll visible"),a.css("overflowX","visible"),a.css("overflowY","scroll"),t.has("height",nt.CSS_STANDARD.UNIT)&&a.css("height",it.formatPX(t.toInt("height")+t.paddingTop+t.paddingBottom))),a.resetBox(nt.BOX_STANDARD.PADDING);var s=it.repeat(a.renderDepth);return o+="{<".concat(a.id,"}").concat(s,"<").concat(n,"{@").concat(a.id,"}>\n")+"{:".concat(a.id,"}"),l="".concat(s,"</").concat(n,">\n{>").concat(a.id,"}")+(1===i?"\n":"")+l,d=a,r.cache.append(a),a});2===c.length?(t.android("layout_width","wrap_content"),t.android("layout_height","wrap_content")):t.android(t.overflowX?"layout_width":"layout_height","wrap_content"),t.removeElement(),t.resetBox(nt.BOX_STANDARD.MARGIN),t.parent=c[c.length-1],t.render(t.parent)}else t.render(a?t:e);return t.apply(i),this.getEnclosingTag(a||it.hasValue(e.dataset.target)||0===t.renderDepth&&!t.documentRoot?-1:t.renderDepth,n,t.id,at.formatPlaceholder(t.id),o,l)}},{key:"renderNode",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=it.hasValue(t.dataset.target)&&!it.hasValue(t.dataset.include);switch("number"==typeof n&&(n=H.getControlName(n)),t.setNodeType(n),t.tagName){case"IMG":if(!i){var a=t.element,o=t.has("width",nt.CSS_STANDARD.PERCENT),l=t.has("height",nt.CSS_STANDARD.PERCENT),s=t.toInt("width"),d=t.toInt("height"),c="";if(o||l)c=o&&l?"fitXY":"fitCenter";else{if(0===s){var h=/width="([0-9]+)"/.exec(a.outerHTML);h&&(s=parseInt(h[1]),t.css("width",it.formatPX(h[1])))}if(0===d){var u=/height="([0-9]+)"/.exec(a.outerHTML);u&&(d=parseInt(u[1]),t.css("height",it.formatPX(u[1])))}switch(t.css("objectFit")){case"contain":c="centerInside";break;case"cover":c="centerCrop";break;case"scale-down":c="fitCenter";break;case"none":c="matrix";break;default:c="fitXY"}}if(""!==c&&t.android("scaleType",c),(s>0&&0===d||0===s&&d>0)&&t.android("adjustViewBounds","true"),t.pageflow)e.layoutHorizontal&&t.baseline&&t.android("baselineAlignBottom","true");else{var f=t.toInt("left"),p=t.toInt("top");if(f<0||p<0){var m=new H(this.cache.nextId,t.element);return m.api=this.settings.targetAPI,m.excludeProcedure|=nt.NODE_PROCEDURE.ALL,m.excludeResource|=nt.NODE_RESOURCE.ALL,m.android("layout_width",s>0?it.formatPX(s):"wrap_content"),m.android("layout_height",d>0?it.formatPX(d):"wrap_content"),m.setBounds(),m.setNodeType(g.FRAME),m.render(e),f<0&&(t.modifyBox(nt.BOX_STANDARD.MARGIN_LEFT,f,!0),m.css("left","0px")),p<0&&(t.modifyBox(nt.BOX_STANDARD.MARGIN_TOP,p,!0),m.css("top","0px")),t.parent=m,this.cache.append(m),this.getEnclosingTag(m.renderDepth,g.FRAME,m.id,this.renderNode(t,m,n,!0))}}}break;case"TEXTAREA":var v=t.element;if(t.android("minLines","2"),v.rows>2&&t.android("maxLines",""+v.rows),v.maxLength>0&&t.android("maxLength",""+v.maxLength),!t.hasWidth){var b=it.convertInt(v.cols);b>0&&t.css("width",it.formatPX(10*b))}t.android("hint",v.placeholder),t.android("scrollbars",y.VERTICAL),t.android("inputType","textMultiLine"),t.overflowX&&t.android("scrollHorizontally","true");break;case"INPUT":var A=t.element;switch(A.type){case"radio":if(!i){var T=e.children.map(function(t){t.renderAs&&(t=t.renderAs);var e=t.element;return t.visible&&!t.rendered&&"radio"===e.type&&e.name===A.name?t:null}).filter(function(t){return t});if(T.length>1){var _=this.createGroup(e,t,T);_.setNodeType(g.RADIO_GROUP),_.inherit(t,"alignment"),_.render(e);var N="",E="",D=!0,R=!1,I=void 0;try{for(var O,w=_.children[Symbol.iterator]();!(D=(O=w.next()).done);D=!0){var S=O.value;S.element.checked&&(E=S.stringId),N+=this.renderNode(S,_,nt.NODE_STANDARD.RADIO,!0)}}catch(t){R=!0,I=t}finally{try{D||null==w.return||w.return()}finally{if(R)throw I}}return _.android("orientation",ot.linearX(T,T.every(function(t){return t.documentParent===T[0].documentParent}))?y.HORIZONTAL:y.VERTICAL),_.alignmentType|=nt.NODE_ALIGNMENT.SEGMENTED,""!==E&&_.android("checkedButton",E),this.getEnclosingTag(_.renderDepth,g.RADIO_GROUP,_.id,N)}}break;case"password":t.android("inputType","textPassword");break;case"text":t.android("inputType","text");break;case"range":it.hasValue(A.min)&&t.android("min",A.min),it.hasValue(A.max)&&t.android("max",A.max),it.hasValue(A.value)&&t.android("progess",A.value)}switch(A.type){case"text":case"search":case"tel":case"url":case"email":case"password":if(!t.hasWidth){var x=it.convertInt(A.size);x>0&&t.css("width",it.formatPX(10*x))}}}switch(t.controlName){case g.TEXT:var L=[];t.overflowX&&L.push(y.HORIZONTAL),t.overflowY&&L.push(y.VERTICAL),L.length>0&&t.android("scrollbars",L.join("|")),t.has("maxWidth",nt.CSS_STANDARD.UNIT)&&t.android("maxWidth",t.css("maxWidth")),t.has("maxHeight",nt.CSS_STANDARD.UNIT)&&t.android("maxHeight",t.css("maxHeight")),"nowrap"===t.css("whiteSpace")&&t.android("singleLine","true");break;case g.LINE:t.hasHeight||t.android("layout_height",it.formatPX(t.borderTopWidth+t.borderBottomWidth+t.paddingTop+t.paddingBottom||1))}return t.render(r?t:e),this.getEnclosingTag(r||it.hasValue(e.dataset.target)||0===t.renderDepth&&!t.documentRoot?-1:t.renderDepth,t.controlName,t.id)}},{key:"renderNodeStatic",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;a||((a=new H).api=this.settings.targetAPI),a.apply(et.formatOptions(n,this.settings));var l=Math.max(0,e),s="number"==typeof t?H.getControlName(t):t;switch(s){case"include":case"merge":case"menu":break;default:a.setNodeType(s)}var d=a.hasElement?a.nodeName:s;it.hasValue(i)&&(isNaN(parseInt(i))||(i=S(d,"width",i,this.settings)),a.android("layout_width",i,!1)),it.hasValue(r)&&(isNaN(parseInt(r))||(r=S(d,"height",r,this.settings)),a.android("layout_height",r,!1)),a.renderDepth=l;var c=this.getEnclosingTag(a.documentRoot||0!==e?e:-1,s,a.id,o?at.formatPlaceholder(a.id):"");if(this.settings.showAttributes&&0===a.id){var h=it.repeat(l+1),u=a.combine().map(function(t){return"\n".concat(h+t)}).join("");c=c.replace(at.formatPlaceholder(a.id,"@"),u)}return n.stringId=a.stringId,c}},{key:"renderInclude",value:function(t,e,n){return this._merge[n]="true"===t.dataset.includeMerge,t.documentRoot=!this._merge[n],this.renderNodeStatic("include",e.renderDepth+1,{layout:"@layout/".concat(n)})}},{key:"renderMerge",value:function(t,e){var n=e.join("");if(this._merge[t]){var i=new H;i.api=this.settings.targetAPI,i.documentRoot=!0,n=this.renderNodeStatic("merge",0,{},"","",i,!0).replace("{:0}",n)}return n}},{key:"renderColumnSpace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r="";return it.isPercent(e)&&(r=(parseInt(e)/100).toFixed(2),e="0px"),this.renderNodeStatic(nt.NODE_STANDARD.SPACE,t,{android:{layout_columnWeight:r,layout_columnSpan:""+i}},e,it.hasValue(n)?n:"wrap_content")}},{key:"baseRenderDepth",value:function(t){return this._merge[t]?0:-1}},{key:"setBoxSpacing",value:function(t){var e=this;t.cache.visible.forEach(function(t){return t.setBoxSpacing(e.settings)})}},{key:"setDimensions",value:function(t){var e=this;function n(t,e,n,r,a){var o=i[t],l=n;if(5===arguments.length){if(!a||!/(px|dp|sp)$/.test(a))return;l="".concat(n,",").concat(r,",").concat(a)}null==o[l]&&(o[l]=[]),o[l].push(e)}var i={};if(t.cache.visible.forEach(function(t){if(e.settings.dimensResourceValue){var r=t.nodeName.toLowerCase();null==i[r]&&(i[r]={});for(var a=Object.keys(nt.BOX_STANDARD),o=0;o<a.length;o++){var l=a[o],s=e.valueBox(t,l);if(""!==s[0]&&"0px"!==s[1]){var d="".concat(nt.BOX_STANDARD[l].toLowerCase(),",").concat(s[0],",").concat(s[1]);n(r,t,d)}}["android:layout_width:width","android:layout_height:height","android:minWidth:min_width","android:minHeight:min_height","app:layout_constraintWidth_min:constraint_width_min","app:layout_constraintHeight_min:constraint_height_min"].forEach(function(e){var i=c(e.split(":"),3),a=i[1];n(r,t,i[2],a,t[i[0]](a))})}}),this.settings.dimensResourceValue){var r=et.getStored("dimens");for(var a in i){var o=i[a],l=function(t){var n=c(t.split(","),3),i=n[0],l=n[1],s=n[2],d=e.getDimensResourceKey(r,"".concat(a,"_").concat(B(i,e.settings)),s);o[t].forEach(function(t){return t[-1!==l.indexOf("constraint")?"app":"android"](l,"@dimen/".concat(d))}),r.set(d,s)};for(var s in o)l(s)}}}},{key:"getEnclosingTag",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=it.repeat(Math.max(0,t)),l=r+"{<".concat(n,"}");return l+=""!==i?o+"<".concat(e).concat(0===t?"{#0}":"","{@").concat(n,"}>\n")+i+o+"</".concat(e,">\n"):o+"<".concat(e).concat(0===t?"{#0}":"","{@").concat(n,"} />\n"),l+="{>".concat(n,"}")+a}},{key:"valueBox",value:function(t,e){var n=it.convertEnum(parseInt(e),nt.BOX_STANDARD,v);if(""!==n){var i=B(n,this.settings);return[i,t.android(i)||"0px"]}return["","0px"]}},{key:"parseDimensions",value:function(t){for(var e,n=et.getStored("dimens"),i=/\s+\w+:\w+="({%(\w+),(\w+),(-?\w+)})"/g;null!=(e=i.exec(t));){var r=this.getDimensResourceKey(n,"".concat(e[2],"_").concat(B(e[3],this.settings)),e[4]);n.set(r,e[4]),t=t.replace(RegExp(e[1],"g"),"@dimen/".concat(r))}return t}},{key:"setAttributes",value:function(t){var e=this;if(this.settings.showAttributes)for(var n=t.cache.visible.map(function(t){return{pattern:at.formatPlaceholder(t.id,"@"),attributes:e.parseAttributes(t)}}),i=h(t.views).concat(h(t.includes)),r=function(){var t=i[a];n.forEach(function(e){return t.content=t.content.replace(e.pattern,e.attributes)}),t.content=t.content.replace("{#0}",e.getRootNamespace(t.content))},a=0;a<i.length;a++)r()}},{key:"parseAttributes",value:function(t){for(var e in"rtl"===t.dir&&(t.nodeType<nt.NODE_STANDARD.INLINE?t.android("textDirection","rtl"):t.length>0&&t.android("layoutDirection","rtl")),t.dataset)/^attr[A-Z]+/.test(e)&&function(){var n=it.capitalize(e.substring(4),!1);t.dataset[e].split(";").forEach(function(e){var i=c(e.split("::"),2),r=i[0],a=i[1];it.hasValue(r)&&it.hasValue(a)&&t.attr(n,r,a)})}();var n=it.repeat(t.renderDepth+1);return t.combine().map(function(t){return"\n".concat(n+t)}).join("")}},{key:"getRootNamespace",value:function(t){var e="";for(var n in b)RegExp("\\s+".concat(n,":")).test(t)&&(e+="\n\txmlns:".concat(n,'="').concat(b[n],'"'));return e}},{key:"getDimensResourceKey",value:function(t,e,n){return t.has(e)&&t.get(e)!==n&&(e=O("dimens","".concat(e,"_1"))),e}},{key:"setAlignParent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=dt;[y.HORIZONTAL,y.VERTICAL].forEach(function(r,a){t.constraint[r]||""!==e&&r!==e||(t.app(i[0===a?"left":"top"],"parent"),t.app(i[0===a?"right":"bottom"],"parent"),t.constraint[r]=!0,n&&t.app("layout_constraint".concat(r.charAt(0).toUpperCase()+r.substring(1),"_bias"),t["".concat(r,"Bias")]))})}},{key:"partitionChain",value:function(e,n,i,r){var a=dt,o=[],l=[],s=[];switch(i){case y.HORIZONTAL:o.push(a.left,a.right),l.push("linear.top","linear.bottom"),s.push(a.leftRight,a.rightLeft);break;case y.VERTICAL:o.push(a.top,a.bottom),l.push("linear.left","linear.right"),s.push(a.topBottom,a.bottomTop)}return l.map(function(i){var a=it.sortAsc(n.list.filter(function(t){return it.sameValue(e,t,i)}),l[0]);if(a.length>1){if(!r||!a.some(function(t){return t.floating})&&"parent"===a[0].app(o[0])&&"parent"===a[a.length-1].app(o[1]))return a;var d=function(){var t,n=new Set([e]);do{t=!1,Array.from(n).some(function(e){return a.some(function(i){return n.has(i)||i.app(s[0])!==e.stringId&&i.app(s[1])!==e.stringId||(n.add(i),t=!0),t})})}while(t);return{v:Array.from(n)}}();if("object"===t(d))return d.v}return[]}).reduce(function(t,e){return t.length>=e.length?t:e})}},{key:"addGuideline",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=dt;t.pageflow&&(null==a&&(a="right"===t.float||null==t.left&&null!=t.right||t.textElement&&"right"===t.css("textAlign")||t.alignParent("right",this.settings)),null==i&&!0===a&&(i=!0)),t.dataset.constraintPercent&&(i="true"===t.dataset.constraintPercent);var l=t.documentParent,s="layout_constraintGuide_".concat(i?"percent":"begin");[y.HORIZONTAL,y.VERTICAL].forEach(function(d,c){if(!t.constraint[d]&&(""===n||d===n)){var h="",u="",f="",p="",m=!1,v=0;switch(c){case 0:h=a?"right":"left",u=a?"left":"right",f=a?"rightLeft":"leftRight",p=a?"leftRight":"rightLeft","relative"===t.position&&t.toInt("left")<0&&(v=t.toInt("left"));break;case 1:h=a?"bottom":"top",u=a?"top":"bottom",f=a?"bottomTop":"topBottom",p=a?"topBottom":"bottomTop","relative"===t.position&&t.toInt("top")<0&&(v=t.toInt("top"))}var b=t.pageflow?"bounds":"linear",A=i?Math.abs(t[b][h]+v-(l.documentBody?0:l.box[h]))/l.box[0===c?"width":"height"]:0;if(i||(m=l.renderChildren.some(function(e){if(e.constraint[d]&&(!e.constraint["chain".concat(it.capitalize(d))]||e.constraint["margin".concat(it.capitalize(d))])){if(it.withinFraction(t.linear[h]+v,e.linear[u]))return t.anchor(o[f],e.stringId,d,!0),!0;if(it.withinFraction(t.linear[u]+v,e.linear[h]))return t.anchor(o[p],e.stringId,d,!0),!0;if(it.withinFraction(t.bounds[h]+v,e.bounds[h]))return t.anchor(o[1===c&&t.textElement&&t.baseline&&e.textElement&&e.baseline?"baseline":h],e.stringId,d,!0),!0;if(it.withinFraction(t.bounds[u]+v,e.bounds[u]))return t.anchor(o[u],e.stringId,d,!0),!0}return!1})),!m){var T=l.constraint.guideline||{},_=i?parseFloat(Math.abs(A-(a?1:0)).toFixed(e.settings.constraintPercentAccuracy)):a?t[b][h]+v-l.box[u]:t[b][h]+v-l.box[h];if(!i&&!a)if(_<0){var N=l["padding".concat(it.capitalize(h))];_=N>=Math.abs(_)?0:Math.abs(_)-N}else l.documentBody&&(_=t[b][h]+v);if(0===_)t.anchor(o[h],"parent",d,!0);else{var E={android:{orientation:0===c?y.VERTICAL:y.HORIZONTAL},app:r({},s,""+_)},D=it.optional(T,"".concat(d,".").concat(s,".").concat(h),"object");if(D)for(var R in D)if(D[R]===_){t.anchor(o[h],R,d,!0),t.delete("app",o[u]),m=!0;break}if(!m){i||(E.app[s]=S(t.nodeName,"constraintguide_begin",it.formatPX(_),e.settings));var I=e.renderNodeStatic(g.GUIDELINE,t.renderDepth,E,"wrap_content","wrap_content"),O=E.stringId;e.appendAfter(t.id,I),t.anchor(o[h],O,d,!0),t.delete("app",o[u]),t.constraint["".concat(d,"Guideline")]=O,null==T[d]&&(T[d]={}),null==T[d][s]&&(T[d][s]={}),null==T[d][s][h]&&(T[d][s][h]={}),T[d][s][h][O]=_,l.constraint.guideline=T}}}}})}},{key:"adjustBaseline",value:function(t){if(t.length>1){var e=ot.textBaseline(t.filter(function(t){return t.baseline&&0===t.toInt("top")&&0===t.toInt("bottom")}),this.application.userAgent);if(e.length>0){var n=st,i=e[0],r=[],a=null,o=!0,l=!1,s=void 0;try{for(var d,c=t[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){var h=d.value;h!==i&&(h.baseline&&(h.nodeType<=nt.NODE_STANDARD.INLINE||h.linearHorizontal&&h.renderChildren.some(function(t){return t.baseline&&t.nodeType<=nt.NODE_STANDARD.INLINE}))&&(!i.imageElement&&h.imageElement?r.push(h):h.alignOrigin?h.android(n[h.imageElement||h.is(nt.NODE_STANDARD.BUTTON)?"bottom":"baseline"],i.stringId):"relative"===i.position&&h.bounds.height<i.bounds.height&&0===h.lineHeight&&h.android(n[it.convertInt(i.top)>0?"top":"bottom"],i.stringId)),i.imageElement&&(!a||h.bounds.height>a.bounds.height)&&(a=h))}}catch(t){l=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(l)throw s}}if(r.length>0){r.sort(function(t,e){return t.bounds.height>=e.bounds.height?-1:1});for(var u=0;u<r.length;u++)0===u?i.android(n.bottom,r[u].stringId):r[u].android(n.bottom,r[0].stringId);a=null}a&&(a.imageElement?a.bounds.height>i.bounds.height?a.delete("android",n.bottom):a=null:a.delete("android",n.baseline),a&&i.android(n.bottom,a.stringId))}}}},{key:"checkSingleLine",value:function(t){t&&t.textElement&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||arguments.length>2&&void 0!==arguments[2]&&arguments[2]||!t.hasWidth&&!t.multiLine&&t.textContent.trim().split(" ").length>1)&&t.android("singleLine","true")}},{key:"adjustLineHeight",value:function(t,e){var n=Math.max.apply(null,t.map(function(t){return t.toInt("lineHeight")}));if(n>0){var i=Number.MAX_VALUE,r=0;t.every(function(t){var e=n-t.bounds.height;return e>0&&(i=Math.min(e,i),n===t.toInt("lineHeight")&&(r=Math.max(t.toInt("top")<0?Math.abs(t.toInt("top")):0,r)),!0)})&&(e.modifyBox(nt.BOX_STANDARD.PADDING_TOP,Math.floor(i/2)),e.modifyBox(nt.BOX_STANDARD.PADDING_BOTTOM,Math.ceil(i/2)+r))}}},{key:"findByStringId",value:function(t){return this.cache.find("stringId",t)}},{key:"baseTemplate",get:function(){return'<?xml version="1.0" encoding="utf-8"?>\n{:0}'}},{key:"supportInline",get:function(){return E}},{key:"supportInclude",get:function(){return!0}},{key:"settingsInternal",get:function(){return{layout:{pathname:"res/layout",fileExtension:"xml"}}}}]),l}(),ut=androme.lib.util,ft=androme.lib.xml;function pt(t,e){return(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1}var mt=function(t){function n(t){var i;return e(this,n),(i=s(this,o(n).call(this))).settings=t,i}return a(n,androme.lib.base.File),i(n,[{key:"saveAllToDisk",value:function(t){for(var e=[],n=h(t.views).concat(h(t.includes)),i=0;i<n.length;i++){var r=n[i];e.push(this.createPlainFile(r.pathname,0===i?this.settings.outputMainFileName:"".concat(r.filename,".xml"),r.content))}var a=this.resourceDrawableToXml();e.push.apply(e,h(this.parseFileDetails(this.resourceStringToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceStringArrayToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceFontToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceColorToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceStyleToXml()))),e.push.apply(e,h(this.parseFileDetails(this.resourceDimenToXml()))),e.push.apply(e,h(this.parseImageDetails(a)).concat(h(this.parseFileDetails(a)))),this.saveToDisk(e)}},{key:"layoutAllToXml",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},i=[],r=h(t.views).concat(h(t.includes)),a=0;a<r.length;a++){var o=r[a];n[o.filename]=o.content,e&&i.push(this.createPlainFile(o.pathname,0===a?this.settings.outputMainFileName:"".concat(o.filename,".xml"),o.content))}return e&&this.saveToDisk(i),n}},{key:"resourceAllToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml()};for(var n in e)""===e[n]&&delete e[n];if(t){var i=[];for(var r in e)"drawable"===r&&i.push.apply(i,h(this.parseImageDetails(e[r]))),i.push.apply(i,h(this.parseFileDetails(e[r])));this.saveToDisk(i)}return e}},{key:"resourceStringToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";this.stored.strings=new Map(h(this.stored.strings.entries()).sort(pt));var n=ft.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<string name="{name}">{value}</string>\n!1\n</resources>\n\x3c!-- filename: res/values/strings.xml --\x3e\n!0'),i={0:[{1:[]}]},r=ft.getTemplateLevel(i,"0");""===this.appName||this.stored.strings.has("app_name")||r[1].push({name:"app_name",value:this.appName});var a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.strings.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2);r[1].push({name:u[0],value:u[1]})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}return e=ft.createTemplate(n,i),e=ft.replaceTab(e,this.settings,!0),t&&this.saveToDisk(this.parseFileDetails(e)),e}},{key:"resourceStringArrayToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.arrays=new Map(h(this.stored.arrays.entries()).sort()),this.stored.arrays.size>0){var n=ft.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<string-array name="{name}">\n!2\n\t\t<item>{value}</item>\n!2\n\t</string-array>\n!1\n</resources>\n\x3c!-- filename: res/values/string_arrays.xml --\x3e\n!0'),i={0:[{1:[]}]},r=ft.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.arrays.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2),f=u[1],p={name:u[0],2:[]},m=p[2],g=!0,v=!1,y=void 0;try{for(var b,A=f[Symbol.iterator]();!(g=(b=A.next()).done);g=!0){m.push({value:b.value})}}catch(t){v=!0,y=t}finally{try{g||null==A.return||A.return()}finally{if(v)throw y}}r[1].push(p)}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=ft.createTemplate(n,i),e=ft.replaceTab(e,this.settings,!0),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceFontToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.fonts=new Map(h(this.stored.fonts.entries()).sort()),this.stored.fonts.size>0){var n=ft.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<font-family xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="{#app=http://schemas.android.com/apk/res-auto}">\n!1\n\t<font android:fontStyle="{style}" android:fontWeight="{weight}" android:font="{font}" app:fontStyle="{#app=style}" app:fontWeight="{#app=weight}" app:font="{#app=font}" />\n!1\n</font-family>\n\x3c!-- filename: res/font/{name}.xml --\x3e\n!0'),i=!0,r=!1,a=void 0;try{for(var o,l=this.stored.fonts.entries()[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=c(o.value,2),d=s[0],f=s[1],p={"#include":{},"#exclude":{},0:[{name:d,1:[]}]};p[this.settings.targetAPI<u.OREO?"#include":"#exclude"].app=!0;var m=ft.getTemplateLevel(p,"0");for(var g in f){var v=c(g.split("-"),2),y=v[0],b=v[1];m[1].push({style:y,weight:b,font:"@font/".concat(d+("normal"===y&&"400"===b?"_".concat(y):("normal"!==y?"_".concat(y):"")+("400"!==b?"_".concat(N[b]||b):"")))})}e+="\n\n"+ft.createTemplate(n,p)}}catch(t){r=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}e=ft.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e.trim()}},{key:"resourceColorToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.colors.size>0){this.stored.colors=new Map(h(this.stored.colors.entries()).sort());var n=ft.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<color name="{value}">{name}</color>\n!1\n</resources>\n\x3c!-- filename: res/values/colors.xml --\x3e\n!0'),i={0:[{1:[]}]},r=ft.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.colors.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2);r[1].push({name:u[0],value:u[1]})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=ft.createTemplate(n,i),e=ft.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceStyleToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.styles.size>0){this.stored.styles=new Map(h(this.stored.styles.entries()).sort(pt));var n=ft.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<style name="{name1}" parent="{@parent}">\n!2\n\t\t<item name="{name2}">{value}</item>\n!2\n\t</style>\n!1\n</resources>\n\x3c!-- filename: res/values/styles.xml --\x3e\n!0'),i={0:[{1:[]}]},r=ft.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=function(){var t=c(s.value,2),e=t[1],n={name1:t[0],parent:e.parent||"",2:[]};e.attributes.split(";").sort().forEach(function(t){var e=c(t.split("="),2);n[2].push({name2:e[0],value:e[1].replace(/"/g,"")})}),r[1].push(n)},u=this.stored.styles.entries()[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)d()}catch(t){o=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}e=x(e=ft.createTemplate(n,i),this.settings,!0),e=ft.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceDimenToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.dimens=new Map(h(this.stored.dimens.entries()).sort()),this.stored.dimens.size>0){var n=ft.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<dimen name="{name}">{value}</dimen>\n!1\n</resources>\n\x3c!-- filename: res/values/dimens.xml --\x3e\n!0'),i={0:[{1:[]}]},r=ft.getTemplateLevel(i,"0"),a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.dimens.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2);r[1].push({name:u[0],value:u[1]})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=x(e=ft.createTemplate(n,i),this.settings),e=ft.replaceTab(e,this.settings),t&&this.saveToDisk(this.parseFileDetails(e))}return e}},{key:"resourceDrawableToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.drawables.size>0||this.stored.images.size>0){var n=ft.parseTemplate("!0\n{value}\n\x3c!-- filename: {name} --\x3e\n!0"),i={0:[]},r=i[0],a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.drawables.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2),f=u[1];r.push({name:"res/drawable/".concat(A=u[0],".xml"),value:f})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}var p=!0,m=!1,g=void 0;try{for(var v,y=this.stored.images.entries()[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var b=c(v.value,2),A=b[0],T=b[1];if(Object.keys(T).length>1)for(var _ in T)r.push({name:"res/drawable-".concat(_,"/").concat(A,".").concat(ut.lastIndexOf(T[_],".")),value:"\x3c!-- image: ".concat(T[_]," --\x3e")});else T.mdpi&&r.push({name:"res/drawable/".concat(A,".").concat(ut.lastIndexOf(T.mdpi,".")),value:"\x3c!-- image: ".concat(T.mdpi," --\x3e")})}}catch(t){m=!0,g=t}finally{try{p||null==y.return||y.return()}finally{if(m)throw g}}e=x(e=ft.createTemplate(n,i),this.settings),e=ft.replaceTab(e,this.settings),t&&this.saveToDisk(h(this.parseImageDetails(e)).concat(h(this.parseFileDetails(e))))}return e}},{key:"parseImageDetails",value:function(t){for(var e=[],n=/<!-- image: (.+) -->\n<!-- filename: (.+)\/(.*?\.\w+) -->/,i=null;null!=(i=n.exec(t));)e.push({uri:i[1],pathname:i[2],filename:i[3],content:""}),t=t.replace(i[0],"");return e}},{key:"parseFileDetails",value:function(t){for(var e=[],n=/<\?xml[\w\W]*?(<!-- filename: (.+)\/(.*?\.xml) -->)/,i=null;null!=(i=n.exec(t));)e.push({content:i[0].replace(i[1],"").trim(),pathname:i[2],filename:i[3]}),t=t.replace(i[0],"");return e}},{key:"createPlainFile",value:function(t,e,n){return{pathname:t,filename:e,content:n}}}]),n}(),gt={builtInExtensions:["androme.external","androme.origin","androme.custom","androme.accessibility","androme.list","androme.table","androme.grid","androme.widget"],targetAPI:u.OREO,density:f.MDPI,supportRTL:!0,dimensResourceValue:!0,numberResourceValue:!1,fontAliasResourceValue:!0,alwaysReevaluateResources:!0,renderInlineText:!0,ellipsisOnTextOverflow:!0,preloadImages:!0,autoSizeBackgroundImage:!0,autoSizePaddingAndBorderWidth:!0,whitespaceHorizontalOffset:3.5,whitespaceVerticalOffset:16,constraintChainDisabled:!1,constraintChainPackedHorizontalOffset:3.5,constraintChainPackedVerticalOffset:16,constraintCirclePositionAbsolute:!1,constraintPercentAccuracy:4,supportNegativeLeftTop:!0,floatOverlapDisabled:!1,collapseUnattributedElements:!0,customizationsOverwritePrivilege:!1,showAttributes:!0,insertSpaces:4,convertPixels:"dp",autoCloseOnWrite:!0,outputDirectory:"app/src/main",outputMainFileName:"activity_main.xml",outputArchiveFileType:"zip",outputMaxProcessingTime:30},vt={FAB:"androme.widget.floatingactionbutton",MENU:"androme.widget.menu",COORDINATOR:"androme.widget.coordinator",TOOLBAR:"androme.widget.toolbar",DRAWER:"androme.widget.drawer",BOTTOM_NAVIGATION:"androme.widget.bottomnavigation"},yt="android.support.v4.widget.DrawerLayout",bt="android.support.design.widget.NavigationView",At="android.support.design.widget.CoordinatorLayout",Tt="android.support.design.widget.AppBarLayout",_t="android.support.design.widget.CollapsingToolbarLayout",Nt="android.support.v7.widget.Toolbar",Et="android.support.design.widget.FloatingActionButton",Dt="android.support.design.widget.BottomNavigationView",Rt="menu",It="item",Ot="group",wt="ic_menu_",St="ic_dialog_",xt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.External),n}(),Lt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Origin),n}(),Bt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Custom),i(n,[{key:"afterInsert",value:function(){var t=this.node,e=Object.assign({},this.options[t.element.id]);t.apply(et.formatOptions(e,this.application.settings))}}]),n}(),Ct=androme.lib.enumeration,kt=androme.lib.util,Pt=androme.lib.dom,Mt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Accessibility),i(n,[{key:"afterRender",value:function(){Array.from(this.application.cache.elements).forEach(function(t){if(!t.hasBit("excludeProcedure",Ct.NODE_PROCEDURE.ACCESSIBILITY)){var e=t.element;switch(t.controlName){case g.EDIT:t.companion||[t.nextElementSibling,t.previousElementSibling].some(function(n){var i=Pt.getNodeFromElement(n),r=n&&n.parentElement&&"LABEL"===n.parentElement.tagName?Pt.getNodeFromElement(n.parentElement):null;if(i&&i.visible&&i.pageflow){if(kt.hasValue(n.htmlFor)&&n.htmlFor===e.id)return i.android("labelFor",t.stringId),!0;if(i.textElement&&r)return r.android("labelFor",t.stringId),!0}return!1});case g.SELECT:case g.CHECKBOX:case g.RADIO:case g.BUTTON:e.disabled&&t.android("focusable","false")}}})}}]),n}(),Xt=androme.lib.enumeration,Gt=androme.lib.constant,Ht=androme.lib.util,Wt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.List),i(n,[{key:"processChild",value:function(){var t=this.node,e=t.data(Gt.EXT_NAME.LIST,"mainData");if(e){var n=this.parent,i=this.application.viewController,a=this.application.settings,o=Ht.convertInt(n.css("paddingLeft"))+Ht.convertInt(n.cssInitial("marginLeft",!0)),l=0,s=t.marginLeft;t.modifyBox(Xt.BOX_STANDARD.MARGIN_LEFT,null),n.is(Xt.NODE_STANDARD.GRID)?(l=Ht.convertInt(n.android("columnCount")),s+=o):n.children[0]===t&&(s+=o);var d=t.children.find(function(t){return"left"===t.float&&Ht.convertInt(t.cssInitial("marginLeft",!0))<0&&Math.abs(Ht.convertInt(t.cssInitial("marginLeft",!0)))<=Ht.convertInt(t.documentParent.cssInitial("marginLeft",!0))});if(d&&""===e.ordinal){var h="";d.parent=n,h=d.inlineText||0===d.children.length?i.renderNode(d,n,Xt.NODE_STANDARD.TEXT):d.children.every(function(t){return t.pageflow})?i.renderGroup(d,n,Xt.NODE_STANDARD.RELATIVE):i.renderGroup(d,n,Xt.NODE_STANDARD.CONSTRAINT),i.prependBefore(t.id,h),3===l&&t.android("layout_columnSpan","2"),s+=d.marginLeft,d.modifyBox(Xt.BOX_STANDARD.MARGIN_LEFT,null),!d.hasWidth&&s>0&&d.android("minWidth",Ht.formatPX(s))}else{var u=l>0?"0":"",f="inside"===t.css("listStylePosition"),p=!["","none"].includes(t.css("listStyleImage")),m="",v=0,y=0;if(""!==e.imageSrc){m=et.addImageURL(e.imageSrc);var b=c(et.parseBackgroundPosition(e.imagePosition,t.css("fontSize")).map(function(t){return Ht.convertInt(t)}),2);v=b[0],y=b[1]}var A=""!==m&&!p||0===o&&0===t.marginLeft?"":"right";""===A&&(s+=t.paddingLeft,t.modifyBox(Xt.BOX_STANDARD.PADDING_LEFT,null)),v>0&&s>v&&(s-=v);var T,_=(s=Math.max(s,20))>0?S(t.nodeName,B("min_width",a),Ht.formatPX(s),a):"",N=s<=24?6:s<=32?8:10,E=v>0?Ht.formatPX(v):"",D={android:{layout_columnWeight:u}};if(f)""!==E&&(E=S(t.nodeName,B("margin_left",a),E,a)),i.prependBefore(t.id,i.renderNodeStatic(Xt.NODE_STANDARD.SPACE,n.renderDepth+1,{android:r({minWidth:_,layout_columnWeight:u},B("layout_marginLeft",a),E)},"wrap_content","wrap_content")),Object.assign(D.android,{minWidth:S(t.nodeName,B("min_width",a),Ht.formatPX(24),a)});else Object.assign(D.android,(r(T={minWidth:_,gravity:s>20?B(A,a):""},B("layout_marginLeft",a),E),r(T,B("paddingLeft",a),""===A&&""===m?Ht.formatPX(N):20===s?"2px":""),r(T,B("paddingRight",a),"right"===A&&s>20?Ht.formatPX(N):""),r(T,"paddingTop",t.paddingTop>0?Ht.formatPX(t.paddingTop):""),T)),3===l&&t.android("layout_columnSpan","2");if("DT"===t.tagName&&""===m)t.android("layout_columnSpan",""+l);else{Object.assign(D.android,""!==m?{src:"@drawable/".concat(m),layout_marginTop:y>0?Ht.formatPX(y):"",baselineAlignBottom:"true",scaleType:f||"right"!==A?"fitStart":"fitEnd"}:{text:e.ordinal});var R=new H(this.application.cache.nextId,document.createElement("SPAN"));R.api=t.api,R.alignmentType=Xt.NODE_ALIGNMENT.SPACE,R.nodeName="".concat(t.tagName,"_ORDINAL"),R.setNodeType(g.SPACE),R.inherit(t,"style"),""!==e.ordinal&&!/[A-Za-z0-9]+\./.test(e.ordinal)&&R.toInt("fontSize")>12&&R.css("fontSize","12px"),t.companion=R,this.application.cache.append(R),i.prependBefore(t.id,i.renderNodeStatic(""!==m?Xt.NODE_STANDARD.IMAGE:""!==e.ordinal?Xt.NODE_STANDARD.TEXT:Xt.NODE_STANDARD.SPACE,n.renderDepth+1,D,"wrap_content","wrap_content",R))}}l>0&&t.android("layout_columnWeight","1")}return{output:"",complete:!0}}},{key:"beforeInsert",value:function(){var t=this.node;if(t.is(Xt.NODE_STANDARD.GRID))for(var e=t.android("columnCount"),n=t.renderChildren,i=0;i<n.length;i++){var r=n[i],a=n[i-1],o=0;if(a)Ht.convertInt(a.android("layout_marginBottom"))>0&&(o+=Ht.convertInt(a.android("layout_marginBottom")),a.delete("android","layout_marginBottom"),a.modifyBox(Xt.BOX_STANDARD.MARGIN_BOTTOM,null));var l=Ht.convertInt(r.android("layout_marginTop"));l>0&&(o+=l,r.delete("android","layout_marginTop"),r.modifyBox(Xt.BOX_STANDARD.MARGIN_TOP,null)),o>0&&this.application.viewController.prependBefore(r.id,this.application.viewController.renderNodeStatic(Xt.NODE_STANDARD.SPACE,r.renderDepth,{android:{layout_columnSpan:""+e}},"match_parent",Ht.formatPX(o)),0)}}},{key:"afterInsert",value:function(){var t=this.node;t.is(Xt.NODE_STANDARD.GRID)&&t.blockStatic&&!t.has("width")&&t.android("layout_width","match_parent")}}]),n}(),zt=androme.lib.enumeration,Vt=androme.lib.constant,Ft=androme.lib.util,Ut=androme.lib.dom,jt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Grid),i(n,[{key:"processChild",value:function(){var t=this.node,e=t.data(Vt.EXT_NAME.GRID,"cellData");return e&&(e.rowSpan>1&&t.android("layout_rowSpan",""+e.rowSpan),e.columnSpan>1&&t.android("layout_columnSpan",""+e.columnSpan),"table"===t.parent.display&&"table-cell"===t.display&&t.android("layout_gravity","fill")),d(o(n.prototype),"processChild",this).call(this)}},{key:"afterRender",value:function(){var t=this,e=!0,n=!1,i=void 0;try{for(var r,a=this.subscribers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;"table"===o.display&&"collapse"===o.css("borderCollapse")||function(){var e=o.data(Vt.EXT_NAME.GRID,"mainData");e&&o.each(function(n){var i=n.data(Vt.EXT_NAME.GRID,"cellData");if(i){var r=Ut.getBoxSpacing(n.documentParent.element,!0),a=e.padding;if(i.cellFirst&&(a.top=r.paddingTop+r.marginTop),i.rowStart&&(a.left=Math.max(r.marginLeft+r.paddingLeft,a.left)),i.rowEnd){var o=r.marginBottom+r.paddingBottom+(i.cellLast?0:r.marginTop+r.paddingTop);o>0&&(i.cellLast?a.bottom=o:t.application.viewController.appendAfter(n.id,t.application.viewController.renderColumnSpace(n.renderDepth,"match_parent",Ft.formatPX(o),e.columnCount))),a.right=Math.max(r.marginRight+r.paddingRight,a.right)}}},!0)}()}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}var l=!0,s=!1,d=void 0;try{for(var c,h=this.subscribers[Symbol.iterator]();!(l=(c=h.next()).done);l=!0){var u=c.value,f=u.data(Vt.EXT_NAME.GRID,"mainData");f&&(u.modifyBox(zt.BOX_STANDARD.PADDING_TOP,f.padding.top),u.modifyBox(zt.BOX_STANDARD.PADDING_RIGHT,f.padding.right),u.modifyBox(zt.BOX_STANDARD.PADDING_BOTTOM,f.padding.bottom),u.modifyBox(zt.BOX_STANDARD.PADDING_LEFT,f.padding.left))}}catch(t){s=!0,d=t}finally{try{l||null==h.return||h.return()}finally{if(s)throw d}}}}]),n}(),Yt=androme.lib.constant,Zt=androme.lib.util,$t=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Table),i(n,[{key:"processNode",value:function(){var t=d(o(n.prototype),"processNode",this).call(this),e=this.node;if(Zt.convertInt(e.android("columnCount"))>1){var i=!!e.data(Yt.EXT_NAME.TABLE,"expand");if(e.each(function(t){if("0px"===t.css("width"))t.android("layout_width","0px"),t.android("layout_columnWeight",""+(t.element.colSpan||1));else{var e=t.data(Yt.EXT_NAME.TABLE,"expand"),n=!!t.data(Yt.EXT_NAME.TABLE,"exceed"),r=!!t.data(Yt.EXT_NAME.TABLE,"downsized");if(null!=e)if(e){var a=Zt.convertFloat(t.data(Yt.EXT_NAME.TABLE,"percent"))/100;a>0&&(t.android("layout_width","0px"),t.android("layout_columnWeight",Zt.trimEnd(a.toFixed(3),"0")),i=!0)}else t.android("layout_columnWeight","0");r&&(n?t.android("layout_columnWeight","0.01"):(t.textElement&&t.android("maxLines","1"),t.has("width")&&t.toInt("width")<t.bounds.width&&t.android("layout_width",Zt.formatPX(t.bounds.width))))}}),i&&!e.hasWidth){var r=0;e.ascend().some(function(t){return!!t.hasWidth&&(r=t.bounds.width,!0)}),e.bounds.width>=r?e.android("layout_width","match_parent"):e.css("width",Zt.formatPX(e.bounds.width))}}return t}},{key:"processChild",value:function(){var t=this.node,e=Zt.convertInt(t.data(Yt.EXT_NAME.TABLE,"rowSpan")),n=Zt.convertInt(t.data(Yt.EXT_NAME.TABLE,"colSpan")),i=Zt.convertInt(t.data(Yt.EXT_NAME.TABLE,"spaceSpan"));(e>1&&t.android("layout_rowSpan",""+e),n>1&&t.android("layout_columnSpan",""+n),i>0)&&this.application.viewController.appendAfter(t.id,this.application.viewController.renderColumnSpace(this.parent.renderDepth+1,"wrap_content","wrap_content",i));return{output:"",complete:!0}}}]),n}(),Kt=androme.lib.enumeration,Jt=androme.lib.util,qt=androme.lib.color,Qt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Button),i(n,[{key:"processNode",value:function(){var t=this.node,e=this.parent,n=Jt.hasValue(t.dataset.target),i=t.element,r=Object.assign({},this.options[i.id]),a=qt.parseRGBA(t.css("backgroundColor"),t.css("opacity"));Jt.overwriteDefault(r,"android","backgroundTint",a.length>0?"@color/".concat(et.addColor(a[0],a[2])):"?attr/colorAccent"),t.hasBit("excludeProcedure",Kt.NODE_PROCEDURE.ACCESSIBILITY)&&Jt.overwriteDefault(r,"android","focusable","false");var o="";switch(i.tagName){case"IMG":o=et.addImageSrcSet(i,St);break;case"INPUT":o="image"===i.type?et.addImage({mdpi:i.src},St):et.addImageURL(t.css("backgroundImage"),St);break;case"BUTTON":o=et.addImageURL(t.css("backgroundImage"),St)}""!==o&&Jt.overwriteDefault(r,"app","srcCompat","@drawable/".concat(o));var l=this.application.viewController.renderNodeStatic(Et,n?-1:e.renderDepth+1,r,"wrap_content","wrap_content",t);if(t.nodeType=Kt.NODE_STANDARD.BUTTON,t.excludeResource|=Kt.NODE_RESOURCE.BOX_STYLE|Kt.NODE_RESOURCE.ASSET,!t.pageflow||n)if(t.auto=!1,this.setFrameGravity(t),n){var s=e.stringId;if(e.controlName===Nt){var d=e.data(vt.TOOLBAR,"outerParent");d&&(s=d)}t.app("layout_anchor",s),t.app("layout_anchorGravity",t.android("layout_gravity")),t.delete("android","layout_gravity"),t.excludeProcedure|=Kt.NODE_PROCEDURE.ALIGNMENT,t.render(t)}else t.render(e);else t.render(e);return{output:l,complete:!0}}},{key:"afterInsert",value:function(){var t=this.node;t.android("layout_width","wrap_content"),t.android("layout_height","wrap_content")}},{key:"setFrameGravity",value:function(t){var e=this.application.settings,n=t.documentParent,i=t.horizontalBias(e),r=t.verticalBias(e),a=[];a.push(i<.5?B("left",e):i>.5?B("right",e):"center_horizontal"),r<.5?(a.push("top"),t.app("layout_dodgeInsetEdges","top")):a.push(r>.5?"bottom":"center_vertical"),t.android("layout_gravity",2===a.filter(function(t){return-1!==t.indexOf("center")}).length?"center":a.join("|")),i>0&&i<1&&.5!==i&&(i<.5?t.css("marginLeft",Jt.formatPX(Math.floor(t.bounds.left-n.box.left))):t.css("marginRight",Jt.formatPX(Math.floor(n.box.right-t.bounds.right)))),r>0&&r<1&&.5!==r&&(r<.5?t.css("marginTop",Jt.formatPX(Math.floor(t.bounds.top-n.box.top))):t.css("marginBottom",Jt.formatPX(Math.floor(n.box.bottom-t.bounds.bottom))))}}]),n}(),te=androme.lib.enumeration,ee={id:/^@\+id\/\w+$/,title:/^.+$/,titleCondensed:/^.+$/,icon:/^@drawable\/.+$/,onClick:/^.+$/,showAsAction:/^(ifRoom|never|withText|always|collapseActionView)$/,actionLayout:/^@layout\/.+$/,actionViewClass:/^.+$/,actionProviderClass:/^.+$/,alphabeticShortcut:/^[a-zA-Z]+$/,alphabeticModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,numericShortcut:/^[0-9]+$/,numericModifiers:/(META|CTRL|ALT|SHIFT|SYM|FUNCTION)+/g,checkable:/^(true|false)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^[0-9]+$/},ne={id:/^@\+id\/\w+$/,checkableBehavior:/^(none|all|single)$/,visible:/^(true|false)$/,enabled:/^(true|false)$/,menuCategory:/^(container|system|secondary|alternative)$/,orderInCategory:/^[0-9]+$/},ie=["showAsAction","actionViewClass","actionProviderClass"],re=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Nav),i(n,[{key:"condition",value:function(){return this.included()}},{key:"processNode",value:function(){var t=this,e=this.node,n=this.application.viewController.renderNodeStatic(Rt,0,{},"","",e,!0);return e.documentRoot=!0,e.nodeType=te.NODE_STANDARD.BLOCK,e.excludeResource|=te.NODE_RESOURCE.ALL,e.excludeProcedure|=te.NODE_PROCEDURE.ALL,e.rendered=!0,e.cascade().forEach(function(e){return t.subscribersChild.add(e)}),{output:n,complete:!0}}},{key:"processChild",value:function(){var t=this,e=this.node,n=this.parent;if(e.plainText)return e.hide(),{output:"",complete:!0,next:!0};var i=e.element,r={android:{},app:{}},a=It,o="",l=!1,s=!1;if(e.children.some(function(t){return(!t.inlineElement||!t.blockStatic)&&t.children.length>0})){if(e.children.some(function(t){return"NAV"===t.tagName}))""!==i.title?o=i.title:Array.from(e.element.childNodes).some(function(t){return"#text"===t.nodeName?!(!t.textContent||""===(o=t.textContent.trim())):"NAV"!==t.tagName&&(o=t.innerText.trim(),!0)}),e.each(function(t){return"NAV"!==t.tagName&&t.hide()});else if("NAV"===e.tagName)a=Rt,l=!0;else{a=Ot;var d="";e.children.every(function(e){return t.hasInputType(e,"radio")})?d="single":e.children.every(function(e){return t.hasInputType(e,"checkbox")})&&(d="all"),r.android.checkableBehavior=d}s=!0}else""===n.android("checkableBehavior")&&this.hasInputType(e,"checkbox")&&(r.android.checkable="true"),o=(i.title||i.innerText).trim();switch(a){case It:if(this.parseDataSet(ee,i,r),""===e.android("icon")){var c=et.addImageURL(i.style.backgroundImage,wt);if(""!==c)r.android.icon="@drawable/".concat(c);else{var h=e.children.find(function(t){return t.imageElement});h&&""!==(c=et.addImageSrcSet(h.element,wt))&&(r.android.icon="@drawable/".concat(c))}}break;case Ot:this.parseDataSet(ne,i,r)}if(""===e.android("title")&&""!==o){var u=et.addString(o,"",this.application.settings);""!==u&&(o="@string/".concat(u)),r.android.title=o}r.android.id?e.controlName=a:e.setNodeType(a);var f=this.application.viewController.renderNodeStatic(a,n.renderDepth+1,r,"","",e,s);return e.excludeResource|=te.NODE_RESOURCE.ALL,e.excludeProcedure|=te.NODE_PROCEDURE.ALL,e.rendered=!0,{output:f,complete:!0,next:l}}},{key:"afterRender",value:function(){d(o(n.prototype),"afterRender",this).call(this),this.included(this.node.element)&&(this.application.layoutProcessing.pathname="res/menu")}},{key:"parseDataSet",value:function(t,e,n){for(var i in e.dataset){var r=e.dataset[i];if(r&&t[i]){var a=r.match(t[i]);if(a)n[null!=this.options.appCompat&&!0!==this.options.appCompat||!ie.includes(i)?"android":"app"][i]=Array.from(new Set(a)).join("|")}}}},{key:"hasInputType",value:function(t,e){return t.children.length>0&&t.children.some(function(t){return t.element.type===e})}}]),n}(),ae=androme.lib.enumeration,oe=androme.lib.dom,le=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.Extension),i(n,[{key:"processNode",value:function(){var t=this.node,e=this.application.viewController.renderGroup(t,this.parent,At);t.apply(this.options[t.element.id]),t.nodeType=ae.NODE_STANDARD.BLOCK,t.excludeResource|=ae.NODE_RESOURCE.ASSET;var n=oe.getNodeFromElement(oe.findNestedExtension(t.element,vt.TOOLBAR));if(n){var i=this.application.getExtension(vt.TOOLBAR);i&&i.options[n.element.id]&&i.options[n.element.id].collapsingToolbar&&t.android("fitsSystemWindows","true")}return{output:e,complete:!1}}},{key:"afterInsert",value:function(){var t=this.node;t.documentRoot&&(t.android("layout_width","match_parent"),t.android("layout_height","match_parent"))}}]),n}(),se=androme.lib.enumeration,de=androme.lib.constant,ce=androme.lib.util,he=androme.lib.dom,ue=androme.lib.xml,fe=function(t){function n(t,i,r,a){var l;return e(this,n),(l=s(this,o(n).call(this,t,i,r,a))).require(vt.MENU),l}return a(n,androme.lib.base.Extension),i(n,[{key:"init",value:function(t){if(this.included(t)&&(Array.from(t.children).some(function(t){return"NAV"===t.tagName&&!ce.includes(t.dataset.ext,de.EXT_NAME.EXTERNAL)&&(t.dataset.ext=(ce.hasValue(t.dataset.ext)?"".concat(t.dataset.ext,", "):"")+de.EXT_NAME.EXTERNAL,!0)}),t.dataset.target)){var e=document.getElementById(t.dataset.target);e&&t.parentElement!==e&&!ce.includes(e.dataset.ext,vt.COORDINATOR)&&this.application.elements.add(t)}return!1}},{key:"processNode",value:function(){var t=this.application.viewController,e=this.node,n=this.parent,i=ce.hasValue(e.dataset.target),r=Object.assign({},this.options[e.element.id]),a=Object.assign({},r.toolbar),o=Object.assign({},r.appBar),l=Object.assign({},r.collapsingToolbar),s=null!=he.findNestedExtension(e.element,vt.MENU),d=e.has("backgroundImage"),c=[],h=[],u="",f=i?0:e.depth,p=e.children.filter(function(t){return t.auto}).length;Array.from(e.element.children).forEach(function(t){if("IMG"===t.tagName){if(ce.hasValue(t.dataset.navigationIcon)){var e=et.addImageSrcSet(t,wt);""!==e&&(ce.overwriteDefault(toolbar,"app","navigationIcon","@drawable/".concat(e)),"none"!==he.getStyle(t).display&&p--)}if(ce.hasValue(t.dataset.collapseIcon)){var n=et.addImageSrcSet(t,wt);""!==n&&(ce.overwriteDefault(toolbar,"app","collapseIcon","@drawable/".concat(n)),"none"!==he.getStyle(t).display&&p--)}}if(ce.hasValue(t.dataset.target))p--;else{var i=he.getNodeFromElement(t);if(i)switch(t.dataset.targetModule){case"appBar":c.push(i),p--;break;case"collapsingToolbar":h.push(i),p--}}});var m=null!=r.collapsingToolbar||h.length>0,v=null!=r.appBar||c.length>0||m,y="",b="";m?ce.overwriteDefault(a,"app","layout_collapseMode","pin"):(v||ce.overwriteDefault(a,"android","fitsSystemWindows","true"),ce.overwriteDefault(a,"app","popupTheme","@style/ThemeOverlay.AppCompat.Light"),d?(ce.overwriteDefault(c.length>0?o:a,"android","background","@drawable/".concat(et.addImageURL(e.css("backgroundImage")))),e.excludeResource|=se.NODE_RESOURCE.IMAGE_SOURCE):ce.overwriteDefault(a,"app","layout_scrollFlags","scroll|enterAlways")),c.length>0?ce.overwriteDefault(o,"android","layout_height","?android:attr/actionBarSize"):(ce.overwriteDefault(a,"android","layout_height","?android:attr/actionBarSize"),e.excludeProcedure|=se.NODE_PROCEDURE.LAYOUT),s&&v&&(a.app.popupTheme&&(b=a.app.popupTheme.replace("@style/","")),a.app.popupTheme="@style/AppTheme.PopupOverlay");var A=f+(v?1:0)+(m?1:0);if(u=t.renderNodeStatic(Nt,A,a,"match_parent","wrap_content",e,p>0),m&&d){var T=Object.assign({},r.backgroundImage),_="center";switch(e.css("backgroundSize")){case"cover":case"100% auto":case"auto 100%":_="centerCrop";break;case"contain":case"100% 100%":_="fitXY";break;case"auto":_="matrix"}ce.overwriteDefault(T,"android","id","".concat(e.stringId,"_image")),ce.overwriteDefault(T,"android","src","@drawable/".concat(et.addImageURL(e.css("backgroundImage")))),ce.overwriteDefault(T,"android","scaleType",_),ce.overwriteDefault(T,"android","fitsSystemWindows","true"),ce.overwriteDefault(T,"app","layout_collapseMode","parallax"),u=t.renderNodeStatic(g.IMAGE,A,T,"match_parent","match_parent")+u,e.excludeResource|=se.NODE_RESOURCE.IMAGE_SOURCE}var N="",E=null,D=null;if(v&&(ce.overwriteDefault(o,"android","id","".concat(e.stringId,"_appbar")),ce.overwriteDefault(o,"android","layout_height",e.viewHeight>0?S("appbar","height",ce.formatPX(e.viewHeight),this.application.settings):"wrap_content"),ce.overwriteDefault(o,"android","fitsSystemWindows","true"),s?(o.android.theme&&(y=o.android.theme),o.android.theme="@style/AppTheme.AppBarOverlay",this.createResourceTheme(y,b)):ce.overwriteDefault(o,"android","theme","@style/ThemeOverlay.AppCompat.Dark.ActionBar"),(E=this.createPlaceholder(this.application.cache.nextId,e,c)).parent=e.parent,E.nodeId=w(o.android.id),this.application.cache.append(E),N=t.renderNodeStatic(Tt,i?-1:f,o,"match_parent","wrap_content",E,!0),m&&(f++,ce.overwriteDefault(l,"android","id","".concat(e.stringId,"_collapsingtoolbar")),ce.overwriteDefault(l,"android","fitsSystemWindows","true"),d||ce.overwriteDefault(l,"app","contentScrim","?attr/colorPrimary"),ce.overwriteDefault(l,"app","layout_scrollFlags","scroll|exitUntilCollapsed"),ce.overwriteDefault(l,"app","toolbarId",e.stringId),(D=this.createPlaceholder(this.application.cache.nextId,e,h)).parent=E,D))){D.each(function(t){return t.dataset.target=D.nodeId}),this.application.cache.append(D);var R=t.renderNodeStatic(_t,i&&!v?-1:f,l,"match_parent","match_parent",D,!0);N=ue.replacePlaceholder(N,E.id,R)}return E?(u=ue.replacePlaceholder(N,D?D.id:E.id,u),E.render(i?E:n),D?(D.parent=E,D.render(E),e.parent=D):e.parent=E,e.data(vt.TOOLBAR,"outerParent",E.stringId),e.render(e.parent)):D?(D.render(i?D:n),e.parent=D,e.render(D)):e.render(i?e:n),e.nodeType=se.NODE_STANDARD.BLOCK,e.excludeResource|=se.NODE_RESOURCE.FONT_STYLE,{output:u,complete:!1}}},{key:"processChild",value:function(){var t=this.node;return t.imageElement&&(ce.hasValue(t.dataset.navigationIcon)||ce.hasValue(t.dataset.collapseIcon))?(t.hide(),{output:"",complete:!0,next:!0}):{output:"",complete:!1}}},{key:"beforeInsert",value:function(){var t=this.node,e=ce.optional(he.findNestedExtension(t.element,vt.MENU),"dataset.layoutName");if(""!==e){var n=Object.assign({},this.options[t.element.id]),i=Object.assign({},n.toolbar);ce.overwriteDefault(i,"app","menu","@menu/".concat(e)),t.app("menu",i.app.menu)}}},{key:"createResourceTheme",value:function(t,e){var n=Object.assign({},this.options.resource);ce.overwriteDefault(n,"","appTheme","AppTheme"),ce.overwriteDefault(n,"","parentTheme","Theme.AppCompat.Light.DarkActionBar");var i={0:[{appTheme:n.appTheme,parentTheme:n.parentTheme,appBarOverlay:t||"ThemeOverlay.AppCompat.Dark.ActionBar",popupOverlay:e||"ThemeOverlay.AppCompat.Light",1:[]}]};ce.overwriteDefault(n,"output","path","res/values"),ce.overwriteDefault(n,"output","file","".concat(vt.TOOLBAR,".xml")),this.application.resourceHandler.addTheme('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n\t<style name="{@appTheme}" parent="{@parentTheme}">\n!1\n\t\t<item name="{name}">{value}</item>\n!1\n\t</style>\n\t<style name="{@appTheme}.NoActionBar">\n\t\t<item name="windowActionBar">false</item>\n\t\t<item name="windowNoTitle">true</item>\n\t</style>\n\t<style name="AppTheme.AppBarOverlay" parent="{@appBarOverlay}" />\n\t<style name="AppTheme.PopupOverlay" parent="{@popupOverlay}" />\n</resources>\n!0',i,n)}},{key:"createPlaceholder",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=new H(t);i.init(),i.api=e.api;var r=!0,a=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){l.value.parent=i}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return i.inherit(e,"dimensions"),i.auto=!1,i.excludeResource|=se.NODE_RESOURCE.ALL,i}}]),n}(),pe=androme.lib.enumeration,me=androme.lib.util,ge=androme.lib.dom,ve=function(t){function n(t,i,r,a){var l;return e(this,n),(l=s(this,o(n).call(this,t,i,r,a))).require(vt.MENU),l}return a(n,androme.lib.base.Extension),i(n,[{key:"processNode",value:function(){var t=this,e=this.node,n=this.parent,i=Object.assign({},this.options[e.element.id]);me.overwriteDefault(i,"android","background","?android:attr/windowBackground");for(var r=this.application.viewController.renderNodeStatic(Dt,e.depth,i,n.is(pe.NODE_STANDARD.CONSTRAINT)?"0px":"match_parent","wrap_content",e),a=5;a<e.children.length;a++)e.children[a].hide(),e.children[a].cascade().forEach(function(t){return t.hide()});return e.cascade().forEach(function(e){return t.subscribersChild.add(e)}),e.render(n),e.nodeType=pe.NODE_STANDARD.BLOCK,e.excludeResource|=pe.NODE_RESOURCE.ASSET,this.createResourceTheme(),{output:r,complete:!0}}},{key:"beforeInsert",value:function(){var t=this.node,e=me.optional(ge.findNestedExtension(t.element,vt.MENU),"dataset.layoutName");if(""!==e){var n=Object.assign({},this.options[t.element.id]);me.overwriteDefault(n,"app","menu","@menu/".concat(e)),t.app("menu",n.app.menu)}}},{key:"afterInsert",value:function(){var t=this.node;t.renderParent.has("width")||t.renderParent.android("layout_width","match_parent"),t.renderParent.has("height")||t.renderParent.android("layout_height","match_parent")}},{key:"createResourceTheme",value:function(){var t=Object.assign({},this.options.resource);me.overwriteDefault(t,"","appTheme","AppTheme"),me.overwriteDefault(t,"","parentTheme","Theme.AppCompat.Light.DarkActionBar");var e={0:[{appTheme:t.appTheme,parentTheme:t.parentTheme,1:[]}]};me.overwriteDefault(t,"output","path","res/values"),me.overwriteDefault(t,"output","file","".concat(vt.BOTTOM_NAVIGATION,".xml")),this.application.resourceHandler.addTheme('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n\t<style name="{@appTheme}" parent="{@parentTheme}">\n!1\n\t\t<item name="{name}">{value}</item>\n!1\n\t</style>\n</resources>\n!0',e,t)}}]),n}(),ye=androme.lib.enumeration,be=androme.lib.constant,Ae=androme.lib.util,Te=androme.lib.dom,_e=function(t){function n(t,i,r,a){var l;return e(this,n),(l=s(this,o(n).call(this,t,i,r,a))).documentRoot=!0,l.require(be.EXT_NAME.EXTERNAL,!0),l.require(vt.MENU),l.require(vt.COORDINATOR),l}return a(n,androme.lib.base.Extension),i(n,[{key:"init",value:function(t){return!!(this.included(t)&&t.children.length>0)&&(Array.from(t.children).forEach(function(t){"NAV"!==t.tagName||Ae.includes(t.dataset.ext,be.EXT_NAME.EXTERNAL)||(t.dataset.ext=(Ae.hasValue(t.dataset.ext)?"".concat(t.dataset.ext,", "):"")+be.EXT_NAME.EXTERNAL)}),this.application.elements.add(t),!0)}},{key:"processNode",value:function(){var t=this.node,e=Object.assign({},this.options.self);if(Te.findNestedExtension(t.element,vt.MENU))Ae.overwriteDefault(e,"android","fitsSystemWindows","true"),this.createResourceTheme();else{var n=Object.assign({},this.options.navigationView);Ae.overwriteDefault(n,"android","layout_gravity",B("left",this.application.settings));var i=t.children[t.children.length-1];i.android("layout_gravity",n.android.layout_gravity),i.android("layout_height","match_parent"),i.auto=!1}var r=this.application.viewController.renderNodeStatic(yt,t.depth,e,"match_parent","match_parent",t,!0);return t.documentRoot=!0,t.rendered=!0,t.nodeType=ye.NODE_STANDARD.BLOCK,t.excludeResource|=ye.NODE_RESOURCE.FONT_STYLE,{output:r,complete:!0}}},{key:"beforeInsert",value:function(){var t=this.application,e=this.node;if(t.renderQueue[e.nodeId]){var n=t.cacheSession.find(function(t){return t.parent===e.parent&&t.controlName===At});n&&(t.renderQueue[n.nodeId]=t.renderQueue[e.nodeId],delete t.renderQueue[e.nodeId])}var i=Ae.optional(Te.findNestedExtension(e.element,vt.MENU),"dataset.layoutName"),r=Ae.optional(Te.findNestedExtension(e.element,be.EXT_NAME.EXTERNAL),"dataset.layoutName"),a=Object.assign({},this.options.navigation);if(""!==i&&Ae.overwriteDefault(a,"app","menu","@menu/".concat(i)),""!==r&&Ae.overwriteDefault(a,"app","headerLayout","@layout/".concat(r)),""!==i||""!==r){Ae.overwriteDefault(a,"android","id","".concat(e.stringId,"_navigation")),Ae.overwriteDefault(a,"android","fitsSystemWindows","true"),Ae.overwriteDefault(a,"android","layout_gravity",B("left",this.application.settings));var o=t.viewController.renderNodeStatic(bt,e.depth+1,a,"wrap_content","match_parent");t.addRenderQueue(""+e.id,[o])}}},{key:"afterInsert",value:function(){var t=Te.findNestedExtension(this.node.element,be.EXT_NAME.EXTERNAL);if(t){var e=Te.getNodeFromElement(t);e&&!e.hasHeight&&e.android("layout_height","wrap_content")}}},{key:"createResourceTheme",value:function(){var t=Object.assign({},this.options.resource);Ae.overwriteDefault(t,"","appTheme","AppTheme"),Ae.overwriteDefault(t,"","parentTheme","Theme.AppCompat.Light.NoActionBar");var e={0:[{appTheme:t.appTheme,parentTheme:t.parentTheme,1:[]}]};Ae.overwriteDefault(t,"output","path","res/values-v21"),Ae.overwriteDefault(t,"output","file","".concat(vt.DRAWER,".xml")),this.application.resourceHandler.addTheme('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n\t<style name="{@appTheme}" parent="{@parentTheme}">\n\t\t<item name="android:windowDrawsSystemBarBackgrounds">true</item>\n\t\t<item name="android:statusBarColor">@android:color/transparent</item>\n\t\t<item name="android:windowTranslucentStatus">true</item>\n!1\n\t\t<item name="{name}">{value}</item>\n!1\n\t</style>\n</resources>\n!0',e,t)}}]),n}();function Ne(){var t=De.application;return!(!t.settings.autoCloseOnWrite||t.loading||t.closed)&&(t.finalize(),!0)}var Ee,De,Re,Ie,Oe=!1,we=androme.lib.enumeration.APP_FRAMEWORK.ANDROID,Se={create:function(){var t,e=androme.lib.constant.EXT_NAME;Ie=Object.assign({},gt);var n=new mt(Ie);return Ee=new androme.lib.base.Application(we),De=new ht,Re=new et(n),Ee.registerController(De),Ee.registerResource(Re),Ee.nodeObject=H,Ee.builtInExtensions=(r(t={},e.EXTERNAL,new xt(e.EXTERNAL,we)),r(t,e.ORIGIN,new Lt(e.ORIGIN,we)),r(t,e.CUSTOM,new Bt(e.CUSTOM,we)),r(t,e.ACCESSIBILITY,new Mt(e.ACCESSIBILITY,we)),r(t,e.LIST,new Wt(e.LIST,we,["UL","OL","DL","DIV"])),r(t,e.TABLE,new $t(e.TABLE,we,["TABLE"])),r(t,e.GRID,new jt(e.GRID,we,["FORM","UL","OL","DL","DIV","TABLE","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET","SPAN"])),r(t,vt.FAB,new Qt(vt.FAB,we,["BUTTON","INPUT","IMG"])),r(t,vt.MENU,new re(vt.MENU,we,["NAV"])),r(t,vt.COORDINATOR,new le(vt.COORDINATOR,we)),r(t,vt.TOOLBAR,new fe(vt.TOOLBAR,we)),r(t,vt.BOTTOM_NAVIGATION,new ve(vt.BOTTOM_NAVIGATION,we)),r(t,vt.DRAWER,new _e(vt.DRAWER,we)),t),Oe=!0,{application:Ee,framework:we,settings:Ie}},cached:function(){return Oe?{application:Ee,framework:we,settings:Ie}:Se.create()},system:{customize:function(t,e,n){if(R[t]){var i=R[t].customizations;null==i[e]&&(i[e]={}),Object.assign(i[e],n)}},addXmlNs:function(t,e){b[t]=e},writeLayoutAllXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe){var e=De.application;if(e.closed||Ne())return Re.file.layoutAllToXml(e.viewData,t)}return""},writeResourceAllXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceAllToXml(t);return""},writeResourceStringXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceStringToXml(t);return""},writeResourceArrayXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceStringArrayToXml(t);return""},writeResourceFontXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceFontToXml(t);return""},writeResourceColorXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceColorToXml(t);return""},writeResourceStyleXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceStyleToXml(t);return""},writeResourceDimenXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceDimenToXml(t);return""},writeResourceDrawableXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Oe&&(De.application.closed||Ne()))return Re.file.resourceDrawableToXml(t);return""}}};return Se}();
