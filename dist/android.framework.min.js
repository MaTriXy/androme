var android=function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=t[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t){return function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u,f;!function(t){t[t.PIE=28]="PIE",t[t.OREO_1=27]="OREO_1",t[t.OREO=26]="OREO",t[t.NOUGAT_1=25]="NOUGAT_1",t[t.NOUGAT=24]="NOUGAT",t[t.MARSHMALLOW=23]="MARSHMALLOW",t[t.LOLLIPOP_1=22]="LOLLIPOP_1",t[t.LOLLIPOP=21]="LOLLIPOP",t[t.KITKAT_1=20]="KITKAT_1",t[t.KITKAT=19]="KITKAT",t[t.JELLYBEAN_2=18]="JELLYBEAN_2",t[t.JELLYBEAN_1=17]="JELLYBEAN_1",t[t.JELLYBEAN=16]="JELLYBEAN",t[t.ICE_CREAM_SANDWICH_1=15]="ICE_CREAM_SANDWICH_1",t[t.ICE_CREAM_SANDWICH=14]="ICE_CREAM_SANDWICH",t[t.ALL=0]="ALL",t[t.LATEST=28]="LATEST"}(u||(u={})),function(t){t[t.LDPI=120]="LDPI",t[t.MDPI=160]="MDPI",t[t.HDPI=240]="HDPI",t[t.XHDPI=320]="XHDPI",t[t.XXHDPI=480]="XXHDPI",t[t.XXXHDPI=640]="XXXHDPI"}(f||(f={}));var g,p,m=Object.freeze({get BUILD_ANDROID(){return u},get DENSITY_ANDROID(){return f}}),v={CHECKBOX:"CheckBox",RADIO:"RadioButton",EDIT:"EditText",SELECT:"Spinner",RANGE:"SeekBar",SVG:"ImageView",TEXT:"TextView",IMAGE:"ImageView",BUTTON:"Button",LINE:"View",SPACE:"Space",WEB_VIEW:"WebView",FRAME:"FrameLayout",LINEAR:"LinearLayout",RADIO_GROUP:"RadioGroup",GRID:"GridLayout",RELATIVE:"RelativeLayout",CONSTRAINT:"android.support.constraint.ConstraintLayout",SCROLL_HORIZONTAL:"HorizontalScrollView",SCROLL_VERTICAL:"android.support.v4.widget.NestedScrollView",GUIDELINE:"android.support.constraint.Guideline"},y={MARGIN:"layout_margin",MARGIN_VERTICAL:"layout_marginVertical",MARGIN_HORIZONTAL:"layout_marginHorizontal",MARGIN_TOP:"layout_marginTop",MARGIN_RIGHT:"layout_marginRight",MARGIN_BOTTOM:"layout_marginBottom",MARGIN_LEFT:"layout_marginLeft",PADDING:"padding",PADDING_VERTICAL:"paddingVertical",PADDING_HORIZONTAL:"paddingHorizontal",PADDING_TOP:"paddingTop",PADDING_RIGHT:"paddingRight",PADDING_BOTTOM:"paddingBottom",PADDING_LEFT:"paddingLeft"},b={HORIZONTAL:"horizontal",VERTICAL:"vertical"},A={android:"http://schemas.android.com/apk/res/android",app:"http://schemas.android.com/apk/res-auto",tools:"http://schemas.android.com/tools"},T={"sans-serif":u.ICE_CREAM_SANDWICH,"sans-serif-thin":u.JELLYBEAN,"sans-serif-light":u.JELLYBEAN,"sans-serif-condensed":u.JELLYBEAN,"sans-serif-condensed-light":u.JELLYBEAN,"sans-serif-medium":u.LOLLIPOP,"sans-serif-black":u.LOLLIPOP,"sans-serif-smallcaps":u.LOLLIPOP,"serif-monospace":u.LOLLIPOP,serif:u.LOLLIPOP,casual:u.LOLLIPOP,cursive:u.LOLLIPOP,monospace:u.LOLLIPOP,"sans-serif-condensed-medium":u.OREO},_={arial:"sans-serif",helvetica:"sans-serif",tahoma:"sans-serif",verdana:"sans-serif",times:"serif","times new roman":"serif",palatino:"serif",georgia:"serif",baskerville:"serif",goudy:"serif",fantasy:"serif","itc stone serif":"serif","sans-serif-monospace":"monospace",monaco:"monospace",courier:"serif-monospace","courier new":"serif-monospace"},N={"ms shell dlg \\32":"sans-serif","system-ui":"sans-serif","-apple-system":"sans-serif"},D={100:"thin",200:"extra_light",300:"light",400:"normal",500:"medium",600:"semi_bold",700:"bold",800:"extra_bold",900:"black"},E=["STRONG","B","EM","CITE","DFN","I","BIG","SMALL","FONT","BLOCKQUOTE","TT","A","U","SUP","SUB","STRIKE","H1","H2","H3","H4","H5","H6","DEL","LABEL","PLAINTEXT"],R=["abstract","assert","boolean","break","byte","case","catch","char","class","const","continue","default","double","do","else","enum","extends","false","final","finally","float","for","goto","if","implements","import","instanceof","int","interface","long","native","new","null","package","private","protected","public","return","short","static","strictfp","super","switch","synchronized","this","throw","throws","transient","true","try","void","volatile","while"],I=Object.freeze({NODE_ANDROID:v,VIEW_SUPPORT:{DRAWER:"android.support.v4.widget.DrawerLayout",NAVIGATION_VIEW:"android.support.design.widget.NavigationView",COORDINATOR:"android.support.design.widget.CoordinatorLayout",APPBAR:"android.support.design.widget.AppBarLayout",COLLAPSING_TOOLBAR:"android.support.design.widget.CollapsingToolbarLayout",TOOLBAR:"android.support.v7.widget.Toolbar",FLOATING_ACTION_BUTTON:"android.support.design.widget.FloatingActionButton",BOTTOM_NAVIGATION:"android.support.design.widget.BottomNavigationView"},BOX_ANDROID:y,AXIS_ANDROID:b,XMLNS_ANDROID:A,FONT_ANDROID:T,FONTALIAS_ANDROID:_,FONTREPLACE_ANDROID:N,FONTWEIGHT_ANDROID:D,WEBVIEW_ANDROID:E,RESERVED_JAVA:R,DRAWABLE_PREFIX:{MENU:"ic_menu_",DIALOG:"ic_dialog_"}}),O={builtInExtensions:["androme.external","androme.origin","androme.custom","androme.accessibility","androme.list","androme.table","androme.grid"],targetAPI:u.OREO,density:f.MDPI,supportRTL:!0,dimensResourceValue:!0,numberResourceValue:!1,fontAliasResourceValue:!0,alwaysReevaluateResources:!0,renderInlineText:!0,ellipsisOnTextOverflow:!0,preloadImages:!0,autoSizeBackgroundImage:!0,autoSizePaddingAndBorderWidth:!0,whitespaceHorizontalOffset:3.5,whitespaceVerticalOffset:16,constraintChainDisabled:!1,constraintChainPackedHorizontalOffset:3.5,constraintChainPackedVerticalOffset:16,constraintCirclePositionAbsolute:!1,constraintPercentAccuracy:4,supportNegativeLeftTop:!0,floatOverlapDisabled:!1,collapseUnattributedElements:!0,customizationsOverwritePrivilege:!1,showAttributes:!0,insertSpaces:4,convertPixels:"dp",autoCloseOnWrite:!0,outputDirectory:"app/src/main",outputMainFileName:"activity_main.xml",outputArchiveFileType:"zip",outputMaxProcessingTime:30},w=(r(g={},u.PIE,{android:[],app:[],customizations:{}}),r(g,u.OREO_1,{android:[],app:[],customizations:{}}),r(g,u.OREO,{android:["fontWeight","layout_marginHorizontal","layout_marginVertical","paddingHorizontal","paddingVertical"],app:[],customizations:{}}),r(g,u.NOUGAT_1,{android:[],app:[],customizations:{}}),r(g,u.NOUGAT,{android:[],app:[],customizations:{}}),r(g,u.MARSHMALLOW,{android:[],app:[],customizations:{}}),r(g,u.LOLLIPOP_1,{android:[],app:[],customizations:{}}),r(g,u.LOLLIPOP,{android:["layout_columnWeight"],app:[],customizations:{}}),r(g,u.KITKAT_1,{android:[],app:[],customizations:{}}),r(g,u.KITKAT,{android:[],app:[],customizations:{}}),r(g,u.JELLYBEAN_2,{android:[],app:[],customizations:{}}),r(g,u.JELLYBEAN_1,{android:["labelFor"],app:[],customizations:{}}),r(g,u.JELLYBEAN,{android:[],app:[],customizations:{}}),r(g,u.ICE_CREAM_SANDWICH_1,{android:[],app:[],customizations:{}}),r(g,u.ICE_CREAM_SANDWICH,{android:[],app:[],customizations:{}}),r(g,u.ALL,{android:[],app:[],customizations:{SUB:{android:{layout_marginTop:"6px"}},SUP:{android:{layout_marginTop:"-4px"}},Button:{android:{textAllCaps:"false"}}}}),g);function S(){p={android:["parent"]}}function x(t,e){null==p&&S();var n=e,i=1,r=e.match(/^(\w+)_([0-9]+)$/);for(r&&(n=r[1],i=parseInt(r[2])),null==p[t]&&(p[t]=[]);;){if(!p[t].includes(e)){p[t].push(e);break}e="".concat(n,"_").concat(i++)}return e}function L(t){return t?t.replace(/@\+?id\//,""):""}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:160,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t&&!isNaN(t=parseFloat(t))?(t=(t/=e/160)>=1||0===t?Math.floor(t):t.toFixed(2))+(n?"sp":"dp"):"0dp"}function P(t,e,n,i){var r=i.dimensResourceValue;return void 0===r||r?"{%".concat(t.toLowerCase(),",").concat(e,",").concat(n,"}"):n}function k(t,e){var n=e.density,i=void 0===n?160:n,r=e.convertPixels,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(void 0===r?"dp":r){case"dp":return t.replace(/("|>)(-)?([0-9]+(?:\.[0-9]+)?px)("|<)/g,function(t){return(arguments.length<=1?void 0:arguments[1])+((arguments.length<=2?void 0:arguments[2])||"")+B(arguments.length<=3?void 0:arguments[3],i,a)+(arguments.length<=4?void 0:arguments[4])});default:return t}}function C(t,e,n){return 0===t?0:0===e?1:parseFloat(Math.max(t/(t+e),0).toFixed(n))}function M(t,e){var n=e.supportRTL,i=e.targetAPI;return(void 0===n||n)&&(void 0===i?u.JELLYBEAN_1:i)>=u.JELLYBEAN_1&&(t=(t=t.replace(/left/g,"start").replace(/right/g,"end")).replace(/Left/g,"Start").replace(/Right/g,"End")),t}var X=Object.freeze({resetId:S,generateId:x,stripId:L,convertUnit:B,delimitUnit:P,replaceUnit:k,calculateBias:C,parseRTL:M}),H=androme.lib.base.NodeList,G=androme.lib.enumeration,W=androme.lib.constant,z=androme.lib.util,V=androme.lib.dom,F=function(t){return function(n){function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0;return e(this,r),(t=s(this,o(r).call(this,n,i))).api=0,t.children=[],t.renderChildren=[],t._namespaces=new Set(["android","app"]),t._boxAdjustment=V.getBoxModel(),t._boxReset=V.getBoxModel(),t._android={},t._app={},t.constraint={current:{}},t}return a(r,t),i(r,[{key:"attr",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.supported(t,e)?d(o(r.prototype),"attr",this).call(this,t,e,n,i):""}},{key:"android",value:function(t){return this.attr("android",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",!(arguments.length>2&&void 0!==arguments[2])||arguments[2]),this._android[t]||""}},{key:"app",value:function(t){return this.attr("app",t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",!(arguments.length>2&&void 0!==arguments[2])||arguments[2]),this._app[t]||""}},{key:"apply",value:function(){var t=Object.assign({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});for(var e in d(o(r.prototype),"apply",this).call(this,t),t)this.formatted("".concat(e,'="').concat(t[e],'"'))}},{key:"formatted",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.match(/^(?:([a-z]+):)?(\w+)="((?:@+?[a-z]+\/)?.+)"$/);n&&this.attr(n[1]||"_",n[2],n[3],e)}},{key:"anchor",value:function(t,e,n,i){(1===arguments.length||null==this.constraint.current[t]||!this.constraint.current[t].overwrite||n&&!this.constraint[n])&&(null==i&&(i="parent"===e||"true"===e),this[this.renderParent.controlName===v.RELATIVE?"android":"app"](t,e,i),n&&(this.constraint[n]=!0),this.constraint.current[t]={adjacent:e,orientation:n,overwrite:i})}},{key:"alignParent",value:function(t,e){if(this.renderParent.is(G.NODE_STANDARD.CONSTRAINT,G.NODE_STANDARD.RELATIVE)){var n=z.capitalize(M(t,e));return this.renderParent.controlName===v.CONSTRAINT?"parent"===this.app("layout_constraint".concat(n,"_to").concat(n,"Of")):"true"===this.android("layout_alignParent".concat(n))}return!1}},{key:"horizontalBias",value:function(t){var e=t.constraintPercentAccuracy,n=void 0===e?4:e,i=this.documentParent;return i!==this?C(Math.max(0,this.linear.left-i.box.left),Math.max(0,i.box.right-this.linear.right),n):.5}},{key:"verticalBias",value:function(t){var e=t.constraintPercentAccuracy,n=void 0===e?4:e,i=this.documentParent;return i!==this?C(Math.max(0,this.linear.top-i.box.top),Math.max(0,i.box.bottom-this.linear.bottom),n):.5}},{key:"modifyBox",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="number"==typeof t?z.convertEnum(t,G.BOX_STANDARD,y):"";if(0!==e&&(""!==i||z.isString(t))){var r=z.isString(t)?t:i.replace("layout_","");null!=this._boxReset[r]&&(null==e?this._boxReset[r]=1:(this._boxAdjustment[r]+=e,n||(this._boxAdjustment[r]=Math.max(0,this._boxAdjustment[r]))))}}},{key:"valueBox",value:function(t){var e=z.convertEnum(t,G.BOX_STANDARD,y);if(""!==e){var n=e.replace("layout_","");return[this._boxReset[n]||0,this._boxAdjustment[n]||0]}return[0,0]}},{key:"supported",value:function(t,e){if(this.api>0)for(var n=this.api+1;n<=u.LATEST;n++){var i=w[n];if(i&&i[t]&&i[t].includes(e))return!1}return!0}},{key:"combine",value:function(){for(var t=[],e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=!0,a=!1,o=void 0;try{for(var l,s=this._namespaces.values()[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var d=l.value,c=this["_".concat(d)];if(0===n.length||n.includes(d))for(var h in c)t.push("_"!==d?"".concat(d,":").concat(h,'="').concat(c[h],'"'):"".concat(h,'="').concat(c[h],'"'))}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return t.sort(function(t,e){return t.startsWith("android:id=")?-1:e.startsWith("android:id=")?1:t>e?1:-1})}},{key:"clone",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new r(t||this.id,this.element);return n.api=this.api,n.nodeId=this.nodeId,n.nodeType=this.nodeType,n.controlName=this.controlName,n.alignmentType=this.alignmentType,n.depth=this.depth,n.rendered=this.rendered,n.renderDepth=this.renderDepth,n.renderParent=this.renderParent,n.renderExtension=this.renderExtension,n.documentRoot=this.documentRoot,n.documentParent=this.documentParent,e&&(n.children=this.children.slice()),n.inherit(this,"initial","base","style","styleMap"),n}},{key:"setNodeType",value:function(t){for(var e in v)if(v[e]===t&&null!=G.NODE_STANDARD[e]){this.nodeType=G.NODE_STANDARD[e];break}if(this.controlName=t,""!==this.android("id")&&(this.nodeId=L(this.android("id"))),!this.nodeId){var n=this.element,i=z.trimNull(n.id||n.name);R.includes(i)&&(i+="_1"),this.nodeId=z.convertWord(x("android",i||"".concat(z.lastIndexOf(this.controlName,".").toLowerCase(),"_1"))),this.android("id",this.stringId)}}},{key:"setLayout",value:function(){var t=this;if(this.nodeType>=G.NODE_STANDARD.SCROLL_HORIZONTAL)this.android("layout_width",this.nodeType===G.NODE_STANDARD.SCROLL_HORIZONTAL&&this.has("width",G.CSS_STANDARD.UNIT)?this.css("width"):"wrap_content"),this.android("layout_height",this.nodeType===G.NODE_STANDARD.SCROLL_VERTICAL&&this.has("height",G.CSS_STANDARD.UNIT)?this.css("height"):"wrap_content");else if(this.renderParent.nodeType>=G.NODE_STANDARD.SCROLL_HORIZONTAL)this.renderParent.is(G.NODE_STANDARD.SCROLL_HORIZONTAL)?(this.android("layout_width","wrap_content",!1),this.android("layout_height","match_parent",!1)):(this.android("layout_width","match_parent",!1),this.android("layout_height","wrap_content",!1));else{var e=this.documentParent,n=this.renderParent,i=this.renderChildren,r=t.plainText?t.bounds.width:t.linear&&t.linear.width>0?t.linear.width:t.styleElement?t.element.clientWidth+t.borderLeftWidth+t.borderRightWidth+t.marginLeft+t.marginRight:0,a=t.plainText?t.bounds.height:t.linear&&t.linear.height>0?t.linear.height:t.styleElement?t.element.clientHeight+t.borderTopWidth+t.borderBottomWidth+t.marginTop+t.marginBottom:0,o=e.initial.box&&e.initial.box.width>0?e.initial.box.width:e.box&&e.box.width>0?e.box.width:e.styleElement?e.element.offsetWidth-(e.paddingLeft+e.paddingRight+e.borderLeftWidth+e.borderRightWidth):0,l=e.initial.box&&e.initial.box.height>0?e.initial.box.height:e.box&&e.box.height>0?e.box.height:e.styleElement?e.element.offsetHeight-(e.paddingTop+e.paddingBottom+e.borderTopWidth+e.borderBottomWidth):0,s=this.styleMap,d=this.constraint,c="TABLE"===this.tagName;if((this.documentBody||this.documentRoot&&!this.flex.enabled&&this.is(G.NODE_STANDARD.FRAME,G.NODE_STANDARD.CONSTRAINT,G.NODE_STANDARD.RELATIVE))&&(this.hasWidth||!this.block||d.layoutHorizontal||this.android("layout_width","match_parent",!1),this.hasHeight||!this.cascade().some(function(t){return!t.pageflow})||d.layoutHeight||d.layoutVertical||this.android("layout_height","match_parent",!1)),this.of(G.NODE_STANDARD.GRID,G.NODE_ALIGNMENT.PERCENT))this.android("layout_width","match_parent");else{if("0px"!==this.android("layout_width")){if(this.toInt("width")>0&&(!this.inlineStatic||n.is(G.NODE_STANDARD.GRID)||!this.has("width",0,{map:"initial"})))if(this.has("width",G.CSS_STANDARD.PERCENT))if("100%"===s.width)this.android("layout_width","match_parent",!1);else if(n.of(G.NODE_STANDARD.GRID,G.NODE_ALIGNMENT.PERCENT))this.android("layout_width","0px"),this.android("layout_columnWeight",(parseInt(s.width)/100).toFixed(2));else{this.android("layout_width",z.formatPX(Math.ceil(this.bounds.width)-(c?0:this.paddingLeft+this.paddingRight+this.borderLeftWidth+this.borderRightWidth)),!1)}else this.android("layout_width",z.convertInt(e.android("layout_width"))>0&&e.viewWidth>0&&this.viewWidth>=e.viewWidth?"match_parent":s.width,"TABLE"!==n.tagName);if(d.layoutWidth&&this.android("layout_width",d.layoutHorizontal?e.hasWidth?"match_parent":"wrap_content":this.bounds.width>=o?"match_parent":z.formatPX(this.bounds.width),!1),this.has("minWidth",G.CSS_STANDARD.UNIT)&&(this.android("layout_width","wrap_content",!1),this.android("minWidth",s.minWidth,!1)),!this.documentBody&&this.has("maxWidth",G.CSS_STANDARD.UNIT)&&this.layoutVertical){var h=this.css("maxWidth"),u=!0,f=!1,g=void 0;try{for(var p,m=i[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var v=p.value;v.is(G.NODE_STANDARD.TEXT)&&!v.has("maxWidth")&&v.android("maxWidth",h)}}catch(t){f=!0,g=t}finally{try{u||null==m.return||m.return()}finally{if(f)throw g}}}}if(""===this.android("layout_width")){var y=i.filter(function(t){return!t.autoMargin&&t.has("width",G.CSS_STANDARD.UNIT,{map:"initial"})});if(z.convertFloat(this.android("layout_columnWeight"))>0)this.android("layout_width","0px");else if(y.length>0&&y.some(function(e){return e.bounds.width>=t.box.width})||this.svgElement)this.android("layout_width","wrap_content");else if(this.blockStatic&&this.hasAlign(G.NODE_ALIGNMENT.VERTICAL)||!this.documentRoot&&i.some(function(t){return t.hasAlign(G.NODE_ALIGNMENT.VERTICAL)&&!t.has("width")}))this.android("layout_width","match_parent");else{var b=Math.max.apply(null,i.filter(function(t){return t.inlineElement&&"right"!==t.float}).map(function(t){return t.linear.right}))||0,A=this.nodeType<G.NODE_STANDARD.INLINE||this.inlineElement||!this.pageflow||!this.siblingflow||"table"===this.display||e.flex.enabled||n.inlineElement&&!n.hasWidth&&!this.inlineElement&&this.nodeType>G.NODE_STANDARD.BLOCK||n.is(G.NODE_STANDARD.GRID);if(this.is(G.NODE_STANDARD.GRID)&&z.withinFraction(b,this.box.right))this.android("layout_width","wrap_content");else if(!A||this.blockStatic&&!this.has("maxWidth")){var T=this.previousSibling(),_=this.nextSibling();(r>=o||this.linearVertical&&!this.floating&&!this.autoMargin||this.is(G.NODE_STANDARD.FRAME)&&i.some(function(t){return t.blockStatic&&(t.autoMarginHorizontal||t.autoMarginLeft)})||!this.htmlElement&&this.length>0&&i.some(function(e){return e.linear.width>=t.documentParent.box.width})&&!i.some(function(t){return t.plainText&&t.multiLine})||this.htmlElement&&this.blockStatic&&(this.documentParent.documentBody||this.ascend().every(function(t){return t.blockStatic})||this.documentParent.blockStatic&&this.nodeType<=G.NODE_STANDARD.LINEAR&&(!T||!T.floating)&&(!_||!_.floating)))&&this.android("layout_width","match_parent")}this.android("layout_width","wrap_content",!1)}}}if("0px"!==this.android("layout_height")){if(this.toInt("height")>0&&(!this.inlineStatic||!this.has("height",0,{map:"initial"})))if(this.has("height",G.CSS_STANDARD.PERCENT))if("100%"===s.height)this.android("layout_height","match_parent",!1);else{var N=Math.ceil(this.bounds.height);c||(N-=this.paddingTop+this.paddingBottom+this.borderTopWidth+this.borderBottomWidth),this.android("layout_height",z.formatPX(N),!1)}else this.android("layout_height","hidden"===this.css("overflow")&&this.toInt("height")<this.box.height?"wrap_content":s.height);if(d.layoutHeight)if(d.layoutVertical)this.android("layout_height","wrap_content",!1);else if(this.documentRoot){var D=Math.max.apply(null,i.filter(function(t){return t.pageflow}).map(function(t){return t.linear.bottom}));this.android("layout_height",D>0?z.formatPX(D+this.paddingBottom+this.borderBottomWidth):"match_parent",!1)}else this.android("layout_height",this.actualHeight<l?z.formatPX(this.actualHeight):"match_parent",!1);if(this.has("minHeight",G.CSS_STANDARD.UNIT)&&(this.android("layout_height","wrap_content",!1),this.android("minHeight",s.minHeight,!1)),!this.documentBody&&this.has("maxHeight",G.CSS_STANDARD.UNIT)&&this.layoutHorizontal){var E=this.css("maxHeight"),R=!0,I=!1,O=void 0;try{for(var w,S=i[Symbol.iterator]();!(R=(w=S.next()).done);R=!0){var x=w.value;x.is(G.NODE_STANDARD.TEXT)&&!x.has("maxWidth")&&x.android("maxWidth",E)}}catch(t){I=!0,O=t}finally{try{R||null==S.return||S.return()}finally{if(I)throw O}}}}if(""===this.android("layout_height"))if(this.svgElement)this.android("layout_height","wrap_content");else if(!(a>=l&&e.hasHeight)||this.inlineElement&&this.nodeType<G.NODE_STANDARD.INLINE||n.is(G.NODE_STANDARD.RELATIVE)&&n.inlineHeight){if(this.lineHeight>0&&!this.plainText&&!n.linearHorizontal){var L=this.actualHeight+n.paddingTop+n.paddingBottom;this.inlineElement&&L>0&&this.lineHeight>=L?(this.android("layout_height",z.formatPX(L)),this.modifyBox(G.BOX_STANDARD.PADDING_TOP,null),this.modifyBox(G.BOX_STANDARD.PADDING_BOTTOM,null)):this.block&&this.box.height>0&&this.lineHeight===this.box.height&&this.android("layout_height",z.formatPX(L))}this.android("layout_height","wrap_content",!1)}else this.android("layout_height","match_parent")}switch(this.cssParent("visibility",!0)){case"hidden":case"collapse":this.android("visibility","invisible")}}},{key:"setAlignment",value:function(t){var e=this.renderParent,n=this.cssParent("textAlign"),i=M("left",t),r=M("right",t),a=this.styleMap.textAlign||"",o="",l="";function s(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=h(z.trimNull(t).split("|")).concat(n).filter(function(t){return t});switch(r.length){case 0:return"";case 1:return r[0];default:for(var a="",o="",l="",s=0;s<r.length;s++){var d=r[s];switch(d){case"center":a="center_horizontal",o="center_vertical";break;case"left":case"start":case"right":case"end":case"center_horizontal":a=d;break;case"top":case"bottom":case"center_vertical":o=d;break;default:l+=(""!==l?"|":"")+d}}var c=[a,o].filter(function(t){return t}),u=2===c.filter(function(t){return-1!==t.indexOf("center")}).length?"center":c.join("|");return""!==u?""!==l?"".concat(u,"|").concat(l):u:l}}function d(t){if(!t.blockWidth){var e=[],n="auto"===t.css("marginLeft"),a="auto"===t.css("marginRight"),o="auto"===t.css("marginTop"),l="auto"===t.css("marginBottom");if(n&&a?e.push("center_horizontal"):n&&!a?e.push(r):!n&&a&&e.push(i),o&&l?e.push("center_vertical"):o&&!l?e.push("bottom"):!o&&l&&e.push("top"),e.length>0){var d=t.blockWidth?"gravity":"layout_gravity";return t.android(d,s.apply(void 0,[t.android(d)].concat(e))),!0}}return!1}function c(t){switch(t){case"left":case"start":return i;case"right":case"end":return r;case"center":return"center_horizontal";default:return""}}function u(t){return""===a||t===r?t:a}if(!this.floating&&!e.of(G.NODE_STANDARD.RELATIVE,G.NODE_ALIGNMENT.MULTILINE))switch(this.styleMap.verticalAlign){case"top":case"text-top":o="top",e.linearHorizontal&&this.inlineHeight&&this.android("layout_height","match_parent");break;case"middle":(this.inline||"table-cell"===this.documentParent.css("display")||this.inlineStatic&&this.documentParent.lineHeight>0)&&(o="center_vertical");break;case"bottom":case"text-bottom":o="bottom"}""===o&&this.lineHeight>0&&!this.blockHeight&&(o="center_vertical"),(e.linearVertical||this.documentRoot&&this.linearVertical)&&("right"===this.float?this.android("layout_gravity",r):d(this)),this.hasAlign(G.NODE_ALIGNMENT.FLOAT)&&(this.hasAlign(G.NODE_ALIGNMENT.RIGHT)||this.renderChildren.some(function(t){return t.hasAlign(G.NODE_ALIGNMENT.RIGHT)})?l=r:(this.hasAlign(G.NODE_ALIGNMENT.LEFT)||this.renderChildren.some(function(t){return t.hasAlign(G.NODE_ALIGNMENT.LEFT)}))&&(l=i)),"TABLE"===e.tagName&&(this.android("layout_gravity",s(this.android("layout_gravity"),"fill")),""===a&&"TH"===this.tagName&&(a="center"),""===o&&(o="center_vertical")),e.is(G.NODE_STANDARD.FRAME)?d(this)||"none"!==(l=l||this.float)&&(e.inlineWidth||this.singleChild&&!e.documentRoot?e.android("layout_gravity",s(e.android("layout_gravity"),M(l,t))):this.blockWidth?a=u(l):this.android("layout_gravity",s(this.android("layout_gravity"),M(l,t)))):""!==l&&(this.is(G.NODE_STANDARD.LINEAR)?this.blockWidth?a=u(l):this.android("layout_gravity",s(this.android("layout_gravity"),l)):e.hasAlign(G.NODE_ALIGNMENT.VERTICAL)&&(a=u(l))),""!==n&&M(n,t)!==i&&(e.is(G.NODE_STANDARD.FRAME)&&this.singleChild&&!this.floating&&!this.autoMargin&&this.android("layout_gravity",s(this.android("layout_gravity"),c(n))),""===a&&(a=n)),""!==o&&e.linearHorizontal&&(this.android("layout_gravity",s(this.android("layout_gravity"),o)),o=""),this.documentRoot&&(this.blockWidth||this.is(G.NODE_STANDARD.FRAME))&&this.delete("android","layout_gravity"),this.android("gravity",s(this.android("gravity"),c(a),o))}},{key:"setBoxSpacing",value:function(t){var e=this;this.hasBit("excludeResource",G.NODE_RESOURCE.BOX_SPACING)||(["padding","margin"].forEach(function(n){["Top","Left","Right","Bottom"].forEach(function(i){var r=n+i,a=(0===e._boxReset[r]?e[r]:0)+e._boxAdjustment[r];if(0!==a){var o=M(y["".concat(n.toUpperCase(),"_").concat(i.toUpperCase())],t);e.android(o,z.formatPX(a))}})}),this.api>=u.OREO&&["layout_margin","padding"].forEach(function(n,i){var r=z.convertInt(e.android("".concat(n,"Top"))),a=z.convertInt(e.android(M("".concat(n,"Right"),t))),o=z.convertInt(e.android("".concat(n,"Bottom"))),l=z.convertInt(e.android(M("".concat(n,"Left"),t)));0!==r&&r===o&&o===l&&l===a?(e.delete("android","".concat(n,"*")),e.android(n,z.formatPX(r))):e.renderParent.is(G.NODE_STANDARD.GRID)&&0===i||(0!==r&&r===o&&(e.delete("android","".concat(n,"Top"),"".concat(n,"Bottom")),e.android("".concat(n,"Vertical"),z.formatPX(r))),0!==l&&l===a&&(e.delete("android",M("".concat(n,"Left"),t),M("".concat(n,"Right"),t)),e.android("".concat(n,"Horizontal"),z.formatPX(l))))}))}},{key:"applyOptimizations",value:function(t,e){this.setBlockSpacing(),this.bindWhiteSpace(t),this.autoSizeBoxModel(t),this.alignLinearLayout(t,e),this.alignRelativePosition()}},{key:"applyCustomizations",value:function(t){for(var e=[w[0],w[this.api]],n=0;n<e.length;n++){var i=e[n];if(i&&i.customizations)for(var r=[this.tagName,this.controlName],a=0;a<r.length;a++){var o=i.customizations[r[a]];if(o)for(var l in o)for(var s in o[l])this.attr(l,s,o[l][s],t.customizationsOverwritePrivilege)}}}},{key:"setBlockSpacing",value:function(){var t=this;if(this.pageflow){var e=this.renderParent;if(!e.documentBody&&e.blockStatic&&this.documentParent===e&&[["firstElementChild","Top",G.BOX_STANDARD.MARGIN_TOP,G.BOX_STANDARD.PADDING_TOP],["lastElementChild","Bottom",G.BOX_STANDARD.MARGIN_BOTTOM,G.BOX_STANDARD.PADDING_BOTTOM]].forEach(function(n,i){var r=V.getNodeFromElement(e[n[0]]);!r||r.lineBreak||r!==t&&r!==t.renderChildren[0===i?0:t.renderChildren.length-1]||e["margin".concat(n[1])]>0&&0===e["padding".concat(n[1])]&&0===e["border".concat(n[1],"Width")]&&r.modifyBox(n[2],null)}),this.htmlElement&&this.blockStatic)for(var n=function(e){var n=t.element.children[e],i=V.getNodeFromElement(n);if(i&&i.pageflow&&i.blockStatic&&!i.lineBreak){var r=i.previousSibling();if(r&&r.pageflow&&!r.lineBreak){var a=z.convertInt(i.cssInitial("marginTop",!0)),o=z.convertInt(r.cssInitial("marginBottom",!0));o>0&&a>0&&(a<=o?i.modifyBox(G.BOX_STANDARD.MARGIN_TOP,null):r.modifyBox(G.BOX_STANDARD.MARGIN_BOTTOM,null))}[n.previousElementSibling,n.nextElementSibling].forEach(function(t,e){var n=V.getNodeFromElement(t);if(n&&n.excluded){var r=Math.min(n.marginTop,n.marginBottom);r<0&&i.modifyBox(0===e?G.BOX_STANDARD.MARGIN_TOP:G.BOX_STANDARD.MARGIN_BOTTOM,r,!0)}})}},i=0;i<this.element.children.length;i++)n(i)}}},{key:"autoSizeBoxModel",value:function(t){if(t.autoSizePaddingAndBorderWidth&&!this.hasBit("excludeProcedure",G.NODE_PROCEDURE.AUTOFIT)){var e=this.renderParent,n=z.convertInt(this.android("layout_width")),i=z.convertInt(this.android("layout_height")),a=!1;if(this.imageElement){var o=this.borderTopWidth,l=this.borderRightWidth,s=this.borderBottomWidth,d=this.borderLeftWidth,c=0,h=0;o>0&&(this.modifyBox(G.BOX_STANDARD.PADDING_TOP,o),h+=o),l>0&&(this.modifyBox(G.BOX_STANDARD.PADDING_RIGHT,l),c+=l),s>0&&(this.modifyBox(G.BOX_STANDARD.PADDING_BOTTOM,s),h+=s),d>0&&(this.modifyBox(G.BOX_STANDARD.PADDING_LEFT,d),c+=d),h+=this.paddingTop+this.paddingBottom,(c+=this.paddingLeft+this.paddingRight)>0&&(n>0?this.android("layout_width",z.formatPX(n+c)):(n=z.convertInt(e.android("layout_width")))>0&&this.singleChild&&e.android("layout_width",z.formatPX(n+this.marginLeft+c))),h>0&&(i>0?this.android("layout_height",z.formatPX(i+h)):(i=z.convertInt(e.android("layout_height")))>0&&this.singleChild&&e.android("layout_height",z.formatPX(i+this.marginTop+h)))}else if(this.is(G.NODE_STANDARD.BUTTON)&&0===i)this.android("layout_height",z.formatPX(this.bounds.height+("outset"===this.css("borderStyle")?z.convertInt(this.css("borderWidth")):0)));else if(this.is(G.NODE_STANDARD.LINE))i>0&&this.has("height",0,{map:"initial"})&&"HR"!==this.tagName&&this.android("layout_height",z.formatPX(i+this.borderTopWidth+this.borderBottomWidth));else if("TABLE"===this.tagName){var u=z.convertInt(this.android("layout_width"));if(u>0&&(this.bounds.width>u&&this.android("layout_width",z.formatPX(this.bounds.width)),this.has("width",G.CSS_STANDARD.AUTO,{map:"initial"})&&this.renderChildren.every(function(t){return t.inlineWidth}))){var f=!0,g=!1,p=void 0;try{for(var m,v=this.renderChildren[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var y=m.value;y.android("layout_width","0px"),y.android("layout_columnWeight","1")}}catch(t){g=!0,p=t}finally{try{f||null==v.return||v.return()}finally{if(g)throw p}}}a="content-box"===this.css("boxSizing")}else if(this.styleElement&&!this.hasBit("excludeResource",G.NODE_RESOURCE.BOX_SPACING)){if("TABLE"!==e.tagName&&"border-box"!==this.css("boxSizing")){var b=z.convertInt(this.android("minWidth")),A=z.convertInt(this.android("minHeight")),T=this.paddingLeft+this.paddingRight+this.borderLeftWidth+this.borderRightWidth,_=r.getPaddedHeight(this);n>0&&this.toInt("width",0,{map:"initial"})>0&&T>0&&this.android("layout_width",z.formatPX(n+T)),i>0&&this.toInt("height",0,{map:"initial"})>0&&_>0&&(0===this.lineHeight||this.lineHeight<this.box.height||this.lineHeight===this.toInt("height"))&&this.android("layout_height",z.formatPX(i+_)),b>0&&T>0&&this.android("minWidth",z.formatPX(b+T)),A>0&&_>0&&this.android("minHeight",z.formatPX(A+_))}a=!0}a&&(this.modifyBox(G.BOX_STANDARD.PADDING_TOP,this.borderTopWidth),this.modifyBox(G.BOX_STANDARD.PADDING_RIGHT,this.borderRightWidth),this.modifyBox(G.BOX_STANDARD.PADDING_BOTTOM,this.borderBottomWidth),this.modifyBox(G.BOX_STANDARD.PADDING_LEFT,this.borderLeftWidth))}}},{key:"bindWhiteSpace",value:function(t){var e=this;if(!this.hasAlign(G.NODE_ALIGNMENT.FLOAT)&&(this.linearHorizontal||this.of(G.NODE_STANDARD.RELATIVE,G.NODE_ALIGNMENT.HORIZONTAL,G.NODE_ALIGNMENT.MULTILINE)||this.of(G.NODE_STANDARD.CONSTRAINT,G.NODE_ALIGNMENT.HORIZONTAL))){var n=this.css("textAlign"),i=this.toInt("textIndent"),r=this.valueBox(G.BOX_STANDARD.PADDING_LEFT),a=this.is(G.NODE_STANDARD.RELATIVE),o=this.box.left+(i>0?this.toInt("textIndent"):i<0&&1===r[0]?r[0]:0);this.each(function(e,i){if(!(e.floating||a&&e.alignParent("left",t)||0===i&&("left"!==n||e.plainText)||["SUP","SUB"].includes(e.tagName))){var r=Math.round(e.actualLeft()-o);r>=1&&e.modifyBox(G.BOX_STANDARD.MARGIN_LEFT,r)}o=e.actualRight()},!0)}else this.linearVertical&&this.each(function(t){var n=function(){var n=t;do{n=n.previousSibling(!0,!1,!1)}while(n&&!e.initial.children.includes(n));return n}(),i=V.getElementsBetweenSiblings(n?n.length>0&&!n.styleElement?n.lastElementChild:n.baseElement:null,t.baseElement).filter(function(t){var e=V.getNodeFromElement(t);return e&&(e.lineBreak||e.excluded&&e.blockStatic)});if(i.length>0){var r;if(r=n?n.layoutHorizontal&&n.length>0&&n.renderChildren.some(function(t){return!t.floating})?n.renderChildren.filter(function(t){return!t.floating}).sort(function(t,e){return t.linear.bottom<e.linear.bottom?1:-1})[0].linear.bottom:n.linear.bottom:e.box.top,1===i.length&&"BR"===i[0].tagName&&n&&n.inline&&t.inline)return;var a=Math.round(t.linear.top-r);a>=1&&t.modifyBox(G.BOX_STANDARD.MARGIN_TOP,a)}},!0)}},{key:"alignLinearLayout",value:function(t,e){var n=this;if(this.linearHorizontal){var i=this.renderParent,a=this.renderChildren,o=a.filter(function(t){return!t.floating&&(t.styleElement||0===t.renderChildren.length)});if(o.length>0&&o.every(function(t){return t.baseline||t.has("verticalAlign",G.CSS_STANDARD.UNIT)})&&(o.some(function(t){return t.toInt("verticalAlign")<0})&&o.some(function(t){return t.toInt("verticalAlign")>0})||o.some(function(t){return t.imageElement&&0!==t.toInt("verticalAlign")}))){var l=[],s=Math.max.apply(null,o.map(function(t){return t.toInt("verticalAlign")})),d=0;s>0&&(o.forEach(function(t){var e=t.toInt("verticalAlign"),n=(t.imageElement?t.bounds.height:0)+(e>0?e:0);n>=d&&(n>d&&(l.length=0),l.push(t),d=n)}),l.sort(function(t){return t.imageElement?-1:1}),o.forEach(function(t){if(!l.includes(t)){var e=t.toInt("verticalAlign");s>0&&t.modifyBox(G.BOX_STANDARD.MARGIN_TOP,d-(l[0].imageElement?t.bounds.height:0)),0!==e&&(t.modifyBox(G.BOX_STANDARD.MARGIN_TOP,-1*e,!0),t.css("verticalAlign","0px"))}}),l.forEach(function(t){return t.css("verticalAlign","0px")}))}if(a.some(function(t){return"SUB"===t.tagName})&&this.inlineHeight){var c=z.convertInt(r.getCustomizationValue(this.api,"SUB","android","layout_marginTop"));c>0&&this.android("layout_height",z.formatPX(this.bounds.height+c+r.getPaddedHeight(this)))}if(a.some(function(t){return t.imageElement&&t.baseline})||!this.hasAlign(G.NODE_ALIGNMENT.FLOAT)&&!a.some(function(t){return t.floating||!t.siblingflow})){var h=i.android("baselineAlignedChildIndex");if(i.renderChildren.some(function(t){return t.baseline&&t.textElement})||""!==h&&i.renderChildren.findIndex(function(t){return t===n})===parseInt(h)||a.some(function(t){return!t.alignOrigin||!t.baseline})||a.some(function(t){return t.nodeType<G.NODE_STANDARD.TEXT})&&a.some(function(t){return t.textElement&&t.baseline})||i.is(G.NODE_STANDARD.GRID)&&!a.some(function(t){return t.textElement&&t.baseline})){var u=H.textBaseline(a,e);u.length>0&&this.android("baselineAlignedChildIndex",""+a.indexOf(u[0]))}}else this.android("baselineAligned","false");if(t.ellipsisOnTextOverflow&&this.length>1&&a.every(function(t){return t.textElement&&!t.floating})){var f=a[a.length-1];f.textElement&&!f.multiLine&&f.textContent.trim().split(" ").length>1&&f.android("singleLine","true")}}}},{key:"alignRelativePosition",value:function(){var t=this,e=this.renderParent;if(this.inline||this.imageOrSvgElement&&"inline-block"===this.display&&!this.floating){var n=this.toInt("verticalAlign");0!==n&&(this.modifyBox(G.BOX_STANDARD.MARGIN_TOP,-1*n,!0),n<0&&"inline-block"!==this.display&&e.layoutHorizontal&&e.inlineHeight&&e.android("layout_height",z.formatPX(e.bounds.height+r.getPaddedHeight(e))))}if("relative"===this.position||e.is(G.NODE_STANDARD.FRAME)){var i=this.toInt("top"),a=this.toInt("bottom"),o=this.toInt("left");if(0!==i)if(i<0&&e.is(G.NODE_STANDARD.RELATIVE,G.NODE_STANDARD.LINEAR)&&this.floating&&this.data("RESOURCE","backgroundImage")){var l=!1;e.renderChildren.some(function(e){if(e===t)l=!0;else{if(""!==e.android("layout_below"))return!0;l&&e.modifyBox(G.BOX_STANDARD.MARGIN_TOP,Math.abs(i))}return!1})}else this.modifyBox(G.BOX_STANDARD.MARGIN_TOP,i,!0);else 0!==a&&this.modifyBox(G.BOX_STANDARD.MARGIN_TOP,-1*a,!0);0!==o&&("right"===this.float||"relative"===this.position&&this.autoMarginLeft?this.modifyBox(G.BOX_STANDARD.MARGIN_RIGHT,-1*o,!0):this.modifyBox(G.BOX_STANDARD.MARGIN_LEFT,o,!0))}if(!this.plainText&&!e.linearHorizontal){var s=this.lineHeight+this.toInt("verticalAlign")-this.actualHeight;s>0&&(this.modifyBox(G.BOX_STANDARD.MARGIN_TOP,Math.floor(s/2)),this.modifyBox(G.BOX_STANDARD.MARGIN_BOTTOM,Math.ceil(s/2)))}}},{key:"stringId",get:function(){return this.nodeId?"@+id/".concat(this.nodeId):""}},{key:"controlName",set:function(t){this._controlName=t},get:function(){if(this._controlName)return this._controlName;var t=W.MAP_ELEMENT[this.nodeName];return null!=t?r.getControlName(t):""}},{key:"documentParent",set:function(t){this._documentParent=t},get:function(){return this._documentParent?this._documentParent:0===this.id?this:this.getParentElementAsNode(!1)||r.documentBody()}},{key:"renderParent",set:function(t){t!==this&&t.appendRendered(this),this._renderParent=t},get:function(){return this._renderParent||r.documentBody()}},{key:"anchored",get:function(){return this.constraint.horizontal&&this.constraint.vertical}},{key:"layoutHorizontal",get:function(){return this.linearHorizontal||this.hasAlign(G.NODE_ALIGNMENT.HORIZONTAL)||this.nodes.filter(function(t){return t.pageflow}).length>1&&(H.linearX(this.nodes)||this.is(G.NODE_STANDARD.FRAME)&&this.nodes.every(function(t){return t.domElement}))}},{key:"layoutVertical",get:function(){return this.linearVertical||this.hasAlign(G.NODE_ALIGNMENT.VERTICAL)||this.nodes.filter(function(t){return t.pageflow}).length>1&&H.linearY(this.nodes)||this.is(G.NODE_STANDARD.FRAME)&&this.nodes.some(function(t){return t.linearVertical})}},{key:"linearHorizontal",get:function(){return this._android.orientation===b.HORIZONTAL&&this.is(G.NODE_STANDARD.LINEAR,G.NODE_STANDARD.RADIO_GROUP)}},{key:"linearVertical",get:function(){return this._android.orientation===b.VERTICAL&&this.is(G.NODE_STANDARD.LINEAR,G.NODE_STANDARD.RADIO_GROUP)}},{key:"inlineWidth",get:function(){return"wrap_content"===this._android.layout_width}},{key:"inlineHeight",get:function(){return"wrap_content"===this._android.layout_height}},{key:"blockWidth",get:function(){return"match_parent"===this._android.layout_width}},{key:"blockHeight",get:function(){return"match_parent"===this._android.layout_height}}],[{key:"documentBody",value:function(){if(null==r._documentBody){var t=new r(0,document.body);t.hide(),t.setBounds(),r._documentBody=t}return r._documentBody}},{key:"getCustomizationValue",value:function(t,e,n,i){for(var r=[w[t],w[0]],a=0;a<r.length;a++){var o=r[a];if(o&&o.customizations&&o.customizations[e]&&o.customizations[e][n]&&z.isString(o.customizations[e][n][i]))return o.customizations[e][n][i]}return""}},{key:"getControlName",value:function(t){return v[G.NODE_STANDARD[t]]}},{key:"getPaddedHeight",value:function(t){return t.paddingTop+t.paddingBottom+t.borderTopWidth+t.borderBottomWidth}}]),r}()},U=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,F(androme.lib.base.Node)),n}(),j=function(t){function n(t,i,r,a){var l;return e(this,n),(l=s(this,o(n).call(this,t))).api=i.api,l.parent=r,l.depth=i.depth,l.nodeName="".concat(i.nodeName,"_GROUP"),l.documentParent=i.documentParent,Array.isArray(a)&&(l.children=a,a.length>0&&l.init()),l}return a(n,F(androme.lib.base.NodeGroup)),n}(),Y='!0\n<?xml version="1.0" encoding="utf-8"?>\n<layer-list xmlns:android="http://schemas.android.com/apk/res/android">\n!1\n\t<item>\n\t\t<shape android:shape="rectangle">\n\t\t\t<solid android:color="@color/{&color}" />\n\t\t</shape>\n\t</item>\n!1\n!2\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}" android:drawable="@drawable/{src}" width="{@width}" height="{@height}" />\n!2\n!3\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">\n\t\t<bitmap android:src="@drawable/{src}" android:gravity="{@gravity}" android:tileMode="{@tileMode}" android:tileModeX="{@tileModeX}" android:tileModeY="{@tileModeY}" />\n\t</item>\n!3\n!7\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">\n\t\t<shape android:shape="rectangle">\n!8\n\t\t\t<stroke android:width="{&width}" {borderStyle} />\n!8\n\t\t</shape>\n\t</item>\n!7\n!4\n\t<item android:top="{@top}" android:right="{@right}" android:bottom="{@bottom}" android:left="{@left}">\n\t\t<shape android:shape="rectangle">\n!5\n\t\t\t<stroke android:width="{&width}" {borderStyle} />\n!5\n!6\n\t\t\t<corners android:radius="{@radius}" android:topLeftRadius="{@topLeftRadius}" android:topRightRadius="{@topRightRadius}" android:bottomRightRadius="{@bottomRightRadius}" android:bottomLeftRadius="{@bottomLeftRadius}" />\n!6\n\t\t</shape>\n\t</item>\n!4\n</layer-list>\n!0',Z=androme.lib.base.NodeList,K=androme.lib.enumeration,J=androme.lib.util,$=androme.lib.dom,q=androme.lib.xml,Q=androme.lib.color,tt=androme.lib.base.Resource,et={background:'android:background="@drawable/{0}"',backgroundColor:'android:background="@color/{0}"'},nt={fontFamily:'android:fontFamily="{0}"',fontStyle:'android:textStyle="{0}"',fontWeight:'android:fontWeight="{0}"',fontSize:'android:textSize="{0}"',color:'android:textColor="@color/{0}"',backgroundColor:'android:background="@color/{0}"'},it={text:'android:text="{0}"'},rt={entries:'android:entries="@array/{0}"'},at={src:'android:src="@drawable/{0}"'},ot=function(n){function r(){var t;return e(this,r),(t=s(this,o(r).apply(this,arguments)))._tagStyle={},t._tagCount={},t}return a(r,androme.lib.base.Resource),i(r,[{key:"reset",value:function(){d(o(r.prototype),"reset",this).call(this),this.file.reset(),this._tagStyle={},this._tagCount={}}},{key:"finalize",value:function(t){var e={};for(var n in this.processFontStyle(t),t.cache.each(function(t){var n=t.renderChildren.filter(function(t){return t.visible&&t.auto});n.length>1&&function(){for(var i=new Map,r="",a=!0,o=function(t){var e=!1;if(n[t].combine("_","android").some(function(n){if(n.startsWith("style=")){if(0===t)r=n;else if(""===r||n!==r)return a=!1,!0;e=!0}else i.has(n)||i.set(n,0),i.set(n,i.get(n)+1);return!1}),!a||""!==r&&!e)return a=!1,"break"},l=0;l<n.length;l++){if("break"===o(l))break}if(a){var s=!0,d=!1,h=void 0;try{for(var u,f=i.entries()[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var g=c(u.value,2);g[1]!==n.length&&i.delete(g[0])}}catch(t){d=!0,h=t}finally{try{s||null==f.return||f.return()}finally{if(d)throw h}}if(i.size>1){""!==r&&(r=J.trimString(r.substring(r.indexOf("/")+1),'"'));var p=[],m=!0,v=!1,y=void 0;try{for(var b,A=function(){var t=b.value.match(/(\w+):(\w+)="(.*?)"/);t&&(n.forEach(function(e){return e.delete(t[1],t[2])}),p.push(t[0]))},T=i.keys()[Symbol.iterator]();!(m=(b=T.next()).done);m=!0)A()}catch(t){v=!0,y=t}finally{try{m||null==T.return||T.return()}finally{if(v)throw y}}p.sort();var _="";for(var N in e)if(e[N].join(";")===p.join(";")){_=N;break}""!==_&&""!==r&&_.startsWith("".concat(r,"."))||(_=(""!==r?"".concat(r,"."):"")+J.capitalize(t.nodeId),e[_]=p),n.forEach(function(t){return t.attr("_","style","@style/".concat(_))})}}}()}),e)tt.STORED.styles.set(n,{attributes:e[n].join(";")})}},{key:"setBoxSpacing",value:function(){var t=this;d(o(r.prototype),"setBoxSpacing",this).call(this),this.cache.elements.forEach(function(e){var n=$.getElementCache(e.element,"boxSpacing");n&&!e.hasBit("excludeResource",K.NODE_RESOURCE.BOX_SPACING)&&(n.marginLeft!==n.marginRight||!e.alignParent("left",t.settings)||!e.alignParent("right",t.settings)||e.blockWidth||"relative"===e.position&&e.alignNegative||(e.modifyBox(K.BOX_STANDARD.MARGIN_LEFT,null),e.modifyBox(K.BOX_STANDARD.MARGIN_RIGHT,null)),"auto"===e.css("marginLeft")&&e.modifyBox(K.BOX_STANDARD.MARGIN_LEFT,null),"auto"===e.css("marginRight")&&e.modifyBox(K.BOX_STANDARD.MARGIN_RIGHT,null))})}},{key:"setBoxStyle",value:function(){var e=this;d(o(r.prototype),"setBoxStyle",this).call(this),this.cache.elements.forEach(function(n){var i=$.getElementCache(n.element,"boxStyle");if(i&&!n.hasBit("excludeResource",K.NODE_RESOURCE.BOX_STYLE)){Array.isArray(i.backgroundColor)&&i.backgroundColor.length>0&&(i.backgroundColor=r.addColor(i.backgroundColor[0],i.backgroundColor[2]));for(var a=i.backgroundImage.split(",").map(function(t){return t.trim()}),o=i.backgroundRepeat.split(",").map(function(t){return t.trim()}),l=i.backgroundPositionX.split(",").map(function(t){return t.trim()}),s=i.backgroundPositionY.split(",").map(function(t){return t.trim()}),d=[],h=[],u=0;u<a.length;u++)if(""!==a[u]&&"none"!==a[u]){var f=e.imageDimensions.get($.cssResolveUrl(a[u]));d.push(f),a[u]=r.addImageURL(a[u]),h[u]="".concat("initial"===l[u]?"0%":l[u]," ").concat("initial"===s[u]?"0%":s[u])}else a[u]="",o[u]="",h[u]="";a=a.filter(function(t){return""!==t}),o=o.filter(function(t){return""!==t}),h=h.filter(function(t){return""!==t});var g=et,p=n.companion;if(p&&p.htmlElement&&!p.visible&&!$.cssFromParent(p.element,"backgroundColor")){var m=$.getElementCache(p.element,"boxStyle");Array.isArray(m.backgroundColor)&&m.backgroundColor.length>0&&(i.backgroundColor=r.addColor(m.backgroundColor[0],m.backgroundColor[2]))}var v=e.borderVisible(i.borderTop)||e.borderVisible(i.borderRight)||e.borderVisible(i.borderBottom)||e.borderVisible(i.borderLeft)||i.borderRadius.length>0;if(v||a.length>0){var y,b=function(t,e,n,i,a,o){var l=parseInt(e.width),s=Math.floor(l/3),d=l%3,c=s+(2===d?1:0),h=s+(2===d?1:0),u="-".concat(J.formatPX(c+1)),f="-".concat(J.formatPX(c));t[4].push({top:n?"":f,right:i?"":u,bottom:a?"":f,left:o?"":u,5:[{width:J.formatPX(c),borderStyle:r.getBorderStyle(e)}],6:w}),u="-".concat(J.formatPX(l+1)),f="-".concat(J.formatPX(l));var g="".concat(J.formatPX(l-s));t[4].push({top:n?g:u,right:i?g:f,bottom:a?g:f,left:o?g:u,5:[{width:J.formatPX(h),borderStyle:r.getBorderStyle(e)}],6:w})},A=[i.borderTop,i.borderRight,i.borderBottom,i.borderLeft];A.forEach(function(t){Array.isArray(t.color)&&t.color.length>0&&(t.color=r.addColor(t.color[0],t.color[2]))});for(var T=[],_=[],N=null,D="",E=function(t){var l="",s="",u="",f="",g=c(r.parseBackgroundPosition(h[t],n.css("fontSize")),2),p=g[0],m=g[1],y="",b="",A=d[t];switch(o[t]){case"repeat-x":(null==A||A.width<n.bounds.width)&&(u="repeat");break;case"repeat-y":(null==A||A.height<n.bounds.height)&&(f="repeat");break;case"no-repeat":s="disabled";break;case"repeat":(null==A||A.width<n.bounds.width||A.height<n.bounds.height)&&(s="repeat")}if(""===p){switch(h[t]){case"left top":case"0% 0%":l="left|top";break;case"left center":case"0% 50%":l="left|center_vertical";break;case"left bottom":case"0% 100%":l="left|bottom";break;case"right top":case"100% 0%":l="right|top";break;case"right center":case"100% 50%":l="right|center_vertical";break;case"right bottom":case"100% 100%":l="right|bottom";break;case"center top":case"50% 0%":l="center_horizontal|top";break;case"center bottom":case"50% 100%":l="center_horizontal|bottom";break;case"center center":case"50% 50%":l="center";break;default:var N=h[t].trim().split(" ");if(2===N.length){var D=function(t,e){return t+(""!==t?"|":"")+e};N.forEach(function(t,e){if(J.isPercent(t))switch(e){case 0:"0%"===t?l=D(l,"left"):"100%"===t?l=D(l,"right"):p=J.formatPX(n.bounds.width*(J.convertInt(t)/100));break;case 1:"0%"===t?l=D(l,"top"):"100%"===t?l=D(l,"bottom"):m=J.formatPX(n.actualHeight*(J.convertInt(t)/100))}else if(/^[a-z]+$/.test(t))l=D(l,t);else{var i=J.convertPX(t,n.css("fontSize"));"0px"!==i&&(0===e?p=i:m=i),l=D(l,0===e?"left":"top")}})}}if(""!==l&&A&&A.width>0&&A.height>0){if("repeat"===f){var E=n.viewWidth;if(E>0?e.settings.autoSizePaddingAndBorderWidth&&!n.hasBit("excludeResource",K.NODE_RESOURCE.BOX_SPACING)&&(E=n.viewWidth+n.paddingLeft+n.paddingRight):E=n.bounds.width-(n.borderLeftWidth+n.borderRightWidth),A.width<E){var R=J.convertInt(n.android("layout_width"));-1!==l.indexOf("left")?(y=J.formatPX(E-A.width),0===n.viewWidth&&E>R&&n.android("layout_width",J.formatPX(n.bounds.width))):-1!==l.indexOf("right")?(p=J.formatPX(E-A.width),0===n.viewWidth&&E>R&&n.android("layout_width",J.formatPX(n.bounds.width))):"center"!==l&&-1===l.indexOf("center_horizontal")||(y=J.formatPX(Math.floor((E-A.width)/2)),0===n.viewWidth&&E>R&&n.android("layout_width",J.formatPX(n.bounds.width)))}}if("repeat"===u){var I=n.viewHeight;if(I>0?e.settings.autoSizePaddingAndBorderWidth&&!n.hasBit("excludeResource",K.NODE_RESOURCE.BOX_SPACING)&&(I=n.viewHeight+n.paddingTop+n.paddingBottom):I=n.bounds.height-(n.borderTopWidth+n.borderBottomWidth),A.height<I){var O=J.convertInt(n.android("layout_height"));-1!==l.indexOf("top")?(b=J.formatPX(I-A.height),0===n.viewHeight&&I>O&&n.android("layout_height",J.formatPX(n.bounds.height))):-1!==l.indexOf("bottom")?(m=J.formatPX(I-A.height),0===n.viewHeight&&I>O&&n.android("layout_height",J.formatPX(n.bounds.height))):"center"!==l&&-1===l.indexOf("center_vertical")||(b=J.formatPX(Math.floor((I-A.height)/2)),0===n.viewHeight&&I>O&&n.android("layout_height",J.formatPX(n.bounds.height)))}}}}if(i.backgroundSize.length>0&&(J.isPercent(i.backgroundSize[0])||J.isPercent(i.backgroundSize[1]))&&("100%"===i.backgroundSize[0]&&"100%"===i.backgroundSize[1]?(s="",u="",f="",l=""):"100%"===i.backgroundSize[0]?u="":"100%"===i.backgroundSize[1]&&(f=""),i.backgroundSize=[]),n.of(K.NODE_STANDARD.IMAGE,K.NODE_ALIGNMENT.SINGLE)&&1===h.length){n.android("src","@drawable/".concat(a[0])),J.convertInt(p)>0&&n.modifyBox(K.BOX_STANDARD.MARGIN_LEFT,J.convertInt(p)),J.convertInt(m)>0&&n.modifyBox(K.BOX_STANDARD.MARGIN_TOP,J.convertInt(m));var w="";switch(l){case"left|top":case"left|center_vertical":case"left|bottom":w="fitStart";break;case"right|top":case"right|center_vertical":case"right|bottom":w="fitEnd";break;case"center":case"center_horizontal|top":case"center_horizontal|bottom":w="center"}if(n.android("scaleType",w),!v)return{v:void 0};a.length=0}else""!==l||""!==s||""!==u||""!==f?_.push({top:m,right:y,bottom:b,left:p,gravity:l,tileMode:s,tileModeX:u,tileModeY:f,width:"",height:"",src:a[t]}):T.push({top:m,right:y,bottom:b,left:p,gravity:l,tileMode:s,tileModeX:u,tileModeY:f,width:i.backgroundSize.length>0?i.backgroundSize[0]:"",height:i.backgroundSize.length>0?i.backgroundSize[1]:"",src:a[t]})},R=0;R<a.length;R++){var I=E(R);if("object"===t(I))return I.v}_.sort(function(t,e){return"repeat"!==t.tileModeX&&"repeat"!==t.tileModeY&&"repeat"!==t.tileMode?1:"repeat"!==e.tileModeX&&"repeat"!==e.tileModeY&&"repeat"!==e.tileMode?-1:"repeat"===t.tileMode?-1:"repeat"===e.tileMode?1:"repeat"===e.tileModeX||"repeat"===e.tileModeY?1:-1});var O=r.getShapeAttribute(i,"backgroundColor"),w=r.getShapeAttribute(i,"radius");if(i.border&&e.borderVisible(i.border)&&!(parseInt(i.border.width)>1&&("groove"===i.border.style||"ridge"===i.border.style)||parseInt(i.border.width)>2&&"double"===i.border.style))0!==a.length||!1!==w&&!w[0].radius?(N=q.parseTemplate(Y),y={0:[{1:O,2:T.length>0&&T,3:_.length>0&&_,4:[{5:r.getShapeAttribute(i,"stroke"),6:w}],7:!1}]}):(N=q.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">\n!1\n\t<stroke android:width="{&width}" {borderStyle} />\n!1\n!2\n\t<solid android:color="@color/{&color}" />\n!2\n!3\n\t<corners android:radius="{&radius}" />\n!3\n</shape>\n!0'),y={0:[{1:r.getShapeAttribute(i,"stroke"),2:O,3:w}]});else{N=q.parseTemplate(Y);var S=q.getTemplateLevel(y={0:[{1:O,2:T.length>0&&T,3:_.length>0&&_,4:[],7:[]}]},"0"),x=A.filter(function(t){return e.borderVisible(t)}),L=new Set(x.map(function(t){return t.width})),B=new Set(x.map(function(t){return r.getBorderStyle(t)})),P=x[0];if(1===L.size&&1===B.size&&"groove"!==P.style&&"ridge"!==P.style){var k=parseInt(P.width);if(k>2&&"double"===P.style)b(S,P,e.borderVisible(i.borderTop),e.borderVisible(i.borderRight),e.borderVisible(i.borderBottom),e.borderVisible(i.borderLeft));else{var C="-".concat(J.formatPX(k+1)),M="-".concat(J.formatPX(k));S[4].push({top:e.borderVisible(i.borderTop)?"":C,right:e.borderVisible(i.borderRight)?"":M,bottom:e.borderVisible(i.borderBottom)?"":M,left:e.borderVisible(i.borderLeft)?"":C,5:r.getShapeAttribute({border:x[0]},"stroke"),6:w})}}else for(var X=0;X<A.length;X++){var H=A[X];if(e.borderVisible(H)){var G=parseInt(H.width);if(G>2&&"double"===H.style)b(S,H,0===X,1===X,2===X,3===X);else{var W=G>1&&("groove"===H.style||"ridge"===H.style),z=W?Math.ceil(G/2):G,V="-".concat(J.formatPX(z+1)),F="-".concat(J.formatPX(z));S[4].push({top:0===X?"":V,right:1===X?"":F,bottom:2===X?"":F,left:3===X?"":V,5:r.getShapeAttribute({border:H},"stroke",X,W),6:w}),W&&(V="-".concat(J.formatPX(G+1)),F="-".concat(J.formatPX(G)),S[7].push({top:0===X?"":V,right:1===X?"":F,bottom:2===X?"":F,left:3===X?"":V,8:r.getShapeAttribute({border:H},"stroke",X,!0,!0)}))}}}}if(N){var U=q.createTemplate(N,y);""===(D=r.getStoredDrawable(U))&&(D="".concat(n.nodeName.toLowerCase(),"_").concat(n.nodeId),tt.STORED.drawables.set(D,U))}if(n.formatted(J.formatString(g.background,D),0===n.renderExtension.size),a.length>0&&(n.data("RESOURCE","backgroundImage",!0),e.settings.autoSizeBackgroundImage&&!n.documentRoot&&!n.imageOrSvgElement&&"TABLE"!==n.renderParent.tagName&&!n.hasBit("excludeProcedure",K.NODE_PROCEDURE.AUTOFIT))){var j={width:0,height:0};if(d.forEach(function(t){t&&(j.width=Math.max(j.width,t.width),j.height=Math.max(j.height,t.height))}),0===j.width)for(var Z=n;Z&&!Z.documentBody&&(Z.hasWidth&&(j.width=Z.bounds.width),Z.hasHeight&&(j.height=Z.bounds.height),Z.pageflow&&!(j.width>0&&j.height>0));)Z=Z.documentParent;if(!n.has("width",K.CSS_STANDARD.UNIT)){var Q=n.bounds.width+(n.is(K.NODE_STANDARD.LINE)?0:n.borderLeftWidth+n.borderRightWidth);(0===j.width||Q>0&&Q<j.width)&&n.css("width",J.formatPX(Q))}if(!n.has("height",K.CSS_STANDARD.UNIT)){var nt=n.actualHeight+(n.is(K.NODE_STANDARD.LINE)?0:n.borderTopWidth+n.borderBottomWidth);(0===j.height||nt>0&&nt<j.height)&&(n.css("height",J.formatPX(nt)),n.marginTop<0&&n.modifyBox(K.BOX_STANDARD.MARGIN_TOP,null),n.marginBottom<0&&n.modifyBox(K.BOX_STANDARD.MARGIN_BOTTOM,null))}}}else!$.getElementCache(n.element,"fontStyle")&&J.isString(i.backgroundColor)&&n.formatted(J.formatString(g.backgroundColor,i.backgroundColor),0===n.renderExtension.size)}})}},{key:"setFontStyle",value:function(){var t=this;d(o(r.prototype),"setFontStyle",this).call(this);var e={};this.cache.visible.forEach(function(t){if(!t.hasBit("excludeResource",K.NODE_RESOURCE.FONT_STYLE)){$.getElementCache(t.element,"fontStyle")&&(null==e[t.nodeName]&&(e[t.nodeName]=[]),e[t.nodeName].push(t));var n=t.css("textShadow");"none"!==n&&[/^(rgb(?:a)?\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}(?:, [0-9\.]+)?\)) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2})$/,/^([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2}) ([0-9\.]+[a-z]{2}) (.+)$/].some(function(e,i){var a=n.match(e);if(a){var o=Q.parseRGBA(a[0===i?1:4]);return o.length>0&&t.android("shadowColor","@color/".concat(r.addColor(o[0],o[2]))),t.android("shadowDx",""+J.convertInt(a[0===i?2:1])),t.android("shadowDy",""+J.convertInt(a[0===i?3:2])),t.android("shadowRadius",""+J.convertInt(a[0===i?4:3])),!0}return!1})}});var n=function(n){var i=[],a=new Z(e[n]);a.each(function(e){var n=!1,a=e.id,o=e.companion;!o||o.visible||!o.textElement&&"LABEL"!==o.tagName||(e=o);var l=Object.assign({},$.getElementCache(e.element,"fontStyle"));if(Array.isArray(l.backgroundColor)&&l.backgroundColor.length>0&&(l.backgroundColor=r.addColor(l.backgroundColor[0],l.backgroundColor[2])),l.fontFamily){var s=l.fontFamily.split(",")[0].replace(/"/g,"").toLowerCase().trim(),d="",c="";if(Array.isArray(l.color)&&l.color.length>0&&(l.color=r.addColor(l.color[0],l.color[2])),t.settings.fontAliasResourceValue&&N[s]&&(s=N[s]),T[s]&&t.settings.targetAPI>=T[s]||t.settings.fontAliasResourceValue&&_[s]&&t.settings.targetAPI>=T[_[s]]?(n=!0,l.fontFamily=s,"normal"===l.fontStyle&&delete l.fontStyle,"400"===l.fontWeight&&delete l.fontWeight):(s=J.convertWord(s),l.fontFamily="@font/".concat(s+("normal"!==l.fontStyle?"_".concat(l.fontStyle):"")+("400"!==l.fontWeight?"_".concat(D[l.fontWeight]||l.fontWeight):"")),d=l.fontStyle,c=l.fontWeight,delete l.fontStyle,delete l.fontWeight),!n){var h=tt.STORED.fonts.get(s)||{};h["".concat(d,"-").concat(c)]=!0,tt.STORED.fonts.set(s,h)}}for(var u=nt,f=Object.keys(u),g=0;g<f.length;g++){null==i[g]&&(i[g]={});var p=l[f[g]];if(J.hasValue(p)&&e.supported("android",f[g])){var m=J.formatString(u[f[g]],p);null==i[g][m]&&(i[g][m]=[]),i[g][m].push(a)}}});var o=t._tagStyle[n];if(o){for(var l=0;l<o.length;l++)for(var s in o[l]){var d;if(i[l][s])(d=i[l][s]).push.apply(d,h(o[l][s]));else i[l][s]=o[l][s]}t._tagCount[n]+=a.visible.length}else t._tagCount[n]=a.visible.length;t._tagStyle[n]=i};for(var i in e)n(i)}},{key:"setImageSource",value:function(){d(o(r.prototype),"setImageSource",this).call(this),this.cache.visible.forEach(function(t){var e="";if(t.svgElement){var n=$.getElementCache(t.element,"imageSource");if(n){var i={0:[{width:J.formatPX(n.width),height:J.formatPX(n.height),viewportWidth:n.viewBoxWidth>0&&""+n.viewBoxWidth,viewportHeight:n.viewBoxHeight>0&&""+n.viewBoxHeight,alpha:n.opacity<1&&n.opacity,1:[]}]},a=q.getTemplateLevel(i,"0");n.children.forEach(function(t){var e={name:t.name,2:[],3:[]};t.nestedSVG?(t.x&&0!==t.x&&(e.translateX=""+t.x),t.y&&0!==t.y&&(e.translateY=""+t.y)):(1!==t.scaleX&&(e.scaleX=""+t.scaleX),1!==t.scaleY&&(e.scaleY=""+t.scaleY),0!==t.rotation&&(e.rotation=""+t.rotation),1!==t.skewX&&(e.pivotX=""+t.skewX),1!==t.skewY&&(e.pivotY=""+t.skewY),0!==t.translateX&&(e.translateX=""+t.translateX),0!==t.translateY&&(e.translateY=""+t.translateY)),t.children.forEach(function(t){t.clipPath?e[2].push({name:t.name,d:t.d}):e[3].push(t)}),a[1].push(e)});var o=q.createTemplate(q.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<vector xmlns:android="http://schemas.android.com/apk/res/android" android:width="{width}" android:height="{height}" android:viewportWidth="{@viewportWidth}" android:viewportHeight="{@viewportHeight}" android:alpha="{@alpha}">\n!1\n\t<group android:name="{@name}" android:rotation="{@rotation}" android:pivotX="{@pivotX}" android:pivotY="{@pivotY}" android:scaleX="{@scaleX}" android:scaleY="{@scaleY}" android:translateX="{@translateX}" android:translateY="{@translateY}">\n!2\n\t\t<clip-path\n\t\t\tandroid:name="{@name}"\n\t\t\tandroid:pathData="{d}" />\n!2\n!3\n\t\t<path\n\t\t\tandroid:name="{@name}" android:fillColor="{@fillColor}" android:fillAlpha="{@fillAlpha}" android:strokeColor="{@strokeColor}" android:strokeWidth="{@strokeWidth}" android:strokeAlpha="{@strokeAlpha}" android:strokeLineCap="{@strokeLineCap}" android:strokeLineJoin="{@strokeLineJoin}" android:strokeMiterLimit="{@strokeMiterLimit}"\n\t\t\tandroid:pathData="{d}" />\n!3\n\t</group>\n!1\n</vector>\n!0'),i);""===(e=r.getStoredDrawable(o))&&(e="".concat(t.nodeName.toLowerCase(),"_").concat(t.nodeId),tt.STORED.drawables.set(e,o))}else if((t.imageElement||"INPUT"===t.tagName&&"image"===t.element.type)&&!t.hasBit("excludeResource",K.NODE_RESOURCE.IMAGE_SOURCE)){var l=t.element;e=t.imageElement?r.addImageSrcSet(l):r.addImage({mdpi:l.src})}if(""!==e)t.formatted(J.formatString(at.src,e),0===t.renderExtension.size),$.setElementCache(t.element,"imageSource",e)}})}},{key:"setValueString",value:function(){var t=this;d(o(r.prototype),"setValueString",this).call(this),this.cache.visible.forEach(function(e){var n=$.getElementCache(e.element,"valueString");if(n){if(e.renderParent.is(K.NODE_STANDARD.RELATIVE)&&e.alignParent("left",t.settings)&&!$.cssParent(e.element,"whiteSpace","pre","pre-wrap")){for(var i=e.textContent,a=0,o=0;o<i.length;o++){switch(i.charCodeAt(o)){case 32:continue;case 160:a++;continue}break}0===a&&(n.value=n.value.replace(/^(\s|&#160;)+/,""))}if(e.htmlElement){switch(e.css("fontVariant")){case"small-caps":n.value=n.value.toUpperCase()}var l=e.css("textDecoration").match(/(underline|line-through)/);if(l)switch(l[0]){case"underline":n.value="<u>".concat(n.value,"</u>");break;case"line-through":n.value="<strike>".concat(n.value,"</strike>")}}var s=r.addString(n.value,n.name,t.settings);if(""!==s){var d=it;e.toInt("textIndent")+e.bounds.width>0&&e.formatted(J.formatString(d.text,isNaN(parseInt(s))||""+parseInt(s)!==s?"@string/".concat(s):s),0===e.renderExtension.size)}}})}},{key:"setOptionArray",value:function(){var t=this;d(o(r.prototype),"setOptionArray",this).call(this),this.cache.visible.forEach(function(e){var n=$.getElementCache(e.element,"optionArray");if(n){var i=rt,a=[];n.numberArray&&(t.settings.numberResourceValue?n.stringArray=n.numberArray:a=n.numberArray),n.stringArray&&(a=n.stringArray.map(function(e){var n=r.addString(e,"",t.settings);return""!==n?"@string/".concat(n):""}).filter(function(t){return t}));var o=a.join("-"),l="",s=!0,d=!1,h=void 0;try{for(var u,f=tt.STORED.arrays.entries()[Symbol.iterator]();!(s=(u=f.next()).done);s=!0){var g=c(u.value,2),p=g[0];if(o===g[1].join("-")){l=p;break}}}catch(t){d=!0,h=t}finally{try{s||null==f.return||f.return()}finally{if(d)throw h}}""===l&&tt.STORED.arrays.set(l="".concat(e.nodeId,"_array"),a),e.formatted(J.formatString(i.entries,l),0===e.renderExtension.size)}})}},{key:"addTheme",value:function(t,e,n){var i=q.parseTemplate(t);if(n.item){var a=q.getTemplateLevel(e,"0");for(var o in n.item){var l=n.item[o],s=Q.parseHex(l);""!==s&&(l="@color/".concat(r.addColor(s))),a[1].push({name:o,value:l})}}var d=q.createTemplate(i,e);this.addFile(n.output.path,n.output.file,d)}},{key:"processFontStyle",value:function(t){var e=this,n={},i={},a={},o={},l=new Set;for(var s in this._tagStyle){n[s]={},i[s]={};var d=this._tagCount[s],c=this._tagStyle[s].filter(function(t){return Object.keys(t).length>0}).sort(function(t,e){var n=0,i=0,r=0,a=0;for(var o in t)n=Math.max(t[o].length,n),r+=t[o].length;for(var l in e)e[l]&&(i=Math.max(e[l].length,i),a+=e[l].length);return n!==i?n>i?-1:1:r>=a?-1:1});do{if(1===c.length){for(var u in c[0]){var f=c[0][u];1===f.length?i[s][u]=f:f.length>1&&(n[s][u]=f)}c.length=0}else{for(var g={},p={},m=function(t){if(!c[t])return"continue";var e={},i={},a=new Set;for(var o in c[t]){var l=c[t][o],u=!1;if(l&&0!==l.length&&(l.length===d?(g[o]=l.slice(),c[t]={},u=!0):1===l.length&&(p[o]=l.slice(),c[t][o]=[],u=!0),!u)){for(var f={},m=!1,v=0;v<c.length;v++)if(t!==v&&c[v])for(var y in c[v]){var b=c[v][y];if(b.length>0){var A=!0,T=!1,_=void 0;try{for(var N,D=l[Symbol.iterator]();!(A=(N=D.next()).done);A=!0){var E=N.value;b.includes(E)&&(null==f[y]&&(f[y]=[]),f[y].push(E))}}catch(t){T=!0,_=t}finally{try{A||null==D.return||D.return()}finally{if(T)throw _}}}}for(var R in f)f[R].length>1&&(e[[o,R].sort().join(";")]=f[R],m=!0);m||(e[o]=l)}}for(var I in e)for(var O in e)if(I!==O&&e[I].join("")===e[O].join("")){var w=e[I].join(",");i[w]=i[w]?new Set(h(i[w]).concat(h(O.split(";")))):new Set(h(I.split(";")).concat(h(O.split(";")))),a.add(I).add(O)}for(var S in a.forEach(function(t){return delete e[t]}),e)r.deleteStyleAttribute(c,S,e[S]),n[s][S]=e[S];for(var x in i){var L=Array.from(i[x]).sort().join(";"),B=x.split(",").map(function(t){return parseInt(t)});r.deleteStyleAttribute(c,L,B),n[s][L]=B}},v=0;v<c.length;v++)m(v);var y=Object.keys(g);for(var b in y.length>0&&(y.length>1||g[y[0]].length>1?n[s][y.join(";")]=g[y[0]]:Object.assign(p,g)),p)i[s][b]=p[b];for(v=0;v<c.length;v++)c[v]&&0===Object.keys(c[v]).length&&delete c[v];c=c.filter(function(t){if(t)for(var e in t)if(t[e]&&t[e].length>0)return!0;return!1})}}while(c.length>0)}var A=function(t){var e=n[t],i=[];for(var r in e)i.push({name:"",attributes:r,ids:e[r]});i.sort(function(t,e){var n=[t.ids.length,e.ids.length],i=n[0],r=n[1];if(i===r){var a=[t.attributes.split(";").length,e.attributes.split(";").length];i=a[0],r=a[1]}return i>=r?-1:1}),i.forEach(function(e,n){return e.name=J.capitalize(t)+(n>0?"_".concat(n):"")}),a[t]=i};for(var T in n)A(T);for(var T in a){var _=!0,N=!1,D=void 0;try{for(var E,R=a[T][Symbol.iterator]();!(_=(E=R.next()).done);_=!0){var I=E.value,O=!0,w=!1,S=void 0;try{for(var x,L=I.ids[Symbol.iterator]();!(O=(x=L.next()).done);O=!0){var B=x.value;null==o[B]&&(o[B]={styles:[],attributes:[]}),o[B].styles.push(I.name)}}catch(t){w=!0,S=t}finally{try{O||null==L.return||L.return()}finally{if(w)throw S}}}}catch(t){N=!0,D=t}finally{try{_||null==R.return||R.return()}finally{if(N)throw D}}var P=i[T];if(P)for(var C in P){var M=!0,X=!1,H=void 0;try{for(var G,W=P[C][Symbol.iterator]();!(M=(G=W.next()).done);M=!0){var z=G.value;null==o[z]&&(o[z]={styles:[],attributes:[]}),o[z].attributes.push(C)}}catch(t){X=!0,H=t}finally{try{M||null==W.return||W.return()}finally{if(X)throw H}}}}var V=function(n){var i=t.cache.find("id",parseInt(n));if(i){var r=o[n].styles,a=o[n].attributes;r.length>0&&(l.add(r.join(".")),i.attr("_","style","@style/".concat(r.pop()))),a.length>0&&a.sort().forEach(function(t){return i.formatted(k(t,e.settings,!0),!1)})}};for(var F in o)V(F);var U=!0,j=!1,Y=void 0;try{for(var Z,K=function(){var t="";Z.value.split(".").forEach(function(e){var n=e.match(/^(\w*?)(?:_([0-9]+))?$/);if(n){var i=a[n[1].toUpperCase()][null==n[2]?0:parseInt(n[2])];tt.STORED.styles.set(e,{parent:t,attributes:i.attributes}),t=e}})},$=l[Symbol.iterator]();!(U=(Z=$.next()).done);U=!0)K()}catch(t){j=!0,Y=t}finally{try{U||null==$.return||$.return()}finally{if(j)throw Y}}}}],[{key:"getStored",value:function(t){return tt.STORED[t]}},{key:"formatOptions",value:function(e,n){for(var i in e){var a=e[i];if("object"===t(a))for(var o in a)if(null!=a[o]){var l=""+a[o];switch(i){case"android":switch(o){case"text":if(!l.startsWith("@string/")&&""!==(l=r.addString(l,"",n))){a[o]="@string/".concat(l);continue}break;case"src":if(/^\w+:\/\//.test(l)&&""!==(l=r.addImage({mdpi:l}))){a[o]="@drawable/".concat(l);continue}}}var s=Q.parseHex(l);""!==s&&(a[o]="@color/".concat(r.addColor(s)))}}return e}},{key:"addString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(arguments.length>2?arguments[2]:void 0).numberResourceValue,i=void 0!==n&&n;if(""!==t){""===e&&(e=t);var r=J.isNumber(t);if(i||!r){var a=!0,o=!1,l=void 0;try{for(var s,d=tt.STORED.strings.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var h=c(s.value,2);if(h[1]===t)return h[0]}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}e=e.trim().toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").split("_").slice(0,4).join("_").replace(/_+$/g,""),r||/^[0-9]/.test(e)||R.includes(e)?e="__".concat(e):""===e&&(e="__symbol".concat(Math.ceil(1e5*Math.random()))),tt.STORED.strings.has(e)&&(e=x("strings","".concat(e,"_1"))),tt.STORED.strings.set(e,t)}return e}return""}},{key:"addImageSrcSet",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={},i=t.srcset.trim();if(""!==i){var a=t.src.substring(0,t.src.lastIndexOf("/")+1);i.split(",").forEach(function(t){var e=/^(.*?)\s*([0-9]+\.?[0-9]*x)?$/.exec(t.trim());if(e){null==e[2]&&(e[2]="1x");var i=a+J.lastIndexOf(e[1]);switch(e[2]){case"0.75x":n.ldpi=i;break;case"1x":n.mdpi=i;break;case"1.5x":n.hdpi=i;break;case"2x":n.xhdpi=i;break;case"3x":n.xxhdpi=i;break;case"4x":n.xxxhdpi=i}}})}return null==n.mdpi&&(n.mdpi=t.src),r.addImage(n,e)}},{key:"addImage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";if(t&&t.mdpi){n=J.lastIndexOf(t.mdpi);var i=J.lastIndexOf(n,".").toLowerCase();switch(n=n.replace(/.\w+$/,"").replace(/-/g,"_"),i){case"bmp":case"cur":case"gif":case"ico":case"jpg":case"png":n=tt.insertStoredAsset("images",e+n,t);break;default:n=""}}return n}},{key:"addImageURL",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=$.cssResolveUrl(t);return""!==n?r.addImage({mdpi:n},e):""}},{key:"addColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";t=t.toUpperCase().trim();var n=parseFloat(e)<1?"#".concat(parseFloat(e).toFixed(2).substring(2)+t.substring(1)):t;if(""!==t){var i=tt.STORED.colors.get(n)||"";if(""===i){var r=Q.getColorNearest(t);r&&(r.name=J.camelToLowerCase(r.name),i=t===r.hex&&t===n?r.name:x("color","".concat(r.name,"_1")),tt.STORED.colors.set(n,i))}return i}return""}},{key:"getColor",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=tt.STORED.colors.entries()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=c(r.value,2);if(o[1]===t)return o[0]}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return""}},{key:"parseBackgroundPosition",value:function(t,e){var n=/([0-9]+[a-z]{2}) ([0-9]+[a-z]{2})/.exec(t);return n?[J.convertPX(n[1],e),J.convertPX(n[2],e)]:["",""]}},{key:"deleteStyleAttribute",value:function(t,e,n){e.split(";").forEach(function(e){for(var i=0;i<t.length;i++)if(t[i]){var r=-1,a="";for(var o in t[i])if(o===e){r=i,a=o,i=t.length;break}if(-1!==r){t[r][a]=t[r][a].filter(function(t){return!n.includes(t)}),0===t[r][a].length&&delete t[r][a];break}}})}},{key:"getStoredDrawable",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=tt.STORED.drawables.entries()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=c(r.value,2);if(o[1]===t)return o[0]}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return""}},{key:"getShapeAttribute",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];switch(e){case"stroke":if(t.border&&"0px"!==t.border.width){if(!i||a)return[{width:t.border.width,borderStyle:r.getBorderStyle(t.border,a?n:-1)}];if(i)return[{width:J.formatPX(Math.ceil(parseInt(t.border.width)/2)),borderStyle:r.getBorderStyle(t.border,n,!0)}]}return!1;case"backgroundColor":return 0!==t.backgroundColor.length&&""!==t.backgroundColor&&[{color:t.backgroundColor}];case"radius":if(1===t.borderRadius.length){if("0px"!==t.borderRadius[0])return[{radius:t.borderRadius[0]}]}else if(t.borderRadius.length>1){var o={};return t.borderRadius.forEach(function(t,e){return o["".concat(["topLeft","topRight","bottomRight","bottomLeft"][e],"Radius")]=t}),[o]}return!1}return!1}},{key:"getBorderStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={solid:'android:color="@color/'.concat(t.color,'"'),groove:"",ridge:""};Object.assign(i,{double:i.solid,inset:i.solid,outset:i.solid,dotted:"".concat(i.solid,' android:dashWidth="3px" android:dashGap="1px"'),dashed:"".concat(i.solid,' android:dashWidth="1px" android:dashGap="1px"')});var a="groove"===t.style;if(parseInt(t.width)>1&&(a||"ridge"===t.style)){var o=J.isString(t.color)?t.color:"",l=r.getColor(o);if(""!==l){var s="1";9===l.length&&(l="#".concat(l.substring(3)),s="0.".concat(l.substring(1,3)));var d=Q.parseRGBA(Q.reduceToRGB(l,a||"#000000"===l?.3:-.3));d.length>0&&(o=r.addColor(d[0],s))}var c='android:color="@color/'.concat(o,'"');if(a)if(n)switch(e){case 0:case 1:i.groove=c;break;case 2:case 3:i.groove=i.solid}else switch(e){case 0:case 1:i.groove=i.solid;break;case 2:case 3:i.groove=c}else if(n)switch(e){case 0:case 1:i.ridge=i.solid;break;case 2:case 3:i.ridge=c}else switch(e){case 0:case 1:i.ridge=c;break;case 2:case 3:i.ridge=i.solid}}return i[t.style]||i.solid}}]),r}(),lt=androme.lib.base.NodeList,st=androme.lib.enumeration,dt=androme.lib.util,ct=androme.lib.dom,ht=androme.lib.xml,ut={top:"layout_alignParentTop",bottom:"layout_alignParentBottom"},ft={top:"layout_alignTop",bottom:"layout_alignBottom",baseline:"layout_alignBaseline",bottomTop:"layout_above",topBottom:"layout_below"},gt={top:"layout_constraintTop_toTopOf",bottom:"layout_constraintBottom_toBottomOf",baseline:"layout_constraintBaseline_toBaselineOf",bottomTop:"layout_constraintBottom_toTopOf",topBottom:"layout_constraintTop_toBottomOf"},pt={leftTop:["left","top"],rightBottom:["right","bottom"],rightLeftBottomTop:["rightLeft","bottomTop"],leftRightTopBottom:["leftRight","topBottom"],widthHeight:["Width","Height"],horizontalVertical:["Horizontal","Vertical"]},mt=function(n){function l(){var t;return e(this,l),(t=s(this,o(l).apply(this,arguments)))._merge={},t}return a(l,androme.lib.base.Controller),i(l,[{key:"initNode",value:function(t){t.api=this.settings.targetAPI}},{key:"finalize",value:function(t){this.setAttributes(t);for(var e=h(t.views).concat(h(t.includes)),n=0;n<e.length;n++){var i=e[n];if(i.content=ht.removePlaceholderAll(i.content).replace(/\n\n/g,"\n"),this.settings.dimensResourceValue){for(var r=i.content,a=ot.getStored("dimens"),o=/\s+\w+:\w+="({%(\w+),(\w+),(-?\w+)})"/g,s=void 0;null!=(s=o.exec(r));){var d=l.getDimensResourceKey(a,"".concat(s[2],"_").concat(M(s[3],this.settings)),s[4]);a.set(d,s[4]),r=r.replace(RegExp(s[1],"g"),"@dimen/".concat(d))}i.content=r}i.content=k(i.content,this.settings),i.content=ht.replaceTab(i.content,this.settings)}}},{key:"reset",value:function(){d(o(l.prototype),"reset",this).call(this),S(),this._merge={}}},{key:"setConstraints",value:function(){var e=this;Object.assign(ut,{left:M("layout_alignParentLeft",this.settings),right:M("layout_alignParentRight",this.settings)}),Object.assign(ft,{left:M("layout_alignLeft",this.settings),right:M("layout_alignRight",this.settings),leftRight:M("layout_toRightOf",this.settings),rightLeft:M("layout_toLeftOf",this.settings)}),Object.assign(gt,{left:M("layout_constraintLeft_toLeftOf",this.settings),right:M("layout_constraintRight_toRightOf",this.settings),leftRight:M("layout_constraintLeft_toRightOf",this.settings),rightLeft:M("layout_constraintRight_toLeftOf",this.settings)});var n,i=ut,r=!1,a=!1;function o(t,e){return r?"parent"===t.app(n[e]):"true"===t.android(i[e])}function s(t,e){return t[r?"app":"android"](n[e])}function d(t){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];t.delete.apply(t,[r?"app":"android"].concat(h(i.map(function(t){return n[t]}))))}function u(t,e,n){if(!t.constraint[n]){for(var i=t;i;){var r=s(i,n===b.HORIZONTAL?"leftRight":"topBottom");if(r){if((i=e.find("nodeId",L(r)))&&i.constraint[n])return!0}else i=null}return!1}return!0}this.cache.visible.forEach(function(f){a=f.is(st.NODE_STANDARD.RELATIVE),r=f.is(st.NODE_STANDARD.CONSTRAINT);var g=f.flex;if(a||r||g.enabled){var p=function(){var t=new lt(f.renderChildren.filter(function(t){return t.auto}),f);if(0===t.length)return{v:void 0};var r=lt.cleared(f.initial.children);if(a){n=ft;var p=[],m=[],v=f.toInt("textIndent"),y="nowrap"===f.css("whiteSpace"),A=f.box.width;if(f.renderParent.overflowX)A=f.viewWidth||A||f.renderParent.toInt("width",0,{map:"initial"});else if(f.renderParent.hasAlign(st.NODE_ALIGNMENT.FLOAT)){var T=Math.min.apply(null,t.list.map(function(t){return t.linear.left}));A=Math.max.apply(null,t.list.map(function(t){return t.linear.right}))-T}else{var _=Math.max.apply(null,f.documentParent.initial.children.filter(function(t){return"left"===t.float&&t.siblingIndex<f.siblingIndex}).map(function(t){return t.linear.right}));t.list.some(function(t){return t.linear.left===_})&&(A=f.box.right-_)}A=Math.ceil(A);var N=0,D=0,E=null,R=null;v<0&&Math.abs(v)<=f.paddingLeft&&(D=Math.abs(v),f.modifyBox(st.BOX_STANDARD.PADDING_LEFT,f.paddingLeft+v),f.modifyBox(st.BOX_STANDARD.PADDING_LEFT,null));for(var I=[],O=dt.hasBit(e.application.userAgent,st.USER_AGENT.EDGE),w=0;w<t.length;w++){var S=t.get(w),x=t.get(w-1),B=S.bounds;if(S.inlineText&&!S.hasWidth){var k=c(ct.getRangeClientRect(S.element),2),C=k[0],X=k[1];C&&(X||C.width<S.box.width)&&(B=C,O&&X&&!/^\s*\n+/.test(S.textContent)&&I.push(S))}var H=i["right"===S.float?"right":"left"],G=n["right"===S.float?"rightLeft":"leftRight"];if(0===w)S.android(H,"true"),!f.inline&&v>0&&S.modifyBox(st.BOX_STANDARD.MARGIN_LEFT,v),(!S.siblingflow||S.floating&&"relative"===S.position||S.multiLine&&v<0)&&(E=S),p[p.length]=[S];else{var W=p[p.length-1],z=ct.getElementsBetweenSiblings(x.baseElement,S.baseElement,!1,!0),V=S instanceof j&&!S.hasAlign(st.NODE_ALIGNMENT.SEGMENTED),F=S.previousSibling(),U=N+S.marginLeft+B.width-(O?S.borderRightWidth:0),Y=!1;if(1===w&&x.textElement&&S.textElement&&(Y=0===z.length&&!/\s+$/.test(x.textContent)&&!/^\s+/.test(S.textContent)),y||Y||["SUP","SUB"].includes(S.tagName)||!("left"!==x.float||S.linear.top>=x.linear.bottom)||!("right"!==S.float&&Math.floor(U)-(S.styleElement&&S.inlineStatic?S.paddingLeft+S.paddingRight:0)>A||S.multiLine&&ct.hasLineBreak(S.element)||x.multiLine&&""!==x.textContent.trim()&&!/^\s*\n+/.test(x.textContent)&&!/\n+\s*$/.test(x.textContent)&&ct.hasLineBreak(x.element)||F&&F.lineBreak||S.preserveWhiteSpace&&/^\n+/.test(S.textContent)||S.blockStatic||V||r.has(S)||I.includes(x)||z.length>0&&z.some(function(t){return ct.isLineBreak(t)})||S.floating&&("left"===S.float&&dt.withinFraction(S.linear.left,f.box.left)||"right"===S.float&&dt.withinFraction(S.linear.right,f.box.right)||S.linear.top>=x.linear.bottom)))1===w&&D>0&&!x.plainText?(S.anchor(H,"true"),S.modifyBox(st.BOX_STANDARD.PADDING_LEFT,D)):S.anchor(G,x.stringId),(Y||U>A)&&l.checkSingleLine(S),R&&S.anchor(n.topBottom,R.stringId),W.push(S);else{R=W.filter(function(t){return!t.floating})[0]||W[0];for(var Z=0;Z<W.length;Z++)W[Z]!==R&&W[Z].linear.bottom>R.linear.bottom&&(!W[Z].floating||W[Z].floating&&R.floating)&&(R=W[Z]);(V||x instanceof j&&w===t.length-1)&&(S.constraint.marginVertical=R.stringId),S.anchor(n.topBottom,R.stringId),E&&S.linear.top<E.bounds.bottom&&!dt.withinRange(S.bounds.top,E.bounds.top,1)&&!dt.withinRange(S.bounds.bottom,E.bounds.bottom,1)?S.anchor(G,E.stringId):(S.anchor(H,"true"),E=null),e.settings.ellipsisOnTextOverflow&&x.linearHorizontal&&l.checkSingleLine(x.children[x.children.length-1],!0),D>0&&(e.settings.ellipsisOnTextOverflow&&1===p.length&&1===p[0].length&&p[0][0].textElement&&l.checkSingleLine(p[0][0],!0),S.modifyBox(st.BOX_STANDARD.PADDING_LEFT,D)),e.adjustBaseline(m),f.alignmentType^=st.NODE_ALIGNMENT.HORIZONTAL,f.alignmentType|=st.NODE_ALIGNMENT.MULTILINE,N=0,m.length=0,p.push([S])}}N+=B.width+S.marginLeft+S.marginRight+(!x||x.floating||x.plainText||x.preserveWhiteSpace||""===x.textContent.trim()||/\s+$/.test(x.textContent)||S.floating||S.plainText||S.preserveWhiteSpace||""===S.textContent.trim()||/^\s+/.test(S.textContent)?0:e.settings.whitespaceHorizontalOffset),S.floating||m.push(S)}if(e.adjustBaseline(m),f.marginTop<0&&"relative"===t.get(0).position&&p[0].forEach(function(t,e){return t.modifyBox(st.BOX_STANDARD.MARGIN_TOP,f.marginTop*(0===e?1:-1),!0)}),f.baseline&&1===p.length&&p[0].forEach(function(t){switch(t.css("verticalAlign")){case"top":t.anchor(i.top,"true");break;case"middle":p[0].forEach(function(e){e.bounds.height<=t.bounds.height&&e.anchor("layout_centerVertical","true")})}}),e.settings.ellipsisOnTextOverflow){var K=!f.ascend().some(function(t){return t.hasWidth});if(f.ascend(!0).some(function(t){return t.is(st.NODE_STANDARD.GRID)})||1!==p.length&&!f.hasAlign(st.NODE_ALIGNMENT.HORIZONTAL))for(var J=0;J<p.length;J++){var $=p[J];if($.length>1){var q=$[$.length-1];q.inlineText&&l.checkSingleLine(q,!1,K)}}else for(var Q=1;Q<t.length;Q++){var tt=t.get(Q);tt.multiLine||tt.floating||tt.alignParent("left",e.settings)||l.checkSingleLine(tt,!1,K)}}}else if(n=gt,f.hasAlign(st.NODE_ALIGNMENT.HORIZONTAL)){var et=function(t,e){return t.bounds.height>=e.bounds.height?-1:1},nt=lt.textBaseline(t.list,e.application.userAgent)[0],it=t.list.filter(function(t){return t.textElement&&t.baseline}).sort(et),rt=t.list.filter(function(t){return t.imageElement&&t.baseline}).sort(et);if(rt.length>0){var at=rt[0];rt.forEach(function(t,e){return e>0&&t.app(n.baseline,at.stringId)}),nt.imageElement||nt.app(n.bottom,at.stringId),rt=rt.filter(function(t){return t!==at})}for(var ot=function(e){var i=t.get(e),r=nt;if(0===e)i.app(n.left,"parent");else{var a=t.get(e-1);i.app(n.leftRight,a.stringId),a.floating||i.floating||(i.constraint.marginHorizontal=a.stringId)}if(rt.includes(i))return"continue";var o=i.css("verticalAlign");switch("baseline"===o&&"TEXTAREA"===i.tagName&&(o="text-bottom"),r&&!o.startsWith("text")&&nt!==i||(it.some(function(t){return t!==i&&(r=t,!0)}),r||t.list.slice().sort(function(t,e){return t.nodeType<=e.nodeType?-1:1}).some(function(t){return t!==i&&(r=t,!0)})),o){case"text-top":r&&i.app(n.top,r.stringId);break;case"top":i.app(n.top,"parent");break;case"middle":l.setAlignParent(i,b.VERTICAL);break;case"baseline":r&&i.app(n.baseline,r.stringId);break;case"text-bottom":r&&i.app(n.bottom,r.stringId);break;case"bottom":i.app(n.bottom,"parent")}},ht=0;ht<t.length;ht++)ot(ht)}else!function(){var i=c(t.partition(function(t){return!t.pageflow||"relative"===t.position&&t.alignNegative}),2),r=i[0],a=i[1],p=f.hasAlign(st.NODE_ALIGNMENT.PERCENT),m=f.toInt("columnCount");if(p)f.android("layout_width","match_parent");else if(0===m){a.each(function(i){var r=i.documentParent;i.autoMarginHorizontal?l.setAlignParent(i,b.HORIZONTAL):((i.linear.left<=r.box.left||dt.withinFraction(i.linear.left,r.box.left))&&i.anchor(n.left,"parent",b.HORIZONTAL),(i.linear.right>=r.box.right||dt.withinFraction(i.linear.right,r.box.right))&&i.anchor(n.right,"parent",r.hasWidth||"right"===i.float||i.autoMarginLeft?b.HORIZONTAL:"")),i.linear.top<=r.box.top||dt.withinFraction(i.linear.top,r.box.top)?i.anchor(n.top,"parent",b.VERTICAL):(i.linear.bottom>=r.box.bottom||dt.withinFraction(i.linear.bottom,r.box.bottom))&&i.anchor(n.bottom,"parent",r.hasHeight?b.VERTICAL:""),a.each(function(r){if(i!==r){var a=r.stringId,l=u(r,t,b.HORIZONTAL)?b.HORIZONTAL:"",s=u(r,t,b.VERTICAL)?b.VERTICAL:"",d=i.intersectY(r.linear),c=i.alignOrigin&&r.alignOrigin;i.hasWidth||i.linear.left!==r.linear.left||i.linear.right!==r.linear.right||(o(i,"right")||i.anchor(n.left,a),o(i,"left")||i.anchor(n.right,a)),(dt.withinFraction(i.linear.left,r.linear.right)||c&&dt.withinRange(i.linear.left,r.linear.right,e.settings.whitespaceHorizontalOffset))&&("right"===i.float&&i.float!==r.float||i.anchor(n.leftRight,a,l,i.withinX(r.linear))),(dt.withinFraction(i.linear.right,r.linear.left)||c&&dt.withinRange(i.linear.right,r.linear.left,e.settings.whitespaceHorizontalOffset))&&i.anchor(n.rightLeft,a,l,i.withinX(r.linear));var h=o(i,"top"),f=o(i,"bottom"),p=!g.enabled&&!i.inlineElement;(dt.withinFraction(i.linear.top,r.linear.bottom)||c&&dt.withinRange(i.linear.top,r.linear.bottom,e.settings.whitespaceVerticalOffset))&&(d||!f||p)&&i.anchor(n.topBottom,a,s,d),(dt.withinFraction(i.linear.bottom,r.linear.top)||c&&dt.withinRange(i.linear.bottom,r.linear.top,e.settings.whitespaceVerticalOffset))&&(d||!h||p)&&i.anchor(n.bottomTop,a,s,d),h||f||(i.linear.top===r.linear.top&&i.anchor(n.top,a,s),i.linear.bottom===r.linear.bottom&&i.anchor(n.bottom,a,s))}})}),a.each(function(e){var i=s(e,"leftRight");i&&(e.constraint.horizontal||(e.constraint.horizontal=g.enabled||u(e,t,b.HORIZONTAL)),e.constraint.marginHorizontal=i);var r=s(e,"topBottom");if(r&&(e.constraint.vertical||(e.constraint.vertical=g.enabled||u(e,t,b.VERTICAL)),e.constraint.marginVertical=r,d(e,"top")),o(e,"left")&&o(e,"right"))if(e.autoMargin)e.autoMarginLeft&&d(e,"left"),e.autoMarginRight&&d(e,"right"),e.autoMarginHorizontal&&(f.hasWidth&&!e.has("width",st.CSS_STANDARD.PERCENT)?e.android("layout_width","match_parent"):e.inlineElement&&!e.hasWidth&&e.android("layout_width","wrap_content"));else if(e.floating)d(e,"right"===e.float?"left":"right");else if(e.inlineElement)if(e.nodeType<=st.NODE_STANDARD.IMAGE)switch(e.css("textAlign")){case"center":break;case"right":case"end":d(e,"left");break;default:d(e,"right")}else d(e,"right");else d(e,"right"),e.android("layout_width","match_parent");if(s(e,"bottomTop")&&d(e,"bottom"),e.plainText||!e.styleElement&&e.renderChildren.some(function(t){return t.textElement})){var a=e.cssParent("textAlign");"right"===a?(e.anchor(n.right,"parent",b.HORIZONTAL),e.constraint.horizontal=!0):"center"===a&&(e.constraint.horizontal=!1,l.setAlignParent(e,b.HORIZONTAL))}});for(var v=0;v<a.length;v++){var y=a.get(v);if(!y.anchored){var A=dt.searchObject(y.get("app"),"*constraint*"),T=!0,_=!1,N=void 0;try{for(var D,E=function(){var t=c(D.value,2),n=t[0],i=t[1];"parent"!==i&&a.list.filter(function(t){return t.anchored}).find(function(t){return t.stringId===i})&&(-1!==dt.indexOf(n,M("Left",e.settings),M("Right",e.settings))&&(y.constraint.horizontal=!0),-1!==dt.indexOf(n,"Top","Bottom","Baseline","above","below")&&(y.constraint.vertical=!0))},R=A[Symbol.iterator]();!(T=(D=R.next()).done);T=!0)E()}catch(t){_=!0,N=t}finally{try{T||null==R.return||R.return()}finally{if(_)throw N}}y.anchored&&(v=-1)}}r.length>0&&r.each(function(t){var e=!1;null!=t.right&&t.toInt("right")>=0&&(t.anchor(n.right,"parent",b.HORIZONTAL),t.toInt("left")>0&&(t.anchor(n.left,"parent"),t.modifyBox(st.BOX_STANDARD.MARGIN_LEFT,t.toInt("left")),e=!0)),e||null==t.left||0!==t.toInt("left")||(t.anchor(n.left,"parent",b.HORIZONTAL),t.toInt("right")>0&&(t.anchor(n.right,"parent"),t.modifyBox(st.BOX_STANDARD.MARGIN_RIGHT,t.toInt("right")))),null!=t.top&&0===t.toInt("top")&&t.anchor(n.top,"parent",b.VERTICAL),null!=t.bottom&&t.toInt("bottom")>=0&&t.anchor(n.bottom,"parent",b.VERTICAL),0!==t.left||0!==t.right||t.floating||t.has("width",st.CSS_STANDARD.PERCENT)||t.android("layout_width","match_parent"),0===t.top&&0===t.bottom&&t.android("layout_height","match_parent")})}if(g.enabled||m>0||!e.settings.constraintChainDisabled&&a.length>1){var I=[],O=[];if(g.enabled)if("nowrap"===g.wrap)switch(g.direction){case"row-reverse":var w=a.clone();w.list.reverse(),I.push(w);break;case"row":I.push(a.clone());break;case"column-reverse":var S=a.clone();S.list.reverse(),O.push(S);break;case"column":O.push(a.clone())}else{var x=function(){for(var t in k)k[t].reverse()},B=a.clone(),k={},C=[];switch(g.direction){case"row-reverse":case"column-reverse":B.list.reverse()}switch(B.each(function(t){var e=t.linear.top;null==k[e]&&(k[e]=[],C.push(e)),k[e].push(t)}),g.wrap){case"wrap":"column-reverse"===g.direction&&x();break;case"wrap-reverse":-1!==g.direction.indexOf("row")?C.reverse():"column"===g.direction&&x()}for(var X=0;X<C.length;X++){I.push(new lt(k[C[X]]))}}else if(m>0)!function(){for(var t=[],n=Math.ceil(a.length/Math.min(m,a.length)),i=0,r=0;i<a.length;i++){var o=a.get(i);i%n==0&&(i>0&&r++,null==t[r]&&(t[r]=[])),t[r].push(o)}for(var l=[],s=dt.convertInt(f.css("columnGap"))||16,d=t.map(function(t){return Math.max.apply(null,t.map(function(t){return t.marginLeft+t.marginRight}))}).reduce(function(t,e){return t+e},0),c=Math.max((d+s*(m-1))/f.box.width/m,.01),h=0;h<t.length;h++){var u=t[h],g=u[0];h>0&&g.android("layout_".concat(M("marginLeft",e.settings)),dt.formatPX(g.marginLeft+s)),l.push(g),u.forEach(function(t){t.hasWidth||(t.android("layout_width","0px"),t.app("layout_constraintWidth_percent",(1/m-c).toFixed(2)))}),O.push(new lt(u))}I.push(new lt(l))}();else{var H=function(t){var e=t.map(function(t){return t.id}).sort().join("-");return!G.has(e)&&null!=G.add(e)},G=new Set,W=a.list.filter(function(t){return!t.constraint.horizontal}),z=a.list.filter(function(t){return!t.constraint.vertical});a.list.some(function(t){var e=[],n=[];return W.includes(t)&&(e.push.apply(e,h(l.partitionChain(t,a,b.HORIZONTAL,!p))),e.length>1&&H(e)&&I.push(new lt(e).sortAsc("linear.left"))),z.includes(t)&&!p&&(n.push.apply(n,h(l.partitionChain(t,a,b.HORIZONTAL,!0))),n.length>1&&H(n)&&O.push(new lt(n).sortAsc("linear.top"))),e.length===a.length||n.length===a.length}),I.sort(function(t,e){return t.length>=e.length?-1:1}),O.sort(function(t,e){return t.length>=e.length?-1:1})}[I,O].forEach(function(i,r){if(i.length>0){var a=0===r?1:0,c=[];i.forEach(function(h,v){if(h.length>0){var y=[pt.horizontalVertical[r],pt.horizontalVertical[a]],A=y[0],T=y[1],_=[pt.leftTop[r],pt.leftTop[a]],N=_[0],D=_[1],E=[pt.rightBottom[r],pt.rightBottom[a]],R=E[0],I=E[1],O=[pt.widthHeight[r],pt.widthHeight[a]],w=O[0],S=O[1],x=A.toLowerCase(),L=T.toLowerCase(),B=w.toLowerCase();if(g.enabled)h.list.some(function(t){return t.flex.order>0})&&h[-1!==g.direction.indexOf("reverse")?"sortDesc":"sortAsc"]("flex.order");else if(!p&&0===m&&h.list.every(function(e){return u(e,t,x)}))return;h.parent=f;for(var P=h.get(0),k=h.get(),C=!1,M=!1,X=-1,H=0===r?["left","leftRight","top",b.VERTICAL,"hasWidth","right","marginHorizontal"]:["top","topBottom","left",b.HORIZONTAL,"hasHeight","bottom","marginVertical"],G=0;G<h.length;G++){var W=h.get(G);if(0===G){if(!o(W,H[0])){C=!0;break}}else if(!s(W,H[1])){C=!0;break}}if(!C){if(h.list.every(function(t){return dt.sameValue(P,t,"linear.".concat(H[2]))}))for(var z=1;z<h.length;z++){var V=h.get(z);V.constraint[H[3]]||V.anchor(n[H[2]],P.stringId,H[3])}g.enabled||0!==f[H[4]]||(d(k,H[5]),k.constraint[H[6]]=s(k,H[1]))}p?(P.anchor(n[N],"parent",x),k.anchor(n[R],"parent",x),f.renderParent.autoMarginHorizontal||P.app("layout_constraint".concat(A,"_bias"),"right"===P.float&&"right"===k.float?"1":"0")):(P.anchor(n[N],"parent",x),k.anchor(n[R],"parent",x));for(var F=function(t){var e=h.get(t),a=h.get(t+1),u=h.get(t-1);if(g.enabled){e.linear[D]===f.box[D]&&e.linear[I]===f.box[I]&&l.setAlignParent(e,L);var y=i[v+1];if(y){var b=y.get(t);b&&e.withinY(b.linear)&&(e.anchor(n.bottomTop,b.stringId),o(e,"bottom")||d(e,"bottom"))}}else if(p){if(0===c.length)e.anchor(n.top,"parent");else{var _,E=c[c.length-1],O=Math.max.apply(null,E.list.map(function(t){return t.linear.bottom}));(_=h.length===E.length?E.get(t):E.list.find(function(t){return t.linear.bottom===O}))&&e.anchor(n.topBottom,_.stringId)}var x=e.css("width");dt.isPercent(x)&&(e.android("layout_width","0px"),e.app("layout_constraint".concat(w,"_percent"),(parseInt(x)/100).toFixed(2))),e.constraint.horizontal=!0,e.constraint.vertical=!0}else m>0&&(0===r&&e.app("layout_constraint".concat(T,"_bias"),"0"),1===r&&t>0&&e.anchor(n.left,P.stringId),e.constraint.horizontal=!0,e.constraint.vertical=!0);if(a&&(e.anchor(n[pt.rightLeftBottomTop[r]],a.stringId),X=Math.max(a.linear[N]-e.linear[R],X)),u&&(e.anchor(n[pt.leftRightTopBottom[r]],u.stringId),e.constraint["margin".concat(A)]=u.stringId),e.constraint["chain".concat(A)]=!0,!e.has(B)||e.has(B,st.CSS_STANDARD.PERCENT)){var k=e.styleMap["min".concat(w)],C=e.styleMap["max".concat(w)];dt.isUnit(k)&&(e.app("layout_constraint".concat(w,"_min"),k),e.android("layout_".concat(B),"0px")),dt.isUnit(C)&&(e.app("layout_constraint".concat(w,"_max"),C),e.android("layout_".concat(B),"0px"))}if(g.enabled){switch(e.app("layout_constraint".concat(A,"_weight"),""+e.flex.grow),0===e["view".concat(w)]&&0===e.flex.grow&&e.flex.shrink<=1?e.android("layout_".concat(B),"wrap_content"):e.flex.grow>0&&e.android("layout_".concat(B),"0px"),0===e.flex.shrink&&e.app("layout_constrained".concat(w),"true"),e.flex.alignSelf){case"flex-start":e.anchor(n[D],"parent",L);break;case"flex-end":e.anchor(n[I],"parent",L);break;case"baseline":h.list.some(function(t){return t!==e&&t.nodeType<=st.NODE_STANDARD.TEXT&&(e.anchor(n.baseline,t.stringId),!0)})&&(d(e,"top","bottom"),h.each(function(t){s(t,"top")===e.stringId&&d(t,"top"),s(t,"bottom")===e.stringId&&d(t,"bottom")}),e.constraint.vertical=!0);break;case"center":case"stretch":"center"!==e.flex.alignSelf&&e.android("layout_".concat(S.toLowerCase()),"0px"),e.constraint[L]=!1,l.setAlignParent(e,L)}if("auto"!==e.flex.basis){var M=dt.convertInt(e.flex.basis);M>0&&(dt.isPercent(e.flex.basis)?e.app("layout_constraint".concat(w,"_percent"),(M/100).toFixed(2)):(e.app("layout_constraint".concat(w,"_min"),dt.formatPX(M)),e.constraint["min".concat(w)]=!0))}}},U=0;U<h.length;U++)F(U);var j="layout_constraint".concat(A,"_chainStyle");if(g.enabled&&"normal"!==g.justifyContent&&0===Math.max.apply(null,h.list.map(function(t){return t.flex.grow}))){switch(g.justifyContent){case"space-between":P.app(j,"spread_inside");break;case"space-evenly":P.app(j,"spread"),h.each(function(t){return t.app("layout_constraint".concat(A,"_weight"),""+(t.flex.grow||1))});break;case"space-around":P.app("layout_constraint".concat(A,"_chainStyle"),"spread_inside"),P.constraint[x]=!1,k.constraint[x]=!1,e.addGuideline(P,x,!0,!1),e.addGuideline(k,x,!0,!0);break;default:var Y=g.justifyContent;if(-1!==g.direction.indexOf("reverse"))switch(g.justifyContent){case"flex-start":Y="flex-end";break;case"flex-end":Y="flex-start"}var Z="0.5";switch(Y){case"flex-start":Z="0";break;case"flex-end":Z="1"}P.app(j,"packed"),P.app("layout_constraint".concat(A,"_bias"),Z)}M=!0}else if(p)P.app(j,"packed");else if(!g.enabled&&m>0)P.app(j,0===r?"spread_inside":"packed"),M=0===r;else{var K=dt.withinFraction(f.box.left,P.linear.left),J=dt.withinFraction(k.linear.right,f.box.right),$=dt.withinFraction(f.box.top,P.linear.top),q=dt.withinFraction(k.linear.bottom,f.box.bottom);if(x===b.HORIZONTAL&&K&&J||x===b.VERTICAL&&$&&q)g.enabled||h.length>2?!g.enabled&&f.inlineElement?(P.app(j,"packed"),P.app("layout_constraint".concat(A,"_bias"),0===r&&"right"===f.float?"1":"0")):(P.app(j,"spread_inside"),M=!0):X>e.settings["constraintChainPacked".concat(A,"Offset")]&&(o(P,N)&&d(P,pt.rightLeftBottomTop[r]),o(k,R)&&d(k,pt.leftRightTopBottom[r]));else if(X<=e.settings["chainPacked".concat(A,"Offset")]||"nowrap"!==f.flex.wrap||x===b.HORIZONTAL&&(K||J)){P.app(j,"packed");var Q="";x===b.HORIZONTAL&&(K?Q="0":J&&(Q="1")),""===Q&&(Q=h["".concat(x,"Bias")]),P.app("layout_constraint".concat(A,"_bias"),Q)}else P.app(j,"spread"),M=!0;g.enabled||((0===r?[[D,I],[I,D]]:[[N,R],[R,N]]).forEach(function(t){h.list.some(function(e){return!dt.sameValue(P,e,"linear.".concat(t[1]))})&&h.list.every(function(e){return dt.sameValue(P,e,"linear.".concat(t[0]))})&&h.each(function(e){return d(e,t[1])})}),h.each(function(t){var e=!0,n=!1,r=void 0;try{for(var a,o=i[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;l.find("id",t.id)&&l.clear()}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}}))}M&&h.each(function(t){delete t.constraint.marginHorizontal,delete t.constraint.marginVertical}),c.push(h)}})}})}a.each(function(e){e.constraint.horizontal=u(e,t,b.HORIZONTAL),e.constraint.vertical=u(e,t,b.VERTICAL)}),g.enabled?"nowrap"!==g.wrap&&["topBottom","bottomTop"].forEach(function(e,i){a.each(function(r){if(o(r,0===i?"bottom":"top")){for(var l=[r],c=!1,h=r;h;){var u=s(h,e);if(u){if((h=t.find("nodeId",L(u)))&&r.withinY(h.linear)&&(l.push(h),c=o(h,0===i?"top":"bottom")))break}else h=null}if(!c)for(var f=function(){var t=l[g];a.list.some(function(e){return t!==e&&e.linear.top===t.linear.top&&e.linear.bottom===t.linear.bottom&&(d(t,"topBottom","bottomTop"),t.app(n.top,e.stringId),t.app(n.bottom,e.stringId),!0)})},g=0;g<l.length;g++)f()}})}):0===m&&function(){var i=function(t,e){d(t,e),y[t.stringId][e]=null};a.each(function(t){[["top","bottom","topBottom"],["bottom","top","bottomTop"]].forEach(function(e){o(t,e[1])&&!s(t,e[2])&&["leftRight","rightLeft"].forEach(function(i){var r=s(t,i);if(r){var o=a.find("stringId",r);o&&s(o,e[2])&&(dt.withinFraction(t.linear[e[0]],o.linear[e[0]])&&t.anchor(n[e[0]],o.stringId),dt.withinFraction(t.linear[e[1]],o.linear[e[1]])&&t.anchor(n[e[1]],o.stringId))}})})});var r=a.list.filter(function(t){return!t.anchored&&(o(t,"top")||o(t,"right")||o(t,"bottom")||o(t,"left"))});0===t.list.filter(function(t){return t.anchored}).length&&0===r.length&&r.push(t.get(0)),r.forEach(function(t){return e.addGuideline(t,"",!1,!1)});var h=c(t.partition(function(t){return t.anchored}),2),g=h[0];h[1].each(function(t){if(dt.withinRange(t.horizontalBias(e.settings),.5,.01)&&dt.withinRange(t.verticalBias(e.settings),.5,.01))l.setAlignParent(t);else if(e.settings.constraintCirclePositionAbsolute&&g.length>0&&!t.constraint.horizontal&&!t.constraint.vertical){var n=g.get(0),i=t.center,r=n.center,a=Math.abs(i.x-r.x),o=Math.abs(i.y-r.y),s=Math.round(Math.atan(Math.min(a,o)/Math.max(a,o))*(180/Math.PI)),d=Math.round(Math.sqrt(Math.pow(a,2)+Math.pow(o,2)));i.y>r.y?i.x>r.x?a>o?s+=90:s=180-s:a>o?s=270-s:s+=180:i.y<r.y?r.x>i.x?a>o?s+=270:s=360-s:a>o&&(s=90-s):s=i.x>r.x?90:270,t.delete("app","layout_constraint*"),t.app("layout_constraintCircle",n.stringId),t.app("layout_constraintCircleRadius",P("".concat(t.nodeName),"constraintcircleradius",dt.formatPX(d),e.settings)),t.app("layout_constraintCircleAngle",""+s),t.constraint.horizontal=!0,t.constraint.vertical=!0}else e.addGuideline(t)});for(var p=null,m=null,v=Math.max.apply(null,t.list.map(function(t){return t.linear.bottom})),y={},A=function(i){var r=t.get(i),a=o(r,"top"),l=o(r,"right"),c=o(r,"bottom"),h=o(r,"left");if(y[r.stringId]={leftRight:s(r,"leftRight"),rightLeft:s(r,"rightLeft"),topBottom:s(r,"topBottom"),bottomTop:s(r,"bottomTop")},(c&&s(r,"topBottom")&&r.hasHeight||a&&c&&!r.has("marginTop",st.CSS_STANDARD.AUTO)&&r.linear.bottom<v)&&(d(r,"bottom"),c=!1),r.pageflow)[[h,l,"rightLeft","leftRight","right","left","Horizontal"],[a,c,"bottomTop","topBottom","bottom","top","Vertical"]].forEach(function(t,n){if(t[0]||t[1]){var i=t[0]&&t[1],a=r;if(!i)do{var l=s(a,t[0]?t[2]:t[3]);if(l){if((a=e.findByStringId(l))&&(t[0]&&o(a,t[4])||t[1]&&o(a,t[5]))){i=!0;break}}else a=null}while(a);if(i&&(f.constraint["layout".concat(t[6])]=!0),!r.constraint["chain".concat(t[6])])if(t[0]&&t[1])r.autoMargin||r.linearVertical||r.android("layout_".concat(0===n?"width":"height"),"match_parent",!1);else if(t[1]&&i){var c=e.findByStringId(s(r,t[3]));c&&0===c.marginBottom&&d(r,t[4])}}}),l?m||(m=!1,m=u(r,t,b.HORIZONTAL)):h&&(r.is(st.NODE_STANDARD.TEXT)&&"center"===r.cssParent("textAlign",!0)&&r.anchor(n.right,"parent"),!r.textElement||r.hasWidth||0!==r.toInt("maxWidth")||!r.multiLine||ct.hasLineBreak(r.element)||t.list.some(function(t){return s(t,"rightLeft")===r.stringId})||r.android("layout_width","match_parent")),c&&(p||(p=!1,p=u(r,t,b.VERTICAL)));else{if(h&&l&&null==r.right&&r.hasWidth)switch(r.cssParent("textAlign",!0)){case"center":case"right":case"end":break;default:d(r,"right")}if(a&&c&&null==r.bottom&&r.hasHeight)switch(r.css("verticalAlign")){case"bottom":case"text-bottom":case"middle":break;default:d(r,"bottom")}h&&l&&!f.hasWidth&&(f.constraint.layoutWidth=!0),a&&c&&!f.hasHeight&&(f.constraint.layoutHeight=!0),l&&r.toInt("right")>0&&r.modifyBox(st.BOX_STANDARD.MARGIN_RIGHT,Math.max(r.toInt("right")-f.paddingRight,0)),c&&r.toInt("bottom")>0&&r.modifyBox(st.BOX_STANDARD.MARGIN_BOTTOM,Math.max(r.toInt("bottom")-f.paddingBottom,0)),l&&c&&f.documentRoot&&(f.hasWidth||(f.constraint.layoutWidth=!1,f.constraint.layoutHorizontal=!1),f.hasHeight||(f.constraint.layoutHeight=!1,f.constraint.layoutVertical=!1))}},T=0;T<t.length;T++)A(T);var _=function(e){var n=function(n){e!==n&&["leftRight","rightLeft","bottomTop","topBottom"].forEach(function(r){if(y[e][r]&&y[e][r]===y[n][r]){var a=t.find("stringId",y[e][r]);a&&[t.find("stringId",e),t.find("stringId",n)].some(function(t,o){if(t){var l=0===o?e:n;switch(r){case"leftRight":case"rightLeft":if((s(t,"left")||s(t,"right"))&&s(a,"rightLeft"===r?"leftRight":"rightLeft")!==l)return i(t,r),!0;break;case"bottomTop":case"topBottom":if((s(t,"top")||s(t,"bottom"))&&s(a,"topBottom"===r?"bottomTop":"topBottom")!==l)return i(t,r),!0}}return!1})}})};for(var r in y)n(r)};for(var N in y)_(N);!1===m&&(f.constraint.layoutWidth=!0),!1===p&&(f.constraint.layoutHeight=!0)}()}();t.each(function(t){if(t.constraint.marginHorizontal){var n=e.findByStringId(t.constraint.marginHorizontal);if(n){var i=t.linear.left-n.actualRight();i>=1&&t.modifyBox(st.BOX_STANDARD.MARGIN_LEFT,i)}}if(t.constraint.marginVertical){var r=e.findByStringId(t.constraint.marginVertical);if(r){var a=t.linear.top-r.linear.bottom;a>=1&&t.modifyBox(st.BOX_STANDARD.MARGIN_TOP,a)}}})}();if("object"===t(p))return p.v}else f.linearHorizontal&&l.adjustLineHeight(f.renderChildren,f)})}},{key:"createGroup",value:function(t,e,n){var i=new j(this.cache.nextId,e,t,n);return n.length>0&&n.forEach(function(t){return t.inherit(i,"data")}),this.cache.append(i),i}},{key:"renderGroup",value:function(t,e,n,i){var r=this,a=dt.hasValue(t.dataset.target)&&!dt.hasValue(t.dataset.include),o="",s="";switch("number"==typeof n&&(n=U.getControlName(n)),n){case v.LINEAR:i={android:{orientation:i&&i.horizontal?b.HORIZONTAL:b.VERTICAL}};break;case v.GRID:i={android:{columnCount:i&&dt.convertInt(i.columnCount)>0?""+i.columnCount:"2",rowCount:i&&dt.convertInt(i.rowCount>0)?""+i.rowCount:""}};break;default:i={}}if(t.setNodeType(n),t.overflowX||t.overflowY){var d=[];t.overflowX&&t.overflowY?d.push(v.SCROLL_HORIZONTAL,v.SCROLL_VERTICAL):(t.overflowX&&d.push(v.SCROLL_HORIZONTAL),t.overflowY&&d.push(v.SCROLL_VERTICAL));var c=null,h=d.map(function(n,i){var a=new U(r.cache.nextId,0===i?t.element:void 0);a.api=r.settings.targetAPI,a.nodeName=t.nodeName,a.documentParent=t.documentParent,a.setNodeType(n),0===i?(a.inherit(t,"initial","base","data","style","styleMap"),a.parent=e,a.render(e)):(a.init(),a.inherit(t,"dimensions"),a.inherit(t,"initial","style","styleMap"),c&&(c.css("overflow","visible scroll"),c.css("overflowX","scroll"),c.css("overflowY","visible"),a.parent=c,a.render(c)),a.css("overflow","scroll visible"),a.css("overflowX","visible"),a.css("overflowY","scroll"),t.has("height",st.CSS_STANDARD.UNIT)&&a.css("height",dt.formatPX(t.toInt("height")+t.paddingTop+t.paddingBottom))),a.resetBox(st.BOX_STANDARD.PADDING);var l=dt.repeat(a.renderDepth);return o+="{<".concat(a.id,"}").concat(l,"<").concat(n,"{@").concat(a.id,"}>\n")+"{:".concat(a.id,"}"),s="".concat(l,"</").concat(n,">\n{>").concat(a.id,"}")+(1===i?"\n":"")+s,c=a,r.cache.append(a),a});2===h.length?(t.android("layout_width","wrap_content"),t.android("layout_height","wrap_content")):t.android(t.overflowX?"layout_width":"layout_height","wrap_content"),t.removeElement(),t.resetBox(st.BOX_STANDARD.MARGIN),t.parent=h[h.length-1],t.render(t.parent)}else t.render(a?t:e);return t.apply(i),l.getEnclosingTag(a||dt.hasValue(e.dataset.target)||0===t.renderDepth&&!t.documentRoot?-1:t.renderDepth,n,t.id,ht.formatPlaceholder(t.id),o,s)}},{key:"renderNode",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=dt.hasValue(t.dataset.target)&&!dt.hasValue(t.dataset.include);switch("number"==typeof n&&(n=U.getControlName(n)),t.setNodeType(n),t.tagName){case"IMG":if(!i){var a=t.element,o=t.has("width",st.CSS_STANDARD.PERCENT),s=t.has("height",st.CSS_STANDARD.PERCENT),d=t.toInt("width"),c=t.toInt("height"),h="";if(o||s)h=o&&s?"fitXY":"fitCenter";else{if(0===d){var u=/width="([0-9]+)"/.exec(a.outerHTML);u&&(d=parseInt(u[1]),t.css("width",dt.formatPX(u[1])))}if(0===c){var f=/height="([0-9]+)"/.exec(a.outerHTML);f&&(c=parseInt(f[1]),t.css("height",dt.formatPX(f[1])))}switch(t.css("objectFit")){case"contain":h="centerInside";break;case"cover":h="centerCrop";break;case"scale-down":h="fitCenter";break;case"none":h="matrix";break;default:h="fitXY"}}if(""!==h&&t.android("scaleType",h),(d>0&&0===c||0===d&&c>0)&&t.android("adjustViewBounds","true"),t.pageflow)e.layoutHorizontal&&t.baseline&&t.android("baselineAlignBottom","true");else{var g=t.toInt("left"),p=t.toInt("top");if(g<0||p<0){var m=new U(this.cache.nextId,t.element);return m.api=this.settings.targetAPI,m.excludeProcedure|=st.NODE_PROCEDURE.ALL,m.excludeResource|=st.NODE_RESOURCE.ALL,m.android("layout_width",d>0?dt.formatPX(d):"wrap_content"),m.android("layout_height",c>0?dt.formatPX(c):"wrap_content"),m.setBounds(),m.setNodeType(v.FRAME),m.render(e),g<0&&(t.modifyBox(st.BOX_STANDARD.MARGIN_LEFT,g,!0),m.css("left","0px")),p<0&&(t.modifyBox(st.BOX_STANDARD.MARGIN_TOP,p,!0),m.css("top","0px")),t.parent=m,this.cache.append(m),l.getEnclosingTag(m.renderDepth,v.FRAME,m.id,this.renderNode(t,m,n,!0))}}}break;case"TEXTAREA":var y=t.element;if(t.android("minLines","2"),y.rows>2&&t.android("maxLines",""+y.rows),y.maxLength>0&&t.android("maxLength",""+y.maxLength),!t.hasWidth){var A=dt.convertInt(y.cols);A>0&&t.css("width",dt.formatPX(10*A))}t.android("hint",y.placeholder),t.android("scrollbars",b.VERTICAL),t.android("inputType","textMultiLine"),t.overflowX&&t.android("scrollHorizontally","true");break;case"INPUT":var T=t.element;switch(T.type){case"radio":if(!i){var _=e.children.map(function(t){t.renderAs&&(t=t.renderAs);var e=t.element;return t.visible&&!t.rendered&&"radio"===e.type&&e.name===T.name?t:null}).filter(function(t){return t});if(_.length>1){var N=this.createGroup(e,t,_);N.setNodeType(v.RADIO_GROUP),N.inherit(t,"alignment"),N.render(e);var D="",E="",R=!0,I=!1,O=void 0;try{for(var w,S=N.children[Symbol.iterator]();!(R=(w=S.next()).done);R=!0){var x=w.value;x.element.checked&&(E=x.stringId),D+=this.renderNode(x,N,st.NODE_STANDARD.RADIO,!0)}}catch(t){I=!0,O=t}finally{try{R||null==S.return||S.return()}finally{if(I)throw O}}return N.android("orientation",lt.linearX(_,_.every(function(t){return t.documentParent===_[0].documentParent}))?b.HORIZONTAL:b.VERTICAL),N.alignmentType|=st.NODE_ALIGNMENT.SEGMENTED,""!==E&&N.android("checkedButton",E),l.getEnclosingTag(N.renderDepth,v.RADIO_GROUP,N.id,D)}}break;case"password":t.android("inputType","textPassword");break;case"text":t.android("inputType","text");break;case"range":dt.hasValue(T.min)&&t.android("min",T.min),dt.hasValue(T.max)&&t.android("max",T.max),dt.hasValue(T.value)&&t.android("progress",T.value)}switch(T.type){case"text":case"search":case"tel":case"url":case"email":case"password":if(!t.hasWidth){var L=dt.convertInt(T.size);L>0&&t.css("width",dt.formatPX(10*L))}}}switch(t.controlName){case v.TEXT:var B=[];t.overflowX&&B.push(b.HORIZONTAL),t.overflowY&&B.push(b.VERTICAL),B.length>0&&t.android("scrollbars",B.join("|")),t.has("maxWidth",st.CSS_STANDARD.UNIT)&&t.android("maxWidth",t.css("maxWidth")),t.has("maxHeight",st.CSS_STANDARD.UNIT)&&t.android("maxHeight",t.css("maxHeight")),"nowrap"===t.css("whiteSpace")&&t.android("singleLine","true");break;case v.LINE:t.hasHeight||t.android("layout_height",dt.formatPX(t.borderTopWidth+t.borderBottomWidth+t.paddingTop+t.paddingBottom||1))}return t.render(r?t:e),l.getEnclosingTag(r||dt.hasValue(e.dataset.target)||0===t.renderDepth&&!t.documentRoot?-1:t.renderDepth,t.controlName,t.id)}},{key:"renderNodeStatic",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;a||((a=new U).api=this.settings.targetAPI),a.apply(ot.formatOptions(n,this.settings));var s=Math.max(0,e),d="number"==typeof t?U.getControlName(t):t;switch(d){case"include":case"merge":case"menu":break;default:a.setNodeType(d)}var c=a.styleElement?a.nodeName:d;dt.hasValue(i)&&(isNaN(parseInt(i))||(i=P(c,"width",i,this.settings)),a.android("layout_width",i,!1)),dt.hasValue(r)&&(isNaN(parseInt(r))||(r=P(c,"height",r,this.settings)),a.android("layout_height",r,!1)),a.renderDepth=s;var h=l.getEnclosingTag(a.documentRoot||0!==e?e:-1,d,a.id,o?ht.formatPlaceholder(a.id):"");if(this.settings.showAttributes&&0===a.id){var u=dt.repeat(s+1),f=a.combine().map(function(t){return"\n".concat(u+t)}).join("");h=h.replace(ht.formatPlaceholder(a.id,"@"),f)}return n.stringId=a.stringId,h}},{key:"renderInclude",value:function(t,e,n){return this._merge[n]="true"===t.dataset.includeMerge,t.documentRoot=!this._merge[n],this.renderNodeStatic("include",e.renderDepth+1,{layout:"@layout/".concat(n)})}},{key:"renderMerge",value:function(t,e){var n=e.join("");if(this._merge[t]){var i=new U;i.api=this.settings.targetAPI,i.documentRoot=!0,n=this.renderNodeStatic("merge",0,{},"","",i,!0).replace("{:0}",n)}return n}},{key:"renderColumnSpace",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r="";return dt.isPercent(e)&&(r=(parseInt(e)/100).toFixed(2),e="0px"),this.renderNodeStatic(st.NODE_STANDARD.SPACE,t,{android:{layout_columnWeight:r,layout_columnSpan:""+i}},e,dt.hasValue(n)?n:"wrap_content")}},{key:"baseRenderDepth",value:function(t){return this._merge[t]?0:-1}},{key:"setBoxSpacing",value:function(t){var e=this;t.cache.visible.forEach(function(t){return t.setBoxSpacing(e.settings)})}},{key:"setDimensions",value:function(t){var e=this;function n(t,e,n,r,a){var o=i[t],l=n;if(5===arguments.length){if(!a||!/(px|dp|sp)$/.test(a))return;l="".concat(n,",").concat(r,",").concat(a)}null==o[l]&&(o[l]=[]),o[l].push(e)}var i={};if(t.cache.visible.forEach(function(t){if(e.settings.dimensResourceValue){var r=t.nodeName.toLowerCase();null==i[r]&&(i[r]={});for(var a=Object.keys(st.BOX_STANDARD),o=0;o<a.length;o++){var l=a[o],s=e.valueBox(t,l);if(""!==s[0]&&"0px"!==s[1]){var d="".concat(st.BOX_STANDARD[l].toLowerCase(),",").concat(s[0],",").concat(s[1]);n(r,t,d)}}["android:layout_width:width","android:layout_height:height","android:minWidth:min_width","android:minHeight:min_height","app:layout_constraintWidth_min:constraint_width_min","app:layout_constraintHeight_min:constraint_height_min"].forEach(function(e){var i=c(e.split(":"),3),a=i[1];n(r,t,i[2],a,t[i[0]](a))})}}),this.settings.dimensResourceValue){var r=ot.getStored("dimens");for(var a in i){var o=i[a],s=function(t){var n=c(t.split(","),3),i=n[0],s=n[1],d=n[2],h=l.getDimensResourceKey(r,"".concat(a,"_").concat(M(i,e.settings)),d);o[t].forEach(function(t){return t[-1!==s.indexOf("constraint")?"app":"android"](s,"@dimen/".concat(h))}),r.set(h,d)};for(var d in o)s(d)}}}},{key:"setAttributes",value:function(t){if(this.settings.showAttributes)for(var e=t.cache.visible.map(function(t){return{pattern:ht.formatPlaceholder(t.id,"@"),attributes:l.parseAttributes(t)}}),n=h(t.views).concat(h(t.includes)),i=function(){var t=n[r];e.forEach(function(e){return t.content=t.content.replace(e.pattern,e.attributes)}),t.content=t.content.replace("{#0}",l.getRootNamespace(t.content))},r=0;r<n.length;r++)i()}},{key:"valueBox",value:function(t,e){var n=dt.convertEnum(parseInt(e),st.BOX_STANDARD,y);if(""!==n){var i=M(n,this.settings);return[i,t.android(i)||"0px"]}return["","0px"]}},{key:"addGuideline",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=gt;t.pageflow&&(null==a&&(a="right"===t.float||null==t.left&&null!=t.right||t.textElement&&"right"===t.css("textAlign")||t.alignParent("right",this.settings)),null==i&&!0===a&&(i=!0)),t.dataset.constraintPercent&&(i="true"===t.dataset.constraintPercent);var l=t.documentParent,s="layout_constraintGuide_".concat(i?"percent":"begin");[b.HORIZONTAL,b.VERTICAL].forEach(function(d,c){if(!t.constraint[d]&&(""===n||d===n)){var h="",u="",f="",g="",p=!1,m=0;switch(c){case 0:h=a?"right":"left",u=a?"left":"right",f=a?"rightLeft":"leftRight",g=a?"leftRight":"rightLeft","relative"===t.position&&t.toInt("left")<0&&(m=t.toInt("left"));break;case 1:h=a?"bottom":"top",u=a?"top":"bottom",f=a?"bottomTop":"topBottom",g=a?"topBottom":"bottomTop","relative"===t.position&&t.toInt("top")<0&&(m=t.toInt("top"))}var y=t.pageflow?"bounds":"linear",A=i?Math.abs(t[y][h]+m-(l.documentBody?0:l.box[h]))/l.box[0===c?"width":"height"]:0;if(i||(p=l.renderChildren.some(function(e){if(e.constraint[d]&&(!e.constraint["chain".concat(dt.capitalize(d))]||e.constraint["margin".concat(dt.capitalize(d))])){if(dt.withinFraction(t.linear[h]+m,e.linear[u]))return t.anchor(o[f],e.stringId,d,!0),!0;if(dt.withinFraction(t.linear[u]+m,e.linear[h]))return t.anchor(o[g],e.stringId,d,!0),!0;if(dt.withinFraction(t.bounds[h]+m,e.bounds[h]))return t.anchor(o[1===c&&t.textElement&&t.baseline&&e.textElement&&e.baseline?"baseline":h],e.stringId,d,!0),!0;if(dt.withinFraction(t.bounds[u]+m,e.bounds[u]))return t.anchor(o[u],e.stringId,d,!0),!0}return!1})),!p){var T=l.constraint.guideline||{},_=i?parseFloat(Math.abs(A-(a?1:0)).toFixed(e.settings.constraintPercentAccuracy)):a?t[y][h]+m-l.box[u]:t[y][h]+m-l.box[h];if(!i&&!a)if(_<0){var N=l["padding".concat(dt.capitalize(h))];_=N>=Math.abs(_)?0:Math.abs(_)-N}else l.documentBody&&(_=t[y][h]+m);if(0===_)t.anchor(o[h],"parent",d,!0);else{var D={android:{orientation:0===c?b.VERTICAL:b.HORIZONTAL},app:r({},s,""+_)},E=dt.optional(T,"".concat(d,".").concat(s,".").concat(h),"object");if(E)for(var R in E)if(E[R]===_){t.anchor(o[h],R,d,!0),t.delete("app",o[u]),p=!0;break}if(!p){i||(D.app[s]=P(t.nodeName,"constraintguide_begin",dt.formatPX(_),e.settings));var I=e.renderNodeStatic(v.GUIDELINE,t.renderDepth,D,"wrap_content","wrap_content"),O=D.stringId;e.appendAfter(t.id,I),t.anchor(o[h],O,d,!0),t.delete("app",o[u]),t.constraint["".concat(d,"Guideline")]=O,null==T[d]&&(T[d]={}),null==T[d][s]&&(T[d][s]={}),null==T[d][s][h]&&(T[d][s][h]={}),T[d][s][h][O]=_,l.constraint.guideline=T}}}}})}},{key:"adjustBaseline",value:function(t){if(t.length>1){var e=lt.textBaseline(t.filter(function(t){return t.baseline&&0===t.toInt("top")&&0===t.toInt("bottom")}),this.application.userAgent);if(e.length>0){var n=ft,i=e[0],r=[],a=null,o=!0,l=!1,s=void 0;try{for(var d,c=t[Symbol.iterator]();!(o=(d=c.next()).done);o=!0){var h=d.value;h!==i&&(h.baseline&&(h.nodeType<=st.NODE_STANDARD.INLINE||h.linearHorizontal&&h.renderChildren.some(function(t){return t.baseline&&t.nodeType<=st.NODE_STANDARD.INLINE}))&&(!i.imageElement&&h.imageElement?r.push(h):h.alignOrigin?h.android(n[h.imageElement||h.is(st.NODE_STANDARD.BUTTON)?"bottom":"baseline"],i.stringId):"relative"===i.position&&h.bounds.height<i.bounds.height&&0===h.lineHeight&&h.android(n[dt.convertInt(i.top)>0?"top":"bottom"],i.stringId)),i.imageElement&&(!a||h.bounds.height>a.bounds.height)&&(a=h))}}catch(t){l=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(l)throw s}}if(r.length>0){r.sort(function(t,e){return t.bounds.height>=e.bounds.height?-1:1});for(var u=0;u<r.length;u++)0===u?i.android(n.bottom,r[u].stringId):r[u].android(n.bottom,r[0].stringId);a=null}a&&(a.imageElement?a.bounds.height>i.bounds.height?a.delete("android",n.bottom):a=null:a.delete("android",n.baseline),a&&i.android(n.bottom,a.stringId))}}}},{key:"findByStringId",value:function(t){return this.cache.find("stringId",t)}},{key:"baseTemplate",get:function(){return'<?xml version="1.0" encoding="utf-8"?>\n{:0}'}},{key:"settingsInternal",get:function(){return{includes:!0,layout:{pathName:"res/layout",fileExtension:"xml"},inline:{always:["BR"],tagName:E},unsupported:{tagName:["OPTION","MAP","AREA"]}}}}],[{key:"getEnclosingTag",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=dt.repeat(Math.max(0,t)),l=r+"{<".concat(n,"}");return l+=""!==i?o+"<".concat(e).concat(0===t?"{#0}":"","{@").concat(n,"}>\n")+i+o+"</".concat(e,">\n"):o+"<".concat(e).concat(0===t?"{#0}":"","{@").concat(n,"} />\n"),l+="{>".concat(n,"}")+a}},{key:"parseAttributes",value:function(t){for(var e in"rtl"===t.dir&&(t.nodeType<st.NODE_STANDARD.INLINE?t.android("textDirection","rtl"):t.length>0&&t.android("layoutDirection","rtl")),t.dataset)/^attr[A-Z]+/.test(e)&&function(){var n=dt.capitalize(e.substring(4),!1);t.dataset[e].split(";").forEach(function(e){var i=c(e.split("::"),2),r=i[0],a=i[1];dt.hasValue(r)&&dt.hasValue(a)&&t.attr(n,r,a)})}();var n=dt.repeat(t.renderDepth+1);return t.combine().map(function(t){return"\n".concat(n+t)}).join("")}},{key:"getRootNamespace",value:function(t){var e="";for(var n in A)RegExp("\\s+".concat(n,":")).test(t)&&(e+="\n\txmlns:".concat(n,'="').concat(A[n],'"'));return e}},{key:"getDimensResourceKey",value:function(t,e,n){return t.has(e)&&t.get(e)!==n?x("dimens","".concat(e,"_1")):e}},{key:"setAlignParent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=gt;[b.HORIZONTAL,b.VERTICAL].forEach(function(r,a){t.constraint[r]||""!==e&&r!==e||(t.app(i[0===a?"left":"top"],"parent"),t.app(i[0===a?"right":"bottom"],"parent"),t.constraint[r]=!0,n&&t.app("layout_constraint".concat(r.charAt(0).toUpperCase()+r.substring(1),"_bias"),t["".concat(r,"Bias")]))})}},{key:"partitionChain",value:function(e,n,i,r){var a=gt,o=[],l=[],s=[];switch(i){case b.HORIZONTAL:o.push(a.left,a.right),l.push("linear.top","linear.bottom"),s.push(a.leftRight,a.rightLeft);break;case b.VERTICAL:o.push(a.top,a.bottom),l.push("linear.left","linear.right"),s.push(a.topBottom,a.bottomTop)}return l.map(function(i){var a=dt.sortAsc(n.list.filter(function(t){return dt.sameValue(e,t,i)}),l[0]);if(a.length>1){if(!r||!a.some(function(t){return t.floating})&&"parent"===a[0].app(o[0])&&"parent"===a[a.length-1].app(o[1]))return a;var d=function(){var t,n=new Set([e]);do{t=!1,Array.from(n).some(function(e){return a.some(function(i){return n.has(i)||i.app(s[0])!==e.stringId&&i.app(s[1])!==e.stringId||(n.add(i),t=!0),t})})}while(t);return{v:Array.from(n)}}();if("object"===t(d))return d.v}return[]}).reduce(function(t,e){return t.length>=e.length?t:e})}},{key:"checkSingleLine",value:function(t){t&&t.textElement&&(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||arguments.length>2&&void 0!==arguments[2]&&arguments[2]||!t.hasWidth&&!t.multiLine&&t.textContent.trim().split(" ").length>1)&&t.android("singleLine","true")}},{key:"adjustLineHeight",value:function(t,e){var n=Math.max.apply(null,t.map(function(t){return t.toInt("lineHeight")}));if(n>0){var i=Number.MAX_VALUE,r=0;t.every(function(t){var e=n-t.bounds.height;return e>0&&(i=Math.min(e,i),n===t.toInt("lineHeight")&&(r=Math.max(t.toInt("top")<0?Math.abs(t.toInt("top")):0,r)),!0)})&&(e.modifyBox(st.BOX_STANDARD.PADDING_TOP,Math.floor(i/2)),e.modifyBox(st.BOX_STANDARD.PADDING_BOTTOM,Math.ceil(i/2)+r))}}}]),l}(),vt=androme.lib.util,yt=androme.lib.xml;function bt(t,e){return(""+t).toLowerCase()>=(""+e).toLowerCase()?1:-1}var At=function(t){function n(t){var i;return e(this,n),(i=s(this,o(n).call(this))).settings=t,i}return a(n,androme.lib.base.File),i(n,[{key:"saveAllToDisk",value:function(t){for(var e=[],i=h(t.views).concat(h(t.includes)),r=0;r<i.length;r++){var a=i[r];e.push(n.createPlainFile(a.pathname,0===r?this.settings.outputMainFileName:"".concat(a.filename,".xml"),a.content))}var o=this.resourceDrawableToXml();e.push.apply(e,h(n.parseFileDetails(this.resourceStringToXml()))),e.push.apply(e,h(n.parseFileDetails(this.resourceStringArrayToXml()))),e.push.apply(e,h(n.parseFileDetails(this.resourceFontToXml()))),e.push.apply(e,h(n.parseFileDetails(this.resourceColorToXml()))),e.push.apply(e,h(n.parseFileDetails(this.resourceStyleToXml()))),e.push.apply(e,h(n.parseFileDetails(this.resourceDimenToXml()))),e.push.apply(e,h(n.parseImageDetails(o)).concat(h(n.parseFileDetails(o)))),this.saveToDisk(e)}},{key:"layoutAllToXml",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={},r=[],a=h(t.views).concat(h(t.includes)),o=0;o<a.length;o++){var l=a[o];i[l.filename]=l.content,e&&r.push(n.createPlainFile(l.pathname,0===o?this.settings.outputMainFileName:"".concat(l.filename,".xml"),l.content))}return e&&this.saveToDisk(r),i}},{key:"resourceAllToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={string:this.resourceStringToXml(),stringArray:this.resourceStringArrayToXml(),font:this.resourceFontToXml(),color:this.resourceColorToXml(),style:this.resourceStyleToXml(),dimen:this.resourceDimenToXml(),drawable:this.resourceDrawableToXml()};for(var i in e)""===e[i]&&delete e[i];if(t){var r=[];for(var a in e)"drawable"===a&&r.push.apply(r,h(n.parseImageDetails(e[a]))),r.push.apply(r,h(n.parseFileDetails(e[a])));this.saveToDisk(r)}return e}},{key:"resourceStringToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stored.strings=new Map(h(this.stored.strings.entries()).sort(bt));var e=yt.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<string name="{name}">{value}</string>\n!1\n</resources>\n\x3c!-- filename: res/values/strings.xml --\x3e\n!0'),i={0:[{1:[]}]},r=yt.getTemplateLevel(i,"0");""===this.appName||this.stored.strings.has("app_name")||r[1].push({name:"app_name",value:this.appName});var a=!0,o=!1,l=void 0;try{for(var s,d=this.stored.strings.entries()[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=c(s.value,2);r[1].push({name:u[0],value:u[1]})}}catch(t){o=!0,l=t}finally{try{a||null==d.return||d.return()}finally{if(o)throw l}}var f=yt.createTemplate(e,i);return f=yt.replaceTab(f,this.settings,!0),t&&this.saveToDisk(n.parseFileDetails(f)),f}},{key:"resourceStringArrayToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.arrays=new Map(h(this.stored.arrays.entries()).sort()),this.stored.arrays.size>0){var i=yt.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<string-array name="{name}">\n!2\n\t\t<item>{value}</item>\n!2\n\t</string-array>\n!1\n</resources>\n\x3c!-- filename: res/values/string_arrays.xml --\x3e\n!0'),r={0:[{1:[]}]},a=yt.getTemplateLevel(r,"0"),o=!0,l=!1,s=void 0;try{for(var d,u=this.stored.arrays.entries()[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var f=c(d.value,2),g=f[1],p={name:f[0],2:[]},m=p[2],v=!0,y=!1,b=void 0;try{for(var A,T=g[Symbol.iterator]();!(v=(A=T.next()).done);v=!0){m.push({value:A.value})}}catch(t){y=!0,b=t}finally{try{v||null==T.return||T.return()}finally{if(y)throw b}}a[1].push(p)}}catch(t){l=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}e=yt.createTemplate(i,r),e=yt.replaceTab(e,this.settings,!0),t&&this.saveToDisk(n.parseFileDetails(e))}return e}},{key:"resourceFontToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.fonts=new Map(h(this.stored.fonts.entries()).sort()),this.stored.fonts.size>0){var i=yt.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<font-family xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="{#app=http://schemas.android.com/apk/res-auto}">\n!1\n\t<font android:fontStyle="{style}" android:fontWeight="{weight}" android:font="{font}" app:fontStyle="{#app=style}" app:fontWeight="{#app=weight}" app:font="{#app=font}" />\n!1\n</font-family>\n\x3c!-- filename: res/font/{name}.xml --\x3e\n!0'),r=!0,a=!1,o=void 0;try{for(var l,s=this.stored.fonts.entries()[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var d=c(l.value,2),f=d[0],g=d[1],p={"#include":{},"#exclude":{},0:[{name:f,1:[]}]};p[this.settings.targetAPI<u.OREO?"#include":"#exclude"].app=!0;var m=yt.getTemplateLevel(p,"0");for(var v in g){var y=c(v.split("-"),2),b=y[0],A=y[1];m[1].push({style:b,weight:A,font:"@font/".concat(f+("normal"===b&&"400"===A?"_".concat(b):("normal"!==b?"_".concat(b):"")+("400"!==A?"_".concat(D[A]||A):"")))})}e+="\n\n"+yt.createTemplate(i,p)}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}e=yt.replaceTab(e,this.settings),t&&this.saveToDisk(n.parseFileDetails(e))}return e.trim()}},{key:"resourceColorToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.colors.size>0){this.stored.colors=new Map(h(this.stored.colors.entries()).sort());var i=yt.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<color name="{value}">{name}</color>\n!1\n</resources>\n\x3c!-- filename: res/values/colors.xml --\x3e\n!0'),r={0:[{1:[]}]},a=yt.getTemplateLevel(r,"0"),o=!0,l=!1,s=void 0;try{for(var d,u=this.stored.colors.entries()[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var f=c(d.value,2);a[1].push({name:f[0],value:f[1]})}}catch(t){l=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}e=yt.createTemplate(i,r),e=yt.replaceTab(e,this.settings),t&&this.saveToDisk(n.parseFileDetails(e))}return e}},{key:"resourceStyleToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.styles.size>0){this.stored.styles=new Map(h(this.stored.styles.entries()).sort(bt));var i=yt.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<style name="{name1}" parent="{@parent}">\n!2\n\t\t<item name="{name2}">{value}</item>\n!2\n\t</style>\n!1\n</resources>\n\x3c!-- filename: res/values/styles.xml --\x3e\n!0'),r={0:[{1:[]}]},a=yt.getTemplateLevel(r,"0"),o=!0,l=!1,s=void 0;try{for(var d,u=function(){var t=c(d.value,2),e=t[1],n={name1:t[0],parent:e.parent||"",2:[]};e.attributes.split(";").sort().forEach(function(t){var e=c(t.split("="),2);n[2].push({name2:e[0],value:e[1].replace(/"/g,"")})}),a[1].push(n)},f=this.stored.styles.entries()[Symbol.iterator]();!(o=(d=f.next()).done);o=!0)u()}catch(t){l=!0,s=t}finally{try{o||null==f.return||f.return()}finally{if(l)throw s}}e=k(e=yt.createTemplate(i,r),this.settings,!0),e=yt.replaceTab(e,this.settings),t&&this.saveToDisk(n.parseFileDetails(e))}return e}},{key:"resourceDimenToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.dimens=new Map(h(this.stored.dimens.entries()).sort()),this.stored.dimens.size>0){var i=yt.parseTemplate('!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n!1\n\t<dimen name="{name}">{value}</dimen>\n!1\n</resources>\n\x3c!-- filename: res/values/dimens.xml --\x3e\n!0'),r={0:[{1:[]}]},a=yt.getTemplateLevel(r,"0"),o=!0,l=!1,s=void 0;try{for(var d,u=this.stored.dimens.entries()[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var f=c(d.value,2);a[1].push({name:f[0],value:f[1]})}}catch(t){l=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}e=k(e=yt.createTemplate(i,r),this.settings),e=yt.replaceTab(e,this.settings),t&&this.saveToDisk(n.parseFileDetails(e))}return e}},{key:"resourceDrawableToXml",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e="";if(this.stored.drawables.size>0||this.stored.images.size>0){var i=yt.parseTemplate("!0\n{value}\n\x3c!-- filename: {name} --\x3e\n!0"),r={0:[]},a=r[0],o=!0,l=!1,s=void 0;try{for(var d,u=this.stored.drawables.entries()[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var f=c(d.value,2),g=f[1];a.push({name:"res/drawable/".concat(T=f[0],".xml"),value:g})}}catch(t){l=!0,s=t}finally{try{o||null==u.return||u.return()}finally{if(l)throw s}}var p=!0,m=!1,v=void 0;try{for(var y,b=this.stored.images.entries()[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var A=c(y.value,2),T=A[0],_=A[1];if(Object.keys(_).length>1)for(var N in _)a.push({name:"res/drawable-".concat(N,"/").concat(T,".").concat(vt.lastIndexOf(_[N],".")),value:"\x3c!-- image: ".concat(_[N]," --\x3e")});else _.mdpi&&a.push({name:"res/drawable/".concat(T,".").concat(vt.lastIndexOf(_.mdpi,".")),value:"\x3c!-- image: ".concat(_.mdpi," --\x3e")})}}catch(t){m=!0,v=t}finally{try{p||null==b.return||b.return()}finally{if(m)throw v}}e=k(e=yt.createTemplate(i,r),this.settings),e=yt.replaceTab(e,this.settings),t&&this.saveToDisk(h(n.parseImageDetails(e)).concat(h(n.parseFileDetails(e))))}return e}}],[{key:"parseImageDetails",value:function(t){for(var e,n=[],i=/<!-- image: (.+) -->\n<!-- filename: (.+)\/(.*?\.\w+) -->/;null!=(e=i.exec(t));)n.push({uri:e[1],pathname:e[2],filename:e[3],content:""}),t=t.replace(e[0],"");return n}},{key:"parseFileDetails",value:function(t){for(var e,n=[],i=/<\?xml[\w\W]*?(<!-- filename: (.+)\/(.*?\.xml) -->)/;null!=(e=i.exec(t));)n.push({content:e[0].replace(e[1],"").trim(),pathname:e[2],filename:e[3]}),t=t.replace(e[0],"");return n}},{key:"createPlainFile",value:function(t,e,n){return{pathname:t,filename:e,content:n}}}]),n}(),Tt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.External),n}(),_t=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Origin),n}(),Nt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Custom),i(n,[{key:"afterInsert",value:function(){var t=this.node,e=Object.assign({},this.options[t.element.id]);t.apply(ot.formatOptions(e,this.application.settings))}}]),n}(),Dt=androme.lib.enumeration,Et=androme.lib.util,Rt=androme.lib.dom,It=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Accessibility),i(n,[{key:"afterRender",value:function(){Array.from(this.application.cache.elements).forEach(function(t){if(!t.hasBit("excludeProcedure",Dt.NODE_PROCEDURE.ACCESSIBILITY)){var e=t.element;switch(t.controlName){case v.EDIT:t.companion||[t.nextElementSibling,t.previousElementSibling].some(function(n){var i=Rt.getNodeFromElement(n),r=n&&n.parentElement&&"LABEL"===n.parentElement.tagName?Rt.getNodeFromElement(n.parentElement):null;if(i&&i.visible&&i.pageflow){if(Et.hasValue(n.htmlFor)&&n.htmlFor===e.id)return i.android("labelFor",t.stringId),!0;if(i.textElement&&r)return r.android("labelFor",t.stringId),!0}return!1});case v.SELECT:case v.CHECKBOX:case v.RADIO:case v.BUTTON:e.disabled&&t.android("focusable","false")}}})}}]),n}(),Ot=androme.lib.enumeration,wt=androme.lib.constant,St=androme.lib.util,xt=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.List),i(n,[{key:"processChild",value:function(){var t=this.node,e=t.data(wt.EXT_NAME.LIST,"mainData");if(e){var n=this.parent,i=this.application.viewController,a=this.application.settings,o=St.convertInt(n.css("paddingLeft"))+St.convertInt(n.cssInitial("marginLeft",!0)),l=0,s=t.marginLeft;t.modifyBox(Ot.BOX_STANDARD.MARGIN_LEFT,null),n.is(Ot.NODE_STANDARD.GRID)?(l=St.convertInt(n.android("columnCount")),s+=o):n.children[0]===t&&(s+=o);var d=t.children.find(function(t){return"left"===t.float&&St.convertInt(t.cssInitial("marginLeft",!0))<0&&Math.abs(St.convertInt(t.cssInitial("marginLeft",!0)))<=St.convertInt(t.documentParent.cssInitial("marginLeft",!0))});if(d&&""===e.ordinal){var h="";d.parent=n,h=d.inlineText||0===d.children.length?i.renderNode(d,n,Ot.NODE_STANDARD.TEXT):d.children.every(function(t){return t.pageflow})?i.renderGroup(d,n,Ot.NODE_STANDARD.RELATIVE):i.renderGroup(d,n,Ot.NODE_STANDARD.CONSTRAINT),i.prependBefore(t.id,h),3===l&&t.android("layout_columnSpan","2"),s+=d.marginLeft,d.modifyBox(Ot.BOX_STANDARD.MARGIN_LEFT,null),!d.hasWidth&&s>0&&d.android("minWidth",St.formatPX(s))}else{var u=l>0?"0":"",f="inside"===t.css("listStylePosition"),g=!["","none"].includes(t.css("listStyleImage")),p="",m=0,y=0;if(""!==e.imageSrc){p=ot.addImageURL(e.imageSrc);var b=c(ot.parseBackgroundPosition(e.imagePosition,t.css("fontSize")).map(function(t){return St.convertInt(t)}),2);m=b[0],y=b[1]}var A=""!==p&&!g||0===o&&0===t.marginLeft?"":"right";""===A&&(s+=t.paddingLeft,t.modifyBox(Ot.BOX_STANDARD.PADDING_LEFT,null)),m>0&&s>m&&(s-=m);var T,_=(s=Math.max(s,20))>0?P(t.nodeName,M("min_width",a),St.formatPX(s),a):"",N=s<=24?6:s<=32?8:10,D=m>0?St.formatPX(m):"",E={android:{layout_columnWeight:u}};if(f)""!==D&&(D=P(t.nodeName,M("margin_left",a),D,a)),i.prependBefore(t.id,i.renderNodeStatic(Ot.NODE_STANDARD.SPACE,n.renderDepth+1,{android:r({minWidth:_,layout_columnWeight:u},M("layout_marginLeft",a),D)},"wrap_content","wrap_content")),Object.assign(E.android,{minWidth:P(t.nodeName,M("min_width",a),St.formatPX(24),a)});else Object.assign(E.android,(r(T={minWidth:_,gravity:s>20?M(A,a):""},M("layout_marginLeft",a),D),r(T,M("paddingLeft",a),""===A&&""===p?St.formatPX(N):20===s?"2px":""),r(T,M("paddingRight",a),"right"===A&&s>20?St.formatPX(N):""),r(T,"paddingTop",t.paddingTop>0?St.formatPX(t.paddingTop):""),T)),3===l&&t.android("layout_columnSpan","2");if("DT"===t.tagName&&""===p)t.android("layout_columnSpan",""+l);else{Object.assign(E.android,""!==p?{src:"@drawable/".concat(p),layout_marginTop:y>0?St.formatPX(y):"",baselineAlignBottom:"true",scaleType:f||"right"!==A?"fitStart":"fitEnd"}:{text:e.ordinal});var R=new U(this.application.cache.nextId,document.createElement("SPAN"));R.api=t.api,R.alignmentType=Ot.NODE_ALIGNMENT.SPACE,R.nodeName="".concat(t.tagName,"_ORDINAL"),R.setNodeType(v.SPACE),R.inherit(t,"style"),""!==e.ordinal&&!/[A-Za-z0-9]+\./.test(e.ordinal)&&R.toInt("fontSize")>12&&R.css("fontSize","12px"),t.companion=R,this.application.cache.append(R),i.prependBefore(t.id,i.renderNodeStatic(""!==p?Ot.NODE_STANDARD.IMAGE:""!==e.ordinal?Ot.NODE_STANDARD.TEXT:Ot.NODE_STANDARD.SPACE,n.renderDepth+1,E,"wrap_content","wrap_content",R))}}l>0&&t.android("layout_columnWeight","1")}return{output:"",complete:!0}}},{key:"beforeInsert",value:function(){var t=this.node;if(t.is(Ot.NODE_STANDARD.GRID))for(var e=t.android("columnCount"),n=0;n<t.renderChildren.length;n++){var i=t.renderChildren[n],r=t.renderChildren[n-1],a=0;if(r)St.convertInt(r.android("layout_marginBottom"))>0&&(a+=St.convertInt(r.android("layout_marginBottom")),r.delete("android","layout_marginBottom"),r.modifyBox(Ot.BOX_STANDARD.MARGIN_BOTTOM,null));var o=St.convertInt(i.android("layout_marginTop"));o>0&&(a+=o,i.delete("android","layout_marginTop"),i.modifyBox(Ot.BOX_STANDARD.MARGIN_TOP,null)),a>0&&this.application.viewController.prependBefore(i.id,this.application.viewController.renderNodeStatic(Ot.NODE_STANDARD.SPACE,i.renderDepth,{android:{layout_columnSpan:""+e}},"match_parent",St.formatPX(a)),0)}}},{key:"afterInsert",value:function(){var t=this.node;t.is(Ot.NODE_STANDARD.GRID)&&t.blockStatic&&!t.has("width")&&t.android("layout_width","match_parent")}}]),n}(),Lt=androme.lib.enumeration,Bt=androme.lib.constant,Pt=androme.lib.util,kt=androme.lib.dom,Ct=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Grid),i(n,[{key:"processChild",value:function(){var t=this.node,e=t.data(Bt.EXT_NAME.GRID,"cellData");return e&&(e.rowSpan>1&&t.android("layout_rowSpan",""+e.rowSpan),e.columnSpan>1&&t.android("layout_columnSpan",""+e.columnSpan),"table"===t.parent.display&&"table-cell"===t.display&&t.android("layout_gravity","fill")),d(o(n.prototype),"processChild",this).call(this)}},{key:"afterRender",value:function(){var t=this,e=!0,n=!1,i=void 0;try{for(var r,a=this.subscribers[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value;"table"===o.display&&"collapse"===o.css("borderCollapse")||function(){var e=o.data(Bt.EXT_NAME.GRID,"mainData");e&&o.each(function(n){var i=n.data(Bt.EXT_NAME.GRID,"cellData");if(i){var r=kt.getBoxSpacing(n.documentParent.element,!0),a=e.padding;if(i.cellFirst&&(a.top=r.paddingTop+r.marginTop),i.rowStart&&(a.left=Math.max(r.marginLeft+r.paddingLeft,a.left)),i.rowEnd){var o=r.marginBottom+r.paddingBottom+(i.cellLast?0:r.marginTop+r.paddingTop);o>0&&(i.cellLast?a.bottom=o:t.application.viewController.appendAfter(n.id,t.application.viewController.renderColumnSpace(n.renderDepth,"match_parent",Pt.formatPX(o),e.columnCount))),a.right=Math.max(r.marginRight+r.paddingRight,a.right)}}},!0)}()}}catch(t){n=!0,i=t}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}var l=!0,s=!1,d=void 0;try{for(var c,h=this.subscribers[Symbol.iterator]();!(l=(c=h.next()).done);l=!0){var u=c.value,f=u.data(Bt.EXT_NAME.GRID,"mainData");f&&(u.modifyBox(Lt.BOX_STANDARD.PADDING_TOP,f.padding.top),u.modifyBox(Lt.BOX_STANDARD.PADDING_RIGHT,f.padding.right),u.modifyBox(Lt.BOX_STANDARD.PADDING_BOTTOM,f.padding.bottom),u.modifyBox(Lt.BOX_STANDARD.PADDING_LEFT,f.padding.left))}}catch(t){s=!0,d=t}finally{try{l||null==h.return||h.return()}finally{if(s)throw d}}}}]),n}(),Mt=androme.lib.constant,Xt=androme.lib.util,Ht=function(t){function n(){return e(this,n),s(this,o(n).apply(this,arguments))}return a(n,androme.lib.base.extensions.Table),i(n,[{key:"processNode",value:function(){var t=d(o(n.prototype),"processNode",this).call(this),e=this.node;if(Xt.convertInt(e.android("columnCount"))>1){var i=!!e.data(Mt.EXT_NAME.TABLE,"expand");if(e.each(function(t){if("0px"===t.css("width"))t.android("layout_width","0px"),t.android("layout_columnWeight",""+(t.element.colSpan||1));else{var e=t.data(Mt.EXT_NAME.TABLE,"expand"),n=!!t.data(Mt.EXT_NAME.TABLE,"exceed"),r=!!t.data(Mt.EXT_NAME.TABLE,"downsized");if(null!=e)if(e){var a=Xt.convertFloat(t.data(Mt.EXT_NAME.TABLE,"percent"))/100;a>0&&(t.android("layout_width","0px"),t.android("layout_columnWeight",Xt.trimEnd(a.toFixed(3),"0")),i=!0)}else t.android("layout_columnWeight","0");r&&(n?t.android("layout_columnWeight","0.01"):(t.textElement&&t.android("maxLines","1"),t.has("width")&&t.toInt("width")<t.bounds.width&&t.android("layout_width",Xt.formatPX(t.bounds.width))))}}),i&&!e.hasWidth){var r=0;e.ascend().some(function(t){return!!t.hasWidth&&(r=t.bounds.width,!0)}),e.bounds.width>=r?e.android("layout_width","match_parent"):e.css("width",Xt.formatPX(e.bounds.width))}}return t}},{key:"processChild",value:function(){var t=this.node,e=Xt.convertInt(t.data(Mt.EXT_NAME.TABLE,"rowSpan")),n=Xt.convertInt(t.data(Mt.EXT_NAME.TABLE,"colSpan")),i=Xt.convertInt(t.data(Mt.EXT_NAME.TABLE,"spaceSpan"));(e>1&&t.android("layout_rowSpan",""+e),n>1&&t.android("layout_columnSpan",""+n),i>0)&&this.application.viewController.appendAfter(t.id,this.application.viewController.renderColumnSpace(this.parent.renderDepth+1,"wrap_content","wrap_content",i));return{output:"",complete:!0}}}]),n}();function Gt(){var t=zt.application;return!(!t.settings.autoCloseOnWrite||t.loading||t.closed)&&(t.finalize(),!0)}var Wt,zt,Vt,Ft,Ut=!1,jt=androme.lib.enumeration.APP_FRAMEWORK.ANDROID,Yt={lib:{base:{View:U,Resource:ot},enumeration:m,constant:I,util:X},system:{customize:function(t,e,n){if(w[t]){var i=w[t].customizations;null==i[e]&&(i[e]={}),Object.assign(i[e],n)}},addXmlNs:function(t,e){A[t]=e},writeLayoutAllXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut){var e=zt.application;if(e.closed||Gt())return Vt.file.layoutAllToXml(e.viewData,t)}return""},writeResourceAllXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceAllToXml(t);return""},writeResourceStringXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceStringToXml(t);return""},writeResourceArrayXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceStringArrayToXml(t);return""},writeResourceFontXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceFontToXml(t);return""},writeResourceColorXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceColorToXml(t);return""},writeResourceStyleXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceStyleToXml(t);return""},writeResourceDimenXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceDimenToXml(t);return""},writeResourceDrawableXml:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Ut&&(zt.application.closed||Gt()))return Vt.file.resourceDrawableToXml(t);return""}},create:function(){var t,e=androme.lib.constant.EXT_NAME;Ft=Object.assign({},O);var n=new At(Ft);return Wt=new androme.lib.base.Application(jt),zt=new mt,Vt=new ot(n),Wt.registerController(zt),Wt.registerResource(Vt),Wt.nodeObject=U,Wt.builtInExtensions=(r(t={},e.EXTERNAL,new Tt(e.EXTERNAL,jt)),r(t,e.ORIGIN,new _t(e.ORIGIN,jt)),r(t,e.CUSTOM,new Nt(e.CUSTOM,jt)),r(t,e.ACCESSIBILITY,new It(e.ACCESSIBILITY,jt)),r(t,e.LIST,new xt(e.LIST,jt,["UL","OL","DL","DIV"])),r(t,e.TABLE,new Ht(e.TABLE,jt,["TABLE"])),r(t,e.GRID,new Ct(e.GRID,jt,["FORM","UL","OL","DL","DIV","TABLE","NAV","SECTION","ASIDE","MAIN","HEADER","FOOTER","P","ARTICLE","FIELDSET","SPAN"])),t),Ut=!0,{application:Wt,framework:jt,settings:Ft}},cached:function(){return Ut?{application:Wt,framework:jt,settings:Ft}:Yt.create()}};return Yt}();
