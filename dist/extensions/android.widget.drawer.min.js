this.android=this.android||{},this.android.widget=this.android.widget||{},this.android.widget.drawer=function(){"use strict";var e={__FRAMEWORK:2,FAB:"android.widget.floatingactionbutton",MENU:"android.widget.menu",COORDINATOR:"android.widget.coordinator",TOOLBAR:"android.widget.toolbar",DRAWER:"android.widget.drawer",BOTTOM_NAVIGATION:"android.widget.bottomnavigation"};var t='!0\n<?xml version="1.0" encoding="utf-8"?>\n<resources>\n\t<style name="{@appTheme}" parent="{@parentTheme}">\n\t\t<item name="android:windowDrawsSystemBarBackgrounds">true</item>\n\t\t<item name="android:statusBarColor">@android:color/transparent</item>\n\t\t<item name="android:windowTranslucentStatus">true</item>\n!1\n\t\t<item name="{name}">{value}</item>\n!1\n\t</style>\n</resources>\n!0',n=androme.lib.enumeration,i=androme.lib.constant,a=android.lib.constant,o=androme.lib.util,r=android.lib.util,d=androme.lib.dom;const s=new class extends androme.lib.base.Extension{constructor(t,n,a,o){super(t,n,a,o),this.documentRoot=!0,this.require(i.EXT_NAME.EXTERNAL,!0),this.require(e.MENU),this.require(e.COORDINATOR)}init(e){return!!(this.included(e)&&e.children.length>0)&&(Array.from(e.children).forEach(e=>{"NAV"!==e.tagName||o.includes(e.dataset.ext,i.EXT_NAME.EXTERNAL)||(e.dataset.ext=(o.hasValue(e.dataset.ext)?`${e.dataset.ext}, `:"")+i.EXT_NAME.EXTERNAL)}),this.application.elements.add(e),!0)}processNode(){const t=this.node,i=Object.assign({},this.options.self);if(d.findNestedExtension(t.element,e.MENU))o.overwriteDefault(i,"android","fitsSystemWindows","true"),this.createResourceTheme();else{const e=Object.assign({},this.options.navigationView);o.overwriteDefault(e,"android","layout_gravity",r.parseRTL("left",this.application.settings));const n=t.children[t.children.length-1];n.android("layout_gravity",e.android.layout_gravity),n.android("layout_height","match_parent"),n.auto=!1}const s=this.application.viewController.renderNodeStatic(a.VIEW_SUPPORT.DRAWER,t.depth,i,"match_parent","match_parent",t,!0);return t.documentRoot=!0,t.rendered=!0,t.nodeType=n.NODE_STANDARD.BLOCK,t.excludeResource|=n.NODE_RESOURCE.FONT_STYLE,{output:s,complete:!0}}beforeInsert(){const t=this.application,n=this.node;if(t.renderQueue[n.nodeId]){const e=t.cacheSession.find(e=>e.parent===n.parent&&e.controlName===a.VIEW_SUPPORT.COORDINATOR);e&&(t.renderQueue[e.nodeId]=t.renderQueue[n.nodeId],delete t.renderQueue[n.nodeId])}const s=o.optional(d.findNestedExtension(n.element,e.MENU),"dataset.layoutName"),u=o.optional(d.findNestedExtension(n.element,i.EXT_NAME.EXTERNAL),"dataset.layoutName"),l=Object.assign({},this.options.navigation);if(""!==s&&o.overwriteDefault(l,"app","menu",`@menu/${s}`),""!==u&&o.overwriteDefault(l,"app","headerLayout",`@layout/${u}`),""!==s||""!==u){o.overwriteDefault(l,"android","id",`${n.stringId}_navigation`),o.overwriteDefault(l,"android","fitsSystemWindows","true"),o.overwriteDefault(l,"android","layout_gravity",r.parseRTL("left",this.application.settings));const e=t.viewController.renderNodeStatic(a.VIEW_SUPPORT.NAVIGATION_VIEW,n.depth+1,l,"wrap_content","match_parent");t.addRenderQueue(""+n.id,[e])}}afterInsert(){const e=d.findNestedExtension(this.node.element,i.EXT_NAME.EXTERNAL);if(e){const t=d.getNodeFromElement(e);t&&!t.hasHeight&&t.android("layout_height","wrap_content")}}createResourceTheme(){const n=Object.assign({},this.options.resource);o.overwriteDefault(n,"","appTheme","AppTheme"),o.overwriteDefault(n,"","parentTheme","Theme.AppCompat.Light.NoActionBar");const i={0:[{appTheme:n.appTheme,parentTheme:n.parentTheme,1:[]}]};o.overwriteDefault(n,"output","path","res/values-v21"),o.overwriteDefault(n,"output","file",`${e.DRAWER}.xml`),this.application.resourceHandler.addTheme(t,i,n)}}(e.DRAWER,e.__FRAMEWORK);return androme&&androme.registerExtensionAsync(s),s}();
