!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.androme={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){this.wrapped=e}function i(e){var t,i;function r(t,i){try{var o=e[t](i),l=o.value,s=l instanceof n;Promise.resolve(s?l.wrapped:l).then(function(e){s?r("next",e):a(o.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?r(t.key,t.arg):i=null}this._invoke=function(e,n){return new Promise(function(a,o){var l={key:e,arg:n,resolve:a,reject:o,next:null};i?i=i.next=l:(t=i=l,r(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=c(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};function d(e,t){return p(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}(e,t)||v()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e){if(Array.isArray(e))return e}function m(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var y,b,E,x,T,A,w,k,I;!function(e){e[e.NONE=0]="NONE",e[e.CHROME=2]="CHROME",e[e.SAFARI=4]="SAFARI",e[e.EDGE=8]="EDGE"}(y||(y={})),function(e){e[e.UNIVERSAL=0]="UNIVERSAL",e[e.ANDROID=2]="ANDROID"}(b||(b={})),function(e){e[e.NONE=0]="NONE",e[e.INCLUDE=2]="INCLUDE",e[e.DOM_TRAVERSE=4]="DOM_TRAVERSE",e[e.EXTENSION=8]="EXTENSION",e[e.RENDER=16]="RENDER",e[e.ALL=30]="ALL"}(E||(E={})),function(e){e[e.NONE=0]="NONE",e[e.EXTENDABLE=2]="EXTENDABLE",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=8]="VERTICAL",e[e.ABSOLUTE=16]="ABSOLUTE",e[e.FLOAT=32]="FLOAT",e[e.SEGMENTED=64]="SEGMENTED",e[e.PERCENT=128]="PERCENT",e[e.TOP=256]="TOP",e[e.RIGHT=512]="RIGHT",e[e.BOTTOM=1024]="BOTTOM",e[e.LEFT=2048]="LEFT",e[e.SINGLE=4096]="SINGLE",e[e.MULTILINE=8192]="MULTILINE",e[e.SPACE=16384]="SPACE"}(x||(x={})),function(e){e[e.NONE=0]="NONE",e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.OPTION_ARRAY=32]="OPTION_ARRAY",e[e.IMAGE_SOURCE=64]="IMAGE_SOURCE",e[e.ASSET=120]="ASSET",e[e.ALL=126]="ALL"}(T||(T={})),function(e){e[e.NONE=0]="NONE",e[e.LAYOUT=2]="LAYOUT",e[e.ALIGNMENT=4]="ALIGNMENT",e[e.AUTOFIT=8]="AUTOFIT",e[e.OPTIMIZATION=16]="OPTIMIZATION",e[e.CUSTOMIZATION=32]="CUSTOMIZATION",e[e.ACCESSIBILITY=64]="ACCESSIBILITY",e[e.ALL=126]="ALL"}(A||(A={})),function(e){e[e.NONE=0]="NONE",e[e.CHECKBOX=1]="CHECKBOX",e[e.RADIO=2]="RADIO",e[e.EDIT=3]="EDIT",e[e.SELECT=4]="SELECT",e[e.RANGE=5]="RANGE",e[e.SVG=6]="SVG",e[e.TEXT=7]="TEXT",e[e.IMAGE=8]="IMAGE",e[e.BUTTON=9]="BUTTON",e[e.INLINE=10]="INLINE",e[e.LINE=11]="LINE",e[e.SPACE=12]="SPACE",e[e.BLOCK=13]="BLOCK",e[e.WEB_VIEW=14]="WEB_VIEW",e[e.FRAME=15]="FRAME",e[e.LINEAR=16]="LINEAR",e[e.RADIO_GROUP=17]="RADIO_GROUP",e[e.GRID=18]="GRID",e[e.RELATIVE=19]="RELATIVE",e[e.CONSTRAINT=20]="CONSTRAINT",e[e.SCROLL_HORIZONTAL=21]="SCROLL_HORIZONTAL",e[e.SCROLL_VERTICAL=22]="SCROLL_VERTICAL"}(w||(w={})),function(e){e[e.MARGIN_TOP=2]="MARGIN_TOP",e[e.MARGIN_RIGHT=4]="MARGIN_RIGHT",e[e.MARGIN_BOTTOM=8]="MARGIN_BOTTOM",e[e.MARGIN_LEFT=16]="MARGIN_LEFT",e[e.PADDING_TOP=32]="PADDING_TOP",e[e.PADDING_RIGHT=64]="PADDING_RIGHT",e[e.PADDING_BOTTOM=128]="PADDING_BOTTOM",e[e.PADDING_LEFT=256]="PADDING_LEFT",e[e.MARGIN=30]="MARGIN",e[e.MARGIN_VERTICAL=10]="MARGIN_VERTICAL",e[e.MARGIN_HORIZONTAL=20]="MARGIN_HORIZONTAL",e[e.PADDING=480]="PADDING",e[e.PADDING_VERTICAL=160]="PADDING_VERTICAL",e[e.PADDING_HORIZONTAL=320]="PADDING_HORIZONTAL"}(k||(k={})),function(e){e[e.NONE=0]="NONE",e[e.UNIT=2]="UNIT",e[e.AUTO=4]="AUTO",e[e.LEFT=8]="LEFT",e[e.BASELINE=16]="BASELINE",e[e.PERCENT=32]="PERCENT",e[e.ZERO=64]="ZERO"}(I||(I={}));var S=Object.freeze({get USER_AGENT(){return y},get APP_FRAMEWORK(){return b},get APP_SECTION(){return E},get NODE_ALIGNMENT(){return x},get NODE_RESOURCE(){return T},get NODE_PROCEDURE(){return A},get NODE_STANDARD(){return w},get BOX_STANDARD(){return k},get CSS_STANDARD(){return I}}),N=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","LI","MAIN","NAV","OL","OUTPUT","P","PRE","SECTION","TFOOT","TH","THEAD","TR","UL","VIDEO"],L=["A","ABBR","ACRONYM","B","BDO","BIG","BR","BUTTON","CITE","CODE","DFN","EM","I","IFRAME","IMG","INPUT","KBD","LABEL","MAP","OBJECT","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TT","U","VAR","PLAINTEXT"],R={EXTERNAL:"androme.external",ORIGIN:"androme.origin",ACCESSIBILITY:"androme.accessibility",CUSTOM:"androme.custom",GRID:"androme.grid",LIST:"androme.list",TABLE:"androme.table"},C=Object.freeze({MAP_ELEMENT:{INPUT:w.NONE,PLAINTEXT:w.TEXT,HR:w.LINE,SVG:w.SVG,IMG:w.IMAGE,SELECT:w.SELECT,RANGE:w.RANGE,TEXT:w.EDIT,PASSWORD:w.EDIT,NUMBER:w.EDIT,EMAIL:w.EDIT,SEARCH:w.EDIT,URL:w.EDIT,CHECKBOX:w.CHECKBOX,RADIO:w.RADIO,BUTTON:w.BUTTON,SUBMIT:w.BUTTON,RESET:w.BUTTON,TEXTAREA:w.EDIT,IFRAME:w.WEB_VIEW},BLOCK_ELEMENT:N,INLINE_ELEMENT:L,EXT_NAME:R}),M="ABCDEFGHIJKLMNOPQRSTUVWXYZ",O=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function _(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.sort(function(e,n){for(var r=0;r<i.length;r++){var a=B(e,n,i[r]);if(a&&a[0]!==a[1])return 0===t?a[0]>a[1]?1:-1:a[0]<a[1]?1:-1}return 0})}function B(e,t,n){var i=n.split("."),r=e,a=t,o=!0,l=!1,s=void 0;try{for(var u,h=i[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=u.value;if(null==r[c]||null==a[c])return(null!=r[c]||null!=a[c])&&(null!=r[c]?[1,0]:[0,1]);r=r[c],a=a[c]}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}return isNaN(parseInt(r))&&isNaN(parseInt(a))?[r,a]:[P(r),P(a)]}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=(e=e.replace(RegExp("^".concat(t,"+")),"")).match(RegExp("(".concat(t,"{1}[a-z]{1})"),"g"));if(n){var i=!0,r=!1,a=void 0;try{for(var o,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=o.value;e=e.replace(s,s[1].toUpperCase())}}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}return e}function F(e){return e?e.replace(/[^\w]/g,"_").trim():""}function G(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function P(e){return e&&parseInt(e)||0}function H(e){return e&&parseFloat(e)||0}function V(e,t){if(oe(e)){if(Y(e))return"".concat(Math.round(e),"px");var n=parseFloat(e);if(!isNaN(n)){var i=e.match(/(pt|em)/);if(i)switch(i[0]){case"pt":n*=4/3;break;case"em":n*=P(t)||16}return"".concat(n,"px")}}return"0px"}function z(e){return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\u00A0/g,"&#160;")).replace(/\u2002/g,"&#8194;")).replace(/\u2003/g,"&#8195;")).replace(/\u2009/g,"&#8201;")).replace(/\u200C/g,"&#8204;")).replace(/\u200D/g,"&#8205;")).replace(/\u200E/g,"&#8206;")).replace(/\u200F/g,"&#8207;")}function U(e){return"".concat(isNaN(e=parseFloat(e))?0:Math.round(e),"px")}function X(e){for(var t="";e>=M.length;){var n=Math.floor(e/M.length);n>1&&n<=M.length?(t+=M.charAt(n-1),e-=n*M.length):n>M.length&&(t+=X(n*M.length),e-=n*M.length);var i=e%M.length;t+=M.charAt(i),e-=i+M.length}return t=M.charAt(e)+t}function W(e){for(var t=(""+e).split(""),n="",i=3;i--;)n=(O[parseInt(t.pop()||"")+10*i]||"")+n;return"M".repeat(parseInt(t.join("")))+n}function j(e,t){return(e&t)===t}function Y(e){return/^-?[0-9]+(\.[0-9]+)?$/.test((""+e).trim())}function Z(e){return"string"==typeof e&&""!==e}function q(e){return!!Z(e)&&/^-?[0-9\.]+(px|pt|em)$/.test(e.trim())}function K(e){return/^[0-9]+(\.[0-9]+)?%$/.test(e)}function Q(e,t){return!!e&&e.split(arguments.length>2&&void 0!==arguments[2]?arguments[2]:",").map(function(e){return e.trim()}).includes(t)}function $(e){if(!/^\w+:\/\//.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n,i=[],r=0;e.split("/").forEach(function(e){".."===e?r++:i.push(e)}),(n=t=t.slice(0,Math.max(t.length-r,0))).push.apply(n,i),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function J(e){return e?e.trim():""}function ee(e,t){return e?te(ne(e,t),t):""}function te(e,t){return e.replace(RegExp("^".concat(t,"+"),"g"),"")}function ne(e,t){return e.replace(RegExp("".concat(t,"+$"),"g"),"")}function ie(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t").repeat(e)}function re(e){return e.substring(e.lastIndexOf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/")+1)}function ae(e,n){var i=[];if("object"===t(n))for(var r in n){var a=n[r];oe(e[a])&&i.push([a,e[a]])}else{var o=function(e){return e===n};for(var l in/^\*.+\*$/.test(n)?o=function(e){return-1!==e.indexOf(n.replace(/\*/g,""))}:/^\*/.test(n)?o=function(e){return e.endsWith(n.replace(/\*/,""))}:/\*$/.test(n)&&(o=function(e){return e.startsWith(n.replace(/\*/,""))}),e)o(l)&&i.push([l,e[l]])}return i}function oe(e){return null!=e&&""!==(""+e).trim()}function le(e,t){return e===t||Math.floor(e)===Math.floor(t)||Math.ceil(e)===Math.ceil(t)||Math.ceil(e)===Math.floor(t)||Math.floor(e)===Math.ceil(t)}function se(e,t){var n=[],i=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;t(u)?n.push(u):i.push(u)}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return[n,i]}function ue(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return _.apply(void 0,[e,0].concat(n))}function he(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return _.apply(void 0,[e,1].concat(n))}var ce=Object.freeze({formatString:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)e=e.replace("{".concat(t,"}"),t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);return e},camelToLowerCase:function(e){var t=(e=e.charAt(0).toLowerCase()+e.substring(1)).match(/([a-z]{1}[A-Z]{1})/g);if(t){var n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;e=e.replace(l,"".concat(l[0],"_").concat(l[1].toLowerCase()))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}return e},convertCamelCase:D,convertWord:F,capitalize:G,convertInt:P,convertFloat:H,convertPX:V,replaceWhiteSpace:z,formatPX:U,convertAlpha:X,convertRoman:W,convertEnum:function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;r++){var a=i[r];if(e===t[a])return n[a]}return""},hasBit:j,isNumber:Y,isString:Z,isUnit:q,isPercent:K,includes:Q,optional:function(e,n,i){var r=!1,a=null;if("object"===t(e)){a=e;var o=n.split("."),l=0;do{a=null!=a[o[l]]?a[o[l]]:null}while(null!=a&&++l<o.length&&"string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a);r=null!=a&&l===o.length}switch(i){case"object":return r?a:null;case"number":return r&&!isNaN(parseInt(a))?parseInt(a):0;case"boolean":return r&&!0===a;default:return r?""+a:""}},resolvePath:$,trimNull:J,trimString:ee,trimStart:te,trimEnd:ne,repeat:ie,indexOf:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){var a=e.indexOf(n[r]);if(-1!==a)return a}return-1},lastIndexOf:re,sameValue:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var a=0;a<i.length;a++){var o=B(e,t,i[a]);if(!o||o[0]!==o[1])return!1}return!0},searchObject:ae,hasValue:oe,withinRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t>=e-n&&t<=e+n},withinFraction:le,overwriteDefault:function(e,t,n,i){""!==t?(null==e[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=i)):null==e[n]&&(e[n]=i)},partition:se,sortAsc:ue,sortDesc:he});function fe(){return{top:0,left:0,right:0,bottom:0}}function de(){return Object.assign({width:0,height:0},{top:0,left:0,right:0,bottom:0})}function ge(e,t,n){e&&(e["__".concat(t)]=n)}function pe(e,t){return e?e["__".concat(t)]:null}function me(e){if(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){delete e["__".concat(n[r])]}}}function ve(e){return pe(e,"node")}function ye(e){var t=document.createRange();t.selectNodeContents(e);var n=Array.from(t.getClientRects()).filter(function(e){return!(0===Math.round(e.width)&&le(e.left,e.right))}),i=de(),r=!1;if(n.length>0){i=be(n[0]);for(var a=new Set([i.top]),o=new Set([i.bottom]),l=1;l<n.length;l++){var s=n[l];a.add(s.top),o.add(s.bottom),i.width+=s.width,i.right=Math.max(s.right,i.right),i.height=Math.max(s.height,i.height)}a.size>1&&o.size>1&&(i.top=Math.min.apply(null,Array.from(a)),i.bottom=Math.max.apply(null,Array.from(o)),n[n.length-1].top>=n[0].bottom&&e.textContent&&(""!==e.textContent.trim()||/^\s*\n/.test(e.textContent))&&(r=!0))}return[i,r]}function be(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function Ee(e){if(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var t=ve(e),n=pe(e,"style");if(n)return n;if(t){if(t.style)return t.style;if(t.plainText)return t.styleMap}}if(e.nodeName&&"#"!==e.nodeName.charAt(0)){var i=getComputedStyle(e);return ge(e,"style",i),i}}return{}}function xe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},r=ve(e),a=Ee(e);return["Top","Left","Right","Bottom"].forEach(function(e){var o=0;["padding","margin"].forEach(function(n){var l=n+e,s=P((r||a)[l]);(t||0!==s)&&(i[l]=s),o+=s}),n&&(i["padding".concat(e)]=o,t?i["margin".concat(e)]=0:delete i["margin".concat(e)])}),i}function Te(e){var t=e.match(/^url\("?(.*?)"?\)$/);return t?$(t[1]):""}function Ae(e,t,n,i){for(var r="",a=e.parentElement;a&&(null==i||!i.includes(a.tagName))&&(("inherit"===(r=Ee(a)[t]||"")||n&&n.some(function(e){return-1!==r.indexOf(e)}))&&(r=""),a!==document.body&&!r);)a=a.parentElement;return r}function we(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return!("#"===e.nodeName.charAt(0)||!i.includes(Ee(e)[t]))||!!e.parentElement&&i.includes(Ee(e.parentElement)[t])}function ke(e,t){if(e instanceof HTMLElement&&e.parentElement){var n=ve(e),i=Ee(e);return i&&i[t]===Ee(e.parentElement)[t]&&(!n||!n.styleMap[t])}return!1}function Ie(e,t){return e.getAttribute(t)||Ee(e)[D(t)]||""}function Se(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!1,r=-1;function a(e){return r++===t||e.some(function(e){if("#text"===e.nodeName){if(Ne(e,n)||we(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return i=!0,!0}else if(e instanceof HTMLElement&&e.childNodes.length>0)return a(Array.from(e.childNodes));return!1})}return"#text"===e.nodeName?(t=0,a([e])):a(Array.from(e.childNodes)),i}function Ne(e){if(e&&"#text"===e.nodeName&&e.textContent){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){for(var t=e.textContent,n=!1,i=0;i<t.length;i++)switch(t.charCodeAt(i)){case 9:case 10:case 13:case 32:continue;default:n=!0}return n&&""!==t}return""!==e.textContent.trim()}return!1}function Le(e){if(e){var t=ve(e),n="#text"===e.nodeName,i=t?t.css("whiteSpace"):Ee(e).whiteSpace||"";return e instanceof HTMLElement&&e.children.length>0&&Array.from(e.children).some(function(e){return"BR"===e.tagName})||/\n/.test(e.textContent||"")&&(["pre","pre-wrap"].includes(i)||n&&we(e,"whiteSpace","pre","pre-wrap"))}return!1}function Re(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=ve(e);return!!n&&("BR"===n.tagName||t&&n.block&&(n.excluded||""===n.textContent.trim()))}function Ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||e.parentElement===t.parentElement){var r=t.parentElement;if(r){var a=Array.from(r.childNodes),o=e?a.findIndex(function(t){return t===e}):0,l=a.findIndex(function(e){return e===t});if(-1!==o&&-1!==l&&o!==l){var s=a.slice(Math.min(o,l)+1,Math.max(o,l));return s=s.filter(i?function(e){return"#comment"!==e.nodeName}:function(e){return"#"!==e.nodeName.charAt(0)||Ne(e)}),n&&(s=s.filter(function(e){return ve(e)})),s}}}return[]}function Me(e){return e instanceof HTMLElement||e instanceof SVGSVGElement}function Oe(e){if(!(pe(e,"inlineSupport")||e.parentElement instanceof SVGSVGElement)){if(Me(e)){if("function"==typeof e.getBoundingClientRect){var t=e.getBoundingClientRect();if(0!==t.width&&0!==t.height||oe(e.dataset.ext)||"none"!==Ee(e).clear)return!0;for(var n=e.parentElement,i=!0;n;){if("none"===Ee(n).display){i=!1;break}n=n.parentElement}if(i&&e.children.length>0)return Array.from(e.children).some(function(e){var t=Ee(e),n=t.cssFloat,i=t.position;return"static"!==i&&"initial"!==i||"left"===n||"right"===n})}return!1}return Ne(e)}return!1}var _e=Object.freeze({getBoxRect:fe,getClientRect:de,getBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},setElementCache:ge,getElementCache:pe,deleteElementCache:me,getNodeFromElement:ve,getRangeClientRect:ye,assignBounds:be,getStyle:Ee,getBoxSpacing:xe,cssResolveUrl:Te,cssInherit:Ae,cssParent:we,cssFromParent:ke,cssAttribute:Ie,hasFreeFormText:Se,isPlainText:Ne,hasLineBreak:Le,isLineBreak:Re,getElementsBetweenSiblings:Ce,isStyleElement:Me,isElementVisible:Oe,findNestedExtension:function(e,t){return e instanceof HTMLElement?Array.from(e.children).find(function(e){return Q(e.dataset.ext,t)}):null}}),Be=function(){function e(t,n){r(this,e),this.id=t,this.styleMap={},this.nodeType=0,this.alignmentType=0,this.depth=-1,this.siblingIndex=Number.MAX_VALUE,this.renderIndex=Number.MAX_VALUE,this.renderPosition=-1,this.excludeSection=0,this.excludeProcedure=0,this.excludeResource=0,this.renderExtension=new Set,this.documentRoot=!1,this.auto=!0,this.visible=!0,this.excluded=!1,this.rendered=!1,this._data={},this._initialized=!1,this.initial={depth:-1,children:[],styleMap:{},bounds:de()},n&&(this._element=n,this.init())}return o(e,[{key:"init",value:function(){if(!this._initialized){if(this.styleElement){for(var e=this._element,t=pe(e,"styleMap")||{},n=Array.from(e.style),i=0;i<n.length;i++){var r=n[i];t[D(r)]=e.style[r]}this.style=pe(e,"style")||getComputedStyle(e),this.styleMap=Object.assign({},t),Object.assign(this.initial.styleMap,t)}0!==this.id&&ge(this._element,"node",this),this._initialized=!0}}},{key:"is",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++){if(this.nodeType===t[i])return!0}return!1}},{key:"of",value:function(e){if(this.nodeType===e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){if(this.hasAlign(n[r]))return!0}}return!1}},{key:"attr",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r="_".concat(e||"_");if(oe(n)){if(null==this[r]&&(this._namespaces.add(e),this[r]={}),!i&&null!=this[r][t])return"";this[r][t]=""+n}return this[r][t]||""}},{key:"get",value:function(e){return this["_".concat(e||"_")]||{}}},{key:"delete",value:function(e){var t="_".concat(e||"_");if(this[t]){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=i[a];if(-1!==o.indexOf("*")){var l=!0,s=!1,u=void 0;try{for(var h,c=ae(this[t],o)[Symbol.iterator]();!(l=(h=c.next()).done);l=!0){var f=d(h.value,1);delete this[t][f[0]]}}catch(e){s=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw u}}}else delete this[t][o]}}}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in e){var i=e[n];if("object"===t(i)){for(var r in i)this.attr(n,r,i[r]);delete e[n]}}}},{key:"each",value:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.renderChildren:this.children).forEach(e),this}},{key:"render",value:function(e){this.renderParent=e,this.renderDepth=this.documentRoot||this===e||oe(e.dataset.target)?0:e.renderDepth+1,this.rendered=!0}},{key:"hide",value:function(){this.rendered=!0,this.visible=!1}},{key:"data",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return oe(n)&&(null==this._data[e]&&(this._data[e]={}),(i||null==this._data[e][t])&&(this._data[e][t]=n)),null!=this._data[e]?this._data[e][t]:null}},{key:"ascend",value:function(){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=[],n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"parent":"documentParent",i=this[n],r=-1;i&&0!==i.id&&!t.includes(i)&&(t.push(i),++r!==e);)i=i[n];return t}},{key:"cascade",value:function(){function e(t){var n=g(t.children),i=!0,r=!1,a=void 0;try{for(var o,l=t.children[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){n.push.apply(n,g(e(o.value)))}}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}return e(this)}},{key:"inherit",value:function(e){var n=this;if(this._initialized){for(var i=function(e,t){for(var n in e)null==e[n]&&(t[n]=e[n])},r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];for(var l=0;l<a.length;l++){switch(a[l]){case"initial":Object.assign(this.initial,e.initial);break;case"base":this.style=e.style;case"dimensions":this.bounds=be(e.bounds),this.linear=be(e.linear),this.box=be(e.box);break;case"data":for(var s in this._data)for(var u in this._data[s]){var h=this._data[s][u];if("object"===t(h)&&!0===h.inherit){var c=e.data(s,u);if(c)for(var f in h)switch(t(h[f])){case"number":c[f]+=h[f];break;case"boolean":!0===h[f]&&(c[f]=!0);break;default:c[f]=h[f]}else e.data(s,u,h);delete this._data[s][u]}}break;case"alignment":["position","display","verticalAlign","cssFloat","clear"].forEach(function(t){n.styleMap[t]=e.css(t),n.initial.styleMap[t]=e.cssInitial(t)}),"auto"===e.css("marginLeft")&&(this.styleMap.marginLeft="auto",this.initial.styleMap.marginLeft="auto"),"auto"===e.css("marginRight")&&(this.styleMap.marginRight="auto",this.initial.styleMap.marginRight="auto");break;case"style":var d={whiteSpace:e.css("whiteSpace")};for(var g in e.style)if(g.startsWith("font")||g.startsWith("color")){var p=D(g);d[p]=e.style[p]}this.css(d);break;case"styleMap":i(e.styleMap,this.styleMap)}}}}},{key:"alignedVertically",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.documentParent.baseElement===e.documentParent.baseElement){var i=this.documentParent.has("width",I.UNIT)?this.documentParent.toInt("width"):this.documentParent.box.width;return this.lineBreak||e.lineBreak||e.blockStatic||e.bounds&&e.bounds.width>i&&(!e.textElement||"nowrap"===e.css("whiteSpace"))||"left"===e.float&&this.autoMarginRight||"right"===e.float&&this.autoMarginLeft||!e.floating&&(!this.inlineElement&&!this.floating||this.blockStatic)||e.plainText&&e.multiLine&&this.parent&&!this.parent.is(w.RELATIVE)||this.blockStatic&&(!e.inlineElement||t.has(e)&&e.floating)||!n&&t.has(this)||!n&&this.floating&&e.floating&&this.linear.top>=e.linear.bottom}return!1}},{key:"intersect",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear,n=e.top>t.top&&e.top<t.bottom,i=Math.floor(e.right)>Math.ceil(t.left)&&e.right<t.right,r=e.left>t.left&&e.left<t.right;return n&&(r||i)||Math.floor(e.bottom)>Math.ceil(t.top)&&e.bottom<t.bottom&&(r||i)}},{key:"intersectX",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=this[t]||this.linear;return e.top>=n.top&&e.top<n.bottom||e.bottom>n.top&&e.bottom<=n.bottom||n.top>=e.top&&this[t].bottom<=e.bottom||e.top>=n.top&&e.bottom<=n.bottom}},{key:"intersectY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return e.left>=t.left&&e.left<t.right||e.right>t.left&&e.right<=t.right||t.left>=e.left&&t.right<=e.right||e.left>=t.left&&e.right<=t.right}},{key:"withinX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.top>=e.top&&t.bottom<=e.bottom}},{key:"withinY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.left>=e.left&&t.right<=e.right}},{key:"outsideX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.right<e.left||t.left>e.right}},{key:"outsideY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.bottom<e.top||t.top>e.bottom}},{key:"css",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"object"===t(e)?(Object.assign(this.styleMap,e),""):(2===arguments.length&&(this.styleMap[e]=oe(n)?n:""),this.styleMap[e]||this.style&&this.style[e]||"")}},{key:"cssInitial",value:function(e){return this.initial.styleMap[e]||(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.css(e):"")}},{key:"cssParent",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="";if(this.baseElement)for(var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this:ve(this.baseElement.parentElement);i;){if((n=i.initial.styleMap[e]||"")||i.documentBody){t&&!i.visible&&(n="");break}i=ve(i.baseElement.parentElement)}return n}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=(n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e];if(oe(i))switch(i){case"0px":if(j(t,I.ZERO))return!0;case"left":if(j(t,I.LEFT))return!0;case"baseline":if(j(t,I.BASELINE))return!0;case"auto":if(j(t,I.AUTO))return!0;case"none":case"initial":case"normal":case"transparent":case"rgba(0, 0, 0, 0)":return!1;default:if(n&&null!=n.not)if(Array.isArray(n.not)){var r=!0,a=!1,o=void 0;try{for(var l,s=n.not[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){if(i===l.value)return!1}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}else if(i===n.not)return!1;var u=0===t;return j(t,I.UNIT)&&q(i)&&(u=!0),j(t,I.PERCENT)&&K(i)&&(u=!0),j(t,I.AUTO)&&(u=!1),u}return!1}},{key:"isSet",value:function(e,t){return!(!this[e]||null==this[e][t])&&oe(this[e][t])}},{key:"hasBit",value:function(e,t){return null!=this[e]&&j(this[e],t)}},{key:"toInt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return parseInt((n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e])||t}},{key:"hasAlign",value:function(e){return j(this.alignmentType,e)}},{key:"setExclusions",value:function(){var e=this;this.styleElement&&[["excludeSection",E],["excludeProcedure",A],["excludeResource",T]].forEach(function(t){var n=e.dataset[t[0]]||"";e._element.parentElement&&(n+="|"+J(e._element.parentElement.dataset["".concat(t[0],"Child")])),n.split("|").map(function(e){return e.toUpperCase().trim()}).forEach(function(n){null!=t[1][n]&&(e[t[0]]|=t[1][n])})})}},{key:"setBounds",value:function(){if(this._element&&!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))if(this.styleElement)this.bounds=be(this._element.getBoundingClientRect());else{var e=ye(this._element);e[0]&&(this.bounds=e[0])}this.bounds&&(0===this.initial.bounds.width&&0===this.initial.bounds.height&&Object.assign(this.initial.bounds,be(this.bounds)),this.linear={top:this.bounds.top-(this.marginTop>0?this.marginTop:0),right:this.bounds.right+this.marginRight,bottom:this.bounds.bottom+this.marginBottom,left:this.bounds.left-(this.marginLeft>0?this.marginLeft:0),width:0,height:0},this.box={top:this.bounds.top+(this.paddingTop+this.borderTopWidth),right:this.bounds.right-(this.paddingRight+this.borderRightWidth),bottom:this.bounds.bottom-(this.paddingBottom+this.borderBottomWidth),left:this.bounds.left+(this.paddingLeft+this.borderLeftWidth),width:0,height:0},this.setDimensions())}},{key:"setDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["linear","box"],t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,l=this[o];if(l.width=this.bounds.width,!this.plainText)switch(o){case"linear":l.width+=(this.marginLeft>0?this.marginLeft:0)+this.marginRight;break;case"box":l.width-=this.paddingLeft+this.borderLeftWidth+this.paddingRight+this.borderRightWidth}l.height=l.bottom-l.top,null==this.initial[o]&&(this.initial[o]=be(l))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setMultiLine",value:function(){if(this._element)switch(this._multiLine=!1,this._element.tagName){case"IMG":case"INPUT":case"BUTTON":case"TEXTAREA":case"HR":case"IFRAME":return;default:if(this.textElement){var e=d(ye(this._element),2),t=e[0],n=e[1];this.plainText?(t?(this.bounds=t,this.setBounds(!0)):this.hide(),this.multiLine=n):this.hasWidth||!this.blockStatic&&"table-cell"!==this.display&&!Le(this._element)||(this.multiLine=n)}}else this._multiLine=!1}},{key:"getParentElementAsNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this._element){var n=ve(this._element.parentElement);if(!this.pageflow){for(var i=!1,r=null,a=null,o=!1;n&&0!==n.id;){if(a||"absolute"!==this.position){if(this.withinX(n.box)&&this.withinY(n.box)||r&&(this.linear.top>=n.linear.top&&this.linear.top<r.linear.top||this.linear.right<=n.linear.right&&this.linear.right>r.linear.right||this.linear.bottom<=n.linear.bottom&&this.linear.bottom>r.linear.bottom||this.linear.left>=n.linear.left&&this.linear.left<r.linear.left)){i=!0;break}}else if(!["static","initial"].includes(n.position)){var l=P(this.top),s=P(this.left);if(l>=0&&s>=0||!e||e&&Math.abs(l)<=n.marginTop&&Math.abs(s)<=n.marginLeft||this.imageElement){if(!e||n.documentRoot||0===l||0===s||null!=this.bottom||null!=this.right||!this.outsideX(n.linear)&&!this.outsideY(n.linear)){i=!0;break}o=!0}a=n}r=n,n=ve(n.element.parentElement)}i||(n=o&&t?t:a)}return n}return null}},{key:"remove",value:function(e){for(var t=0;t<this.children.length;t++)if(e===this.children[t]){this.children.splice(t,1);break}}},{key:"appendRendered",value:function(e){-1===this.renderChildren.indexOf(e)&&(e.renderIndex=this.renderChildren.length,this.renderChildren.push(e))}},{key:"resetBox",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];j(e,k.MARGIN)&&i.push("marginTop","marginRight","marginBottom","marginLeft"),j(e,k.PADDING)&&i.push("paddingTop","paddingRight","paddingBottom","paddingLeft");for(var r=0;r<i.length;r++){var a=i[r];this._boxReset[a]=1,t&&t.modifyBox(a,this[a],n)}}},{key:"removeElement",value:function(){this._element&&(null==this._nodeName&&(this._nodeName=this.nodeName),null==this._tagName&&(this._tagName=this.tagName),this._baseElement=this._element,this._element=void 0)}},{key:"previousSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;if(this._element)i=this._element.previousSibling;else if(this.initial.children.length>0){var r=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});i=r.length>0?r[0].element.previousSibling:null}for(;i;){var a=ve(i);if(a&&(!a.lineBreak||t)&&(!a.excluded||n)&&(e&&a.pageflow||!e&&a.siblingflow))return a;i=i.previousSibling}return null}},{key:"nextSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;if(this._element)i=this._element.nextSibling;else if(this.initial.children.length>0){var r=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});i=r.length>0?r[0].element.nextSibling:null}for(;i;){var a=ve(i);if(a&&(!a.lineBreak||t)&&(!a.excluded||n)&&(e&&a.pageflow||!e&&a.siblingflow))return a;i=i.nextSibling}return null}},{key:"actualLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&!this.companion.visible&&this.companion[e]?Math.min(this[e].left,this.companion[e].left):this[e].left}},{key:"actualRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&!this.companion.visible&&this.companion[e]?Math.max(this[e].right,this.companion[e].right):this[e].right}},{key:"boxAttribute",value:function(e,t){var n=e+t;if(this.styleElement){var i=this.css(n);return K(i)?this.style[n]&&this.style[n]!==i?P(this.style[n]):this.documentParent.box["Left"===t||"Right"===t?"width":"height"]*(P(i)/100):P(i)}return P(this.css(n))}},{key:"getOverflow",value:function(){if(null==this._overflow&&(this._overflow=0,this.styleElement)){var e=[this.css("overflow"),this.css("overflowX"),this.css("overflowY")],t=e[0],n=e[1],i=e[2];this.toInt("width")>0&&("scroll"===t||"scroll"===n||"auto"===n&&this._element.clientWidth!==this._element.scrollWidth)&&(this._overflow|=x.HORIZONTAL),this.toInt("height")>0&&("scroll"===t||"scroll"===i||"auto"===i&&this._element.clientHeight!==this._element.scrollHeight)&&(this._overflow|=x.VERTICAL)}return this._overflow}},{key:"parent",set:function(e){e!==this._parent&&(this._parent&&this._parent.remove(this),this._parent=e),e?(e.children.includes(this)||(e.children.push(this),e.styleElement||-1===this.siblingIndex||(e.siblingIndex=Math.min(this.siblingIndex,e.siblingIndex))),-1===this.initial.depth&&(this.initial.depth=e.depth+1),this.depth=e.depth+1):this.depth=-1},get:function(){return this._parent}},{key:"nodeName",set:function(e){this._nodeName=e},get:function(){return this._nodeName||(this.styleElement?("INPUT"===this.tagName?this._element.type:this.tagName).toUpperCase():"")}},{key:"element",set:function(e){this._element=e},get:function(){return this._element||{dataset:{},style:{}}}},{key:"baseElement",get:function(){return this._baseElement||this.element}},{key:"tagName",get:function(){return(this._tagName||this._element&&this._element.tagName||"").toUpperCase()}},{key:"htmlElement",get:function(){return this._element instanceof HTMLElement}},{key:"domElement",get:function(){return this.styleElement||this.plainText}},{key:"styleElement",get:function(){return this._element instanceof HTMLElement||this.svgElement}},{key:"documentBody",get:function(){return this._element===document.body}},{key:"renderAs",set:function(e){this.rendered||e.rendered||(this._renderAs=e)},get:function(){return this._renderAs}},{key:"renderDepth",set:function(e){this._renderDepth=e},get:function(){return null==this._renderDepth&&(this.documentRoot?this._renderDepth=0:this.parent&&(this._renderDepth=this.parent.renderDepth+1)),this._renderDepth||0}},{key:"dataset",get:function(){return this._element instanceof HTMLElement?this._element.dataset:{}}},{key:"extension",get:function(){return this.dataset.ext?this.dataset.ext.split(",")[0].trim():""}},{key:"flex",get:function(){var e=this.style;return e?{enabled:-1!==e.display.indexOf("flex"),direction:e.flexDirection,basis:e.flexBasis,grow:P(e.flexGrow),shrink:P(e.flexShrink),wrap:e.flexWrap,alignSelf:!this.has("alignSelf")&&this.documentParent.has("alignItems")?this.documentParent.css("alignItems"):e.alignSelf,justifyContent:e.justifyContent,order:P(e.order)}:{enabled:!1}}},{key:"viewWidth",get:function(){return this.inlineStatic||this.has("width",I.PERCENT)?0:this.toInt("width")||this.toInt("minWidth")}},{key:"viewHeight",get:function(){return this.inlineStatic||this.has("height",I.PERCENT)?0:this.toInt("height")||this.toInt("minHeight")}},{key:"hasWidth",get:function(){return!this.inlineStatic&&(this.has("width",I.UNIT|I.PERCENT,{map:"initial",not:["0px","0%"]})||this.toInt("minWidth")>0)}},{key:"hasHeight",get:function(){return!this.inlineStatic&&(this.has("height",I.UNIT|I.PERCENT,{map:"initial",not:["0px","0%"]})||this.toInt("minHeight")>0)}},{key:"lineHeight",get:function(){if(this.rendered){if(null==this._lineHeight&&(this._lineHeight=0,0===this.children.length&&!this.renderParent.linearHorizontal)){var e=this.toInt("lineHeight");this._lineHeight=this.inlineElement?e||this.documentParent.toInt("lineHeight"):e}return this._lineHeight}return 0}},{key:"display",get:function(){return this.css("display")}},{key:"position",get:function(){return this.css("position")}},{key:"top",get:function(){var e=this.styleMap.top;return e&&"auto"!==e?P(e):null}},{key:"right",get:function(){var e=this.styleMap.right;return e&&"auto"!==e?P(e):null}},{key:"bottom",get:function(){var e=this.styleMap.bottom;return e&&"auto"!==e?P(e):null}},{key:"left",get:function(){var e=this.styleMap.left;return e&&"auto"!==e?P(e):null}},{key:"marginTop",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Top")}},{key:"marginRight",get:function(){return this.boxAttribute("margin","Right")}},{key:"marginBottom",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Bottom")}},{key:"marginLeft",get:function(){return this.boxAttribute("margin","Left")}},{key:"borderTopWidth",get:function(){return"none"!==this.css("borderTopStyle")?P(this.css("borderTopWidth")):0}},{key:"borderRightWidth",get:function(){return"none"!==this.css("borderRightStyle")?P(this.css("borderRightWidth")):0}},{key:"borderBottomWidth",get:function(){return"none"!==this.css("borderBottomStyle")?P(this.css("borderBottomWidth")):0}},{key:"borderLeftWidth",get:function(){return"none"!==this.css("borderLeftStyle")?P(this.css("borderLeftWidth")):0}},{key:"paddingTop",get:function(){return this.boxAttribute("padding","Top")}},{key:"paddingRight",get:function(){return this.boxAttribute("padding","Right")}},{key:"paddingBottom",get:function(){return this.boxAttribute("padding","Bottom")}},{key:"paddingLeft",get:function(){return this.boxAttribute("padding","Left")}},{key:"pageflow",set:function(e){this._pageflow=e},get:function(){if(null==this._pageflow){var e=this.position;return"static"===e||"initial"===e||"relative"===e||this.alignOrigin}return this._pageflow}},{key:"siblingflow",get:function(){var e=this.position;return!("absolute"===e||"fixed"===e)}},{key:"inline",get:function(){var e=this.display;return"inline"===e||"initial"===e&&L.includes(this.tagName)}},{key:"inlineElement",get:function(){var e=this.position,t=this.display;return this.inline||-1!==t.indexOf("inline")||"table-cell"===t||this.floating||("absolute"===e||"fixed"===e)&&this.alignOrigin}},{key:"inlineStatic",get:function(){return this.inline&&!this.floating&&!this.imageElement}},{key:"inlineText",get:function(){if(null==this._inlineText)switch(this.tagName){case"INPUT":case"BUTTON":case"IMG":case"SELECT":case"TEXTAREA":this._inlineText=!1;break;default:this._inlineText=this.htmlElement&&Se(this._element)&&(0===this.children.length||this.children.every(function(e){return!!pe(e.element,"inlineSupport")}))&&(0===this._element.childNodes.length||!Array.from(this._element.childNodes).some(function(e){var t=ve(e);return!(!t||t.lineBreak||t.excluded&&t.visible)}))}return this._inlineText}},{key:"plainText",get:function(){return"PLAINTEXT"===this._nodeName}},{key:"imageElement",get:function(){return"IMG"===this.tagName}},{key:"svgElement",get:function(){return"SVG"===this.tagName}},{key:"imageOrSvgElement",get:function(){return this.imageElement||this.svgElement}},{key:"lineBreak",get:function(){return"BR"===this.tagName}},{key:"textElement",get:function(){return this.plainText||this.inlineText}},{key:"block",get:function(){var e=this.display;return"block"===e||"list-item"===e||"initial"===e&&N.includes(this.tagName)}},{key:"blockStatic",get:function(){return this.block&&this.siblingflow&&(!this.floating||"100%"===this.cssInitial("width"))}},{key:"alignOrigin",get:function(){return null==this.top&&null==this.right&&null==this.bottom&&null==this.left}},{key:"alignNegative",get:function(){return this.toInt("top")<0||this.toInt("left")<0}},{key:"autoMargin",get:function(){return this.blockStatic&&("auto"===this.initial.styleMap.marginLeft||"auto"===this.initial.styleMap.marginRight)}},{key:"autoMarginLeft",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"!==this.initial.styleMap.marginRight}},{key:"autoMarginRight",get:function(){return this.blockStatic&&"auto"!==this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginHorizontal",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginVertical",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginTop&&"auto"===this.initial.styleMap.marginBottom}},{key:"floating",get:function(){var e=this.css("cssFloat");return"absolute"!==this.position&&("left"===e||"right"===e)}},{key:"float",get:function(){return this.floating?this.css("cssFloat"):"none"}},{key:"textContent",get:function(){if(this._element){if(this._element instanceof HTMLElement)return this._element.innerText||this._element.innerHTML;if("#text"===this._element.nodeName)return this._element.textContent||""}return""}},{key:"overflowX",get:function(){return j(this.getOverflow(),x.HORIZONTAL)}},{key:"overflowY",get:function(){return j(this.getOverflow(),x.VERTICAL)}},{key:"baseline",get:function(){var e=this.css("verticalAlign");return("baseline"===e||"initial"===e||"unset"===e)&&this.siblingflow}},{key:"baselineInside",get:function(){return this.nodes.length>0?this.nodes.every(function(e){return e.baseline}):this.baseline}},{key:"multiLine",set:function(e){this._multiLine=e},get:function(){return null==this._multiLine&&this.setMultiLine(),this._multiLine}},{key:"preserveWhiteSpace",get:function(){var e=this.css("whiteSpace");return"pre"===e||"pre-wrap"===e}},{key:"actualHeight",get:function(){return this.plainText?this.bounds.bottom-this.bounds.top:this.bounds.height}},{key:"singleChild",get:function(){return this.rendered?1===this.renderParent.length:1===this.parent.length}},{key:"dir",get:function(){switch(this.css("direction")){case"unset":case"inherit":var e=this.documentParent;do{var t=e.dir;if(""!==t)return t;e=e.documentParent}while(0!==e.id);return"";case"rtl":return"rtl";default:return"ltr"}}},{key:"nodes",get:function(){return this.rendered?this.renderChildren:this.children}},{key:"length",get:function(){return this.nodes.length}},{key:"previousElementSibling",get:function(){for(var e=this.baseElement.previousSibling;e;){if(Ne(e)||e instanceof HTMLElement||"BR"===e.tagName)return e;e=e.previousSibling}return null}},{key:"nextElementSibling",get:function(){for(var e=this.baseElement.nextSibling;e;){if(Ne(e)||e instanceof HTMLElement||"BR"===e.tagName)return e;e=e.nextSibling}return null}},{key:"firstElementChild",get:function(){var e=this.baseElement;if(e instanceof HTMLElement)for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(n instanceof Element)return n;if(Ne(n))return n}return null}},{key:"lastElementChild",get:function(){var e=this.baseElement;if(e instanceof HTMLElement)for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(n instanceof Element)return n;if(Ne(n))return n}return null}},{key:"center",get:function(){return{x:this.bounds.left+Math.floor(this.bounds.width/2),y:this.bounds.top+Math.floor(this.actualHeight/2)}}}]),e}(),De=function(){function e(t,n){r(this,e),this.parent=n,this._currentId=0,this._list=[],Array.isArray(t)&&(this._list=t)}return o(e,[{key:Symbol.iterator,value:function(){var e=this._list,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"reset",value:function(){this._currentId=0,this.clear()}},{key:"get",value:function(e){return null==e?this._list[this._list.length-1]:this._list[e]}},{key:"append",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=this._list).push.apply(e,n),"function"==typeof this.delegateAppend&&this.delegateAppend.call(this,n)}},{key:"prepend",value:function(){var e;(e=this._list).unshift.apply(e,arguments)}},{key:"remove",value:function(e){return this._list.splice(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"clone",value:function(){return new e(this._list.slice())}},{key:"partition",value:function(t){var n=d(se(this._list,t),2),i=n[1];return[new e(n[0]),new e(i)]}},{key:"each",value:function(e){this._list.forEach(e)}},{key:"find",value:function(e,t){return this._list.find("string"==typeof e?function(n){return n[e]===t}:e)}},{key:"clear",value:function(){this._list.length=0}},{key:"sort",value:function(e){return this._list.sort(e),this}},{key:"sliceSort",value:function(t){return new e(this._list.slice().sort(t))}},{key:"sortAsc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue.apply(void 0,[this._list].concat(t)),this}},{key:"sortDesc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return he.apply(void 0,[this._list].concat(t)),this}},{key:"length",get:function(){return this._list.length}},{key:"list",get:function(){return this._list}},{key:"visible",get:function(){return this._list.filter(function(e){return e.visible})}},{key:"elements",get:function(){return this._list.filter(function(e){return e.visible&&e.styleElement})}},{key:"nextId",get:function(){return++this._currentId}},{key:"linearX",get:function(){return e.linearX(this._list)}},{key:"linearY",get:function(){return e.linearY(this._list)}}],[{key:"outerRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=[],i=[],r=[],a=[],o=e.slice(),l=!0,s=!1,u=void 0;try{for(var h,c=e[Symbol.iterator]();!(l=(h=c.next()).done);l=!0){var f=h.value;f.companion&&o.push(f.companion)}}catch(e){s=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw u}}for(var d=0;d<o.length;d++){var g=o[d];0===d?(n.push(g),i.push(g),r.push(g),a.push(g)):(n[0][t].top===g[t].top?n.push(g):g[t].top<n[0][t].top&&(n=[g]),i[0][t].right===g[t].right?i.push(g):g[t].right>i[0][t].right&&(i=[g]),r[0][t].bottom===g[t].bottom?r.push(g):g[t].bottom>r[0][t].bottom&&(r=[g]),a[0][t].left===g[t].left?a.push(g):g[t].left<a[0][t].left&&(a=[g]))}return{top:n,right:i,bottom:r,left:a}}},{key:"floated",value:function(e){return new Set(e.map(function(e){return e.float}).filter(function(e){return"none"!==e}))}},{key:"cleared",value:function(e){var t=new Map,n=new Set;return e.forEach(function(e){if(e.siblingflow){var i=e.css("clear");n.size>0&&("both"===i?(t.set(e,2===n.size?"both":n.values().next().value),n.clear()):n.has(i)&&(n.delete(i),t.set(e,i))),e.floating&&n.add(e.float)}}),t}},{key:"textBaseline",value:function(e,t){var n,i,r,a=[];if(e.some(function(e){return(e.textElement||e.imageElement)&&e.baseline})){var o=Math.max.apply(null,e.map(function(e){return e.lineHeight})),l=Math.max.apply(null,e.map(function(e){return e.bounds.height}));if(o>l){var s=e.filter(function(e){return e.lineHeight===o});return(s.length===e.length?s.filter(function(e){return e.htmlElement}):s).filter(function(e){return e.baseline})}a=e.filter(function(e){return e.baselineInside}).sort(function(e,n){var i=e.bounds.height,r=n.bounds.height;if(j(t,y.EDGE)&&(e.textElement&&(i=Math.max(Math.floor(i),e.lineHeight)),n.textElement&&(r=Math.max(Math.floor(r),n.lineHeight))),!e.imageElement||!n.imageElement){var a=P(e.css("fontSize")),o=P(n.css("fontSize"));if(e.multiLine||n.multiLine){if(e.lineHeight>0&&n.lineHeight>0)return e.lineHeight>=n.lineHeight?-1:1;if(a===o)return e.htmlElement||!n.htmlElement?-1:1}if(e.nodeType!==n.nodeType&&(e.nodeType<w.TEXT||n.nodeType<w.TEXT))return e.textElement||e.imageElement?-1:n.textElement||n.imageElement?1:e.nodeType<n.nodeType?-1:1;if(e.lineHeight>r&&0===n.lineHeight||n.imageElement)return-1;if(n.lineHeight>i&&0===e.lineHeight||e.imageElement)return 1;if(a===o&&i===r)return e.htmlElement&&!n.htmlElement?-1:!e.htmlElement&&n.htmlElement?1:e.siblingIndex<=n.siblingIndex?-1:1;if(a!==o&&0!==a&&0!==o)return a>o?-1:1}return i>=r?-1:1})}else a=e.filter(function(e){return e.baseline}).sort(function(e,t){var n=e.nodeType,i=t.nodeType;return e.layoutHorizontal&&(n=Math.min.apply(null,e.children.map(function(e){return e.nodeType>0?e.nodeType:w.INLINE}))),t.layoutHorizontal&&(i=Math.min.apply(null,t.children.map(function(e){return e.nodeType>0?e.nodeType:w.INLINE}))),n<=i?-1:1});return a.filter(function(e,t){return 0===t?(n=e.css("fontFamily"),i=e.css("fontSize"),r=e.css("fontWeight"),!0):e.css("fontFamily")===n&&e.css("fontSize")===i&&e.css("fontWeight")===r&&e.nodeName===a[0].nodeName&&(e.lineHeight>0&&e.lineHeight===a[0].lineHeight||e.bounds.height===a[0].bounds.height)})}},{key:"linearX",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.filter(function(e){return e.pageflow});switch(i.length){case 0:return!1;case 1:return!0;default:var r=this.documentParent(i),a=!1;if(n&&i.every(function(e){return e.documentParent===r||e.companion&&e.companion.documentParent===r})){var o=e.clearedSiblings(r);a=i.slice().sort(e.siblingIndex).every(function(e,t){if(t>0){e.companion&&e.companion.documentParent===r&&(e=e.companion);var n=e.previousSibling();if(n)return!e.alignedVertically(n,o)}return!0})}return!(!a&&n)&&i.every(function(e){return!i.some(function(t){return t!==e&&e.linear.top>=t.linear.bottom&&e.intersectY(t.linear)})})}}},{key:"linearY",value:function(t){var n=t.filter(function(e){return e.pageflow});switch(n.length){case 0:return!1;case 1:return!0;default:var i=this.documentParent(n);if(n.every(function(e){return e.documentParent===i||e.companion&&e.companion.documentParent===i})){var r=e.clearedSiblings(i);return n.slice().sort(e.siblingIndex).every(function(e,t){if(t>0&&!e.lineBreak){e.companion&&e.companion.documentParent===i&&(e=e.companion);var n=e.previousSibling();if(n)return e.alignedVertically(n,r)}return!0})}return!1}}},{key:"siblingIndex",value:function(e,t){return e.siblingIndex<=t.siblingIndex?-1:1}},{key:"clearedSiblings",value:function(t){return e.cleared(Array.from(t.baseElement.children).map(function(e){return ve(e)}).filter(function(e){return e}))}},{key:"documentParent",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(!o.companion&&o.domElement)return o.documentParent}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e[0].documentParent}}]),e}(),Fe=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Be),o(t,[{key:"init",value:function(){var e,n=this;(f(s(t.prototype),"init",this).call(this),this.children.length>0)&&(this.children.forEach(function(e){n.siblingIndex=Math.min(n.siblingIndex,e.siblingIndex),e.parent=n}),this.parent.children.sort(De.siblingIndex),(e=this.initial.children).push.apply(e,g(this.children.slice())));this.setBounds(),this.css("direction",this.documentParent.dir)}},{key:"setBounds",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(this.children.length>0){var e=De.outerRegion(this.children);this.bounds={top:e.top[0].linear.top,right:e.right[0].linear.right,bottom:e.bottom[0].linear.bottom,left:e.left[0].linear.left,width:0,height:0}}else this.bounds=de();this.bounds.width=this.bounds.right-this.bounds.left,this.bounds.height=this.bounds.bottom-this.bounds.top}this.linear=be(this.bounds),this.box=be(this.bounds),this.setDimensions()}},{key:"previousSibling",value:function(){return this.children.length>0?this.children[0].previousSibling(arguments.length>0&&void 0!==arguments[0]&&arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2]):null}},{key:"nextSibling",value:function(){return this.children.length>0?this.children[this.children.length-1].nextSibling(arguments.length>0&&void 0!==arguments[0]&&arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2]):null}},{key:"inline",get:function(){return this.children.every(function(e){return e.inline})}},{key:"pageflow",get:function(){return this.children.every(function(e){return e.pageflow})}},{key:"siblingflow",get:function(){return this.children.every(function(e){return e.siblingflow})}},{key:"inlineElement",get:function(){return this.hasAlign(x.SEGMENTED)}},{key:"inlineStatic",get:function(){return this.children.every(function(e){return e.inlineStatic})}},{key:"blockStatic",get:function(){return this.children.every(function(e){return e.blockStatic})}},{key:"floating",get:function(){return this.hasAlign(x.FLOAT)}},{key:"float",get:function(){return this.floating?this.hasAlign(x.RIGHT)?"right":"left":"none"}},{key:"baseline",get:function(){return this.children.every(function(e){return e.baseline})}},{key:"multiLine",get:function(){return this.children.some(function(e){return e.multiLine})}},{key:"display",get:function(){return this.css("display")||(this.children.every(function(e){return e.blockStatic})||this.of(w.CONSTRAINT,x.PERCENT)?"block":this.children.every(function(e){return e.inline})?"inline":"inline-block")}},{key:"baseElement",get:function(){return function e(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.styleElement||i.plainText)return i.element;if(i.length>0){var r=e(i.nodes);if(r)return r}}return null}(this.nodes)||f(s(t.prototype),"baseElement",this)}},{key:"firstElementChild",get:function(){var e=this.documentParent.element;if(e instanceof HTMLElement)for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(this.nodes.includes(ve(n)))return n}return null}},{key:"lastElementChild",get:function(){var e=this.baseElement;if(e instanceof HTMLElement)for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(this.nodes.includes(ve(n)))return n}return null}}]),t}();function Ge(e){return"{".concat((arguments.length>1&&void 0!==arguments[1]?arguments[1]:":")+""+e,"}")}function Pe(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="number"==typeof t?Ge(t):t;return e.replace(r,(i?r:"")+n+(i?"":r))}function He(e,t){if(t>=0){var n=-1;return e.split("\n").map(function(e){var i=/^({.*?})(\t*)(<.*)/.exec(e);return i?(-1===n&&(n=i[2].length),i[1]+ie(t+(i[2].length-n))+i[3]):e}).join("\n")}return e}function Ve(e){return z(e=(e=e.replace(/&#([0-9]+);/g,function(e,t){return String.fromCharCode(parseInt(t))})).replace(/&nbsp;/g,"&#160;"))}var ze=Object.freeze({formatPlaceholder:Ge,removePlaceholderAll:function(e){return e.replace(/{[<:@>]{1}[0-9]+(\:[0-9]+)?}/g,"").trim()},replacePlaceholder:Pe,replaceIndent:He,replaceTab:function(e,t){var n=t.insertSpaces,i=void 0===n?4:n;return i>0&&(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.split("\n").map(function(e){var t=e.match(/^(\t+)(.*)$/);return t?" ".repeat(i*t[1].length)+t[2]:e}).join("\n"):e.replace(/\t/g," ".repeat(i))),e},replaceEntity:Ve,parseTemplate:function(e){for(var t={},n=null,i=!1,r=0,a=e.length;;){if(i){var o=i[0].replace(RegExp(i[1],"g"),"");for(var l in t)t[l]=t[l].replace(RegExp(i[0],"g"),"{%".concat(i[2],"}"));t[i[2]]=o,a-=i[0].length}if(null==i||0===a){if(!(e=t[r++]))break;a=e.length,i=null}if(i||(n=/(!([0-9]+)\n?)[\w\W]*\1/g),!n)break;i=n.exec(e)}return t},getTemplateLevel:function(e){for(var t=e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=d(i[a].split("-"),2),l=o[1];t=t[o[0]][void 0===l?"0":l]}return t},createTemplate:function e(t,n,i,r,a){var o=i?t[i]:"";for(var l in n["#include"]&&(r=n["#include"],delete n["#include"]),n["#exclude"]&&(a=n["#exclude"],delete n["#exclude"]),n){var s="";if(!1===n[l]||Array.isArray(n[l])&&0===n[l].length)o=o.replace("{%".concat(l,"}"),"");else{if(Array.isArray(n[l]))for(var u in n[l])s+=e(t,n[l][u],l,r,a);else s=n[l];if(Z(s)?o=i?o.replace(RegExp("{[%@&]*".concat(l,"}"),"g"),s):s.trim():!1===s||RegExp("{%".concat(l,"}")).test(o)?o=o.replace("{%".concat(l,"}"),""):RegExp("{&".concat(l,"}")).test(o)&&(o=""),r||a)for(var h=/\s+[\w:]+="{#(\w+)=(.*?)}"/g,c=void 0;null!=(c=h.exec(o));)if(r&&r[c[1]]){var f="{#".concat(c[1],"=").concat(c[2],"}");o=o.replace(f,n[c[2]]||c[2])}else a&&a[c[1]]&&(o=o.replace(c[0],""))}}return o.replace(/\s+[\w:]+="{@\w+}"/g,"")}}),Ue=function(){function e(t){r(this,e),this.framework=t,this.renderQueue={},this.loading=!1,this.closed=!1,this.cache=new De,this.cacheSession=new De,this.elements=new Set,this.extensions=[],this._cacheRoot=new Set,this._cacheImage=new Map,this._sorted={},this._currentIndex=-1,this._views=[],this._includes=[]}return o(e,[{key:"registerController",value:function(e){e.application=this,e.cache=this.cache,this.viewController=e}},{key:"registerResource",value:function(e){e.application=this,e.cache=this.cache,this.resourceHandler=e}},{key:"registerExtension",value:function(e){var t=this,n=this.getExtension(e.name);n?(Array.isArray(e.tagNames)&&(n.tagNames=e.tagNames),Object.assign(n.options,e.options)):(0===e.framework||j(e.framework,this.framework))&&e.dependencies.every(function(e){return!!t.getExtension(e.name)})&&(e.application=this,this.extensions.push(e))}},{key:"finalize",value:function(){var e=this.cacheSession.visible.filter(function(e){return!e.hasAlign(x.SPACE)}),t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.hasBit("excludeProcedure",A.LAYOUT)||o.setLayout(),o.hasBit("excludeProcedure",A.ALIGNMENT)||o.setAlignment(this.settings)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var l=!0,s=!1,u=void 0;try{for(var h,c=e[Symbol.iterator]();!(l=(h=c.next()).done);l=!0){var f=h.value;f.hasBit("excludeProcedure",A.OPTIMIZATION)||f.applyOptimizations(this.settings,this.userAgent),f.hasBit("excludeProcedure",A.CUSTOMIZATION)||f.applyCustomizations(this.settings)}}catch(e){s=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw u}}this.viewController.setBoxSpacing(this.viewData),this.appendRenderQueue(),this.viewController.setDimensions(this.viewData),this.resourceHandler.finalize(this.viewData),this.viewController.finalize(this.viewData);var d=!0,g=!1,p=void 0;try{for(var m,v=this.extensions[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var y=m.value,b=!0,E=!1,T=void 0;try{for(var w,k=y.subscribers[Symbol.iterator]();!(b=(w=k.next()).done);b=!0){y.setTarget(w.value),y.finalize()}}catch(e){E=!0,T=e}finally{try{b||null==k.return||k.return()}finally{if(E)throw T}}}}catch(e){g=!0,p=e}finally{try{d||null==v.return||v.return()}finally{if(g)throw p}}this.closed=!0}},{key:"reset",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.cacheSession[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){me(i.value.element,"node","style","styleMap","inlineSupport","boxSpacing","boxStyle","fontStyle","imageSource","optionArray","valueString")}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var a=!0,o=!1,l=void 0;try{for(var s,u=this._cacheRoot[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var h=s.value;delete h.dataset.iteration,delete h.dataset.layoutName}}catch(e){o=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}this.appName="",this.renderQueue={},this.cache.reset(),this.cacheSession.reset(),this.resetController(),this.resetResource(),this._cacheRoot.clear(),this._cacheImage.clear(),this._views.length=0,this._includes.length=0,this._sorted={},this._currentIndex=-1;var c=!0,f=!1,d=void 0;try{for(var g,p=this.extensions[Symbol.iterator]();!(c=(g=p.next()).done);c=!0){var m=g.value;m.subscribers.clear(),m.subscribersChild.clear()}}catch(e){f=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}this.closed=!1}},{key:"setConstraints",value:function(){this.viewController.setConstraints()}},{key:"resetController",value:function(){this.viewController.reset()}},{key:"setResources",value:function(){this.resourceHandler.setBoxStyle(),this.resourceHandler.setFontStyle(),this.resourceHandler.setBoxSpacing(),this.resourceHandler.setValueString(),this.resourceHandler.setOptionArray(),this.resourceHandler.setImageSource()}},{key:"resetResource",value:function(){this.resourceHandler.reset()}},{key:"parseDocument",value:function(){var e,t=this;this.elements.clear(),this.loading=!1,this.setStyleMap();for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];""===this.appName&&0===i.length&&i.push(document.body);for(var a=0;a<i.length;a++){var o=i[a];"string"==typeof o&&(o=document.getElementById(o)),(o instanceof HTMLElement||o instanceof SVGElement)&&this.elements.add(o)}var l=this.elements.values().next().value;function s(){this.loading=!1,this.settings.preloadImages&&l&&Array.from(l.getElementsByClassName("androme.preload")).forEach(function(e){return l.removeChild(e)}),this.resourceHandler.imageDimensions=this._cacheImage;var t=!0,n=!1,i=void 0;try{for(var r,a=this.elements[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;""===this.appName&&(""===o.id&&(o.id="untitled"),this.appName=o.id);var s=J(o.dataset.filename).replace(RegExp(".".concat(this.viewController.settingsInternal.layout.fileExtension,"$")),"");""===s&&(""===o.id&&(o.id="document_".concat(this.size)),s=o.id);var u=P(o.dataset.iteration)+1;o.dataset.iteration=""+u,o.dataset.layoutName=F(u>1?"".concat(s,"_").concat(u):s),this.initCache(o)&&(this.createDocument(),this.setConstraints(),this.setResources(),this._cacheRoot.add(o))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}"function"==typeof e&&e.call(this)}if(this.settings.preloadImages&&l){var u=!0,h=!1,c=void 0;try{for(var f,d=this._cacheImage.values()[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var g=f.value;if(0===g.width&&0===g.height&&g.url){var p=document.createElement("IMG");p.src=g.url,p.complete&&p.naturalWidth>0&&p.naturalHeight>0?(g.width=p.naturalWidth,g.height=p.naturalHeight):(p.className="androme.preload",p.style.display="none",l.appendChild(p))}}}catch(e){h=!0,c=e}finally{try{u||null==d.return||d.return()}finally{if(h)throw c}}}var m=Array.from(this.elements).map(function(e){var n=[];return Array.from(e.querySelectorAll("IMG")).forEach(function(e){e.complete?t.setImageCache(e):n.push(e)}),n}).reduce(function(e,t){return e.concat(t)},[]);if(0===m.length)s.call(this);else{this.loading=!0;var v=m.map(function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})});Promise.all(v).then(function(e){Array.isArray(e)&&e.forEach(function(e){try{t.setImageCache(e.srcElement)}catch(e){}}),s.call(t)}).catch(function(e){var n=e.srcElement?e.srcElement.src:"";oe(n)&&!confirm("FAIL: ".concat(n))||s.call(t)})}return{then:function(n){t.loading?e=n:n()}}}},{key:"initCache",value:function(e){var t=this,n=0;e===document.body&&Array.from(document.body.childNodes).some(function(e){return Oe(e)&&++n>1});var i=e!==document.body?e.querySelectorAll("*"):document.querySelectorAll(n>1?"body, body *":"body *");this.cache.parent=void 0,this.cache.delegateAppend=void 0,this.cache.clear();var r=!0,a=!1,o=void 0;try{for(var l,s=this.extensions[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;u.setTarget(void 0,void 0,e),u.beforeInit()}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}var h=this.insertNode(e);if(!h)return!1;h.parent=new this.nodeObject(0,(e===document.body?e:e.parentElement)||document.body),h.documentRoot=!0,this.viewController.initNode(h),this.cache.parent=h;var c=this.viewController.settingsInternal.inline.always,f=this.settings.renderInlineText?[]:this.viewController.settingsInternal.inline.tagName;function d(e){var t=pe(e,"styleMap");return(!t||0===Object.keys(t).length)&&0===e.children.length&&f.includes(e.tagName)}for(var p=Array.from(i),m=function(){var n=p[v];if(!t.elements.has(n)&&(t.prioritizeExtensions(t.extensions,n).some(function(e){return e.init(n)}),!t.elements.has(n))){(c.includes(n.tagName)||d(n)&&n.parentElement&&Array.from(n.parentElement.children).every(function(e){return d(e)}))&&ge(n,"inlineSupport",!0);for(var i=!0,r=n.parentElement;r&&r!==e;){if(r!==e&&t.elements.has(r)){i=!1;break}r=r.parentElement}if(i){var a=pe(n,"styleMap");switch(a||ge(n,"styleMap",a={}),n.tagName){case"SELECT":null==a.verticalAlign&&n.size>1&&(a.verticalAlign="text-bottom")}t.insertNode(n)}}},v=0;v<p.length;v++)m();if(this.cache.length>0){var y=!0,b=!1,E=void 0;try{for(var x,T=function(){var e=x.value,n=[],i=!1;Array.from(e.element.childNodes).forEach(function(t){if("#text"===t.nodeName)"SELECT"!==e.tagName&&n.push(t);else if("BR"!==t.tagName){var r=ve(t);(!f.includes(t.tagName)||r&&!r.excluded)&&(i=!0)}}),i&&n.forEach(function(n){return t.insertNode(n,e)})},A=this.cache[Symbol.iterator]();!(y=(x=A.next()).done);y=!0)T()}catch(e){b=!0,E=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw E}}var w={},k=[],I=!0,S=!1,N=void 0;try{for(var L,R=function(){var e=L.value;if(e.styleElement){var t=e.element,n=e.css("textAlign");w[e.id]={};var i=w[e.id];["right","end","BUTTON"!==t.tagName&&"button"!==t.type?"center":""].some(function(e){return e===n&&(i.textAlign=e,t.style.textAlign="left",!0)}),e.marginLeft<0&&(i.marginLeft=e.css("marginLeft"),t.style.marginLeft="0px"),e.marginTop<0&&(i.marginTop=e.css("marginTop"),t.style.marginTop="0px"),"relative"===e.position&&["top","right","bottom","left"].forEach(function(n){e.has(n)&&(i[n]=e.styleMap[n],t.style[n]="auto")}),(e.overflowX||e.overflowY)&&(e.has("width")&&(i.width=e.styleMap.width,t.style.width="auto"),e.has("height")&&(i.height=e.styleMap.height,t.style.height="auto"),i.overflow=e.style.overflow||"",t.style.overflow="visible"),"rtl"===t.dir&&(t.dir="ltr",k.push(t)),e.setBounds()}e.setMultiLine()},C=this.cache[Symbol.iterator]();!(I=(L=C.next()).done);I=!0)R()}catch(e){S=!0,N=e}finally{try{I||null==C.return||C.return()}finally{if(S)throw N}}var M=!0,O=!1,_=void 0;try{for(var B,D=this.cache[Symbol.iterator]();!(M=(B=D.next()).done);M=!0){var F=B.value;if(F.styleElement){var G=F.element,P=w[F.id];if(P){for(var H in P)G.style[H]=P[H];k.includes(G)&&(G.dir="rtl")}}if(1===F.children.length){var V=F.children[0];V.pageflow||0!==V.toInt("top")||0!==V.toInt("right")||0!==V.toInt("bottom")||0!==V.toInt("left")||(V.pageflow=!0)}}}catch(e){O=!0,_=e}finally{try{M||null==D.return||D.return()}finally{if(O)throw _}}var z=!0,U=!1,X=void 0;try{for(var W,j=this.cache[Symbol.iterator]();!(z=(W=j.next()).done);z=!0){var Y=W.value;if(!Y.documentRoot){var Z=Y.getParentElementAsNode(this.settings.supportNegativeLeftTop,this.cache.parent);Z||Y.pageflow||(Z=this.cache.parent),Z?(Y.parent=Z,Y.documentParent=Z):Y.hide()}}}catch(e){U=!0,X=e}finally{try{z||null==j.return||j.return()}finally{if(U)throw X}}var q=!0,K=!1,Q=void 0;try{for(var $,J=this.cache.elements[Symbol.iterator]();!(q=($=J.next()).done);q=!0){var ee=$.value;ee.htmlElement&&function(){var e,t=0;Array.from(ee.element.childNodes).forEach(function(e){var n=ve(e);n&&!n.excluded&&n.pageflow&&(n.siblingIndex=t++)}),ee.children.sort(De.siblingIndex),(e=ee.initial.children).push.apply(e,g(ee.children.slice()))}()}}catch(e){K=!0,Q=e}finally{try{q||null==J.return||J.return()}finally{if(K)throw Q}}this.cache.sortAsc("depth","id");var te=!0,ne=!1,ie=void 0;try{for(var re,ae=this.extensions[Symbol.iterator]();!(te=(re=ae.next()).done);te=!0){var oe=re.value;oe.setTarget(h),oe.afterInit()}}catch(e){ne=!0,ie=e}finally{try{te||null==ae.return||ae.return()}finally{if(ne)throw ie}}return!0}return!1}},{key:"createDocument",value:function(){var e,t=this,n=this,i=[],r=new Map,a=this.viewController.baseTemplate,o=!0;function l(e,t,n){r.has(e)||r.set(e,new Map);var i=r.get(e);i&&i.set(t,n)}function s(e){var t=!0,n=!1,i=void 0;try{for(var a,o=r.values()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value,s=!0,u=!1,h=void 0;try{for(var c,f=l.values()[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;if(d.id===e)return void l.delete(d.id)}}catch(e){u=!0,h=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw h}}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}l(-1,0,this.cache.parent.parent);var u=0,h=!0,c=!1,f=void 0;try{for(var p,m=this.cache.visible[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var v=p.value,y=Math.floor(v.linear.left);null==i[v.depth]&&(i[v.depth]={}),null==i[v.depth][y]&&(i[v.depth][y]=[]),i[v.depth][y].push(v),l(v.depth,v.id,v),u=Math.max(v.depth,u)}}catch(e){c=!0,f=e}finally{try{h||null==m.return||m.return()}finally{if(c)throw f}}for(var b=0;b<u;b++)r.set(-1*b-2,new Map);this.cache.delegateAppend=function(e){e.forEach(function(e){s(e.id),l(-1*e.initial.depth-2,e.id,e),e.cascade().forEach(function(e){s(e.id),l(-1*e.initial.depth-2,e.id,e)})})};var A=!0,S=!1,N=void 0;try{for(var L,R=function(){var e=L.value,l=new Map,s=new Map;function u(e,t,n,i,r){var a=n+(""===r&&-1!==t.renderPosition?":".concat(t.renderPosition):"");e.has(a)||e.set(a,new Map);var o=e.get(a);o&&o.set(t.id,i)}function h(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""!==i)if(arguments.length>4&&void 0!==arguments[4]&&arguments[4]&&e.each(function(t){[l,s].some(function(n){var i=!0,a=!1,o=void 0;try{for(var s,h=l.values()[Symbol.iterator]();!(i=(s=h.next()).done);i=!0){var c=s.value,f=c.get(t.id);if(f){var d=e.renderDepth+1;return t.renderDepth!==d&&(f=He(f,d),t.renderDepth=d),u(n,t,""+e.id,f,r),c.delete(t.id),!0}}}catch(e){a=!0,o=e}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return!1})}),""!==r)u(s,e,r,i,r);else{if(!n.elements.has(e.element))if(e.dataset.target){var a=document.getElementById(e.dataset.target);if(a&&a!==t.element)return n.addRenderQueue(e.dataset.target,[i]),void(e.auto=!1)}else if(t.dataset.target){if(document.getElementById(t.dataset.target))return n.addRenderQueue(t.nodeId,[i]),void(e.dataset.target=t.nodeId)}u(l,e,""+t.id,i,r)}}var c=!0,f=!1,p=void 0;try{for(var m,v=function(){var e=m.value;if(0===e.children.length||e.renderAs)return"continue";var n=[],a=[],o=[],l=[],s=!0,u=!1,c=void 0;try{for(var f,d=e.children[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var p=f.value;p.documentRoot?n.push(p):p.pageflow||p.alignOrigin?o.push(p):p.toInt("zIndex")>=0||p.parent.element!==p.element.parentElement?l.push(p):a.push(p)}}catch(e){u=!0,c=e}finally{try{s||null==d.return||d.return()}finally{if(u)throw c}}t.sortByAlignment(o,e),n.push.apply(n,g(ue(a,"style.zIndex","id"))),n.push.apply(n,o),n.push.apply(n,g(ue(l,"style.zIndex","id")));var v=De.cleared(n),y=[];function b(){return y.length>0?y[y.length-1]:""}for(var A="",S=-1,N=function(){var e=n[S];if(!e.visible||!e.documentRoot&&t.elements.has(e.element))return"continue";var a=e.parent,o="",l=t.viewController.settingsInternal.includes;if(l)if(e.hasBit("excludeSection",E.INCLUDE))o="";else{var s=J(e.dataset.include);if(""!==s&&-1===y.indexOf(s)&&(h(e,a,t.viewController.renderInclude(e,a,s),b()),y.push(s)),""!==(A=b())){var u=a.clone();u.renderDepth=t.viewController.baseRenderDepth(A),e.parent=u,a=u}o=A}if(e.renderAs&&(a.remove(e),e.hide(),e=e.renderAs),!e.hasBit("excludeSection",E.DOM_TRAVERSE)&&n.length>1&&S<n.length-1){var c=a.linearVertical;if(e.pageflow&&""===A&&!a.flex.enabled&&!a.has("columnCount")&&!a.is(w.GRID)&&(e.alignmentType===x.NONE&&a.alignmentType===x.NONE||e.hasAlign(x.EXTENDABLE))){var f=[],d=[],p=new Set(["left","right"]),m=!1,N=S,L=0;e.hasAlign(x.EXTENDABLE)&&(f.push(e),N++,L++);e:for(;N<n.length;N++,L++){var R=n[N];if(R.pageflow){var C=v.get(R);C&&("both"===C?p.clear():p.delete(C)),R.floating&&p.add(R.float);var M=R.previousSibling(),O=R.nextSibling(!0);if(0===L&&O)R.blockStatic||O.alignedVertically(R,v,!0)?d.push(R):f.push(R);else{if(!M)break e;switch(function(){var e=De.floated(f.concat(d)),n=f.concat(d,[R]),i=De.cleared(n),r=new Map;i.has(M)&&r.set(M,M.css("clear"));var a=R.alignedVertically(M,r);if(a||i.has(R)||t.settings.floatOverlapDisabled&&M.floating&&R.blockStatic&&2===p.size){if(f.length>0){if(!t.settings.floatOverlapDisabled&&!M.lineBreak){var o=new Set(n.map(function(e){return i.get(e)||""}).filter(function(e){return""!==e})),l=null;if(e.size>0&&(l=Math.max.apply(null,f.filter(function(e){return e.floating}).map(function(e){return e.bounds.bottom}))),p.size>0&&!o.has("both")&&(null==l||R.bounds.top<l)){if(i.has(R)){if("none"!==(i.has(R)?i.get(R):"none")){if(p.size<2&&2===e.size&&!R.floating)return R.alignmentType|=x.EXTENDABLE,m=!0,f.push(R),"continue"}else if(e.size<2&&(!R.floating||!e.has(R.float)||R.float===f[f.length-1].float))return f.push(R),"continue";return"break|mainloop"}if(!a)return f.push(R),"continue";if(1===e.size&&(!R.floating||p.has(R.float)))return f.push(R),"continue"}}return"break|mainloop"}if(c&&d.length>0){var s=d[d.length-1];if(s.linearVertical)return R.parent=s,"continue"}d.push(R)}else{if(d.length>0||m)return"break|mainloop";f.push(R)}}()){case"continue":continue;case"break|mainloop":break e}}}}var _=null,B="";if(f.length>1){var D=De.cleared(f);if(t.isFrameHorizontal(f,D))_=t.viewController.createGroup(a,e,f),B=t.writeFrameLayoutHorizontal(_,a,f,D);else if(f.length===n.length)a.alignmentType|=x.HORIZONTAL;else{var F=De.floated(f);1===F.size&&f.some(function(e){return e.has("width",I.PERCENT)})&&f.every(function(e){return e.has("width",I.UNIT|I.PERCENT)})?(_=t.viewController.createGroup(a,e,f),B=t.writeConstraintLayout(_,a),_.alignmentType|=x.PERCENT):t.isRelativeHorizontal(f,D)?(_=t.viewController.createGroup(a,e,f),B=t.writeRelativeLayout(_,a),_.alignmentType|=x.HORIZONTAL):(_=t.viewController.createGroup(a,e,f),B=t.writeLinearLayout(_,a,!0),F.size>0?(_.alignmentType|=x.FLOAT,_.alignmentType|=f.every(function(e){return"right"===e.float||e.autoMarginLeft})?x.RIGHT:x.LEFT):_.alignmentType|=x.HORIZONTAL)}}else if(d.length>1){var G=De.floated(d),P=De.cleared(d);if(G.size>0&&P.size>0&&(1!==G.size||!d.slice(1,d.length-1).every(function(e){return P.has(e)}))?a.linearVertical?(_=e,B=t.writeFrameLayoutVertical(null,a,d,P)):(_=t.viewController.createGroup(a,e,d),B=t.writeFrameLayoutVertical(_,a,d,P)):d.length===n.length?a.alignmentType|=x.VERTICAL:c||(_=t.viewController.createGroup(a,e,d),B=t.writeLinearLayout(_,a,!1),_.alignmentType|=x.VERTICAL),d.length!==n.length){var H=d[d.length-1];H.blockStatic||H===n[n.length-1]||(H.alignmentType|=x.EXTENDABLE)}}_&&(h(_,a,B,"",!0),a=e.parent),e.hasAlign(x.EXTENDABLE)&&(e.alignmentType^=x.EXTENDABLE)}}if(!e.hasBit("excludeSection",E.EXTENSION)&&!e.rendered){var V=!1,z=[],U=!0,X=!1,W=void 0;try{for(var j,Y=t.extensions[Symbol.iterator]();!(U=(j=Y.next()).done);U=!0){var Z=j.value;Z.subscribersChild.has(e)&&z.push(Z)}}catch(e){X=!0,W=e}finally{try{U||null==Y.return||Y.return()}finally{if(X)throw W}}for(var q=g(a.renderExtension).concat(z),K=0;K<q.length;K++){var Q=q[K];Q.setTarget(e,a);var $=Q.processChild();if(""!==$.output&&h(e,a,$.output,o),$.parent&&(a=$.parent),V=$.next||!1,$.complete||$.next)break}if(V)return"continue";if(e.styleElement){var ee=[];if(t.prioritizeExtensions(t.extensions,e.element).some(function(t){if(t.is(e)&&(t.setTarget(e,a),t.condition())){var n=t.processNode(i,r);if(""!==n.output&&h(e,a,n.output,o),n.parent&&(a=n.parent),(""!==n.output||n.include)&&ee.push(t),V=n.next||!1,n.complete||n.next)return!0}return!1}),ee.length>0)for(var te=0;te<ee.length;te++){var ne=ee[te];ne.subscribers.add(e),e.renderExtension.add(ne)}if(V)return"continue"}}if(!e.hasBit("excludeSection",E.RENDER)&&!e.rendered){var ie="";if(e.alignmentType===x.NONE&&e.has("width",I.PERCENT,{not:"100%"})&&!e.imageElement&&(a.linearVertical||a.is(w.FRAME)&&e.singleChild)){var re=t.viewController.createGroup(a,e,[e]),ae=t.writeGridLayout(re,a,2,1);re.alignmentType|=x.PERCENT,h(re,a,ae,o),t.viewController["right"===e.float||e.autoMarginLeft?"prependBefore":"appendAfter"](e.id,t.renderColumnSpace(re.renderDepth+1,"".concat(100-e.toInt("width"),"%"))),a=re}if(""===e.controlName){var le=e.borderTopWidth>0||e.borderBottomWidth>0||e.borderRightWidth>0||e.borderLeftWidth>0,se=/url(.*?)/.test(e.css("backgroundImage")),ue=e.has("backgroundColor"),he=le||se||ue;if(0===e.children.length)Se(e.element,t.settings.renderInlineText?0:1)||le&&e.textContent.length>0?ie=t.writeNode(e,a,w.TEXT):se&&"no-repeat"===e.css("backgroundRepeat")&&(!e.inlineText||e.toInt("textIndent")+e.bounds.width<0)?(e.alignmentType|=x.SINGLE,e.excludeResource|=T.FONT_STYLE|T.VALUE_STRING,ie=t.writeNode(e,a,w.IMAGE)):e.block&&(ue||se)&&(le||e.paddingTop+e.paddingRight+e.paddingRight+e.paddingLeft>0)?ie=t.writeNode(e,a,w.LINE):e.documentRoot||(!t.settings.collapseUnattributedElements||0!==e.bounds.height||oe(e.element.id)||oe(e.dataset.ext)||he?ie=he?t.writeNode(e,a,w.TEXT):t.writeFrameLayout(e,a):(a.remove(e),e.hide()));else if(e.flex.enabled||e.children.some(function(e){return!e.pageflow})||e.has("columnCount"))ie=t.writeConstraintLayout(e,a);else if(1===e.children.length){var ce=e.children.filter(function(e){if(e.dataset.target){var t=document.getElementById(e.dataset.target);return null!=t&&oe(t.dataset.ext)&&t!==a.element}return!1});if(!(!t.settings.collapseUnattributedElements||e.documentRoot||oe(e.element.id)||oe(e.dataset.ext)||oe(e.dataset.target)||0!==e.toInt("width")||0!==e.toInt("height")||he||e.has("textAlign")||e.has("verticalAlign")||"right"===e.float||e.autoMargin||!e.alignOrigin||t.viewController.hasAppendProcessing(e.id))||e.documentRoot&&1===ce.length){var fe=e.children[0];return fe.documentRoot=e.documentRoot,fe.siblingIndex=e.siblingIndex,0!==a.id&&(fe.parent=a),0===ce.length&&(e.resetBox(k.MARGIN,fe,!0),fe.modifyBox(k.MARGIN_TOP,e.paddingTop),fe.modifyBox(k.MARGIN_RIGHT,e.paddingRight),fe.modifyBox(k.MARGIN_BOTTOM,e.paddingBottom),fe.modifyBox(k.MARGIN_LEFT,e.paddingLeft)),e.hide(),n[S]=fe,S--,"continue"}ie=t.writeFrameLayout(e,a)}else{var de=e.children,ge=[De.linearX(de),De.linearY(de)],pe=ge[0],me=ge[1],ve=De.cleared(de),ye=de.every(function(e){return e.pageflow&&e.inlineElement});if(!a.flex.enabled&&de.every(function(e){return e.pageflow})){var be=De.floated(de);pe&&0===ve.size?(0===be.size&&de.every(function(e){return 0===e.toInt("verticalAlign")})&&(de.some(function(e){return["text-top","text-bottom"].includes(e.css("verticalAlign"))})?(ie=t.writeConstraintLayout(e,a),e.alignmentType|=x.HORIZONTAL):t.isRelativeHorizontal(de)&&(ie=t.writeRelativeLayout(e,a),e.alignmentType|=x.HORIZONTAL)),""===ie&&(0!==be.size&&be.has("right")||(t.isRelativeHorizontal(de)?(ie=t.writeRelativeLayout(e,a),e.alignmentType|=x.HORIZONTAL):(ie=t.writeLinearLayout(e,a,!0),e.alignmentType|=x.HORIZONTAL)))):(me||!ye&&de.some(function(e){var t=e.previousSibling();return null!=t&&e.alignedVertically(t,ve)}))&&(ie=t.writeLinearLayout(e,a,!1),me&&!e.documentRoot&&(e.alignmentType|=x.VERTICAL))}""===ie&&(ye?t.isFrameHorizontal(de,ve,!0)?ie=t.writeFrameLayoutHorizontal(e,a,de,ve):(ie=t.writeRelativeLayout(e,a),0===Ce(de[0].baseElement,de[de.length-1].baseElement).filter(function(e){return Re(e)}).length&&(e.alignmentType|=x.HORIZONTAL)):ie=t.writeConstraintLayout(e,a))}}else ie=t.writeNode(e,a,e.controlName);h(e,a,ie,o)}l&&!e.hasBit("excludeSection",E.INCLUDE)&&y.length>0&&"true"===e.dataset.includeEnd&&y.pop()};++S<n.length;)N()},y=e.values()[Symbol.iterator]();!(c=(m=y.next()).done);c=!0)v()}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}var b=!0,A=!1,S=void 0;try{for(var N,R=function(){var e=d(N.value,2),n=e[0],i=e[1],r=[],l=d(n.split(":"),2),s=l[0],u=l[1],h=Array.from(i.values());if(h.length>0){if(t._sorted[s]){var c=[];t._sorted[s].forEach(function(e){var t=h.find(function(t){return-1!==t.indexOf(Ge(e,"@"))});t&&c.push(t)}),c.length===h.length&&r.push.apply(r,c)}0===r.length&&r.push.apply(r,g(h));var f=Ge(n=s+(u?":".concat(u):""));-1!==a.indexOf(f)?(a=Pe(a,f,r.join("")),o=!1):t.addRenderQueue(n,h)}},C=l.entries()[Symbol.iterator]();!(b=(N=C.next()).done);b=!0)R()}catch(e){A=!0,S=e}finally{try{b||null==C.return||C.return()}finally{if(A)throw S}}if(t.viewController.settingsInternal.includes){var M=!0,O=!1,_=void 0;try{for(var B,D=s.entries()[Symbol.iterator]();!(M=(B=D.next()).done);M=!0){var F=d(B.value,2),G=F[0],P=Array.from(F[1].values());if(P.length>0){var H=t.viewController.renderMerge(G,P);t.createIncludeFile(G,H)}}}catch(e){O=!0,_=e}finally{try{M||null==D.return||D.return()}finally{if(O)throw _}}}},C=r.values()[Symbol.iterator]();!(A=(L=C.next()).done);A=!0)R()}catch(e){S=!0,N=e}finally{try{A||null==C.return||C.return()}finally{if(S)throw N}}var M=this.cache.parent;if(!M.dataset.layoutName||oe(M.dataset.target)&&0!==M.renderExtension.size||this.createLayoutFile(ee(J(M.dataset.pathname),"/"),M.dataset.layoutName,o?"":a,M.renderExtension.size>0&&Array.from(M.renderExtension).some(function(e){return e.documentRoot})),o)0===M.renderExtension.size&&M.hide();else{var O=!0,_=!1,B=void 0;try{for(var D,F=this.extensions[Symbol.iterator]();!(O=(D=F.next()).done);O=!0){var G=D.value;G.setTarget(M),G.afterRender()}}catch(e){_=!0,B=e}finally{try{O||null==F.return||F.return()}finally{if(_)throw B}}}this.cache.sort(function(e,t){if(e.visible){if(t.visible){if(e.renderDepth!==t.renderDepth)return e.renderDepth<t.renderDepth?-1:1;if(!e.domElement){var n=ve(e.baseElement);if(!n)return 1;e=n}if(!t.domElement){var i=ve(e.baseElement);if(!i)return-1;t=i}return e.documentParent!==t.documentParent?e.documentParent.id<t.documentParent.id?-1:1:e.renderIndex<t.renderIndex?-1:1}return-1}return 1}),(e=this.cacheSession.list).push.apply(e,g(this.cache.list))}},{key:"writeFrameLayout",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||0!==e.children.length?this.viewController.renderGroup(e,t,w.FRAME):this.viewController.renderNode(e,t,w.FRAME)}},{key:"writeLinearLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,w.LINEAR,{horizontal:n})}},{key:"writeGridLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,w.GRID,{columnCount:n,rowCount:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0})}},{key:"writeRelativeLayout",value:function(e,t){return this.viewController.renderGroup(e,t,w.RELATIVE)}},{key:"writeConstraintLayout",value:function(e,t){return this.viewController.renderGroup(e,t,w.CONSTRAINT)}},{key:"writeNode",value:function(e,t,n){return this.viewController.renderNode(e,t,n)}},{key:"writeFrameLayoutHorizontal",value:function(e,t,n,i){var r=this,a="",o=[];if(0===i.size&&!n.some(function(e){return e.autoMargin})){var l=[],s=[],u=[],h=!0,c=!1,f=void 0;try{for(var d,p=n[Symbol.iterator]();!(h=(d=p.next()).done);h=!0){var m=d.value;m.floating?"right"===m.float?u.push(m):s.push(m):l.push(m)}}catch(e){c=!0,f=e}finally{try{h||null==p.return||p.return()}finally{if(c)throw f}}if(l.length===n.length||s.length===n.length||u.length===n.length)return e.alignmentType|=l.length>0?x.HORIZONTAL:x.FLOAT,u.length>0&&(e.alignmentType|=x.RIGHT),a=this.isRelativeHorizontal(n,i)?this.writeRelativeLayout(e,t):this.writeLinearLayout(e,t,!0);if(0===s.length||0===u.length){var v=0===u.length?s.concat(l):l.concat(u);if(De.linearY(v))return a=this.writeLinearLayout(e,t,!1),e.alignmentType|=x.VERTICAL,a;if(this.isRelativeHorizontal(v,i))return a=this.writeRelativeLayout(e,t),e.alignmentType|=x.HORIZONTAL,u.length>0&&(e.alignmentType|=x.RIGHT),a;0===u.length&&(this.settings.floatOverlapDisabled||(a=this.writeLinearLayout(e,t,!0),o=[s,l],e.alignmentType|=x.FLOAT))}}var y=[],b=[],E=[],T=[],A=[],w=[],I=[],S=[];if(0===o.length){for(var N="",L=0,R=0;R<n.length;R++){var C=n[R];if(i.has(C)){var M=i.get(C);if(j(L,"right"===M?4:2)||0!==L&&"both"===M)switch(M){case"left":L^=2,N="left";break;case"right":L^=4,N="right";break;case"both":switch(L){case 2:N="left";break;case 4:N="right";break;default:N="both"}L=0}}if(""===N)C.floating?"right"===C.float?(T.push(C),C.floating&&(L|=4)):(E.push(C),C.floating&&(L|=2)):C.autoMargin?C.autoMarginLeft?T.length>0?w.push(C):T.push(C):C.autoMarginRight?E.length>0?A.push(C):E.push(C):y.length>0?0===E.length?E.push(C):T.push(C):y.push(C):y.push(C);else if(C.floating)"right"===C.float?(0===w.length&&(L|=4),!this.settings.floatOverlapDisabled&&"right"!==N&&T.length>0?T.push(C):w.push(C)):(0===A.length&&(L|=2),!this.settings.floatOverlapDisabled&&"left"!==N&&E.length>0?E.push(C):A.push(C));else if(C.autoMargin)C.autoMarginLeft&&w.length>0?w.push(C):C.autoMarginRight&&A.length>0?A.push(C):b.push(C);else switch(N){case"left":A.push(C);break;case"right":w.push(C);break;default:b.push(C)}}E.length>0&&A.length>0?(I=[E,A],A.length>1&&(A[0].alignmentType|=x.EXTENDABLE)):E.length>0?I=E:A.length>0&&(I=A),T.length>0&&w.length>0?(S=[T,w],w.length>1&&(w[0].alignmentType|=x.EXTENDABLE)):T.length>0?S=T:w.length>0&&(S=w),this.settings.floatOverlapDisabled?(t.linearVertical?(a=Ge(e.id),e.renderDepth--):a=this.writeLinearLayout(e,t,!1),o.push(y,[E,T],b)):(0!==y.length||0!==I.length&&0!==S.length?a=this.writeFrameLayout(e,t,!0):(a=this.writeLinearLayout(e,t,!1),S.length>0&&(e.alignmentType|=x.RIGHT)),y.length>0?(w.length>0?o.push(I=[y,E],S):A.length>0?o.push(S=[y,T],I):o.push(y,I,S),y.length>1&&(y[0].alignmentType|=x.EXTENDABLE)):I===A&&S===T||I===E&&S===w?o.push(0===A.length?[E,w]:[T,A]):o.push(I,S),o=o.filter(function(e){return e&&e.length>0})),e.alignmentType|=x.FLOAT}if(o.length>0){var O=null;o.forEach(function(t,n){if(Array.isArray(t[0])){var i=[];t.forEach(function(e){return i.push.apply(i,g(e))}),i.sort(De.siblingIndex),O=r.viewController.createGroup(e,i[0],i),r.settings.floatOverlapDisabled?a=Pe(a,e.id,r.writeFrameLayout(O,e,!0)):(a=Pe(a,e.id,r.writeLinearLayout(O,e,!1)),t.some(function(e){return e===S||e===T})&&(O.alignmentType|=x.RIGHT)),O.alignmentType|=x.FLOAT}else O=null;(Array.isArray(t[0])?t:[t]).forEach(function(t){var i=e;if(O&&[y,E,A,T,w].includes(t)&&(i=O),t.length>1){var o="",l=r.viewController.createGroup(i,t[0],t),s=t.some(function(e){return"left"===e.float}),u=t.some(function(e){return"right"===e.float});if(r.isRelativeHorizontal(t,De.cleared(t)))o=r.writeRelativeLayout(l,i),l.alignmentType|=x.HORIZONTAL;else if(o=r.writeLinearLayout(l,i,De.linearX(t)),u&&l.children.some(function(e){return e.marginLeft<0})){var h=[],c=0;l.children.slice().forEach(function(e){var t=!1;c<0&&(Math.abs(c)>e.bounds.width?(c+=e.bounds.width,e.modifyBox(k.MARGIN_RIGHT,-1*e.bounds.width,!0),t=!0):Math.abs(c)>=e.marginRight?(e.modifyBox(k.MARGIN_RIGHT,Math.ceil(Math.abs(c)-e.marginRight)),e.modifyBox(k.MARGIN_RIGHT,null)):e.modifyBox(k.MARGIN_RIGHT,c,!0)),e.marginLeft<0&&(c+=Math.max(e.marginLeft,-1*e.bounds.width),e.modifyBox(k.MARGIN_LEFT,null)),t?h.splice(h.length-1,0,e):h.push(e)}),l.children=h.reverse(),r.saveSortOrder(l.id,l.children)}l.alignmentType|=x.SEGMENTED,(s||u)&&(l.alignmentType|=x.FLOAT,u&&(l.alignmentType|=x.RIGHT)),a=Pe(a,i.id,o),i.appendRendered(l)}else if(t.length>0){var f=t[0];f.alignmentType|=x.SINGLE,"right"===f.float&&(f.alignmentType|=x.RIGHT),f.renderPosition=n,a=Pe(a,i.id,"{:".concat(i.id,":").concat(n,"}")),i.appendRendered(f)}})})}return a}},{key:"writeFrameLayoutVertical",value:function(e,t,n,i){var r=this,a="";e?(a=this.writeLinearLayout(e,t,!1),e.alignmentType|=x.VERTICAL):a=Ge((e=t).id);var o=[],l=[],s=[],u=[],h=0,c=!1,f=!0;n.some(function(e){return!e.floating&&(h+=e.linear.height,!0)});var d=!0,g=!1,p=void 0;try{for(var m,v=n[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var y=m.value;i.has(y)&&(y.floating?c=!0:(y.modifyBox(k.MARGIN_TOP,null),o.push(s.slice()),s.length=0,l.push(u.slice()),u.length=0)),y.floating?u.push(y):(c&&!i.has(y)&&(f=!1),s.push(y))}}catch(e){g=!0,p=e}finally{try{d||null==v.return||v.return()}finally{if(g)throw p}}return u.length>0&&l.push(u),s.length>0&&o.push(s),f||function(){for(var t="",i=0;i<Math.max(l.length,o.length);i++){var s=l[i]||[],u=o[i]||[];(u.length>0||s.length>0)&&function(){var a=r.viewController.createGroup(e,s[0]||u[0],[]),o=[],l=null;s.length>1?(l=r.viewController.createGroup(a,s[0],s),a.alignmentType|=x.FLOAT):s.length>0&&((l=s[0]).parent=a,a.alignmentType|=x.FLOAT),l&&(o.push(l),0===i&&h>0&&l.modifyBox(k.MARGIN_TOP,h),l=null),u.length>1?l=r.viewController.createGroup(a,u[0],u):u.length>0&&((l=u[0]).parent=a),l&&o.push(l),a.init(),t+=r.writeFrameLayout(a,e,!0),a.alignmentType|=x.VERTICAL,o.forEach(function(e,i){n.includes(e)?t=Pe(t,a.id,"{:".concat(a.id,":").concat(i,"}")):(t=Pe(t,a.id,r.writeLinearLayout(e,a,!1)),e.alignmentType|=x.SEGMENTED)})}()}a=Pe(a,e.id,t)}(),a}},{key:"appendRenderQueue",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.extensions[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value,o=!0,l=!1,s=void 0;try{for(var u,h=a.subscribers[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){a.setTarget(u.value),a.beforeInsert()}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var c={};for(var f in this.renderQueue){var g=d(f.split(":"),1)[0],p=g;if(!Y(p)){var m=ve(document.getElementById(p));m&&(p=""+m.id)}var v=this.renderQueue[f].join("\n");if(p!==g){var y=this.cacheSession.find("id",parseInt(p));if(y){var b=y.renderDepth+1;v=He(v,b);for(var E=/{@([0-9]+)}/g,x=null,T=0;null!=(x=E.exec(v));){var A=this.cacheSession.find("id",parseInt(x[1]));A&&(A.renderDepth=0==T++?b:A.parent.renderDepth+1)}}}c[p]=v}for(var w in c)for(var k in c)w!==k&&(c[w]=c[w].replace(Ge(k),c[k]),c[k]=c[k].replace(Ge(w),c[w]));var I=!0,S=!1,N=void 0;try{for(var L,R=this.layouts[Symbol.iterator]();!(I=(L=R.next()).done);I=!0){var C=L.value;for(var M in c)C.content=C.content.replace(Ge(M),c[M]);C.content=this.viewController.appendRenderQueue(C.content)}}catch(e){S=!0,N=e}finally{try{I||null==R.return||R.return()}finally{if(S)throw N}}var O=!0,_=!1,B=void 0;try{for(var D,F=this.extensions[Symbol.iterator]();!(O=(D=F.next()).done);O=!0){var G=D.value,P=!0,H=!1,V=void 0;try{for(var z,U=G.subscribers[Symbol.iterator]();!(P=(z=U.next()).done);P=!0){G.setTarget(z.value),G.afterInsert()}}catch(e){H=!0,V=e}finally{try{P||null==U.return||U.return()}finally{if(H)throw V}}}}catch(e){_=!0,B=e}finally{try{O||null==F.return||F.return()}finally{if(_)throw B}}}},{key:"renderColumnSpace",value:function(e,t,n,i){return this.viewController.renderColumnSpace(e,t,n,i)}},{key:"createLayoutFile",value:function(e,t,n){var i={pathname:e=e||this.viewController.settingsInternal.layout.pathName,filename:t,content:n};arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&this._views.length>0&&""===this._views[0].content?(this._views[0]=i,this._currentIndex=0):this.layoutProcessing=i}},{key:"createIncludeFile",value:function(e,t){this._includes.push({pathname:this.viewController.settingsInternal.layout.pathName,filename:e,content:t})}},{key:"addRenderQueue",value:function(e,t){var n;null==this.renderQueue[e]&&(this.renderQueue[e]=[]),(n=this.renderQueue[e]).push.apply(n,g(t))}},{key:"sortByAlignment",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.NONE,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=!1;return t&&n===x.NONE&&(t.linearHorizontal?n|=x.HORIZONTAL:t.is(w.CONSTRAINT)&&e.some(function(e){return!e.pageflow})&&(n|=x.ABSOLUTE)),j(n,x.HORIZONTAL)&&e.some(function(e){return e.floating})&&(e.sort(function(e,t){return e.floating&&!t.floating?"left"===e.float?-1:1:!e.floating&&t.floating?"left"===t.float?1:-1:e.floating&&t.floating&&e.float!==t.float?"left"===e.float?-1:1:e.linear.left<=t.linear.left?-1:1}),r=!0),j(n,x.ABSOLUTE)&&e.some(function(e){return 0!==e.toInt("zIndex")})&&(e.sort(function(e,t){var n=e.css("zIndex"),i=t.css("zIndex");return"auto"!==n&&""!==n&&"0"!==n||"auto"!==i&&""!==i&&"0"!==i?P(n)<=P(i)?-1:1:e.siblingIndex<=t.siblingIndex?-1:1}),r=!0),i&&r&&t&&this.saveSortOrder(t.id,e),e}},{key:"saveSortOrder",value:function(e,t){this._sorted[""+e]=t.map(function(e){return e.id})}},{key:"getExtension",value:function(e){return this.extensions.find(function(t){return t.name===e})}},{key:"saveAllToDisk",value:function(){this.resourceHandler.file.saveAllToDisk(this.viewData)}},{key:"toString",value:function(){return this._views.length>0?this._views[0].content:""}},{key:"insertNode",value:function(e,t){var n=null;if("#"===e.nodeName.charAt(0))"#text"===e.nodeName&&(Ne(e,!0)||we(e,"whiteSpace","pre","pre-wrap"))&&(n=new this.nodeObject(this.cache.nextId,e),this.viewController.initNode(n),n.nodeName="PLAINTEXT",t?(n.parent=t,n.inherit(t,"style")):n.css("whiteSpace",(e.parentElement?Ee(e.parentElement).whiteSpace:null)||"normal"),n.css({position:"static",display:"inline",clear:"none",cssFloat:"none",verticalAlign:"baseline"}));else if(Me(e)){var i=new this.nodeObject(this.cache.nextId,e);this.viewController.initNode(i),Oe(e)?(n=i).setExclusions():(i.excluded=!0,i.visible=!1)}return n&&this.cache.append(n),n}},{key:"setStyleMap",value:function(){for(var e=this,t=!1,n=0;n<document.styleSheets.length;n++){var i=document.styleSheets[n];if(i.cssRules)for(var r=0;r<i.cssRules.length;r++)try{!function(){for(var t=i.cssRules[r],n=new Set,a=Array.from(t.style),o=0;o<a.length;o++){n.add(D(a[o]))}Array.from(document.querySelectorAll(t.selectorText)).forEach(function(i){for(var r=Array.from(i.style),a=0;a<r.length;a++){n.add(D(r[a]))}var o=Ee(i),l={},s=!0,u=!1,h=void 0;try{for(var c,f=n[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value,g=t.style[d];if(i.style[d])l[d]=i.style[d];else if(o[d]===g)l[d]=o[d];else if(g)switch(d){case"fontSize":l[d]=o[d]||g;break;case"width":case"height":case"lineHeight":case"verticalAlign":case"columnGap":case"top":case"right":case"bottom":case"left":case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":l[d]=/^[A-Za-z\-]+$/.test(g)||K(g)?g:V(g,o.fontSize);break;default:null==l[d]&&(l[d]=g)}}}catch(e){u=!0,h=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw h}}e.settings.preloadImages&&oe(l.backgroundImage)&&"initial"!==l.backgroundImage&&l.backgroundImage.split(",").map(function(e){return e.trim()}).forEach(function(t){var n=Te(t);""===n||e._cacheImage.has(n)||e._cacheImage.set(n,{width:0,height:0,url:n})});var p=pe(i,"styleMap");p?Object.assign(p,l):(ge(i,"style",o),ge(i,"styleMap",l))})}()}catch(e){t||(alert("External CSS files cannot be parsed when loading this program from your hard drive with Chrome 64+ (file://). Either use a local web server (http://), embed your CSS files into a <style> tag, or use a different browser. See the README for further instructions.\n\n"+"".concat(i.href,"\n\n").concat(e)),t=!0)}}}},{key:"setImageCache",value:function(e){e&&oe(e.src)&&this._cacheImage.set(e.src,{width:e.naturalWidth,height:e.naturalHeight,url:e.src})}},{key:"prioritizeExtensions",value:function(e,t){for(var n=[],i=t;i;)n=g(n).concat(g(J(i.dataset.ext).split(",").map(function(e){return e.trim()}))),i=i.parentElement;if((n=n.filter(function(e){return e})).length>0){var r=[],a=[],o=!0,l=!1,s=void 0;try{for(var u,h=e[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=u.value,f=n.indexOf(c.name);-1!==f?r[f]=c:a.push(c)}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}return g(r.filter(function(e){return e})).concat(a)}return e}},{key:"isFrameHorizontal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=De.floated(e),r=e.filter(function(e){return e.autoMargin});return 0===(n?Ce(e[0].baseElement,e[e.length-1].baseElement).filter(function(e){return"BR"===e.tagName}).length:0)&&(i.has("right")||t.size>0||r.length>0||!De.linearX(e))}},{key:"isRelativeHorizontal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n=e.filter(function(e){return e.visible}),i=De.floated(e),r=d(new De(e).partition(function(e){return e.floating}),2),a=r[0],o=r[1],l=o.length>0?Math.min.apply(null,o.list.map(function(e){return e.siblingIndex})):Number.MAX_VALUE,s=a.length>0?Math.max.apply(null,a.list.map(function(e){return e.siblingIndex})):-1,u=De.linearX(e);return!n.some(function(e){return e.autoMarginHorizontal})&&(1===i.size&&a.length===e.length?!(u&&0===t.size):0===t.size&&!i.has("right")&&(0===o.length||0===a.length||s<l)&&n.every(function(e){var t=e.css("verticalAlign");return e.toInt("top")>=0&&(["baseline","initial","unset","top","middle","sub","super"].includes(t)||q(t)&&parseInt(t)>=0)})&&(n.some(function(e){return(e.textElement||e.imageElement||e.svgElement)&&e.baseline||e.plainText&&e.multiLine})||!u&&e.every(function(e){return e.pageflow&&e.inlineElement})))}},{key:"appName",set:function(e){this.resourceHandler&&(this.resourceHandler.file.appName=e)},get:function(){return this.resourceHandler?this.resourceHandler.file.appName:""}},{key:"settings",set:function(e){this._settings=e,this.viewController&&(this.viewController.settings=e),this.resourceHandler&&(this.resourceHandler.settings=e)},get:function(){return this._settings?this._settings:{}}},{key:"layoutProcessing",set:function(e){this._currentIndex=this._views.length,this._views.push(e)},get:function(){return this._views[this._currentIndex]}},{key:"layouts",get:function(){return g(this._views).concat(g(this._includes))}},{key:"viewData",get:function(){return{cache:this.cacheSession,views:this._views,includes:this._includes}}},{key:"size",get:function(){return this._views.length+this._includes.length}},{key:"userAgent",get:function(){return-1!==navigator.appVersion.indexOf("Edge")?y.EDGE:-1===navigator.appVersion.indexOf("Chrome")&&-1!==navigator.appVersion.indexOf("Safari")?y.SAFARI:y.CHROME}}]),e}(),Xe=function(){function e(){r(this,e),this._before={},this._after={}}return o(e,[{key:"reset",value:function(){this._before={},this._after={}}},{key:"appendRenderQueue",value:function(e){for(var t in this._before)e=e.replace("{<".concat(t,"}"),this._before[t].join(""));for(var n in this._after)e=e.replace("{>".concat(n,"}"),this._after[n].join(""));return e}},{key:"prependBefore",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;null==this._before[e]&&(this._before[e]=[]),-1!==n&&n<this._before[e].length?this._before[e].splice(n,0,t):this._before[e].push(t)}},{key:"appendAfter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;null==this._after[e]&&(this._after[e]=[]),-1!==n&&n<this._after[e].length?this._after[e].splice(n,0,t):this._after[e].push(t)}},{key:"hasAppendProcessing",value:function(e){return null!=this._before[e]||null!=this._after[e]}}]),e}(),We={Pink:{hex:"#FFC0CB"},LightPink:{hex:"#FFB6C1"},HotPink:{hex:"#FF69B4"},DeepPink:{hex:"#FF1493"},PaleVioletRed:{hex:"#DB7093"},MediumVioletRed:{hex:"#C71585"},LightSalmon:{hex:"#FFA07A"},Salmon:{hex:"#FA8072"},DarkSalmon:{hex:"#E9967A"},LightCoral:{hex:"#F08080"},IndianRed:{hex:"#CD5C5C"},Crimson:{hex:"#DC143C"},Firebrick:{hex:"#B22222"},DarkRed:{hex:"#8B0000"},Red:{hex:"#FF0000"},OrangeRed:{hex:"#FF4500"},Tomato:{hex:"#FF6347"},Coral:{hex:"#FF7F50"},Orange:{hex:"#FFA500"},DarkOrange:{hex:"#FF8C00"},Yellow:{hex:"#FFFF00"},LightYellow:{hex:"#FFFFE0"},LemonChiffon:{hex:"#FFFACD"},LightGoldenrodYellow:{hex:"#FAFAD2"},PapayaWhip:{hex:"#FFEFD5"},Moccasin:{hex:"#FFE4B5"},PeachPuff:{hex:"#FFDAB9"},PaleGoldenrod:{hex:"#EEE8AA"},Khaki:{hex:"#F0E68C"},DarkKhaki:{hex:"#BDB76B"},Gold:{hex:"#FFD700"},Cornsilk:{hex:"#FFF8DC"},BlanchedAlmond:{hex:"#FFEBCD"},Bisque:{hex:"#FFE4C4"},NavajoWhite:{hex:"#FFDEAD"},Wheat:{hex:"#F5DEB3"},Burlywood:{hex:"#DEB887"},Tan:{hex:"#D2B48C"},RosyBrown:{hex:"#BC8F8F"},SandyBrown:{hex:"#F4A460"},Goldenrod:{hex:"#DAA520"},DarkGoldenrod:{hex:"#B8860B"},Peru:{hex:"#CD853F"},Chocolate:{hex:"#D2691E"},SaddleBrown:{hex:"#8B4513"},Sienna:{hex:"#A0522D"},Brown:{hex:"#A52A2A"},Maroon:{hex:"#800000"},DarkOliveGreen:{hex:"#556B2F"},Olive:{hex:"#808000"},OliveDrab:{hex:"#6B8E23"},YellowGreen:{hex:"#9ACD32"},LimeGreen:{hex:"#32CD32"},Lime:{hex:"#00FF00"},LawnGreen:{hex:"#7CFC00"},Chartreuse:{hex:"#7FFF00"},GreenYellow:{hex:"#ADFF2F"},SpringGreen:{hex:"#00FF7F"},MediumSpringGreen:{hex:"#00FA9A"},LightGreen:{hex:"#90EE90"},PaleGreen:{hex:"#98FB98"},DarkSeaGreen:{hex:"#8FBC8F"},MediumAquamarine:{hex:"#66CDAA"},MediumSeaGreen:{hex:"#3CB371"},SeaGreen:{hex:"#2E8B57"},ForestGreen:{hex:"#228B22"},Green:{hex:"#008000"},DarkGreen:{hex:"#006400"},Aqua:{hex:"#00FFFF"},Cyan:{hex:"#00FFFF"},LightCyan:{hex:"#E0FFFF"},PaleTurquoise:{hex:"#AFEEEE"},Aquamarine:{hex:"#7FFFD4"},Turquoise:{hex:"#40E0D0"},DarkTurquoise:{hex:"#00CED1"},MediumTurquoise:{hex:"#48D1CC"},LightSeaGreen:{hex:"#20B2AA"},CadetBlue:{hex:"#5F9EA0"},DarkCyan:{hex:"#008B8B"},Teal:{hex:"#008080"},LightSteelBlue:{hex:"#B0C4DE"},PowderBlue:{hex:"#B0E0E6"},LightBlue:{hex:"#ADD8E6"},SkyBlue:{hex:"#87CEEB"},LightSkyBlue:{hex:"#87CEFA"},DeepSkyBlue:{hex:"#00BFFF"},DodgerBlue:{hex:"#1E90FF"},Cornflower:{hex:"#6495ED"},SteelBlue:{hex:"#4682B4"},RoyalBlue:{hex:"#4169E1"},Blue:{hex:"#0000FF"},MediumBlue:{hex:"#0000CD"},DarkBlue:{hex:"#00008B"},Navy:{hex:"#000080"},MidnightBlue:{hex:"#191970"},Lavender:{hex:"#E6E6FA"},Thistle:{hex:"#D8BFD8"},Plum:{hex:"#DDA0DD"},Violet:{hex:"#EE82EE"},Orchid:{hex:"#DA70D6"},Fuchsia:{hex:"#FF00FF"},Magenta:{hex:"#FF00FF"},MediumOrchid:{hex:"#BA55D3"},MediumPurple:{hex:"#9370DB"},BlueViolet:{hex:"#8A2BE2"},DarkViolet:{hex:"#9400D3"},DarkOrchid:{hex:"#9932CC"},DarkMagenta:{hex:"#8B008B"},Purple:{hex:"#800080"},RebeccaPurple:{hex:"#663399"},Indigo:{hex:"#4B0082"},DarkSlateBlue:{hex:"#483D8B"},SlateBlue:{hex:"#6A5ACD"},MediumSlateBlue:{hex:"#7B68EE"},White:{hex:"#FFFFFF"},Snow:{hex:"#FFFAFA"},Honeydew:{hex:"#F0FFF0"},MintCream:{hex:"#F5FFFA"},Azure:{hex:"#F0FFFF"},AliceBlue:{hex:"#F0F8FF"},GhostWhite:{hex:"#F8F8FF"},WhiteSmoke:{hex:"#F5F5F5"},Seashell:{hex:"#FFF5EE"},Beige:{hex:"#F5F5DC"},OldLace:{hex:"#FDF5E6"},FloralWhite:{hex:"#FFFAF0"},Ivory:{hex:"#FFFFF0"},AntiqueWhite:{hex:"#FAEBD7"},Linen:{hex:"#FAF0E6"},LavenderBlush:{hex:"#FFF0F5"},MistyRose:{hex:"#FFE4E1"},Gainsboro:{hex:"#DCDCDC"},LightGray:{hex:"#D3D3D3"},Silver:{hex:"#C0C0C0"},DarkGray:{hex:"#A9A9A9"},Gray:{hex:"#808080"},DimGray:{hex:"#696969"},LightSlateGray:{hex:"#778899"},SlateGray:{hex:"#708090"},DarkSlateGray:{hex:"#2F4F4F"},Black:{hex:"#000000"}},je=[];for(var Ye in We){var Ze=We[Ye];Ze.name=Ye;var qe=nt(Ze.hex);qe&&(Ze.rgb=qe,Ze.hsl=Ke(Ze.rgb),je.push(Ze))}function Ke(e){var t=e.r,n=void 0===t?0:t,i=e.g,r=void 0===i?0:i,a=e.b,o=void 0===a?0:a,l=Math.min(n/=255,r/=255,o/=255),s=Math.max(n,r,o),u=(s+l)/2,h=u,c=u;if(s===l)u=0,h=0;else{var f=s-l;switch(h=c>.5?f/(2-s-l):f/(s+l),s){case n:u=(r-o)/f+(r<o?6:0);break;case r:u=(o-n)/f+2;break;case o:u=(n-r)/f+4}u/=6}return{h:360*u,s:100*h,l:100*c}}function Qe(e,t){if(e.hsl&&t.hsl){var n=[e.hsl.h,t.hsl.h],i=n[0],r=n[1];if(i===r){var a=[e.hsl.s,t.hsl.s];if((i=a[0])===(r=a[1])){var o=[e.hsl.l,t.hsl.l];i=o[0],r=o[1]}}return i>=r?1:-1}return 0}function $e(e){return e?"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"):""}function Je(e){for(var t in We)if(t.toLowerCase()===e.trim().toLowerCase())return We[t];return null}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";if(""!==e){if("initial"===e)e="#000000";else if("transparent"===e)e="#000000",t="0";else{var n=Je(e);if(n)return[n.hex,$e(n.rgb),t]}var i=nt(e);i&&(e=$e(i));var r=e.match(/rgb(?:a)?\(([0-9]{1,3}), ([0-9]{1,3}), ([0-9]{1,3})(?:, ([0-9\.]{1,3}))?\)/);if(r&&r.length>=4&&"0"!==r[4])return null==r[4]&&(r[4]=t),["#".concat(tt(r[1])+tt(r[2])+tt(r[3])),r[0],parseFloat(r[4])<1?parseFloat(r[4]).toFixed(2):"1"]}return[]}function tt(e){var t="0123456789ABCDEF",n=parseInt(e);return isNaN(n)?"00":t.charAt(((n=Math.max(0,Math.min(n,255)))-n%16)/16)+t.charAt(n%16)}function nt(e){return 3===(e=e.replace("#","").trim()).length&&(e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2)),6===e.length?{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16)}:null}function it(e){if(""!==e){var t=et(e=e.trim());if(t.length>0&&(e=t[0]),"#"===e.charAt(0)&&/^#[a-zA-Z0-9]{3,6}$/.test(e)){var n=nt(e);return 4===e.length&&n?et($e(n))[0]:e}}return""}je.sort(Qe);var rt=Object.freeze({getColorNearest:function(e){var t=je.slice(),n=t.findIndex(function(t){return t.hex===e});if(-1!==n)return t[n];var i=nt(e);if(i){var r=Ke(i);if(r)return t.push({name:"",hsl:r,rgb:{r:-1,g:-1,b:-1},hex:""}),t.sort(Qe),n=t.findIndex(function(e){return""===e.name}),t[Math.min(n+1,t.length-1)]}return null},getColorByName:Je,parseRGBA:et,convertToHex:tt,convertToRGB:nt,parseHex:it,reduceToRGB:function(e,t){var n=nt(e);if(n){var i=t<0?0:255;return"rgb(".concat(Math.round((i-n.r)*(t=Math.abs(t)))+n.r,", ").concat(Math.round((i-n.g)*t)+n.g,", ").concat(Math.round((i-n.b)*t)+n.b,")")}return e}}),at=function(){function e(t){r(this,e),this.file=t,this.file.stored=e.STORED}return o(e,[{key:"addFile",value:function(e,t){this.file.addFile(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")}},{key:"reset",value:function(){for(var t in e.STORED)e.STORED[t]=new Map;this.file.reset()}},{key:"setBoxSpacing",value:function(){var e=this;this.cache.elements.forEach(function(t){if(!t.hasBit("excludeResource",T.BOX_SPACING)&&(!pe(t.element,"boxSpacing")||e.settings.alwaysReevaluateResources)){var n=xe(t.element),i={};for(var r in n)i[r]=!t.inlineStatic||"marginTop"!==r&&"marginBottom"!==r?V(n[r],t.css("fontSize")):"0px";ge(t.element,"boxSpacing",i)}})}},{key:"setBoxStyle",value:function(){var e=this;this.cache.elements.forEach(function(t){if(!t.hasBit("excludeResource",T.BOX_STYLE)&&(!pe(t.element,"boxStyle")||e.settings.alwaysReevaluateResources)){var n={borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,borderRadius:null,backgroundColor:null,backgroundSize:null,backgroundImage:null,backgroundRepeat:null,backgroundPositionX:null,backgroundPositionY:null};for(var i in n){var r=t.css(i);switch(i){case"borderTop":case"borderRight":case"borderBottom":case"borderLeft":var a=t.css("".concat(i,"Color"));switch(a){case"initial":a=r;break;case"inherit":case"currentColor":a=Ae(t.element,"".concat(i,"Color"))}var o=t.css("".concat(i,"Style"))||"none",l=t.css("".concat(i,"Width"))||"1px",s="none"!==o?et(a,t.css("opacity")):[];"inset"===o&&"0px"===l&&(l="1px"),n[i]={style:o,width:l,color:s.length>0?s:["#000000","rgb(0, 0, 0)","0"]};break;case"borderRadius":var u=[t.css("borderTopLeftRadius"),t.css("borderTopRightRadius"),t.css("borderBottomLeftRadius"),t.css("borderBottomRightRadius")],h=u[0],c=u[1],f=u[2],d=u[3];n[i]=h===c&&c===f&&f===d?""===h||"0px"===h?[]:[h]:[h,c,f,d];break;case"backgroundColor":n[i]=et(r,t.css("opacity"));break;case"backgroundSize":var g=t.css("fontSize"),p=[];if("auto"!==r&&"auto auto"!==r&&"initial"!==r&&"0px"!==r){var m=r.match(/^([0-9\.]+(?:px|pt|em|%)|auto)(?: ([0-9\.]+(?:px|pt|em|%)|auto))?(?: ([0-9\.]+(?:px|pt|em)))?(?: ([0-9\.]+(?:px|pt|em)))?$/);m&&(p="auto"===m[1]||"auto"===m[2]?["auto"===m[1]?"":V(m[1],g),"auto"===m[2]?"":V(m[2],g)]:K(m[1])&&null==m[3]?[m[1],m[2]]:null==m[2]||m[1]===m[2]&&m[1]===m[3]&&m[1]===m[4]?[V(m[1],g)]:null==m[3]||m[1]===m[3]&&m[2]===m[4]?[V(m[1],g),V(m[2],g)]:[V(m[1],g),V(m[2],g),V(m[3],g),V(m[4],g)])}n[i]=p;break;case"backgroundImage":n[i]=t.hasBit("excludeResource",T.IMAGE_SOURCE)?"":r;break;case"backgroundRepeat":case"backgroundPositionX":case"backgroundPositionY":n[i]=r}}if(Array.isArray(n.backgroundColor)&&!t.has("backgroundColor")&&(t.cssParent("backgroundColor",!1,!0)===n.backgroundColor[1]||t.documentParent.visible&&ke(t.element,"backgroundColor"))&&(n.backgroundColor.length=0),"none"!==n.borderTop.style){var v=JSON.stringify(n.borderTop);v===JSON.stringify(n.borderRight)&&v===JSON.stringify(n.borderBottom)&&v===JSON.stringify(n.borderLeft)&&(n.border=n.borderTop)}ge(t.element,"boxStyle",n)}})}},{key:"setFontStyle",value:function(){var e=this;this.cache.each(function(t){if(!t.hasBit("excludeResource",T.FONT_STYLE)&&(!pe(t.element,"fontStyle")||e.settings.alwaysReevaluateResources)){var n=e.hasDrawableBackground(pe(t.element,"boxStyle"));if(t.length>0||t.imageElement||"HR"===t.tagName||t.inlineText&&!n&&!t.preserveWhiteSpace&&""===t.element.innerHTML.trim())return;var i=et(t.css("color"),t.css("opacity")),r=et(t.css("backgroundColor"),t.css("opacity"));r.length>0&&(n||t.cssParent("backgroundColor",!1,!0)===r[1]&&(t.plainText||r[1]!==t.styleMap.backgroundColor)||!t.has("backgroundColor")&&ke(t.element,"backgroundColor"))&&(r.length=0);var a=t.css("fontFamily"),o=t.css("fontSize"),l=t.css("fontWeight");if(j(e.application.userAgent,y.EDGE)&&!t.has("fontFamily"))switch(t.tagName){case"TT":case"CODE":case"KBD":case"SAMP":a="monospace"}if(0===P(o))switch(o){case"xx-small":o="8px";break;case"x-small":o="10px";break;case"small":o="13px";break;case"medium":o="16px";break;case"large":o="18px";break;case"x-large":o="24px";break;case"xx-large":o="32px"}if(!Y(l))switch(l){case"lighter":l="200";break;case"bold":l="700";break;case"bolder":l="900";break;default:l="400"}var s={fontFamily:a,fontStyle:t.css("fontStyle"),fontSize:o,fontWeight:l,color:i,backgroundColor:r};ge(t.element,"fontStyle",s)}})}},{key:"setImageSource",value:function(){var e=this;this.cache.visible.forEach(function(t){if(!t.hasBit("excludeResource",T.IMAGE_SOURCE)&&(!pe(t.element,"imageSource")||e.settings.alwaysReevaluateResources)&&t.svgElement){var n=t.element;if(n.children.length>0){var i=function(e,t,n){if(""===t&&(t=Ie(e,"d")),t&&"none"!==t&&"none"!==Ie(e,"display")&&!["hidden","collpase"].includes(Ie(e,"visibility"))){var i=Ie(e,"fill"),r=Ie(e,"stroke"),a=it(Ie(e,"color"));if(""!==i)switch(i){case"none":case"transparent":i="";break;case"currentColor":i=a||it(Ae(e,"color"));break;default:i=it(i)}if(""!==r)switch(r){case"none":case"transparent":r="";break;case"currentColor":r=a||it(Ae(e,"color"));break;default:r=it(r)}var o=parseFloat(Ie(e,"fill-opacity")),l=parseFloat(Ie(e,"stroke-opacity"));return{name:e.id,color:a,fillColor:i,strokeColor:r,strokeWidth:""+P(Ie(e,"stroke-width")),fillAlpha:!isNaN(o)&&o<1?o:1,strokeAlpha:!isNaN(l)&&l<1?l:1,strokeLineCap:Ie(e,"stroke-linecap"),strokeLineJoin:Ie(e,"stroke-linejoin"),strokeMiterLimit:Ie(e,"stroke-miterlimit"),clipPath:n,d:t}}return null},r=parseFloat(t.css("opacity")),a={element:n,name:n.id,width:n.width.baseVal.value,height:n.height.baseVal.value,viewBoxWidth:n.viewBox.baseVal.width,viewBoxHeight:n.viewBox.baseVal.height,opacity:!isNaN(r)&&r<1?r:1,children:[]},o=Array.from(n.children).filter(function(e){return"svg"===e.tagName||"g"===e.tagName});[n].concat(g(o)).forEach(function(e,t){var r={element:e,name:n.id||"group_".concat(t),translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,nestedSVG:!1,children:[]};if("g"===e.tagName)for(var o=e,l=0;l<o.transform.baseVal.numberOfItems;l++){var s=o.transform.baseVal.getItem(l);switch(s.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:r.translateX=s.matrix.e,r.translateY=s.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:r.scaleX=s.matrix.a,r.scaleY=s.matrix.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:r.rotation=s.angle;break;case SVGTransform.SVG_TRANSFORM_SKEWX:r.skewX=s.angle;break;case SVGTransform.SVG_TRANSFORM_SKEWY:r.skewY=s.angle}}else t>0&&(r.x=e.x.baseVal.value,r.y=e.y.baseVal.value,r.nestedSVG=!0);var u=Array.from(e.children).filter(function(e){return"clipPath"===e.tagName});[e].concat(g(u)).forEach(function(e,t){for(var n=0;n<e.children.length;n++){var a=e.children[n].tagName,o=t>0;switch(a){case"path":var l=i(e.children[n],"",o);l&&r.children.push(l);break;case"line":var s=e.children[n];if(0!==s.x1.baseVal.value||0!==s.y1.baseVal.value||0!==s.x2.baseVal.value||0!==s.y2.baseVal.value){var u=i(s,"M".concat(s.x1.baseVal.value,",").concat(s.y1.baseVal.value," L").concat(s.x2.baseVal.value,",").concat(s.y2.baseVal.value),o);u&&u.strokeColor&&(u.fillColor="",r.children.push(u))}break;case"rect":var h=e.children[n];if(h.width.baseVal.value>0&&h.height.baseVal.value>0){var c=h.x.baseVal.value,f=h.y.baseVal.value,d=i(h,"M".concat(c,",").concat(f," H").concat(c+h.width.baseVal.value," V").concat(f+h.height.baseVal.value," H").concat(c," L").concat(c,",").concat(f),o);d&&r.children.push(d)}break;case"polyline":case"polygon":var g=e.children[n];if(g.points.numberOfItems>0){for(var p=[],m=0;m<g.points.numberOfItems;m++){var v=g.points.getItem(m);p.push("".concat(v.x,",").concat(v.y))}var y=i(g,"M".concat(p.join(" ")+("polygon"===a?"z":"")),o);y&&r.children.push(y)}break;case"circle":var b=e.children[n],E=b.r.baseVal.value;if(E>0){var x=i(b,"M".concat(b.cx.baseVal.value,",").concat(b.cy.baseVal.value," m-").concat(E,",0 a").concat(E,",").concat(E," 0 1,0 ").concat(2*E,",0 a").concat(E,",").concat(E," 0 1,0 -").concat(2*E,",0"),o);x&&r.children.push(x)}break;case"ellipse":var T=e.children[n],A=T.rx.baseVal.value,w=T.ry.baseVal.value;if(A>0&&w>0){var k=i(T,"M".concat(T.cx.baseVal.value-A,",").concat(T.cy.baseVal.value,"a").concat(A,",").concat(w," 0 1,0 ").concat(2*A,",0a").concat(A,",").concat(w," 0 1,0 -").concat(2*A,",0"),o);k&&r.children.push(k)}}}}),a.children.push(r)}),a.children.length>0&&ge(n,"imageSource",a)}}})}},{key:"setValueString",value:function(){var e=this;function t(e,t){switch(e.multiLine&&!e.renderParent.linearVertical&&(t=t.replace(/^\s*\n/,"")),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," ");break;case"pre":case"pre-wrap":e.renderParent.linearVertical||(t=t.replace(/^\n/,"")),t=(t=t.replace(/\n/g,"\\n")).replace(/\s/g,"&#160;");break;case"pre-line":t=(t=t.replace(/\n/g,"\\n")).replace(/\s+/g," ");break;default:return Re(e.element.previousSibling)&&(t=t.replace(/^\s+/,"")),Re(e.element.nextSibling)&&(t=t.replace(/\s+$/,"")),[t,!1]}return[t,!0]}this.cache.visible.forEach(function(n){var i=n.element;if(!n.hasBit("excludeResource",T.VALUE_STRING)&&(!pe(i,"valueString")||e.settings.alwaysReevaluateResources)){var r="",a="",o=!1,l=!0;if(i instanceof HTMLInputElement)switch(i.type){case"text":case"number":case"email":case"search":case"submit":case"reset":case"button":a=i.value.trim();break;default:n.companion&&!n.companion.visible&&(a=n.companion.textContent.trim())}else if(i instanceof HTMLTextAreaElement)a=i.value.trim();else if(i instanceof HTMLElement)if("BUTTON"===i.tagName)a=i.innerText;else if(n.inlineText){r=n.textContent.trim();var s=d(t(n,a=Ve(i.children.length>0||"CODE"===i.tagName?i.innerHTML:n.textContent)),2);o=s[1],a=(a=(a=s[0]).replace(/\s*<br\s*\/?>\s*/g,"\\n")).replace(/\s+(class|style)=".*?"/g,"")}else""===i.innerText.trim()&&e.hasDrawableBackground(pe(i,"boxStyle"))&&(a=Ve(i.innerText),l=!1);else if(n.plainText){r=n.textContent.trim();var u=d(t(n,a=(a=Ve(n.textContent)).replace(/&[A-Za-z]+;/g,function(e){return e.replace("&","&amp;")})),2);a=u[0],o=u[1]}if(""!==a){if(l){var h=n.previousSibling(),c=n.nextSibling(),f=!1;if(!h||h.multiLine||h.lineBreak?a=a.replace(/^\s+/,""):f=/\s+$/.test(h.element.innerText||h.element.textContent||""),o){var g=a;a=a.trim(),!h||h.block||h.lineBreak||f||!/^\s+/.test(g)||(a="&#160;"+a),c&&!c.lineBreak&&/\s+$/.test(g)&&(a+="&#160;")}else/^\s+$/.test(a)?a.length>0&&(a="&#160;"+a.substring(1)):a=(a=a.replace(/^\s+/,h&&(h.block||h.lineBreak||h.element instanceof HTMLElement&&h.element.innerText.length>1&&f||n.multiLine&&Le(i))?"":"&#160;")).replace(/\s+$/,c&&c.lineBreak?"":"&#160;")}""!==a&&ge(i,"valueString",{name:r,value:a})}}})}},{key:"setOptionArray",value:function(){var e=this;this.cache.list.filter(function(e){return e.visible&&"SELECT"===e.tagName&&!e.hasBit("excludeResource",T.OPTION_ARRAY)}).forEach(function(t){var n=t.element;if(!pe(n,"optionArray")||e.settings.alwaysReevaluateResources){for(var i=[],r=[],a=-1;++a<n.children.length;){var o=n.children[a].text.trim();if(""!==o)if(r&&0===i.length&&Y(o))r.push(o);else{if(r&&r.length>0){a=-1,r=null;continue}""!==o&&i.push(o)}}ge(n,"optionArray",{stringArray:i.length>0?i:null,numberArray:r&&r.length>0?r:null})}})}},{key:"borderVisible",value:function(e){return null!=e&&!("none"===e.style||"0px"===e.width)}},{key:"hasDrawableBackground",value:function(e){return null!=e&&(this.borderVisible(e.borderTop)||this.borderVisible(e.borderRight)||this.borderVisible(e.borderBottom)||this.borderVisible(e.borderLeft)||e.borderRadius.length>0||""!==e.backgroundImage&&"none"!==e.backgroundImage)}}],[{key:"insertStoredAsset",value:function(t,n,i){var r=e.STORED[t];if(r){var a="",o=!0,l=!1,s=void 0;try{for(var u,h=r.entries()[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=d(u.value,2),f=c[0],g=c[1];if(JSON.stringify(i)===JSON.stringify(g)){a=f;break}}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}if(""===a&&(Y(n)&&(n="__".concat(n)),oe(i))){var p=0;do{a=n,p>0&&(a+="_".concat(p)),r.has(a)||r.set(a,i),p++}while(r.has(a)&&r.get(a)!==i)}return a}return""}}]),e}();at.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,styles:new Map,dimens:new Map,drawables:new Map,images:new Map};var ot,lt,st=function(){function e(){r(this,e),this.appName="",this.queue=[]}return o(e,[{key:"addFile",value:function(e,t,n,i){if(""!==n||""!==i){var r=this.queue.findIndex(function(n){return n.pathname===e&&n.filename===t});-1!==r?(this.queue[r].content=n||"",this.queue[r].uri=i||""):this.queue.push({pathname:e,filename:t,content:n,uri:i})}}},{key:"reset",value:function(){this.queue.length=0}},{key:"saveToDisk",value:function(e){var t=this;location.protocol.startsWith("http")?Array.isArray(e)&&e.length>0&&(e.push.apply(e,g(this.queue)),fetch("/api/savetodisk"+"?directory=".concat(encodeURIComponent(ee(this.settings.outputDirectory,"/")))+"&appname=".concat(encodeURIComponent(this.appName.trim()))+"&filetype=".concat(this.settings.outputArchiveFileType.toLowerCase())+"&processingtime=".concat((""+this.settings.outputMaxProcessingTime).trim()),{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json, text/plain, */*","Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(e){e&&(e.zipname?fetch("/api/downloadtobrowser?filename=".concat(encodeURIComponent(e.zipname))).then(function(e){return e.blob()}).then(function(n){return t.downloadToDisk(n,re(e.zipname))}):e.system&&alert("".concat(e.application,"\n\n").concat(e.system)))}).catch(function(e){return alert("ERROR: ".concat(e))})):alert("SERVER (required): See README for instructions")}},{key:"downloadToDisk",value:function(e,t){var n=new Blob([e],{type:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")||"application/octet-stream"});if(void 0===window.navigator.msSaveBlob){var i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,r.setAttribute("download",t),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(function(){return window.URL.revokeObjectURL(i)},100)}else window.navigator.msSaveBlob(n,t)}}]),e}(),ut=function(){function e(t,n,i,a){r(this,e),this.name=t,this.framework=n,this.options={},this.tagNames=[],this.documentRoot=!1,this.dependencies=[],this.subscribers=new Set,this.subscribersChild=new Set,Array.isArray(i)&&(this.tagNames=i.map(function(e){return e.trim().toUpperCase()})),a&&Object.assign(this.options,a)}return o(e,[{key:"setTarget",value:function(e,t,n){this._node=e,this._parent=t,this._element=n||e&&e.element}},{key:"is",value:function(e){return e.styleElement&&(0===this.tagNames.length||this.tagNames.includes(e.tagName))}},{key:"require",value:function(e){this.dependencies.push({name:e,init:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}},{key:"included",value:function(e){return e||(e=this.element),!!e&&Q(e.dataset.ext,this.name)}},{key:"beforeInit",value:function(){var e=this;!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.beforeInit(!0))})}},{key:"init",value:function(e){return!1}},{key:"afterInit",value:function(){var e=this;!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.afterInit(!0))})}},{key:"condition",value:function(){var e=this.node;return!!(e&&e.element instanceof HTMLElement)&&(e.dataset.ext?this.included():this.tagNames.length>0)}},{key:"processNode",value:function(e,t){return{output:"",complete:!1}}},{key:"processChild",value:function(e,t){return{output:"",complete:!1}}},{key:"afterRender",value:function(){}},{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"finalize",value:function(){}},{key:"getData",value:function(){var e={};if(this.element instanceof HTMLElement){var t=D(this.name,"\\.");for(var n in this.element.dataset)n.length>t.length&&n.startsWith(t)&&(e[G(n.substring(t.length),!1)]=this.element.dataset[n])}return e}},{key:"node",get:function(){return this._node}},{key:"parent",get:function(){return this._parent}},{key:"element",get:function(){return this._element}}]),e}(),ht=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,ut),o(t,[{key:"afterInit",value:function(){var e=this;Array.from(this.application.cache.elements).forEach(function(t){if(!t.hasBit("excludeProcedure",A.ACCESSIBILITY)){var n=t.element;if(n instanceof HTMLInputElement)switch(n.type){case"radio":case"checkbox":[t.nextElementSibling,t.previousElementSibling].some(function(i){var r=ve(i),a=i&&i.parentElement&&"LABEL"===i.parentElement.tagName?ve(i.parentElement):null;return!!(r&&r.visible&&r.pageflow&&(oe(i.htmlFor)&&i.htmlFor===n.id?t.companion=r:r.textElement&&a&&(t.companion=r,a.renderAs=t),t.companion))&&(e.options&&!e.options.showLabel&&r.hide(),!0)})}}})}}]),t}(),ct=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,ut),o(t,[{key:"is",value:function(e){return f(s(t.prototype),"is",this).call(this,e)&&("INPUT"!==e.tagName||["button","file","image","reset","search","submit"].includes(e.element.type))}},{key:"condition",value:function(){return this.included()}}]),t}(),ft=function(e){function t(e,n,i,a){var o;return r(this,t),(o=h(this,s(t).call(this,e,n,i,a))).require(R.EXTERNAL,!0),o}return l(t,ut),o(t,[{key:"processNode",value:function(){var e=this,t=this.node,n=this.parent,i=this.getData(),r="";return i.tag&&(r=t.children.length>0?this.application.viewController.renderGroup(t,n,i.tag):this.application.viewController.renderNode(t,n,i.tag),t.nodeType=t.blockStatic?w.BLOCK:w.INLINE),i.tagChild&&t.each(function(t){t.styleElement&&(t.dataset.ext=e.name,t.dataset.andromeCustomTag=i.tagChild)}),{output:r,complete:!1}}}]),t}(),dt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,ut),o(t,[{key:"beforeInit",value:function(){if(this.element&&(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.included())&&!pe(this.element,"andromeExternalDisplay")){for(var e=[],t=this.element;t;)e.push(Ee(t).display),t.style.display="block",t=t.parentElement;ge(this.element,"andromeExternalDisplay",e)}}},{key:"init",value:function(e){return this.included(e)&&this.application.elements.add(e),!1}},{key:"afterInit",value:function(){if(this.element&&(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.included())){var e=pe(this.element,"andromeExternalDisplay");if(e){for(var t=e,n=this.element,i=0;n;)n.style.display=t[i],n=n.parentElement,i++;me(this.element,"andromeExternalDisplay")}}}},{key:"is",value:function(){return!1}},{key:"condition",value:function(){return!1}}]),t}(),gt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,ut),o(t,[{key:"condition",value:function(){var e=this.node;return this.included()||e.children.length>1&&("table"===e.display&&e.children.every(function(e){return"table-row"===e.display&&e.children.every(function(e){return"table-cell"===e.display})})||e.children.every(function(e){return e.pageflow&&!e.has("backgroundColor")&&!e.has("backgroundImage")&&e.borderTopWidth+e.borderRightWidth+e.borderBottomWidth+e.borderLeftWidth===0&&(!e.inlineElement||e.blockStatic)})&&("none"===e.css("listStyle")||e.children.every(function(e){return"list-item"===e.display&&"none"===e.css("listStyleType")})||!oe(e.dataset.ext)&&!e.flex.enabled&&e.children.length>1&&e.children.some(function(e){return e.children.length>1})&&!e.children.some(function(e){return"list-item"===e.display||e.textElement})))}},{key:"processNode",value:function(e){var t=this.node,n=this.parent,i=!0===this.options.columnBalance||!1,r="",a=[],o={padding:{top:0,left:0,right:0,bottom:0},columnEnd:[],columnCount:0};if(i){var l=[];t.each(function(e,t){l[t]=[];for(var n=0;n<e.children.length;n++)l[t].push(e.children[n].bounds.width);a.push(e.children.slice())});var s=a[l.findIndex(function(e){return e===l.reduce(function(e,t){return e.length===t.length?e.reduce(function(e,t){return e+t},0)<t.reduce(function(e,t){return e+t},0)?e:t:e.length<t.length?e:t})})];if(s&&s.length>1)for(var u=[],h=!1,c=function(e){var t=s[e].bounds,n=[];if(e<s.length-1)for(var i=function(i){if(a[i]===s)n.push(e);else{var r=a[i].findIndex(function(n,r){return r>=e&&Math.floor(n.bounds.width)===Math.floor(t.width)&&r<a[i].length-1});if(-1===r)return n.length=0,"break";n.push(r)}},r=0;r<a.length;r++){if("break"===i(r))break}else for(r=0;r<a.length;r++)if(a[r].length>s.length){var o=a[r].splice(u[r]+(h?2:1),a[r].length-s.length);a[r][u[r]+(h?1:0)].data(R.GRID,"siblings",g(o))}if(n.length===a.length){var l=n.reduce(function(e,t){return Math.min(e,t)});if(n.reduce(function(e,t){return Math.max(e,t)})>l)for(var c=0;c<a.length;c++)if(n[c]>l){var f=a[c].splice(l,n[c]-l);a[c][u[c]+(h?1:0)].data(R.GRID,"siblings",g(f))}u=n,h=!0}else u=Array(a.length).fill(e),h=!1},f=0;f<s.length;f++)c(f);else a.length=0}else{var d=e[t.depth+2],p=d?Object.keys(d):[],m=[];if(p.length>1){var v=[];for(f=0;f<p.length;f++){var y=ue(d[parseInt(p[f])].filter(function(e){return e.documentParent.documentParent.id===t.id}),"linear.top");if(0===f&&0===y.length)return{output:"",complete:!1};v[f]=0===f?0:v[f-1];for(var b=function(e){var t=y[e],n=[t.linear.left,t.linear.right],i=n[0],r=n[1],o=f;if(o>0&&t.element instanceof HTMLElement&&"right"===t.float){t.element.style.cssFloat="left";var l=t.element.getBoundingClientRect();if(l.left-t.marginLeft!==i){i=l.left-t.marginLeft,r=l.right+t.marginRight;for(var s=1;s<v.length&&(o=s,!(i>v[s-1]));s++);}t.element.style.cssFloat="right"}function u(){return a[0].findIndex(function(e){return le(e.linear.top,t.linear.top)||t.linear.top>=e.linear.top&&t.linear.bottom<=e.linear.bottom})}if(0===o||i>=v[o-1])if(null==a[o]&&(a[o]=[]),0===o||a[0].length===y.length)a[o][e]=t;else{var h=u();-1!==h&&(a[o][h]=t)}else{var c=a.length-1;if(a[c]){var d=a[c].reduce(function(e,t){return Math.min(e,t.linear.left)},Number.MAX_VALUE),g=a[c].reduce(function(e,t){return Math.max(e,t.linear.right)},0);if(i>d&&r>g){var p=a.filter(function(e){return e}),m=u();-1!==m&&null==p[p.length-1][m]&&(a[c].length=0)}}}v[f]=Math.max(t.linear.right,v[f])},E=0;E<y.length;E++)b(E)}var x=0;for(E=-1;x<v.length;x++)if(-1===E&&null==a[x])E=x-1;else{if(null==a[x]){-1!==E&&x===v.length-1&&(v[E]=v[x]);continue}-1!==E&&(v[E]=v[x-1],E=-1)}for(var T=0;T<a.length;T++)a[T]&&m.push(v[T]);for(var A=(a=a.filter(function(e){return e&&e.length>0})).reduce(function(e,t){return Math.max(e,t.length)},0),w=0;w<A;w++)for(var I=0;I<a.length;I++)null==a[I][w]&&(a[I][w]={spacer:1})}m.length>0&&(o.columnEnd=m,o.columnEnd[o.columnEnd.length-1]=t.box.right)}if(a.length>1&&a[0].length===t.children.length){o.columnCount=i?a[0].length:a.length,r=this.application.writeGridLayout(t,n,o.columnCount),t.children.slice().forEach(function(e){t.remove(e),e.hide()});for(var S=0,N=0;S<a.length;S++)for(var L=0,C=0,M=0;C<a[S].length;C++){var O=a[S][C];if(O.spacer)1===O.spacer&&L++;else{O.parent=t;var _={inherit:!0,rowSpan:0,columnSpan:0,index:-1,cellFirst:!1,cellLast:!1,rowEnd:!1,rowStart:!1};if(i)_.rowStart=0===C,_.rowEnd=C===a[S].length-1,_.cellFirst=0===S&&0===C,_.cellLast=S===a.length-1&&_.rowEnd,_.index=C;else{for(var B=1,D=1+L,F=S+1;F<a.length&&1===a[F][C].spacer;F++)D++,a[F][C].spacer=2;if(1===D)for(var G=C+1;G<a[S].length&&1===a[S][G].spacer;G++)B++,a[S][G].spacer=2;_.rowSpan=B,_.columnSpan=D,_.rowStart=0==M++,_.rowEnd=D+S===a.length,_.cellFirst=0==N++,_.cellLast=_.rowEnd&&C===a[S].length-1,_.index=S,L=0}O.data(R.GRID,"cellData",_)}}ue(t.children,"documentParent.siblingIndex","siblingIndex"),"table"===t.display&&"collapse"===t.css("borderCollapse")&&(t.modifyBox(k.PADDING_TOP,null),t.modifyBox(k.PADDING_RIGHT,null),t.modifyBox(k.PADDING_BOTTOM,null),t.modifyBox(k.PADDING_LEFT,null)),t.data(R.GRID,"mainData",o),t.render(n)}return{output:r,complete:!0}}},{key:"processChild",value:function(){var e=this.node,t=this.parent,n=t.data(R.GRID,"mainData"),i=e.data(R.GRID,"cellData"),r="";if(n&&i){var a;if(this.options.columnBalance)a=e.data(R.GRID,"siblings");else{var o=n.columnEnd[Math.min(i.index+(i.columnSpan-1),n.columnEnd.length-1)];a=Array.from(e.documentParent.element.children).map(function(t){var n=ve(t);return n&&n.visible&&!n.excluded&&!n.rendered&&n.linear.left>=e.linear.right&&n.linear.right<=o?n:null}).filter(function(e){return e})}if(a&&a.length>0){a.unshift(e);var l=[De.linearX(a),De.linearY(a)],s=l[0],u=l[1],h=this.application.viewController.createGroup(t,e,a);return s||u?(r=this.application.writeLinearLayout(h,t,s),h.alignmentType|=x.SEGMENTED):r=this.application.writeConstraintLayout(h,t),{output:r,parent:h,complete:!0}}}return{output:r,complete:!0}}}]),t}(),pt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,ut),o(t,[{key:"condition",value:function(){var e=this,n=this.node.children;return f(s(t.prototype),"condition",this).call(this)&&n.length>0&&(n.every(function(e){return e.blockStatic})||n.every(function(e){return e.inlineElement})||n.every(function(e){return e.floating})&&1===De.floated(n).size||n.every(function(e,t){return!e.floating&&(0===t||t===n.length-1||e.blockStatic||e.inlineElement&&n[t-1].blockStatic&&n[t+1].blockStatic)}))&&(n.some(function(t){return"list-item"===t.display&&("none"!==t.css("listStyleType")||e.hasSingleImage(t))})||n.every(function(t){return"LI"!==t.tagName&&"none"===t.styleMap.listStyleType&&e.hasSingleImage(t)}))}},{key:"processNode",value:function(){var e=this,t=this.node,n=this.parent,i="";i=De.linearY(t.children)?this.application.writeGridLayout(t,n,t.children.some(function(e){return"inside"===e.css("listStylePosition")})?3:2):this.application.writeLinearLayout(t,n,!0);var r=0;return t.each(function(t){var n={ordinal:"",imageSrc:"",imagePosition:""};if("list-item"===t.display||t.has("listStyleType")||e.hasSingleImage(t)){var i=t.css("listStyleImage");if(i&&"none"!==i)n.imageSrc=i;else switch(t.css("listStyleType")){case"disc":n.ordinal="●";break;case"square":n.ordinal="■";break;case"decimal":n.ordinal="".concat(""+(r+1),".");break;case"decimal-leading-zero":n.ordinal="".concat((r<9?"0":"")+(r+1),".");break;case"lower-alpha":case"lower-latin":n.ordinal="".concat(X(r).toLowerCase(),".");break;case"upper-alpha":case"upper-latin":n.ordinal="".concat(X(r),".");break;case"lower-roman":n.ordinal="".concat(W(r+1).toLowerCase(),".");break;case"upper-roman":n.ordinal="".concat(W(r+1),".");break;case"none":i="";var a="";"no-repeat"===t.css("backgroundRepeat")&&(i=t.css("backgroundImage"),a=t.css("backgroundPosition")),i&&"none"!==i&&(n.imageSrc=i,n.imagePosition=a,t.excludeResource|=T.IMAGE_SOURCE);break;default:n.ordinal="○"}r++}t.data(R.LIST,"mainData",n)}),{output:i,complete:!0}}},{key:"afterRender",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.subscribers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.modifyBox(k.MARGIN_LEFT,null),a.modifyBox(k.PADDING_LEFT,null)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"hasSingleImage",value:function(e){return"none"!==e.css("backgroundImage")&&"no-repeat"===e.css("backgroundRepeat")}}]),t}(),mt=function(e){function t(e,n,i,a){var o;return r(this,t),(o=h(this,s(t).call(this,e,n,i,a))).require(R.EXTERNAL,!0),o}return l(t,ut),o(t,[{key:"init",value:function(e){if(this.included(e)){var t=!1;if(e.children.length>0){var n=e.children[0].tagName;t=Array.from(e.children).every(function(e){return e.tagName===n});for(var i=e.parentElement;i;){if("NAV"===i.tagName&&this.application.elements.has(i)){t=!1;break}i=i.parentElement}}t&&(Array.from(e.querySelectorAll("NAV")).forEach(function(t){"none"===Ee(e).display&&(ge(t,"andromeExternalDisplay","none"),t.style.display="block")}),this.application.elements.add(e))}return!1}},{key:"afterRender",value:function(){var e=this.node;this.included(e.element)&&Array.from(e.element.querySelectorAll("NAV")).forEach(function(e){var t=pe(e,"andromeExternalDisplay");t&&(e.style.display=t,me(e,"andromeExternalDisplay"))})}}]),t}(),vt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,ut),o(t,[{key:"afterInit",value:function(){var e=this;Array.from(this.application.cache.elements).forEach(function(t){if(t.children.some(function(e){if(e.pageflow)return"right"!==e.float&&e.marginLeft<0&&t.marginLeft>=Math.abs(e.marginLeft)&&(Math.abs(e.marginLeft)>=e.bounds.width||t.documentRoot);var n=e.toInt("left"),i=e.toInt("right");return n<0&&t.marginLeft>=Math.abs(n)||i<0&&Math.abs(i)>=e.bounds.width})){var n=[],i=[];if(t.each(function(e){var r=0;if(e.pageflow){var a=e.marginLeft;a<0&&t.marginLeft>=Math.abs(a)&&(r=1)}else{var o=P(e.left)+e.marginLeft,l=P(e.right);o<0?t.marginLeft>=Math.abs(o)&&(r=2):l<0&&Math.abs(l)>=e.bounds.width&&i.push(e)}n.push(r)}),i.length>0){var r=d(new androme.lib.base.NodeList(t.children).partition(function(e){return!i.includes(e)}),2),a=r[0],o=r[1];if(a.length>0&&o.length>0){t.style.marginLeft&&t.autoMarginLeft&&t.css("marginLeft",t.style.marginLeft),t.modifyBox(k.MARGIN_RIGHT,null);var l=t.has("width",I.UNIT)?t.toInt("width"):Math.max.apply(null,o.list.map(function(e){return e.bounds.width})),s=Math.max.apply(null,o.list.map(function(e){return Math.abs(e.toInt("right"))}));a.each(function(e){e.pageflow&&!e.hasWidth&&e.css(e.textElement?"maxWidth":"width",U(l))}),t.css("width",U(l+s))}}var u=Math.max.apply(null,n);u>0&&(t.each(function(i,r){if(2===n[r]){var a=i.toInt("left")+t.marginLeft;i.css("left",U(Math.max(a,0))),a<0&&(i.css("marginLeft",U(i.marginLeft+a)),e.modifyMarginLeft(i,a))}else(2===u||i.pageflow&&!i.plainText&&n.includes(1))&&e.modifyMarginLeft(i,t.marginLeft)}),t.has("width",I.UNIT)&&t.css("width",U(t.toInt("width")+t.marginLeft)),e.modifyMarginLeft(t,t.marginLeft,!0))}})}},{key:"modifyMarginLeft",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.bounds.left-=t,e.bounds.width+=Math.max(e.marginLeft<0?e.marginLeft+t:t,0),e.css("marginLeft",U(e.marginLeft+t*(n?-1:1))),e.setBounds(!0)}}]),t}(),yt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,ut),o(t,[{key:"processNode",value:function(){var e=this.node,t=this.parent,n=[],i=e.children.filter(function(e){return"THEAD"===e.tagName}),r=e.children.filter(function(e){return"TBODY"===e.tagName}),a=e.children.filter(function(e){return"TFOOT"===e.tagName}),o=Array.from(e.element.children).find(function(e){return"COLGROUP"===e.tagName}),l=e.css("width");i.length>0&&(i[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(i[0],"styleMap")}),n.push.apply(n,g(i[0].children)),i.forEach(function(e){return e.hide()})),r.length>0&&r.forEach(function(e){n.push.apply(n,g(e.children)),e.hide()}),a.length>0&&(a[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(a[0],"styleMap")}),n.push.apply(n,g(a[0].children)),a.forEach(function(e){return e.hide()}));var s="fixed"===e.css("tableLayout"),u="collapse"===e.css("borderCollapse"),h=d(u?[0,0]:e.css("borderSpacing").split(" ").map(function(e){return parseInt(e)}),2),c=h[0],f=h[1];c>0?(e.modifyBox(k.PADDING_LEFT,c),e.modifyBox(k.PADDING_RIGHT,c)):(e.modifyBox(k.PADDING_LEFT,null),e.modifyBox(k.PADDING_RIGHT,null)),f>0?(e.modifyBox(k.PADDING_TOP,f),e.modifyBox(k.PADDING_BOTTOM,f)):(e.modifyBox(k.PADDING_TOP,null),e.modifyBox(k.PADDING_BOTTOM,null));for(var p=U(c>1?Math.round(c/2):c),m=U(f>1?Math.round(f/2):f),v=[],y=[],b=Array(n.length).fill(0),E=!1,x=0;x<n.length;x++)for(var T=n[x],A=0;A<T.children.length;A++){for(var w=T.children[A],S=T.children[A].element,N=0;N<S.rowSpan-1;N++){var L=x+1+N;null!=b[L]&&(b[L]+=S.colSpan)}if(!w.has("background")&&!w.has("backgroundColor")){var C=w.element;if(o){var M=Ee(o.children[b[x]]);M.background?C.style.background=M.background:M.backgroundColor&&(C.style.backgroundColor=M.backgroundColor)}else{var O=Ae(C,"background",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]);""!==O?C.style.background=O:""!==(O=Ae(C,"backgroundColor",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]))&&(C.style.backgroundColor=O)}}var _=w.styleMap.width,B=b[x];if(0===x||null==v[B]||!s)if(_&&"auto"!==_){var D=K(_),F=q(v[B]);(null==v[B]||w.bounds.width<y[B]||w.bounds.width===y[B]&&("auto"===v[B]&&(D||F)||D&&F||D&&K(v[B])&&H(_)>H(v[B])||F&&q(_)&&P(_)>P(v[B])))&&(v[B]=_),1===S.colSpan&&(y[B]=w.bounds.width)}else null==v[B]&&(v[B]=_||"0px",y[B]=0);w.css({marginTop:0===x?"0px":m,marginRight:A<T.children.length-1?p:"0px",marginBottom:x+S.rowSpan-1>=n.length-1?"0px":m,marginLeft:0===b[x]?"0px":p}),E||(E=w.multiLine),b[x]+=S.colSpan}var G=Math.max.apply(null,b),V=n.length;if(v.every(function(e){return K(e)})&&v.reduce(function(e,t){return e+parseFloat(t)},0)>1){var z=100;v.forEach(function(e,t){var n=parseFloat(e);z<=0?v[t]="0px":z-n<0&&(v[t]="".concat(z,"%")),z-=n})}else if(v.every(function(e){return q(e)})){var X=v.reduce(function(e,t){return e+parseInt(t)},0);K(l)&&"100%"!==l||X<e.viewWidth?v.filter(function(e){return"0px"!==e}).forEach(function(e,t){return v[t]="".concat(parseInt(e)/X*100,"%")}):"auto"===l?v.filter(function(e){return"0px"!==e}).forEach(function(t,n){return v[n]=null==y[n]?"undefined":"".concat(y[n]/e.bounds.width*100,"%")}):X>e.viewWidth&&(e.css("width","auto"),s||e.cascade().forEach(function(e){return e.css("width","auto")}))}var W=v.reduce(function(e,t){return e+(K(t)?parseFloat(t):0)},0),Y=function(){if(v.some(function(e){return K(e)})||v.every(function(e){return q(e)&&"0px"!==e}))return 3;if(v.every(function(e){return e===v[0]})){if(E)return e.children.some(function(e){return e.has("height")})?2:3;if("auto"===v[0])return e.has("width")?3:0;if(e.hasWidth)return 2}return v.every(function(e){return"auto"===e||q(e)&&"0px"!==e})?1:0}();(E||2===Y&&!e.hasWidth)&&e.data(R.TABLE,"expand",!0);var Z=e.children.find(function(e){return"CAPTION"===e.tagName});function Q(t){t.data(R.TABLE,"percent","".concat(Math.round(t.bounds.width/e.bounds.width*100),"%")),t.data(R.TABLE,"expand",!0)}function $(e){e.css("width",U(e.bounds.width))}e.children.length=0,Z&&(Z.has("textAlign",I.LEFT)||Z.css("textAlign","center"),V++,Z.data(R.TABLE,"colSpan",G),Z.parent=e),b=Array(n.length).fill(0);for(var J=0,ee=0;ee<n.length;ee++){for(var te=n[ee],ne=te.children.slice(),ie=0;ie<ne.length;ie++){for(var re=ne[ie],ae=re.element,oe=0;oe<ae.rowSpan-1;oe++){var le=ee+1+oe;null!=b[le]&&(b[le]+=ae.colSpan)}ae.rowSpan>1&&re.data(R.TABLE,"rowSpan",ae.rowSpan),ae.colSpan>1&&re.data(R.TABLE,"colSpan",ae.colSpan),re.has("verticalAlign")||re.css("verticalAlign","middle"),0===ee&&re.has("borderTopStyle")&&P(re.css("borderTopWidth"))>0&&(J|=2),0===ie&&re.has("borderLeftStyle")&&P(re.css("borderLeftWidth"))>0&&(J|=4),ie===ne.length-1&&re.has("borderRightStyle")&&P(re.css("borderRightWidth"))>0&&(J|=8),ee===n.length-1&&re.has("borderBottomStyle")&&P(re.css("borderBottomWidth"))>0&&(J|=16);var se=v[b[ee]];if("undefined"!==se)switch(Y){case 3:"auto"===se?W>=1?($(re),re.data(R.TABLE,"exceed",!0),re.data(R.TABLE,"downsized",!0)):Q(re):K(se)?(re.data(R.TABLE,"percent",se),re.data(R.TABLE,"expand",!0)):q(se)&&parseInt(se)>0?re.bounds.width>=parseInt(se)?($(re),re.data(R.TABLE,"expand",!1),re.data(R.TABLE,"downsized",!1)):s?(Q(re),re.data(R.TABLE,"downsized",!0)):($(re),re.data(R.TABLE,"expand",!1)):(re.has("width")&&!re.has("width",I.PERCENT)||$(re),re.data(R.TABLE,"expand",!1));break;case 2:re.css("width","0px");break;case 1:"auto"===se?re.css("width","0px"):(s?re.data(R.TABLE,"downsized",!0):$(re),re.data(R.TABLE,"expand",!1))}b[ee]+=ae.colSpan,re.parent=e}if(b[ee]<G)ne[ne.length-1].data(R.TABLE,"spaceSpan",G-b[ee]);te.hide()}return u&&0!==J&&e.css({borderTopWidth:j(J,2)?"0px":"",borderRightWidth:j(J,8)?"0px":"",borderBottomWidth:j(J,16)?"0px":"",borderLeftWidth:j(J,4)?"0px":""}),{output:this.application.writeGridLayout(e,t,G,V),complete:!0}}}]),t}();function bt(e){ot&&e instanceof ut&&Z(e.name)&&Array.isArray(e.tagNames)&&ot.registerExtension(e)}function Et(e,n){if(ot){var i=ot.getExtension(e);i&&"object"===t(n)&&Object.assign(i.options,n)}}function xt(e){return ot&&ot.getExtension(e)}function Tt(){ot&&ot.reset()}e.settings={},e.system={};var At={base:{Node:Be,NodeList:De,NodeGroup:Fe,Application:Ue,Controller:Xe,Resource:at,File:st,Extension:ut,extensions:{Accessibility:ht,Button:ct,Custom:ft,External:dt,Grid:gt,List:pt,Nav:mt,Origin:vt,Table:yt}},enumeration:S,constant:C,util:ce,dom:_e,xml:ze,color:rt};e.setFramework=function(t){if(lt!==t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.cached():t.create();if(e.settings=ot||0===Object.keys(e.settings).length?n.settings:Object.assign(n.settings,e.settings),(ot=n.application).settings=e.settings,Array.isArray(e.settings.builtInExtensions)){var i=new Set,r=ot.builtInExtensions,a=!0,o=!1,l=void 0;try{for(var s,u=e.settings.builtInExtensions[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var h=s.value;if(r[h=h.trim()])i.add(r[h]);else for(var c in r)c.startsWith("".concat(h,"."))&&i.add(r[c])}}catch(e){o=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}var f=!0,d=!1,g=void 0;try{for(var p,m=i[Symbol.iterator]();!(f=(p=m.next()).done);f=!0)ot.registerExtension(p.value)}catch(e){d=!0,g=e}finally{try{f||null==m.return||m.return()}finally{if(d)throw g}}}lt=t,e.system=t.system}Tt()},e.parseDocument=function(){var e;return ot&&!ot.closed?(e=ot).parseDocument.apply(e,arguments):{then:function(){}}},e.registerExtension=bt,e.configureExtension=Et,e.getExtension=xt,e.ext=function(e,n){if("object"===t(e))bt(e);else if(Z(e)){if("object"!==t(n))return xt(e);Et(e,n)}},e.ready=function(){return ot&&!ot.loading&&!ot.closed},e.close=function(){ot&&!ot.loading&&ot.size>0&&ot.finalize()},e.reset=Tt,e.saveAllToDisk=function(){ot&&!ot.loading&&ot.size>0&&(ot.closed||ot.finalize(),ot.saveAllToDisk())},e.toString=function(){return ot?""+ot:""},e.lib=At,Object.defineProperty(e,"__esModule",{value:!0})});
