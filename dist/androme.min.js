!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.androme={})}(this,function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){this.wrapped=e}function i(e){var t,i;function r(t,i){try{var o=e[t](i),l=o.value,s=l instanceof n;Promise.resolve(s?l.wrapped:l).then(function(e){s?r("next",e):a(o.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){a("throw",e)}}function a(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?r(t.key,t.arg):i=null}this._invoke=function(e,n){return new Promise(function(a,o){var l={key:e,arg:n,resolve:a,reject:o,next:null};i?i=i.next=l:(t=i=l,r(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=c(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}"function"==typeof Symbol&&Symbol.asyncIterator&&(i.prototype[Symbol.asyncIterator]=function(){return this}),i.prototype.next=function(e){return this._invoke("next",e)},i.prototype.throw=function(e){return this._invoke("throw",e)},i.prototype.return=function(e){return this._invoke("return",e)};function d(e,t){return p(e)||function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}(e,t)||v()}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e){if(Array.isArray(e))return e}function m(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var y,b,E,x,T,A,w,k,I;!function(e){e[e.NONE=0]="NONE",e[e.CHROME=2]="CHROME",e[e.SAFARI=4]="SAFARI",e[e.EDGE=8]="EDGE",e[e.FIREFOX=16]="FIREFOX"}(y||(y={})),function(e){e[e.UNIVERSAL=0]="UNIVERSAL",e[e.ANDROID=2]="ANDROID"}(b||(b={})),function(e){e[e.NONE=0]="NONE",e[e.INCLUDE=2]="INCLUDE",e[e.DOM_TRAVERSE=4]="DOM_TRAVERSE",e[e.EXTENSION=8]="EXTENSION",e[e.RENDER=16]="RENDER",e[e.ALL=30]="ALL"}(E||(E={})),function(e){e[e.NONE=0]="NONE",e[e.EXCLUDE=2]="EXCLUDE",e[e.EXTENDABLE=4]="EXTENDABLE",e[e.HORIZONTAL=8]="HORIZONTAL",e[e.VERTICAL=16]="VERTICAL",e[e.ABSOLUTE=32]="ABSOLUTE",e[e.FLOAT=64]="FLOAT",e[e.SEGMENTED=128]="SEGMENTED",e[e.PERCENT=256]="PERCENT",e[e.TOP=512]="TOP",e[e.RIGHT=1024]="RIGHT",e[e.BOTTOM=2048]="BOTTOM",e[e.LEFT=4096]="LEFT",e[e.SINGLE=8192]="SINGLE",e[e.MULTILINE=16384]="MULTILINE",e[e.SPACE=32768]="SPACE"}(x||(x={})),function(e){e[e.NONE=0]="NONE",e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.OPTION_ARRAY=32]="OPTION_ARRAY",e[e.IMAGE_SOURCE=64]="IMAGE_SOURCE",e[e.ASSET=120]="ASSET",e[e.ALL=126]="ALL"}(T||(T={})),function(e){e[e.NONE=0]="NONE",e[e.LAYOUT=2]="LAYOUT",e[e.ALIGNMENT=4]="ALIGNMENT",e[e.AUTOFIT=8]="AUTOFIT",e[e.OPTIMIZATION=16]="OPTIMIZATION",e[e.CUSTOMIZATION=32]="CUSTOMIZATION",e[e.ACCESSIBILITY=64]="ACCESSIBILITY",e[e.ALL=126]="ALL"}(A||(A={})),function(e){e[e.NONE=0]="NONE",e[e.CHECKBOX=1]="CHECKBOX",e[e.RADIO=2]="RADIO",e[e.EDIT=3]="EDIT",e[e.SELECT=4]="SELECT",e[e.RANGE=5]="RANGE",e[e.SVG=6]="SVG",e[e.TEXT=7]="TEXT",e[e.IMAGE=8]="IMAGE",e[e.BUTTON=9]="BUTTON",e[e.INLINE=10]="INLINE",e[e.LINE=11]="LINE",e[e.SPACE=12]="SPACE",e[e.BLOCK=13]="BLOCK",e[e.WEB_VIEW=14]="WEB_VIEW",e[e.FRAME=15]="FRAME",e[e.LINEAR=16]="LINEAR",e[e.RADIO_GROUP=17]="RADIO_GROUP",e[e.GRID=18]="GRID",e[e.RELATIVE=19]="RELATIVE",e[e.CONSTRAINT=20]="CONSTRAINT",e[e.SCROLL_HORIZONTAL=21]="SCROLL_HORIZONTAL",e[e.SCROLL_VERTICAL=22]="SCROLL_VERTICAL"}(w||(w={})),function(e){e[e.MARGIN_TOP=2]="MARGIN_TOP",e[e.MARGIN_RIGHT=4]="MARGIN_RIGHT",e[e.MARGIN_BOTTOM=8]="MARGIN_BOTTOM",e[e.MARGIN_LEFT=16]="MARGIN_LEFT",e[e.PADDING_TOP=32]="PADDING_TOP",e[e.PADDING_RIGHT=64]="PADDING_RIGHT",e[e.PADDING_BOTTOM=128]="PADDING_BOTTOM",e[e.PADDING_LEFT=256]="PADDING_LEFT",e[e.MARGIN=30]="MARGIN",e[e.MARGIN_VERTICAL=10]="MARGIN_VERTICAL",e[e.MARGIN_HORIZONTAL=20]="MARGIN_HORIZONTAL",e[e.PADDING=480]="PADDING",e[e.PADDING_VERTICAL=160]="PADDING_VERTICAL",e[e.PADDING_HORIZONTAL=320]="PADDING_HORIZONTAL"}(k||(k={})),function(e){e[e.NONE=0]="NONE",e[e.UNIT=2]="UNIT",e[e.AUTO=4]="AUTO",e[e.LEFT=8]="LEFT",e[e.BASELINE=16]="BASELINE",e[e.PERCENT=32]="PERCENT",e[e.ZERO=64]="ZERO"}(I||(I={}));var S=Object.freeze({get USER_AGENT(){return y},get APP_FRAMEWORK(){return b},get APP_SECTION(){return E},get NODE_ALIGNMENT(){return x},get NODE_RESOURCE(){return T},get NODE_PROCEDURE(){return A},get NODE_STANDARD(){return w},get BOX_STANDARD(){return k},get CSS_STANDARD(){return I}}),N=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","LI","MAIN","NAV","OL","OUTPUT","P","PRE","SECTION","TFOOT","TH","THEAD","TR","UL","VIDEO"],L=["A","ABBR","ACRONYM","B","BDO","BIG","BR","BUTTON","CITE","CODE","DFN","EM","I","IFRAME","IMG","INPUT","KBD","LABEL","MAP","OBJECT","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TT","U","VAR","PLAINTEXT"],R={ACCESSIBILITY:"androme.accessibility",CUSTOM:"androme.custom",EXTERNAL:"androme.external",GRID:"androme.grid",LIST:"androme.list",ORIGIN:"androme.origin",SPRITE:"androme.sprite",TABLE:"androme.table"},C={URL:/url\("?(.*?)"?\)/},O=Object.freeze({MAP_ELEMENT:{INPUT:w.NONE,PLAINTEXT:w.TEXT,HR:w.LINE,SVG:w.SVG,IMG:w.IMAGE,SELECT:w.SELECT,RANGE:w.RANGE,TEXT:w.EDIT,PASSWORD:w.EDIT,NUMBER:w.EDIT,EMAIL:w.EDIT,SEARCH:w.EDIT,URL:w.EDIT,CHECKBOX:w.CHECKBOX,RADIO:w.RADIO,BUTTON:w.BUTTON,SUBMIT:w.BUTTON,RESET:w.BUTTON,TEXTAREA:w.EDIT,IFRAME:w.WEB_VIEW},BLOCK_ELEMENT:N,INLINE_ELEMENT:L,EXT_NAME:R,DOM_REGEX:C}),M="ABCDEFGHIJKLMNOPQRSTUVWXYZ",_=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function B(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.sort(function(e,n){for(var r=0;r<i.length;r++){var a=D(e,n,i[r]);if(a&&a[0]!==a[1])return 0===t?a[0]>a[1]?1:-1:a[0]<a[1]?1:-1}return 0})}function D(e,t,n){var i=n.split("."),r=e,a=t,o=!0,l=!1,s=void 0;try{for(var u,h=i[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=u.value;if(null==r[c]||null==a[c])return(null!=r[c]||null!=a[c])&&(null!=r[c]?[1,0]:[0,1]);r=r[c],a=a[c]}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}return isNaN(parseInt(r))&&isNaN(parseInt(a))?[r,a]:[H(r),H(a)]}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=(e=e.replace(RegExp("^".concat(t,"+")),"")).match(RegExp("(".concat(t,"[a-z])"),"g"));if(n){var i=!0,r=!1,a=void 0;try{for(var o,l=n[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var s=o.value;e=e.replace(s,s[1].toUpperCase())}}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}}return e}function P(e){return e?e.replace(/[^\w]/g,"_").trim():""}function G(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function H(e){return e&&parseInt(e)||0}function V(e){return e&&parseFloat(e)||0}function z(e,t){if(oe(e)){if(Y(e))return"".concat(Math.round(e),"px");var n=parseFloat(e);if(!isNaN(n)){var i=e.match(/(pt|em)/);if(i)switch(i[0]){case"pt":n*=4/3;break;case"em":n*=H(z(t))||16}return"".concat(n,"px")}}return"0px"}function U(e){for(var t="";e>=M.length;){var n=Math.floor(e/M.length);n>1&&n<=M.length?(t+=M.charAt(n-1),e-=n*M.length):n>M.length&&(t+=U(n*M.length),e-=n*M.length);var i=e%M.length;t+=M.charAt(i),e-=i+M.length}return t=M.charAt(e)+t}function X(e){for(var t=(""+e).split(""),n="",i=3;i--;)n=(_[parseInt(t.pop()||"")+10*i]||"")+n;return"M".repeat(parseInt(t.join("")))+n}function W(e){return"".concat(isNaN(e=parseFloat(e))?0:Math.round(e),"px")}function j(e,t){return(e&t)===t}function Y(e){return/^-?\d+(\.\d+)?$/.test((""+e).trim())}function Z(e){return"string"==typeof e&&""!==e}function q(e){return!!Z(e)&&/^-?[\d.]+(px|pt|em)$/.test(e.trim())}function K(e){return/^\d+(\.\d+)?%$/.test(e)}function Q(e,t){return!!e&&e.split(arguments.length>2&&void 0!==arguments[2]?arguments[2]:",").map(function(e){return e.trim()}).includes(t)}function $(e){if(!/^\w+:\/\//.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n,i=[],r=0;e.split("/").forEach(function(e){".."===e?r++:i.push(e)}),(n=t=t.slice(0,Math.max(t.length-r,0))).push.apply(n,i),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function J(e){return e?e.trim():""}function ee(e,t){return e?te(ne(e,t),t):""}function te(e,t){return e.replace(RegExp("^".concat(t,"+"),"g"),"")}function ne(e,t){return e.replace(RegExp("".concat(t,"+$"),"g"),"")}function ie(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t").repeat(e)}function re(e){return e.substring(e.lastIndexOf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/")+1)}function ae(e,n){var i=[];if("object"===t(n))for(var r in n){var a=n[r];oe(e[a])&&i.push([a,e[a]])}else{var o=function(e){return e===n};for(var l in/^\*.+\*$/.test(n)?o=function(e){return-1!==e.indexOf(n.replace(/\*/g,""))}:/^\*/.test(n)?o=function(e){return e.endsWith(n.replace(/\*/,""))}:/\*$/.test(n)&&(o=function(e){return e.startsWith(n.replace(/\*/,""))}),e)o(l)&&i.push([l,e[l]])}return i}function oe(e){return null!=e&&""!==(""+e).trim()}function le(e,t){return e===t||Math.floor(e)===Math.floor(t)||Math.ceil(e)===Math.ceil(t)||Math.ceil(e)===Math.floor(t)||Math.floor(e)===Math.ceil(t)}function se(e,t){var n=[],i=[],r=!0,a=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;t(u)?n.push(u):i.push(u)}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return[n,i]}function ue(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return B.apply(void 0,[e,0].concat(n))}function he(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return B.apply(void 0,[e,1].concat(n))}var ce=Object.freeze({formatString:function(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)e=e.replace("{".concat(t,"}"),t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);return e},camelToLowerCase:function(e){var t=(e=e.charAt(0).toLowerCase()+e.substring(1)).match(/([a-z][A-Z])/g);if(t){var n=!0,i=!1,r=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;e=e.replace(l,"".concat(l[0],"_").concat(l[1].toLowerCase()))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}return e},convertCamelCase:F,convertWord:P,capitalize:G,convertInt:H,convertFloat:V,convertPX:z,convertAlpha:U,convertRoman:X,convertEnum:function(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;r++){var a=i[r];if(e===t[a])return n[a]}return""},formatPX:W,hasBit:j,isNumber:Y,isString:Z,isUnit:q,isPercent:K,includes:Q,optional:function(e,n,i){var r=!1,a=null;if("object"===t(e)){a=e;var o=n.split("."),l=0;do{a=null!=a[o[l]]?a[o[l]]:null}while(null!=a&&++l<o.length&&"string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a);r=null!=a&&l===o.length}switch(i){case"object":return r?a:null;case"number":return r&&!isNaN(parseInt(a))?parseInt(a):0;case"boolean":return r&&!0===a;default:return r?""+a:""}},resolvePath:$,trimNull:J,trimString:ee,trimStart:te,trimEnd:ne,repeat:ie,indexOf:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){var a=e.indexOf(n[r]);if(-1!==a)return a}return-1},lastIndexOf:re,sameValue:function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var a=0;a<i.length;a++){var o=D(e,t,i[a]);if(!o||o[0]!==o[1])return!1}return!0},searchObject:ae,hasValue:oe,withinRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t>=e-n&&t<=e+n},withinFraction:le,overwriteDefault:function(e,t,n,i){""!==t?(null==e[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=i)):null==e[n]&&(e[n]=i)},partition:se,sortAsc:ue,sortDesc:he});function fe(e){var t=y.CHROME;return-1!==navigator.userAgent.indexOf("Edge")?t=y.EDGE:-1!==navigator.userAgent.indexOf("Firefox")?t=y.FIREFOX:-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari")&&(t=y.SAFARI),j(e,t)}function de(){return{top:0,left:0,right:0,bottom:0}}function ge(){return Object.assign({width:0,height:0},{top:0,left:0,right:0,bottom:0})}function pe(e,t,n){return arguments.length>3&&void 0!==arguments[3]&&arguments[3]?K(e)?e:"".concat((parseFloat(z(e))/t*100).toFixed(2),"%"):K(e)?W(t*(H(e)/100)):z(e,n)}function me(e){var t=document.createRange();t.selectNodeContents(e);var n=Array.from(t.getClientRects()).filter(function(e){return!(0===Math.round(e.width)&&le(e.left,e.right))}),i=ge(),r=!1;if(n.length>0){i=ve(n[0]);for(var a=new Set([i.top]),o=new Set([i.bottom]),l=1;l<n.length;l++){var s=n[l];a.add(s.top),o.add(s.bottom),i.width+=s.width,i.right=Math.max(s.right,i.right),i.height=Math.max(s.height,i.height)}a.size>1&&o.size>1&&(i.top=Math.min.apply(null,Array.from(a)),i.bottom=Math.max.apply(null,Array.from(o)),n[n.length-1].top>=n[0].bottom&&e.textContent&&(""!==e.textContent.trim()||/^\s*\n/.test(e.textContent))&&(r=!0))}return[i,r]}function ve(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function ye(e){if(e){if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var t=Be(e),n=Me(e,"style");if(n)return n;if(t){if(t.style)return t.style;if(t.plainText)return t.styleMap}}if(e.nodeName&&"#"!==e.nodeName.charAt(0)){var i=getComputedStyle(e);return Oe(e,"style",i),i}}return{}}function be(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},r=Be(e),a=ye(e);return["Top","Left","Right","Bottom"].forEach(function(e){var o=0;["padding","margin"].forEach(function(n){var l=n+e,s=H((r||a)[l]);(t||0!==s)&&(i[l]=s),o+=s}),n&&(i["padding".concat(e)]=o,t?i["margin".concat(e)]=0:delete i["margin".concat(e)])}),i}function Ee(e){var t=e.match(C.URL);return t?$(t[1]):""}function xe(e,t,n,i){for(var r="",a=e.parentElement;a&&(null==i||!i.includes(a.tagName))&&(("inherit"===(r=ye(a)[t]||"")||n&&n.some(function(e){return-1!==r.indexOf(e)}))&&(r=""),a!==document.body&&!r);)a=a.parentElement;return r}function Te(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return!("#"===e.nodeName.charAt(0)||!i.includes(ye(e)[t]))||!!e.parentElement&&i.includes(ye(e.parentElement)[t])}function Ae(e,t){if(Re(e)&&e.parentElement){var n=Be(e),i=ye(e);return i&&i[t]===ye(e.parentElement)[t]&&(!n||!n.styleMap[t])}return!1}function we(e,t){return e.getAttribute(t)||ye(e)[F(t)]||""}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=-1;function r(e){return i++!==t&&e.some(function(e){if("#text"===e.nodeName){if(Ie(e,n)||Te(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return!0}else if(e instanceof HTMLElement&&e.childNodes.length>0&&r(Array.from(e.childNodes)))return!0;return!1})}return"#text"===e.nodeName?(t=0,r([e])):r(Array.from(e.childNodes))}function Ie(e){if(e&&"#text"===e.nodeName&&e.textContent){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){for(var t=e.textContent,n=!1,i=0;i<t.length;i++)switch(t.charCodeAt(i)){case 9:case 10:case 13:case 32:continue;default:n=!0}return n&&""!==t}return""!==e.textContent.trim()}return!1}function Se(e){if(e){var t=Be(e),n="#text"===e.nodeName,i=t?t.css("whiteSpace"):ye(e).whiteSpace||"";return e instanceof HTMLElement&&e.children.length>0&&Array.from(e.children).some(function(e){return"BR"===e.tagName})||/\n/.test(e.textContent||"")&&(["pre","pre-wrap"].includes(i)||n&&Te(e,"whiteSpace","pre","pre-wrap"))}return!1}function Ne(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Be(e);return!!n&&("BR"===n.tagName||t&&n.block&&(n.excluded||""===n.textContent.trim()))}function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||e.parentElement===t.parentElement){var r=t.parentElement;if(r){var a=Array.from(r.childNodes),o=e?a.findIndex(function(t){return t===e}):0,l=a.findIndex(function(e){return e===t});if(-1!==o&&-1!==l&&o!==l){var s=a.slice(Math.min(o,l)+1,Math.max(o,l));return s=s.filter(i?function(e){return"#comment"!==e.nodeName}:function(e){return"#"!==e.nodeName.charAt(0)||Ie(e)}),n&&(s=s.filter(function(e){return Be(e)})),s}}}return[]}function Re(e){return e instanceof HTMLElement||e instanceof SVGSVGElement}function Ce(e,t){if(!(Me(e,"inlineSupport")||e.parentElement instanceof SVGSVGElement)){if(Re(e)){if("function"==typeof e.getBoundingClientRect){var n=e.getBoundingClientRect();if(0!==n.width&&0!==n.height)return!(t&&n.left<0&&n.top<0&&Math.abs(n.left)>=n.width&&Math.abs(n.top)>=n.height);if(oe(e.dataset.ext)||"none"!==ye(e).clear)return!0;for(var i=e.parentElement,r=!0;i;){if("none"===ye(i).display){r=!1;break}i=i.parentElement}if(r&&e.children.length>0)return Array.from(e.children).some(function(e){var t=ye(e),n=t.cssFloat,i=t.position;return"static"!==i&&"initial"!==i||"left"===n||"right"===n})}return!1}return Ie(e)}return!1}function Oe(e,t,n){e&&(e["__".concat(t)]=n)}function Me(e,t){return e?e["__".concat(t)]:null}function _e(e){if(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){delete e["__".concat(n[r])]}}}function Be(e){return Me(e,"node")}var De=Object.freeze({isUserAgent:fe,getBoxRect:de,getClientRect:ge,getBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},convertClientPX:pe,getRangeClientRect:me,assignBounds:ve,getStyle:ye,getBoxSpacing:be,cssResolveUrl:Ee,cssInherit:xe,cssParent:Te,cssFromParent:Ae,cssAttribute:we,hasFreeFormText:ke,isPlainText:Ie,hasLineBreak:Se,isLineBreak:Ne,getElementsBetweenSiblings:Le,isStyleElement:Re,isElementVisible:Ce,findNestedExtension:function(e,t){if(Re(e))return Array.from(e.children).find(function(e){return Q(e.dataset.ext,t)})},setElementCache:Oe,getElementCache:Me,deleteElementCache:_e,getNodeFromElement:Be}),Fe=function(){function e(t,n){r(this,e),this.id=t,this.styleMap={},this.nodeType=0,this.alignmentType=0,this.depth=-1,this.siblingIndex=Number.MAX_VALUE,this.renderIndex=Number.MAX_VALUE,this.renderPosition=-1,this.excludeSection=0,this.excludeProcedure=0,this.excludeResource=0,this.renderExtension=new Set,this.documentRoot=!1,this.auto=!0,this.visible=!0,this.excluded=!1,this.rendered=!1,this._data={},this._initialized=!1,this.initial={depth:-1,children:[],styleMap:{},bounds:ge()},n&&(this._element=n,this.init())}return o(e,[{key:"init",value:function(){if(!this._initialized){if(this.styleElement){for(var e=this._element,t=Me(e,"styleMap")||{},n=Array.from(e.style),i=0;i<n.length;i++){var r=n[i];t[F(r)]=e.style[r]}this.style=Me(e,"style")||getComputedStyle(e),this.styleMap=Object.assign({},t),Object.assign(this.initial.styleMap,t)}0!==this.id&&Oe(this._element,"node",this),this._initialized=!0}}},{key:"is",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0;i<t.length;i++){if(this.nodeType===t[i])return!0}return!1}},{key:"of",value:function(e){if(this.nodeType===e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0;r<n.length;r++){if(this.hasAlign(n[r]))return!0}}return!1}},{key:"attr",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r="_".concat(e||"_");if(oe(n)){if(null==this[r]&&(this._namespaces.add(e),this[r]={}),!i&&null!=this[r][t])return"";this[r][t]=""+n}return this[r][t]||""}},{key:"get",value:function(e){return this["_".concat(e||"_")]||{}}},{key:"delete",value:function(e){var t="_".concat(e||"_");if(this[t]){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=i[a];if(-1!==o.indexOf("*")){var l=!0,s=!1,u=void 0;try{for(var h,c=ae(this[t],o)[Symbol.iterator]();!(l=(h=c.next()).done);l=!0){var f=d(h.value,1);delete this[t][f[0]]}}catch(e){s=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw u}}}else delete this[t][o]}}}},{key:"apply",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in e){var i=e[n];if("object"===t(i)){for(var r in i)this.attr(n,r,i[r]);delete e[n]}}}},{key:"each",value:function(e){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.renderChildren:this.children).forEach(e),this}},{key:"render",value:function(e){this.renderParent=e,this.renderDepth=this.documentRoot||this===e||oe(e.dataset.target)?0:e.renderDepth+1,this.rendered=!0}},{key:"hide",value:function(){this.rendered=!0,this.visible=!1}},{key:"data",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return oe(n)&&(null==this._data[e]&&(this._data[e]={}),(i||null==this._data[e][t])&&(this._data[e][t]=n)),null!=this._data[e]?this._data[e][t]:null}},{key:"ascend",value:function(){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,t=[],n=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"parent":"documentParent",i=this[n],r=-1;i&&0!==i.id&&!t.includes(i)&&(t.push(i),++r!==e);)i=i[n];return t}},{key:"cascade",value:function(){function e(t){var n=g(t.children),i=!0,r=!1,a=void 0;try{for(var o,l=t.children[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){n.push.apply(n,g(e(o.value)))}}catch(e){r=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return n}return e(this)}},{key:"inherit",value:function(e){var n=this;if(this._initialized){for(var i=function(e,t){for(var n in e)null==e[n]&&(t[n]=e[n])},r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];for(var l=0;l<a.length;l++){switch(a[l]){case"initial":Object.assign(this.initial,e.initial);break;case"base":this.style=e.style,this.documentParent=e.documentParent;case"dimensions":this.bounds=ve(e.bounds),this.linear=ve(e.linear),this.box=ve(e.box);break;case"data":for(var s in this._data)for(var u in this._data[s]){var h=this._data[s][u];if("object"===t(h)&&!0===h.inherit){var c=e.data(s,u);if(c)for(var f in h)switch(t(h[f])){case"number":c[f]+=h[f];break;case"boolean":!0===h[f]&&(c[f]=!0);break;default:c[f]=h[f]}else e.data(s,u,h);delete this._data[s][u]}}break;case"alignment":["position","display","verticalAlign","cssFloat","clear"].forEach(function(t){n.styleMap[t]=e.css(t),n.initial.styleMap[t]=e.cssInitial(t)}),"auto"===e.css("marginLeft")&&(this.styleMap.marginLeft="auto",this.initial.styleMap.marginLeft="auto"),"auto"===e.css("marginRight")&&(this.styleMap.marginRight="auto",this.initial.styleMap.marginRight="auto");break;case"style":var d={whiteSpace:e.css("whiteSpace")};for(var g in e.style)if(g.startsWith("font")||g.startsWith("color")){var p=F(g);d[p]=e.style[p]}this.css(d);break;case"styleMap":i(e.styleMap,this.styleMap)}}}}},{key:"alignedVertically",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&this.documentParent.baseElement===e.documentParent.baseElement){var i=this.documentParent.has("width",I.UNIT)?this.documentParent.toInt("width"):this.documentParent.box.width;return this.lineBreak||e.lineBreak||e.blockStatic||e.bounds&&e.bounds.width>i&&(!e.textElement||"nowrap"===e.css("whiteSpace"))||"left"===e.float&&this.autoMarginRight||"right"===e.float&&this.autoMarginLeft||!e.floating&&(!this.inlineElement&&!this.floating||this.blockStatic)||e.plainText&&e.multiLine&&this.parent&&!this.parent.is(w.RELATIVE)||this.blockStatic&&(!e.inlineElement||t.has(e)&&e.floating)||!n&&t.has(this)||!n&&this.floating&&e.floating&&this.linear.top>=e.linear.bottom}return!1}},{key:"intersect",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear,n=e.top>t.top&&e.top<t.bottom,i=Math.floor(e.right)>Math.ceil(t.left)&&e.right<t.right,r=e.left>t.left&&e.left<t.right;return n&&(r||i)||Math.floor(e.bottom)>Math.ceil(t.top)&&e.bottom<t.bottom&&(r||i)}},{key:"intersectX",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=this[t]||this.linear;return e.top>=n.top&&e.top<n.bottom||e.bottom>n.top&&e.bottom<=n.bottom||n.top>=e.top&&this[t].bottom<=e.bottom||e.top>=n.top&&e.bottom<=n.bottom}},{key:"intersectY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return e.left>=t.left&&e.left<t.right||e.right>t.left&&e.right<=t.right||t.left>=e.left&&t.right<=e.right||e.left>=t.left&&e.right<=t.right}},{key:"withinX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.top>=e.top&&t.bottom<=e.bottom}},{key:"withinY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.left>=e.left&&t.right<=e.right}},{key:"outsideX",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.right<e.left||t.left>e.right}},{key:"outsideY",value:function(e){var t=this[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear"]||this.linear;return t.bottom<e.top||t.top>e.bottom}},{key:"css",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"object"===t(e)?(Object.assign(this.styleMap,e),""):(2===arguments.length&&(this.styleMap[e]=oe(n)?n:""),this.styleMap[e]||this.style&&this.style[e]||"")}},{key:"cssInitial",value:function(e){return this.initial.styleMap[e]||(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.css(e):"")}},{key:"cssParent",value:function(e){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="";if(this.baseElement)for(var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this:Be(this.baseElement.parentElement);i;){if((n=i.initial.styleMap[e]||"")||i.documentBody){t&&!i.visible&&(n="");break}i=Be(i.baseElement.parentElement)}return n}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=(n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e];if(oe(i))switch(i){case"0px":if(j(t,I.ZERO))return!0;case"left":if(j(t,I.LEFT))return!0;case"baseline":if(j(t,I.BASELINE))return!0;case"auto":if(j(t,I.AUTO))return!0;case"none":case"initial":case"normal":case"transparent":case"rgba(0, 0, 0, 0)":return!1;default:if(n&&null!=n.not)if(Array.isArray(n.not)){var r=!0,a=!1,o=void 0;try{for(var l,s=n.not[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){if(i===l.value)return!1}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}else if(i===n.not)return!1;var u=0===t;return j(t,I.UNIT)&&q(i)&&(u=!0),j(t,I.PERCENT)&&K(i)&&(u=!0),j(t,I.AUTO)&&(u=!1),u}return!1}},{key:"isSet",value:function(e,t){return!(!this[e]||null==this[e][t])&&oe(this[e][t])}},{key:"hasBit",value:function(e,t){return null!=this[e]&&j(this[e],t)}},{key:"toInt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return parseInt((n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e])||t}},{key:"hasAlign",value:function(e){return j(this.alignmentType,e)}},{key:"setExclusions",value:function(){var e=this;this.styleElement&&[["excludeSection",E],["excludeProcedure",A],["excludeResource",T]].forEach(function(t){var n=e.dataset[t[0]]||"";e._element.parentElement&&(n+="|"+J(e._element.parentElement.dataset["".concat(t[0],"Child")])),n.split("|").map(function(e){return e.toUpperCase().trim()}).forEach(function(n){null!=t[1][n]&&(e[t[0]]|=t[1][n])})})}},{key:"setBounds",value:function(){if(this._element&&!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))if(this.styleElement)this.bounds=ve(this._element.getBoundingClientRect());else{var e=me(this._element);e[0]&&(this.bounds=e[0])}this.bounds&&(0===this.initial.bounds.width&&0===this.initial.bounds.height&&Object.assign(this.initial.bounds,ve(this.bounds)),this.linear={top:this.bounds.top-(this.marginTop>0?this.marginTop:0),right:this.bounds.right+this.marginRight,bottom:this.bounds.bottom+this.marginBottom,left:this.bounds.left-(this.marginLeft>0?this.marginLeft:0),width:0,height:0},this.box={top:this.bounds.top+(this.paddingTop+this.borderTopWidth),right:this.bounds.right-(this.paddingRight+this.borderRightWidth),bottom:this.bounds.bottom-(this.paddingBottom+this.borderBottomWidth),left:this.bounds.left+(this.paddingLeft+this.borderLeftWidth),width:0,height:0},this.setDimensions())}},{key:"setDimensions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["linear","box"],t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value,l=this[o];if(l.width=this.bounds.width,!this.plainText)switch(o){case"linear":l.width+=(this.marginLeft>0?this.marginLeft:0)+this.marginRight;break;case"box":l.width-=this.paddingLeft+this.borderLeftWidth+this.paddingRight+this.borderRightWidth}l.height=l.bottom-l.top,null==this.initial[o]&&(this.initial[o]=ve(l))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setMultiLine",value:function(){if(this._element)switch(this._multiLine=!1,this._element.tagName){case"IMG":case"INPUT":case"BUTTON":case"TEXTAREA":case"HR":case"IFRAME":return;default:if(this.textElement){var e=d(me(this._element),2),t=e[0],n=e[1];this.plainText?(t?(this.bounds=t,this.setBounds(!0)):this.hide(),this.multiLine=n):this.hasWidth||!this.blockStatic&&"table-cell"!==this.display&&!Se(this._element)||(this.multiLine=n)}}else this._multiLine=!1}},{key:"getParentElementAsNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this._element){var n=Be(this._element.parentElement);if(!this.pageflow){for(var i=!1,r=null,a=null,o=!1;n&&0!==n.id;){if(a||"absolute"!==this.position){if(this.withinX(n.box)&&this.withinY(n.box)||r&&(this.linear.top>=n.linear.top&&this.linear.top<r.linear.top||this.linear.right<=n.linear.right&&this.linear.right>r.linear.right||this.linear.bottom<=n.linear.bottom&&this.linear.bottom>r.linear.bottom||this.linear.left>=n.linear.left&&this.linear.left<r.linear.left)){i=!0;break}}else if(!["static","initial"].includes(n.position)){var l=H(this.top),s=H(this.left);if(l>=0&&s>=0||!e||e&&Math.abs(l)<=n.marginTop&&Math.abs(s)<=n.marginLeft||this.imageElement){if(!e||n.documentRoot||0===l||0===s||null!=this.bottom||null!=this.right||!this.outsideX(n.linear)&&!this.outsideY(n.linear)){i=!0;break}o=!0}a=n}r=n,n=Be(n.element.parentElement)}i||(n=o&&t?t:a)}return n}return null}},{key:"removeChild",value:function(e){for(var t=0;t<this.children.length;t++)if(e===this.children[t]){this.children.splice(t,1);break}}},{key:"replaceChild",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;i<this.children.length;i++)if(e===this.children[i])return this.children[i]=t,t.parent=this,!0;return!!n&&(t.parent=this,!0)}},{key:"appendRendered",value:function(e){-1===this.renderChildren.indexOf(e)&&(e.renderIndex=this.renderChildren.length,this.renderChildren.push(e))}},{key:"resetBox",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];j(e,k.MARGIN)&&i.push("marginTop","marginRight","marginBottom","marginLeft"),j(e,k.PADDING)&&i.push("paddingTop","paddingRight","paddingBottom","paddingLeft");for(var r=0;r<i.length;r++){var a=i[r];this._boxReset[a]=1,t&&t.modifyBox(a,this[a],n)}}},{key:"removeElement",value:function(){this._element&&(null==this._nodeName&&(this._nodeName=this.nodeName),null==this._tagName&&(this._tagName=this.tagName),this._baseElement=this._element,this._element=void 0)}},{key:"previousSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;if(this._element)i=this._element.previousSibling;else if(this.initial.children.length>0){var r=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});i=r.length>0?r[0].element.previousSibling:null}for(;i;){var a=Be(i);if(a&&(!a.lineBreak||t)&&(!a.excluded||n)&&(e&&a.pageflow||!e&&a.siblingflow))return a;i=i.previousSibling}return null}},{key:"nextSibling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=null;if(this._element)i=this._element.nextSibling;else if(this.initial.children.length>0){var r=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});i=r.length>0?r[0].element.nextSibling:null}for(;i;){var a=Be(i);if(a&&(!a.lineBreak||t)&&(!a.excluded||n)&&(e&&a.pageflow||!e&&a.siblingflow))return a;i=i.nextSibling}return null}},{key:"actualLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&!this.companion.visible&&this.companion[e]?Math.min(this[e].left,this.companion[e].left):this[e].left}},{key:"actualRight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&!this.companion.visible&&this.companion[e]?Math.max(this[e].right,this.companion[e].right):this[e].right}},{key:"boxAttribute",value:function(e,t){var n=e+t;if(this.styleElement){var i=this.css(n);return K(i)?this.style[n]&&this.style[n]!==i?H(this.style[n]):this.documentParent.box["Left"===t||"Right"===t?"width":"height"]*(H(i)/100):H(i)}return H(this.css(n))}},{key:"getOverflow",value:function(){if(null==this._overflow&&(this._overflow=0,this.styleElement)){var e=[this.css("overflow"),this.css("overflowX"),this.css("overflowY")],t=e[0],n=e[1],i=e[2];this.toInt("width")>0&&("scroll"===t||"scroll"===n||"auto"===n&&this._element.clientWidth!==this._element.scrollWidth)&&(this._overflow|=x.HORIZONTAL),this.toInt("height")>0&&("scroll"===t||"scroll"===i||"auto"===i&&this._element.clientHeight!==this._element.scrollHeight)&&(this._overflow|=x.VERTICAL)}return this._overflow}},{key:"parent",set:function(e){e!==this._parent&&(this._parent&&this._parent.removeChild(this),this._parent=e),e?(e.children.includes(this)||(e.children.push(this),e.styleElement||-1===this.siblingIndex||(e.siblingIndex=Math.min(this.siblingIndex,e.siblingIndex))),-1===this.initial.depth&&(this.initial.depth=e.depth+1),this.depth=e.depth+1):this.depth=-1},get:function(){return this._parent}},{key:"nodeName",set:function(e){this._nodeName=e},get:function(){return this._nodeName||(this.styleElement?("INPUT"===this.tagName?this._element.type:this.tagName).toUpperCase():"")}},{key:"element",set:function(e){this._element=e},get:function(){return this._element||{dataset:{},style:{}}}},{key:"baseElement",get:function(){return this._baseElement||this.element}},{key:"tagName",get:function(){return(this._tagName||this._element&&this._element.tagName||"").toUpperCase()}},{key:"htmlElement",get:function(){return this._element instanceof HTMLElement}},{key:"domElement",get:function(){return this.styleElement||this.plainText}},{key:"styleElement",get:function(){return this._element instanceof HTMLElement||this.svgElement}},{key:"documentBody",get:function(){return this._element===document.body}},{key:"renderAs",set:function(e){this.rendered||e.rendered||(this._renderAs=e)},get:function(){return this._renderAs}},{key:"renderDepth",set:function(e){this._renderDepth=e},get:function(){return null==this._renderDepth&&(this.documentRoot?this._renderDepth=0:this.parent&&(this._renderDepth=this.parent.renderDepth+1)),this._renderDepth||0}},{key:"dataset",get:function(){return this._element instanceof HTMLElement?this._element.dataset:{}}},{key:"extension",get:function(){return this.dataset.ext?this.dataset.ext.split(",")[0].trim():""}},{key:"flex",get:function(){var e=this.style;return e?{enabled:-1!==e.display.indexOf("flex"),direction:e.flexDirection,basis:e.flexBasis,grow:H(e.flexGrow),shrink:H(e.flexShrink),wrap:e.flexWrap,alignSelf:!this.has("alignSelf")&&this.documentParent.has("alignItems")?this.documentParent.css("alignItems"):e.alignSelf,justifyContent:e.justifyContent,order:H(e.order)}:{enabled:!1}}},{key:"viewWidth",get:function(){return this.inlineStatic||this.has("width",I.PERCENT)?0:this.toInt("width")||this.toInt("minWidth")}},{key:"viewHeight",get:function(){return this.inlineStatic||this.has("height",I.PERCENT)?0:this.toInt("height")||this.toInt("minHeight")}},{key:"hasWidth",get:function(){return!this.inlineStatic&&(this.has("width",I.UNIT|I.PERCENT,{map:"initial",not:["0px","0%"]})||this.toInt("minWidth")>0)}},{key:"hasHeight",get:function(){return!this.inlineStatic&&(this.has("height",I.UNIT|I.PERCENT,{map:"initial",not:["0px","0%"]})||this.toInt("minHeight")>0)}},{key:"lineHeight",get:function(){if(this.rendered){if(null==this._lineHeight&&(this._lineHeight=0,0===this.children.length&&!this.renderParent.linearHorizontal)){var e=this.toInt("lineHeight");this._lineHeight=this.inlineElement?e||this.documentParent.toInt("lineHeight"):e}return this._lineHeight}return 0}},{key:"display",get:function(){return this.css("display")}},{key:"position",get:function(){return this.css("position")}},{key:"top",get:function(){var e=this.styleMap.top;return e&&"auto"!==e?H(e):null}},{key:"right",get:function(){var e=this.styleMap.right;return e&&"auto"!==e?H(e):null}},{key:"bottom",get:function(){var e=this.styleMap.bottom;return e&&"auto"!==e?H(e):null}},{key:"left",get:function(){var e=this.styleMap.left;return e&&"auto"!==e?H(e):null}},{key:"marginTop",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Top")}},{key:"marginRight",get:function(){return this.boxAttribute("margin","Right")}},{key:"marginBottom",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Bottom")}},{key:"marginLeft",get:function(){return this.boxAttribute("margin","Left")}},{key:"borderTopWidth",get:function(){return"none"!==this.css("borderTopStyle")?H(this.css("borderTopWidth")):0}},{key:"borderRightWidth",get:function(){return"none"!==this.css("borderRightStyle")?H(this.css("borderRightWidth")):0}},{key:"borderBottomWidth",get:function(){return"none"!==this.css("borderBottomStyle")?H(this.css("borderBottomWidth")):0}},{key:"borderLeftWidth",get:function(){return"none"!==this.css("borderLeftStyle")?H(this.css("borderLeftWidth")):0}},{key:"paddingTop",get:function(){return this.boxAttribute("padding","Top")}},{key:"paddingRight",get:function(){return this.boxAttribute("padding","Right")}},{key:"paddingBottom",get:function(){return this.boxAttribute("padding","Bottom")}},{key:"paddingLeft",get:function(){return this.boxAttribute("padding","Left")}},{key:"pageflow",set:function(e){this._pageflow=e},get:function(){if(null==this._pageflow){var e=this.position;return"static"===e||"initial"===e||"relative"===e||this.alignOrigin}return this._pageflow}},{key:"siblingflow",get:function(){var e=this.position;return!("absolute"===e||"fixed"===e)}},{key:"inline",get:function(){var e=this.display;return"inline"===e||"initial"===e&&L.includes(this.tagName)}},{key:"inlineElement",get:function(){var e=this.position,t=this.display;return this.inline||-1!==t.indexOf("inline")||"table-cell"===t||this.floating||("absolute"===e||"fixed"===e)&&this.alignOrigin}},{key:"inlineStatic",get:function(){return this.inline&&!this.floating&&!this.imageElement}},{key:"inlineText",get:function(){if(null==this._inlineText)switch(this.tagName){case"INPUT":case"BUTTON":case"IMG":case"SELECT":case"TEXTAREA":this._inlineText=!1;break;default:this._inlineText=this.htmlElement&&ke(this._element)&&(0===this.initial.children.length||this.initial.children.every(function(e){return!!Me(e.element,"inlineSupport")}))&&(0===this._element.childNodes.length||!Array.from(this._element.childNodes).some(function(e){var t=Be(e);return!(!t||t.lineBreak||t.excluded&&t.visible)}))}return this._inlineText}},{key:"plainText",get:function(){return"PLAINTEXT"===this._nodeName}},{key:"imageElement",get:function(){return"IMG"===this.tagName}},{key:"svgElement",get:function(){return"SVG"===this.tagName}},{key:"imageOrSvgElement",get:function(){return this.imageElement||this.svgElement}},{key:"lineBreak",get:function(){return"BR"===this.tagName}},{key:"textElement",get:function(){return this.plainText||this.inlineText}},{key:"block",get:function(){var e=this.display;return"block"===e||"list-item"===e||"initial"===e&&N.includes(this.tagName)}},{key:"blockStatic",get:function(){return this.block&&this.siblingflow&&(!this.floating||"100%"===this.cssInitial("width"))}},{key:"alignOrigin",get:function(){return null==this.top&&null==this.right&&null==this.bottom&&null==this.left}},{key:"alignNegative",get:function(){return this.toInt("top")<0||this.toInt("left")<0}},{key:"autoMargin",get:function(){return this.blockStatic&&("auto"===this.initial.styleMap.marginLeft||"auto"===this.initial.styleMap.marginRight)}},{key:"autoMarginLeft",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"!==this.initial.styleMap.marginRight}},{key:"autoMarginRight",get:function(){return this.blockStatic&&"auto"!==this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginHorizontal",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginVertical",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginTop&&"auto"===this.initial.styleMap.marginBottom}},{key:"floating",get:function(){var e=this.css("cssFloat");return"absolute"!==this.position&&("left"===e||"right"===e)}},{key:"float",get:function(){return this.floating?this.css("cssFloat"):"none"}},{key:"textContent",get:function(){if(this._element){if(this._element instanceof HTMLElement)return this._element.innerText||this._element.innerHTML;if("#text"===this._element.nodeName)return this._element.textContent||""}return""}},{key:"overflowX",get:function(){return j(this.getOverflow(),x.HORIZONTAL)}},{key:"overflowY",get:function(){return j(this.getOverflow(),x.VERTICAL)}},{key:"baseline",get:function(){var e=this.css("verticalAlign");return("baseline"===e||"initial"===e||"unset"===e)&&this.siblingflow}},{key:"baselineInside",get:function(){return this.nodes.length>0?this.nodes.every(function(e){return e.baseline}):this.baseline}},{key:"multiLine",set:function(e){this._multiLine=e},get:function(){return null==this._multiLine&&this.setMultiLine(),this._multiLine}},{key:"preserveWhiteSpace",get:function(){var e=this.css("whiteSpace");return"pre"===e||"pre-wrap"===e}},{key:"actualHeight",get:function(){return this.plainText?this.bounds.bottom-this.bounds.top:this.bounds.height}},{key:"singleChild",get:function(){return this.rendered?1===this.renderParent.length:1===this.parent.length}},{key:"dir",get:function(){switch(this.css("direction")){case"unset":case"inherit":var e=this.documentParent;do{var t=e.dir;if(""!==t)return t;e=e.documentParent}while(0!==e.id);return"";case"rtl":return"rtl";default:return"ltr"}}},{key:"nodes",get:function(){return this.rendered?this.renderChildren:this.children}},{key:"length",get:function(){return this.nodes.length}},{key:"previousElementSibling",get:function(){for(var e=this.baseElement.previousSibling;e;){if(Ie(e)||Re(e)||"BR"===e.tagName)return e;e=e.previousSibling}return null}},{key:"nextElementSibling",get:function(){for(var e=this.baseElement.nextSibling;e;){if(Ie(e)||Re(e)||"BR"===e.tagName)return e;e=e.nextSibling}return null}},{key:"firstElementChild",get:function(){var e=this.baseElement;if(Re(e))for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(n instanceof Element)return n;if(Ie(n))return n}return null}},{key:"lastElementChild",get:function(){var e=this.baseElement;if(Re(e))for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(n instanceof Element)return n;if(Ie(n))return n}return null}},{key:"center",get:function(){return{x:this.bounds.left+Math.floor(this.bounds.width/2),y:this.bounds.top+Math.floor(this.actualHeight/2)}}}]),e}();function Pe(e){var t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;if(!o.companion&&o.domElement)return o.documentParent}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e[0].documentParent}var Ge=function(){function e(t,n){r(this,e),this.parent=n,this._currentId=0,this._list=[],Array.isArray(t)&&(this._list=t)}return o(e,[{key:Symbol.iterator,value:function(){var e=this._list,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"reset",value:function(){return this._currentId=0,this.clear(),this}},{key:"append",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=this._list).push.apply(e,n),"function"==typeof this.delegateAppend&&this.delegateAppend.call(this,n),this}},{key:"prepend",value:function(){var e;return(e=this._list).unshift.apply(e,arguments),this}},{key:"each",value:function(e){return this._list.forEach(e),this}},{key:"clear",value:function(){return this._list.length=0,this}},{key:"sort",value:function(e){return this._list.sort(e),this}},{key:"sortAsc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ue.apply(void 0,[this._list].concat(t)),this}},{key:"sortDesc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return he.apply(void 0,[this._list].concat(t)),this}},{key:"get",value:function(e){return null==e?this._list[this._list.length-1]:this._list[e]}},{key:"remove",value:function(e){return this._list.splice(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}},{key:"clone",value:function(){return new e(this._list.slice())}},{key:"partition",value:function(t){var n=d(se(this._list,t),2),i=n[1];return[new e(n[0]),new e(i)]}},{key:"find",value:function(e,t){return this._list.find("string"==typeof e?function(n){return n[e]===t}:e)}},{key:"sliceSort",value:function(t){return new e(this._list.slice().sort(t))}},{key:"length",get:function(){return this._list.length}},{key:"list",get:function(){return this._list}},{key:"visible",get:function(){return this._list.filter(function(e){return e.visible})}},{key:"elements",get:function(){return this._list.filter(function(e){return e.visible&&e.styleElement})}},{key:"nextId",get:function(){return++this._currentId}},{key:"linearX",get:function(){return e.linearX(this._list)}},{key:"linearY",get:function(){return e.linearY(this._list)}}],[{key:"outerRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=[],i=[],r=[],a=[],o=e.slice(),l=!0,s=!1,u=void 0;try{for(var h,c=e[Symbol.iterator]();!(l=(h=c.next()).done);l=!0){var f=h.value;f.companion&&o.push(f.companion)}}catch(e){s=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw u}}for(var d=0;d<o.length;d++){var g=o[d];0===d?(n.push(g),i.push(g),r.push(g),a.push(g)):(n[0][t].top===g[t].top?n.push(g):g[t].top<n[0][t].top&&(n=[g]),i[0][t].right===g[t].right?i.push(g):g[t].right>i[0][t].right&&(i=[g]),r[0][t].bottom===g[t].bottom?r.push(g):g[t].bottom>r[0][t].bottom&&(r=[g]),a[0][t].left===g[t].left?a.push(g):g[t].left<a[0][t].left&&(a=[g]))}return{top:n,right:i,bottom:r,left:a}}},{key:"floated",value:function(e){return new Set(e.map(function(e){return e.float}).filter(function(e){return"none"!==e}))}},{key:"cleared",value:function(e){var t=new Map,n=new Set;return e.forEach(function(e){if(e.siblingflow){var i=e.css("clear");n.size>0&&("both"===i?(t.set(e,2===n.size?"both":n.values().next().value),n.clear()):n.has(i)&&(n.delete(i),t.set(e,i))),e.floating&&n.add(e.float)}}),t}},{key:"textBaseline",value:function(e){var t,n,i,r=[];if(e.some(function(e){return(e.textElement||e.imageElement)&&e.baseline})){var a=Math.max.apply(null,e.map(function(e){return e.lineHeight})),o=Math.max.apply(null,e.map(function(e){return e.bounds.height}));if(a>o){var l=e.filter(function(e){return e.lineHeight===a});return(l.length===e.length?l.filter(function(e){return e.htmlElement}):l).filter(function(e){return e.baseline})}r=e.filter(function(e){return e.baselineInside}).sort(function(e,t){var n=e.bounds.height,i=t.bounds.height;if(fe(y.EDGE)&&(e.textElement&&(n=Math.max(Math.floor(n),e.lineHeight)),t.textElement&&(i=Math.max(Math.floor(i),t.lineHeight))),!e.imageElement||!t.imageElement){var r=H(e.css("fontSize")),a=H(t.css("fontSize"));if(e.multiLine||t.multiLine){if(e.lineHeight>0&&t.lineHeight>0)return e.lineHeight>=t.lineHeight?-1:1;if(r===a)return e.htmlElement||!t.htmlElement?-1:1}if(e.nodeType!==t.nodeType&&(e.nodeType<w.TEXT||t.nodeType<w.TEXT))return e.textElement||e.imageElement?-1:t.textElement||t.imageElement?1:e.nodeType<t.nodeType?-1:1;if(e.lineHeight>i&&0===t.lineHeight||t.imageElement)return-1;if(t.lineHeight>n&&0===e.lineHeight||e.imageElement)return 1;if(r===a&&n===i)return e.htmlElement&&!t.htmlElement?-1:!e.htmlElement&&t.htmlElement?1:e.siblingIndex<=t.siblingIndex?-1:1;if(r!==a&&0!==r&&0!==a)return r>a?-1:1}return n>=i?-1:1})}else r=e.filter(function(e){return e.baseline}).sort(function(e,t){var n=e.nodeType,i=t.nodeType;return e.layoutHorizontal&&(n=Math.min.apply(null,e.children.map(function(e){return e.nodeType>0?e.nodeType:w.INLINE}))),t.layoutHorizontal&&(i=Math.min.apply(null,t.children.map(function(e){return e.nodeType>0?e.nodeType:w.INLINE}))),n===i?e.id<t.id?-1:1:n<i?-1:1});return r.filter(function(e,a){return 0===a?(t=e.css("fontFamily"),n=e.css("fontSize"),i=e.css("fontWeight"),!0):e.css("fontFamily")===t&&e.css("fontSize")===n&&e.css("fontWeight")===i&&e.nodeName===r[0].nodeName&&(e.lineHeight>0&&e.lineHeight===r[0].lineHeight||e.bounds.height===r[0].bounds.height)})}},{key:"linearX",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.filter(function(e){return e.pageflow});switch(i.length){case 0:return!1;case 1:return!0;default:var r=Pe(i),a=!1;if(n&&i.every(function(e){return e.documentParent===r||e.companion&&e.companion.documentParent===r})){var o=e.clearedSiblings(r);a=i.slice().sort(e.siblingIndex).every(function(e,t){return!(t>0)||(e.companion&&e.companion.documentParent===r&&(e=e.companion),!e.alignedVertically(e.previousSibling(),o))})}return!(!a&&n)&&i.every(function(e){return!i.some(function(t){return t!==e&&e.linear.top>=t.linear.bottom&&e.intersectY(t.linear)})})}}},{key:"linearY",value:function(t){var n=t.filter(function(e){return e.pageflow});switch(n.length){case 0:return!1;case 1:return!0;default:var i=Pe(n);if(n.every(function(e){return e.documentParent===i||e.companion&&e.companion.documentParent===i})){var r=e.clearedSiblings(i);return n.slice().sort(e.siblingIndex).every(function(e,t){return!(t>0&&!e.lineBreak)||(e.companion&&e.companion.documentParent===i&&(e=e.companion),e.alignedVertically(e.previousSibling(),r))})}return!1}}},{key:"sortByAlignment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.NONE,n=arguments.length>2?arguments[2]:void 0,i=!1;return n&&t===x.NONE&&(n.linearHorizontal?t|=x.HORIZONTAL:n.is(w.CONSTRAINT)&&e.some(function(e){return!e.pageflow})&&(t|=x.ABSOLUTE)),j(t,x.HORIZONTAL)&&e.some(function(e){return e.floating})&&(e.sort(function(e,t){return e.floating&&!t.floating?"left"===e.float?-1:1:!e.floating&&t.floating?"left"===t.float?1:-1:e.floating&&t.floating&&e.float!==t.float?"left"===e.float?-1:1:e.linear.left<=t.linear.left?-1:1}),i=!0),j(t,x.ABSOLUTE)&&e.some(function(e){return 0!==e.toInt("zIndex")})&&(e.sort(function(e,t){var n=H(e.css("zIndex")),i=H(t.css("zIndex"));return 0===n&&0===i?e.siblingIndex<=t.siblingIndex?-1:1:n<=i?-1:1}),i=!0),i}},{key:"siblingIndex",value:function(e,t){return e.siblingIndex<=t.siblingIndex?-1:1}},{key:"clearedSiblings",value:function(e){return this.cleared(Array.from(e.baseElement.children).map(function(e){return Be(e)}).filter(function(e){return e}))}}]),e}(),He=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,Fe),o(t,[{key:"init",value:function(){var e,n=this;(f(s(t.prototype),"init",this).call(this),this.children.length>0)&&(this.children.forEach(function(e){n.siblingIndex=Math.min(n.siblingIndex,e.siblingIndex),e.parent=n}),this.parent.children.sort(Ge.siblingIndex),(e=this.initial.children).push.apply(e,g(this.children.slice())));this.setBounds(),this.css("direction",this.documentParent.dir)}},{key:"setBounds",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(this.children.length>0){var e=Ge.outerRegion(this.children);this.bounds={top:e.top[0].linear.top,right:e.right[0].linear.right,bottom:e.bottom[0].linear.bottom,left:e.left[0].linear.left,width:0,height:0}}else this.bounds=ge();this.bounds.width=this.bounds.right-this.bounds.left,this.bounds.height=this.bounds.bottom-this.bounds.top}this.linear=ve(this.bounds),this.box=ve(this.bounds),this.setDimensions()}},{key:"previousSibling",value:function(){return this.children.length>0?this.children[0].previousSibling(arguments.length>0&&void 0!==arguments[0]&&arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2]):null}},{key:"nextSibling",value:function(){return this.children.length>0?this.children[this.children.length-1].nextSibling(arguments.length>0&&void 0!==arguments[0]&&arguments[0],!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2]):null}},{key:"inline",get:function(){return this.children.every(function(e){return e.inline})}},{key:"pageflow",get:function(){return this.children.every(function(e){return e.pageflow})}},{key:"siblingflow",get:function(){return this.children.every(function(e){return e.siblingflow})}},{key:"inlineElement",get:function(){return this.hasAlign(x.SEGMENTED)}},{key:"inlineStatic",get:function(){return this.children.every(function(e){return e.inlineStatic})}},{key:"blockStatic",get:function(){return this.children.every(function(e){return e.blockStatic})}},{key:"floating",get:function(){return this.hasAlign(x.FLOAT)}},{key:"float",get:function(){return this.floating?this.hasAlign(x.RIGHT)?"right":"left":"none"}},{key:"baseline",get:function(){return this.children.every(function(e){return e.baseline})}},{key:"multiLine",get:function(){return this.children.some(function(e){return e.multiLine})}},{key:"display",get:function(){return this.css("display")||(this.children.every(function(e){return e.blockStatic})||this.of(w.CONSTRAINT,x.PERCENT)?"block":this.children.every(function(e){return e.inline})?"inline":"inline-block")}},{key:"baseElement",get:function(){return function e(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.styleElement||i.plainText)return i.element;if(i.length>0){var r=e(i.nodes);if(r)return r}}return null}(this.nodes)||f(s(t.prototype),"baseElement",this)}},{key:"firstElementChild",get:function(){var e=this.documentParent.element;if(Re(e))for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(this.nodes.includes(Be(n)))return n}return null}},{key:"lastElementChild",get:function(){var e=this.baseElement;if(Re(e))for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(this.nodes.includes(Be(n)))return n}return null}}]),t}();function Ve(e){return"{".concat((arguments.length>1&&void 0!==arguments[1]?arguments[1]:":")+""+e,"}")}function ze(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="number"==typeof t?Ve(t):t;return e.replace(r,(i?r:"")+n+(i?"":r))}function Ue(e,t){if(t>=0){var n=-1;return e.split("\n").map(function(e){var i=/^({.*?})(\t*)(<.*)/.exec(e);return i?(-1===n&&(n=i[2].length),i[1]+ie(t+(i[2].length-n))+i[3]):e}).join("\n")}return e}function Xe(e){return function(e){return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\u00A0/g,"&#160;")).replace(/\u2002/g,"&#8194;")).replace(/\u2003/g,"&#8195;")).replace(/\u2009/g,"&#8201;")).replace(/\u200C/g,"&#8204;")).replace(/\u200D/g,"&#8205;")).replace(/\u200E/g,"&#8206;")).replace(/\u200F/g,"&#8207;")}(e=(e=e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t))})).replace(/&nbsp;/g,"&#160;"))}var We=Object.freeze({formatPlaceholder:Ve,removePlaceholderAll:function(e){return e.replace(/{[<:@>]\d+(:\d+)?}/g,"").trim()},replacePlaceholder:ze,replaceIndent:Ue,replaceTab:function(e,t){var n=t.insertSpaces,i=void 0===n?4:n;return i>0&&(e=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.split("\n").map(function(e){var t=e.match(/^(\t+)(.*)$/);return t?" ".repeat(i*t[1].length)+t[2]:e}).join("\n"):e.replace(/\t/g," ".repeat(i))),e},replaceEntity:Xe,parseTemplate:function(e){for(var t={},n=null,i=!1,r=0,a=e.length;;){if(i){var o=i[0].replace(RegExp(i[1],"g"),"");for(var l in t)t[l]=t[l].replace(RegExp(i[0],"g"),"{%".concat(i[2],"}"));t[i[2]]=o,a-=i[0].length}if(null==i||0===a){if(!(e=t[r++]))break;a=e.length,i=null}if(i||(n=/(!(\d+)\n?)[\w\W]*\1/g),!n)break;i=n.exec(e)}return t},getTemplateBranch:function(e){for(var t=e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<i.length;a++){var o=d(i[a].split("-"),2),l=o[1];t=t[o[0]][void 0===l?"0":l]}return t},createTemplate:function e(t,n,i){var r=i?t[i]:"";for(var a in n){var o="";if(!1===n[a]||Array.isArray(n[a])&&0===n[a].length)r=r.replace("{%".concat(a,"}"),"");else{if(Array.isArray(n[a]))for(var l in n[a])o+=e(t,n[a][l],a);else o=n[a];Z(o)?r=i?r.replace(RegExp("{[%@&]?".concat(a,"}"),"g"),o):o.trim():!1===o||RegExp("{%".concat(a,"}")).test(r)?r=r.replace("{%".concat(a,"}"),""):RegExp("{&".concat(a,"}")).test(r)&&(r="")}}return r.replace(/\s+[\w:]+="[^"]*{@\w+}"/g,"")}});function je(e,t){for(var n=[],i=t;i;)n=g(n).concat(g(J(i.dataset.ext).split(",").map(function(e){return e.trim()}))),i=i.parentElement;if((n=n.filter(function(e){return e})).length>0){var r=[],a=[],o=!0,l=!1,s=void 0;try{for(var u,h=e[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=u.value,f=n.indexOf(c.name);-1!==f?r[f]=c:a.push(c)}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}return g(r.filter(function(e){return e})).concat(a)}return e}var Ye=function(){function e(t){r(this,e),this.framework=t,this.renderQueue={},this.loading=!1,this.closed=!1,this.cacheImage=new Map,this.cacheSession=new Ge,this.cacheProcessing=new Ge,this.elements=new Set,this.extensions=[],this._cacheRoot=new Set,this._sorted={},this._currentIndex=-1,this._views=[],this._includes=[]}return o(e,[{key:"registerController",value:function(e){e.application=this,e.cache=this.cacheProcessing,this.viewController=e}},{key:"registerResource",value:function(e){e.application=this,e.cache=this.cacheProcessing,this.resourceHandler=e}},{key:"registerExtension",value:function(e){var t=this,n=this.getExtension(e.name);return n?(Array.isArray(e.tagNames)&&(n.tagNames=e.tagNames),Object.assign(n.options,e.options),!0):!(0!==e.framework&&!j(e.framework,this.framework)||!e.dependencies.every(function(e){return!!t.getExtension(e.name)}))&&(e.application=this,this.extensions.push(e),!0)}},{key:"finalize",value:function(){var e=this.cacheSession.visible.filter(function(e){return!e.hasAlign(x.SPACE)}),t=!0,n=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;o.hasBit("excludeProcedure",A.LAYOUT)||o.setLayout(),o.hasBit("excludeProcedure",A.ALIGNMENT)||o.setAlignment(this.settings)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var l=!0,s=!1,u=void 0;try{for(var h,c=e[Symbol.iterator]();!(l=(h=c.next()).done);l=!0){var f=h.value;f.hasBit("excludeProcedure",A.OPTIMIZATION)||f.applyOptimizations(this.settings),f.hasBit("excludeProcedure",A.CUSTOMIZATION)||f.applyCustomizations(this.settings)}}catch(e){s=!0,u=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw u}}this.viewController.setBoxSpacing(this.viewData),this.appendRenderQueue(),this.viewController.setDimensions(this.viewData),this.resourceHandler.finalize(this.viewData),this.viewController.finalize(this.viewData);var d=!0,g=!1,p=void 0;try{for(var m,v=this.extensions[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var y=m.value,b=!0,E=!1,T=void 0;try{for(var w,k=y.subscribers[Symbol.iterator]();!(b=(w=k.next()).done);b=!0){y.setTarget(w.value),y.finalize()}}catch(e){E=!0,T=e}finally{try{b||null==k.return||k.return()}finally{if(E)throw T}}}}catch(e){g=!0,p=e}finally{try{d||null==v.return||v.return()}finally{if(g)throw p}}this.closed=!0}},{key:"saveAllToDisk",value:function(){this.resourceHandler.file.saveAllToDisk(this.viewData)}},{key:"reset",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.cacheSession[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){_e(i.value.element,"node","style","styleMap","inlineSupport","boxSpacing","boxStyle","fontStyle","imageSource","optionArray","valueString")}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var a=!0,o=!1,l=void 0;try{for(var s,u=this._cacheRoot[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var h=s.value;delete h.dataset.iteration,delete h.dataset.layoutName}}catch(e){o=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw l}}this.appName="",this.renderQueue={},this.cacheImage.clear(),this.cacheSession.reset(),this.cacheProcessing.reset(),this.viewController.reset(),this.resourceHandler.reset(),this._cacheRoot.clear(),this._views.length=0,this._includes.length=0,this._sorted={},this._currentIndex=-1;var c=!0,f=!1,d=void 0;try{for(var g,p=this.extensions[Symbol.iterator]();!(c=(g=p.next()).done);c=!0){var m=g.value;m.subscribers.clear(),m.subscribersChild.clear()}}catch(e){f=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}this.closed=!1}},{key:"setConstraints",value:function(){this.viewController.setConstraints()}},{key:"setResources",value:function(){this.resourceHandler.setBoxStyle(),this.resourceHandler.setFontStyle(),this.resourceHandler.setBoxSpacing(),this.resourceHandler.setValueString(),this.resourceHandler.setOptionArray(),this.resourceHandler.setImageSource()}},{key:"setImageCache",value:function(e){e&&oe(e.src)&&this.cacheImage.set(e.src,{width:e.naturalWidth,height:e.naturalHeight,uri:e.src})}},{key:"parseDocument",value:function(){var e,t=this;this.elements.clear(),this.loading=!1,this.setStyleMap();for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];""===this.appName&&0===i.length&&i.push(document.body);for(var a=0;a<i.length;a++){var o=i[a],l="string"==typeof o?document.getElementById(o):o;l&&Re(l)&&this.elements.add(l)}var s=this.elements.values().next().value,u=function(){t.loading=!1,t.settings.preloadImages&&s&&Array.from(s.getElementsByClassName("androme.preload")).forEach(function(e){return s.removeChild(e)}),t.resourceHandler.imageDimensions=t.cacheImage;var n=!0,i=!1,r=void 0;try{for(var a,o=t.elements[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=a.value;""===t.appName&&(""===l.id&&(l.id="untitled"),t.appName=l.id);var u=J(l.dataset.filename).replace(RegExp(".".concat(t.viewController.settingsInternal.layout.fileExtension,"$")),"");""===u&&(""===l.id&&(l.id="document_".concat(t.size)),u=l.id);var h=H(l.dataset.iteration)+1;l.dataset.iteration=""+h,l.dataset.layoutName=P(h>1?"".concat(u,"_").concat(h):u),t.initCache(l)&&(t.createDocument(),t.setConstraints(),t.setResources(),t._cacheRoot.add(l))}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}"function"==typeof e&&e.call(t)};if(this.settings.preloadImages&&s){var h=!0,c=!1,f=void 0;try{for(var d,g=this.cacheImage.values()[Symbol.iterator]();!(h=(d=g.next()).done);h=!0){var p=d.value;if(0===p.width&&0===p.height&&p.uri){var m=document.createElement("IMG");m.src=p.uri,m.complete&&m.naturalWidth>0&&m.naturalHeight>0?(p.width=m.naturalWidth,p.height=m.naturalHeight):(m.className="androme.preload",m.style.display="none",s.appendChild(m))}}}catch(e){c=!0,f=e}finally{try{h||null==g.return||g.return()}finally{if(c)throw f}}}var v=Array.from(this.elements).map(function(e){var n=[];return Array.from(e.querySelectorAll("IMG")).forEach(function(e){e.complete?t.setImageCache(e):n.push(e)}),n}).reduce(function(e,t){return e.concat(t)},[]);if(0===v.length)u();else{this.loading=!0;var y=v.map(function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})});Promise.all(y).then(function(e){Array.isArray(e)&&e.forEach(function(e){try{t.setImageCache(e.srcElement)}catch(e){}}),u()}).catch(function(e){var t=e.srcElement?e.srcElement.src:"";oe(t)&&!confirm("FAIL: ".concat(t))||u()})}return{then:function(n){t.loading?e=n:n()}}}},{key:"initCache",value:function(e){var t=this,n=0;e===document.body&&Array.from(document.body.childNodes).some(function(e){return Ce(e,t.settings.hideOffScreenElements)&&++n>1});var i=e!==document.body?e.querySelectorAll("*"):document.querySelectorAll(n>1?"body, body *":"body *");this.cacheProcessing.parent=void 0,this.cacheProcessing.delegateAppend=void 0,this.cacheProcessing.clear();var r=!0,a=!1,o=void 0;try{for(var l,s=this.extensions[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;u.setTarget(void 0,void 0,e),u.beforeInit()}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}var h=this.insertNode(e);if(!h)return!1;h.parent=new this.nodeObject(0,(e===document.body?e:e.parentElement)||document.body),h.documentRoot=!0,this.viewController.initNode(h),this.cacheProcessing.parent=h;var c=this.viewController.settingsInternal.inline.always,f=this.settings.renderInlineText?[]:this.viewController.settingsInternal.inline.tagName;function d(e){var t=Me(e,"styleMap");return(!t||0===Object.keys(t).length)&&0===e.children.length&&f.includes(e.tagName)}for(var p=Array.from(i),m=function(){var n=p[v];if(!t.elements.has(n)&&(je(t.extensions,n).some(function(e){return e.init(n)}),!t.elements.has(n))){(c.includes(n.tagName)||d(n)&&n.parentElement&&Array.from(n.parentElement.children).every(function(e){return d(e)}))&&Oe(n,"inlineSupport",!0);for(var i=!0,r=n.parentElement;r&&r!==e;){if(r!==e&&t.elements.has(r)){i=!1;break}r=r.parentElement}if(i){var a=Me(n,"styleMap");switch(a||Oe(n,"styleMap",a={}),n.tagName){case"SELECT":null==a.verticalAlign&&n.size>1&&(a.verticalAlign="text-bottom")}t.insertNode(n)}}},v=0;v<p.length;v++)m();if(this.cacheProcessing.length>0){var y=!0,b=!1,E=void 0;try{for(var x,T=function(){var e=x.value,n=[],i=!1;Array.from(e.element.childNodes).forEach(function(t){if("#text"===t.nodeName)"SELECT"!==e.tagName&&n.push(t);else if("BR"!==t.tagName){var r=Be(t);(!f.includes(t.tagName)||r&&!r.excluded)&&(i=!0)}}),i&&n.forEach(function(n){return t.insertNode(n,e)})},A=this.cacheProcessing[Symbol.iterator]();!(y=(x=A.next()).done);y=!0)T()}catch(e){b=!0,E=e}finally{try{y||null==A.return||A.return()}finally{if(b)throw E}}var w={},k=[],I=!0,S=!1,N=void 0;try{for(var L,R=function(){var e=L.value;if(e.styleElement){var t=e.element,n=e.css("textAlign");w[e.id]={};var i=w[e.id];["right","end","BUTTON"!==t.tagName&&"button"!==t.type?"center":""].some(function(e){return e===n&&(i.textAlign=e,t.style.textAlign="left",!0)}),e.marginLeft<0&&(i.marginLeft=e.css("marginLeft"),t.style.marginLeft="0px"),e.marginTop<0&&(i.marginTop=e.css("marginTop"),t.style.marginTop="0px"),"relative"===e.position&&["top","right","bottom","left"].forEach(function(n){e.has(n)&&(i[n]=e.styleMap[n],t.style[n]="auto")}),(e.overflowX||e.overflowY)&&(e.has("width")&&(i.width=e.styleMap.width,t.style.width="auto"),e.has("height")&&(i.height=e.styleMap.height,t.style.height="auto"),i.overflow=e.style.overflow||"",t.style.overflow="visible"),"rtl"===t.dir&&(t.dir="ltr",k.push(t)),e.setBounds()}e.setMultiLine()},C=this.cacheProcessing[Symbol.iterator]();!(I=(L=C.next()).done);I=!0)R()}catch(e){S=!0,N=e}finally{try{I||null==C.return||C.return()}finally{if(S)throw N}}var O=!0,M=!1,_=void 0;try{for(var B,D=this.cacheProcessing[Symbol.iterator]();!(O=(B=D.next()).done);O=!0){var F=B.value;if(F.styleElement){var P=F.element,G=w[F.id];if(G){for(var H in G)P.style[H]=G[H];k.includes(P)&&(P.dir="rtl")}}if(1===F.children.length){var V=F.children[0];V.pageflow||0!==V.toInt("top")||0!==V.toInt("right")||0!==V.toInt("bottom")||0!==V.toInt("left")||(V.pageflow=!0)}}}catch(e){M=!0,_=e}finally{try{O||null==D.return||D.return()}finally{if(M)throw _}}var z=!0,U=!1,X=void 0;try{for(var W,j=this.cacheProcessing[Symbol.iterator]();!(z=(W=j.next()).done);z=!0){var Y=W.value;if(!Y.documentRoot){var Z=Y.getParentElementAsNode(this.settings.supportNegativeLeftTop,this.cacheProcessing.parent);Z||Y.pageflow||(Z=this.cacheProcessing.parent),Z?(Y.parent=Z,Y.documentParent=Z):Y.hide()}}}catch(e){U=!0,X=e}finally{try{z||null==j.return||j.return()}finally{if(U)throw X}}var q=!0,K=!1,Q=void 0;try{for(var $,J=this.cacheProcessing.elements[Symbol.iterator]();!(q=($=J.next()).done);q=!0){var ee=$.value;ee.htmlElement&&function(){var e,t=0;Array.from(ee.element.childNodes).forEach(function(e){var n=Be(e);n&&!n.excluded&&n.pageflow&&(n.siblingIndex=t++)}),ee.children.sort(Ge.siblingIndex),(e=ee.initial.children).push.apply(e,g(ee.children.slice()))}()}}catch(e){K=!0,Q=e}finally{try{q||null==J.return||J.return()}finally{if(K)throw Q}}this.cacheProcessing.sortAsc("depth","id");var te=!0,ne=!1,ie=void 0;try{for(var re,ae=this.extensions[Symbol.iterator]();!(te=(re=ae.next()).done);te=!0){var oe=re.value;oe.setTarget(h),oe.afterInit()}}catch(e){ne=!0,ie=e}finally{try{te||null==ae.return||ae.return()}finally{if(ne)throw ie}}return!0}return!1}},{key:"createDocument",value:function(){var t,n=this,i=[],r=new Map,a=this.viewController.baseTemplate,o=!0;function l(e,t,n){r.has(e)||r.set(e,new Map);var i=r.get(e);i&&i.set(t,n)}function s(e){var t=!0,n=!1,i=void 0;try{for(var a,o=r.values()[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value,s=!0,u=!1,h=void 0;try{for(var c,f=l.values()[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=c.value;if(d.id===e)return void l.delete(d.id)}}catch(e){u=!0,h=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw h}}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}l(-1,0,this.cacheProcessing.parent.parent);var u=0,h=!0,c=!1,f=void 0;try{for(var p,m=this.cacheProcessing.visible[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var v=p.value,y=Math.floor(v.linear.left);null==i[v.depth]&&(i[v.depth]={}),null==i[v.depth][y]&&(i[v.depth][y]=[]),i[v.depth][y].push(v),l(v.depth,v.id,v),u=Math.max(v.depth,u)}}catch(e){c=!0,f=e}finally{try{h||null==m.return||m.return()}finally{if(c)throw f}}for(var b=0;b<u;b++)r.set(-1*b-2,new Map);this.cacheProcessing.delegateAppend=function(e){e.forEach(function(e){s(e.id),l(-1*e.initial.depth-2,e.id,e),e.cascade().forEach(function(e){s(e.id),l(-1*e.initial.depth-2,e.id,e)})})};var A=!0,S=!1,N=void 0;try{for(var L,R=function(){var t=L.value;function l(e,t,n,i,r){var a=n+(""===r&&-1!==t.renderPosition?":".concat(t.renderPosition):"");e.has(a)||e.set(a,new Map);var o=e.get(a);o&&o.set(t.id,i)}var s=new Map,u=new Map,h=function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""!==i)if(arguments.length>4&&void 0!==arguments[4]&&arguments[4]&&e.each(function(t){[s,u].some(function(n){var i=!0,a=!1,o=void 0;try{for(var u,h=s.values()[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var c=u.value,f=c.get(t.id);if(f){var d=e.renderDepth+1;return t.renderDepth!==d&&(f=Ue(f,d),t.renderDepth=d),l(n,t,""+e.id,f,r),c.delete(t.id),!0}}}catch(e){a=!0,o=e}finally{try{i||null==h.return||h.return()}finally{if(a)throw o}}return!1})}),""!==r)l(u,e,r,i,r);else{if(!n.elements.has(e.element))if(e.dataset.target){var a=document.getElementById(e.dataset.target);if(a&&a!==t.element)return n.addRenderQueue(e.dataset.target,[i]),void(e.auto=!1)}else if(t.dataset.target){if(document.getElementById(t.dataset.target))return n.addRenderQueue(t.nodeId,[i]),void(e.dataset.target=t.nodeId)}l(s,e,""+t.id,i,r)}},c=!0,f=!1,p=void 0;try{for(var m,v=function(){var t=m.value;if(0===t.children.length||t.renderAs)return"continue";var a=[],o=[],l=[],s=[],u=!0,c=!1,f=void 0;try{for(var d,p=t.children[Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var v=d.value;v.documentRoot?a.push(v):v.pageflow||v.alignOrigin?l.push(v):v.toInt("zIndex")>=0||v.parent.element!==v.element.parentElement?s.push(v):o.push(v)}}catch(e){c=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw f}}Ge.sortByAlignment(l,x.NONE,t),a.push.apply(a,g(ue(o,"style.zIndex","id"))),a.push.apply(a,l),a.push.apply(a,g(ue(s,"style.zIndex","id")));var y=Ge.cleared(a),b=[],A="",S=-1;function N(){return b.length>0?b[b.length-1]:""}for(var L=function(){var t=a[S];if(!t.visible||!t.documentRoot&&n.elements.has(t.element))return"continue";var o=t.parent,l="",s=n.viewController.settingsInternal.includes;if(s)if(t.hasBit("excludeSection",E.INCLUDE))l="";else{var u=J(t.dataset.include);if(""!==u&&-1===b.indexOf(u)&&(h(t,o,n.viewController.renderInclude(t,o,u),N()),b.push(u)),""!==(A=N())){var c=o.clone();c.renderDepth=n.viewController.baseRenderDepth(A),t.parent=c,o=c}l=A}if(t.renderAs&&(o.removeChild(t),t.hide(),t=t.renderAs),!t.hasBit("excludeSection",E.DOM_TRAVERSE)&&a.length>1&&S<a.length-1){var f=o.linearVertical;if(t.pageflow&&""===A&&!o.flex.enabled&&!o.has("columnCount")&&!o.is(w.GRID)&&(t.hasAlign(x.EXTENDABLE)||t.alignmentType===x.NONE&&o.alignmentType===x.NONE)){var d=[],p=[],m=new Set(["left","right"]),v=!1,L=S,R=0;t.hasAlign(x.EXTENDABLE)&&(d.push(t),L++,R++);e:for(;L<a.length;L++,R++){var O=a[L];if(O.pageflow){var M=y.get(O);M&&("both"===M?m.clear():m.delete(M)),O.floating&&m.add(O.float);var _=O.previousSibling(),B=O.nextSibling(!0);if(0===R&&B)O.blockStatic||B.alignedVertically(O,y,!0)?p.push(O):d.push(O);else{if(!_)break e;switch(function(){var e=Ge.floated(d.concat(p)),t=d.concat(p,[O]),i=Ge.cleared(t),r=new Map;i.has(_)&&r.set(_,_.css("clear"));var a=O.alignedVertically(_,r);if(a||i.has(O)||n.settings.floatOverlapDisabled&&_.floating&&O.blockStatic&&2===m.size){if(d.length>0){if(!n.settings.floatOverlapDisabled&&!_.lineBreak){var o=new Set(t.map(function(e){return i.get(e)||""}).filter(function(e){return""!==e})),l=null;if(e.size>0&&(l=Math.max.apply(null,d.filter(function(e){return e.floating}).map(function(e){return e.bounds.bottom}))),m.size>0&&!o.has("both")&&(null==l||O.bounds.top<l)){if(i.has(O)){if("none"!==(i.has(O)?i.get(O):"none")){if(m.size<2&&2===e.size&&!O.floating)return O.alignmentType|=x.EXTENDABLE,v=!0,d.push(O),"continue"}else if(e.size<2&&(!O.floating||!e.has(O.float)||O.float===d[d.length-1].float))return d.push(O),"continue";return"break|mainloop"}if(!a)return d.push(O),"continue";if(1===e.size&&(!O.floating||m.has(O.float)))return d.push(O),"continue"}}return"break|mainloop"}if(f&&p.length>0){var s=p[p.length-1];if(s.linearVertical)return O.parent=s,"continue"}p.push(O)}else{if(p.length>0||v)return"break|mainloop";d.push(O)}}()){case"continue":continue;case"break|mainloop":break e}}}}var D=null,F="";if(d.length>1){var P=Ge.cleared(d);if(e.isFrameHorizontal(d,P))D=n.viewController.createGroup(o,t,d),F=n.writeFrameLayoutHorizontal(D,o,d,P);else if(d.length===a.length)o.alignmentType|=x.HORIZONTAL;else{var G=Ge.floated(d);1===G.size&&d.some(function(e){return e.has("width",I.PERCENT)})&&d.every(function(e){return e.has("width",I.UNIT|I.PERCENT)})?(D=n.viewController.createGroup(o,t,d),F=n.writeConstraintLayout(D,o),D.alignmentType|=x.PERCENT):e.isRelativeHorizontal(d,P)?(D=n.viewController.createGroup(o,t,d),F=n.writeRelativeLayout(D,o),D.alignmentType|=x.HORIZONTAL):(D=n.viewController.createGroup(o,t,d),F=n.writeLinearLayout(D,o,!0),G.size>0?(D.alignmentType|=x.FLOAT,D.alignmentType|=d.every(function(e){return"right"===e.float||e.autoMarginLeft})?x.RIGHT:x.LEFT):D.alignmentType|=x.HORIZONTAL)}}else if(p.length>1){var H=Ge.floated(p),V=Ge.cleared(p);if(H.size>0&&V.size>0&&(1!==H.size||!p.slice(1,p.length-1).every(function(e){return V.has(e)}))?o.linearVertical?(D=t,F=n.writeFrameLayoutVertical(null,o,p,V)):(D=n.viewController.createGroup(o,t,p),F=n.writeFrameLayoutVertical(D,o,p,V)):p.length===a.length?o.alignmentType|=x.VERTICAL:f||(D=n.viewController.createGroup(o,t,p),F=n.writeLinearLayout(D,o,!1),D.alignmentType|=x.VERTICAL),p.length!==a.length){var z=p[p.length-1];z.blockStatic||z===a[a.length-1]||(z.alignmentType|=x.EXTENDABLE)}}D&&(h(D,o,F,"",!0),o=t.parent),t.hasAlign(x.EXTENDABLE)&&(t.alignmentType^=x.EXTENDABLE)}}if(!t.hasBit("excludeSection",E.EXTENSION)&&!t.rendered){for(var U=!1,X=g(o.renderExtension).concat(g(n.extensions.filter(function(e){return e.subscribersChild.has(t)}))),W=0;W<X.length;W++){var j=X[W];j.setTarget(t,o);var Y=j.processChild();if(""!==Y.output&&h(t,o,Y.output,l),Y.parent&&(o=Y.parent),U=!!Y.next,Y.complete||Y.next)break}if(U)return"continue";if(t.styleElement){var Z=[];if(je(n.extensions,t.element).some(function(e){if(e.is(t)&&(e.setTarget(t,o),e.condition())){var n=e.processNode(i,r);if(""!==n.output&&h(t,o,n.output,l),n.parent&&(o=n.parent),(""!==n.output||n.include)&&Z.push(e),U=!!n.next,n.complete||n.next)return!0}return!1}),Z.length>0)for(var q=0;q<Z.length;q++){var K=Z[q];K.subscribers.add(t),t.renderExtension.add(K)}if(U)return"continue"}}if(!t.hasBit("excludeSection",E.RENDER)&&!t.rendered){var Q="";if(t.alignmentType===x.NONE&&!t.imageElement&&t.has("width",I.PERCENT,{not:"100%"})&&(o.linearVertical||o.is(w.FRAME)&&t.singleChild)){var $=n.viewController.createGroup(o,t,[t]),ee=n.writeGridLayout($,o,2,1);$.alignmentType|=x.PERCENT,h($,o,ee,l),n.viewController["right"===t.float||t.autoMarginLeft?"prependBefore":"appendAfter"](t.id,n.viewController.renderColumnSpace($.renderDepth+1,"".concat(100-t.toInt("width"),"%"))),o=$}if(""===t.controlName){var te=t.borderTopWidth>0||t.borderBottomWidth>0||t.borderRightWidth>0||t.borderLeftWidth>0,ne=C.URL.test(t.css("backgroundImage"))||C.URL.test(t.css("background")),ie=t.has("backgroundColor"),re=te||ne||ie;if(0===t.children.length)ke(t.element,n.settings.renderInlineText?0:1)||te&&t.textContent.length>0?Q=n.writeNode(t,o,w.TEXT):ne&&"no-repeat"===t.css("backgroundRepeat")&&(!t.inlineText||t.toInt("textIndent")+t.bounds.width<0)?(t.alignmentType|=x.SINGLE,t.excludeResource|=T.FONT_STYLE|T.VALUE_STRING,Q=n.writeNode(t,o,w.IMAGE)):t.block&&(ie||ne)&&(te||t.paddingTop+t.paddingRight+t.paddingRight+t.paddingLeft>0)?Q=n.writeNode(t,o,w.LINE):t.documentRoot||(!n.settings.collapseUnattributedElements||0!==t.bounds.height||oe(t.element.id)||oe(t.dataset.ext)||re?Q=re?n.writeNode(t,o,w.TEXT):n.writeFrameLayout(t,o):(o.removeChild(t),t.hide()));else if(t.flex.enabled||t.children.some(function(e){return!e.pageflow})||t.has("columnCount"))Q=n.writeConstraintLayout(t,o);else if(1===t.children.length){var ae=t.children.filter(function(e){if(e.dataset.target){var t=document.getElementById(e.dataset.target);return null!=t&&oe(t.dataset.ext)&&t!==o.element}return!1});if(!(!n.settings.collapseUnattributedElements||t.documentRoot||oe(t.element.id)||oe(t.dataset.ext)||oe(t.dataset.target)||0!==t.toInt("width")||0!==t.toInt("height")||re||t.has("textAlign")||t.has("verticalAlign")||"right"===t.float||t.autoMargin||!t.alignOrigin||n.viewController.hasAppendProcessing(t.id))||t.documentRoot&&1===ae.length){var le=t.children[0];return le.documentRoot=t.documentRoot,le.siblingIndex=t.siblingIndex,0!==o.id&&(le.parent=o),0===ae.length&&(t.resetBox(k.MARGIN,le,!0),le.modifyBox(k.MARGIN_TOP,t.paddingTop),le.modifyBox(k.MARGIN_RIGHT,t.paddingRight),le.modifyBox(k.MARGIN_BOTTOM,t.paddingBottom),le.modifyBox(k.MARGIN_LEFT,t.paddingLeft)),t.hide(),a[S]=le,S--,"continue"}Q=n.writeFrameLayout(t,o)}else{var se=t.children,ue=[Ge.linearX(se),Ge.linearY(se)],he=ue[0],ce=ue[1],fe=Ge.cleared(se),de=se.every(function(e){return e.pageflow&&e.inlineElement});if(!o.flex.enabled&&se.every(function(e){return e.pageflow})){var ge=Ge.floated(se);he&&0===fe.size?(0===ge.size&&se.every(function(e){return 0===e.toInt("verticalAlign")})&&(se.some(function(e){return["text-top","text-bottom"].includes(e.css("verticalAlign"))})?(Q=n.writeConstraintLayout(t,o),t.alignmentType|=x.HORIZONTAL):e.isRelativeHorizontal(se)&&(Q=n.writeRelativeLayout(t,o),t.alignmentType|=x.HORIZONTAL)),""===Q&&(0!==ge.size&&ge.has("right")||(e.isRelativeHorizontal(se)?(Q=n.writeRelativeLayout(t,o),t.alignmentType|=x.HORIZONTAL):(Q=n.writeLinearLayout(t,o,!0),t.alignmentType|=x.HORIZONTAL)))):(ce||!de&&se.some(function(e){return e.alignedVertically(e.previousSibling(),fe)}))&&(Q=n.writeLinearLayout(t,o,!1),ce&&!t.documentRoot&&(t.alignmentType|=x.VERTICAL))}""===Q&&(de?e.isFrameHorizontal(se,fe,!0)?Q=n.writeFrameLayoutHorizontal(t,o,se,fe):(Q=n.writeRelativeLayout(t,o),0===Le(se[0].baseElement,se[se.length-1].baseElement).filter(function(e){return Ne(e)}).length&&(t.alignmentType|=x.HORIZONTAL)):Q=n.writeConstraintLayout(t,o))}}else Q=n.writeNode(t,o,t.controlName);h(t,o,Q,l)}s&&!t.hasBit("excludeSection",E.INCLUDE)&&b.length>0&&"true"===t.dataset.includeEnd&&b.pop()};++S<a.length;)L()},y=t.values()[Symbol.iterator]();!(c=(m=y.next()).done);c=!0)v()}catch(e){f=!0,p=e}finally{try{c||null==y.return||y.return()}finally{if(f)throw p}}var b=!0,A=!1,S=void 0;try{for(var N,R=function(){var e=d(N.value,2),t=e[1],i=[],r=d(e[0].split(":"),2),l=r[0],s=r[1],u=Array.from(t.values());if(u.length>0){if(n._sorted[l]){var h=[];n._sorted[l].forEach(function(e){var t=u.find(function(t){return-1!==t.indexOf(Ve(e,"@"))});t&&h.push(t)}),h.length===u.length&&i.push.apply(i,h)}0===i.length&&i.push.apply(i,g(u));var c=l+(s?":".concat(s):""),f=Ve(c);-1!==a.indexOf(f)?(a=ze(a,f,i.join("")),o=!1):n.addRenderQueue(c,u)}},O=s.entries()[Symbol.iterator]();!(b=(N=O.next()).done);b=!0)R()}catch(e){A=!0,S=e}finally{try{b||null==O.return||O.return()}finally{if(A)throw S}}if(n.viewController.settingsInternal.includes){var M=!0,_=!1,B=void 0;try{for(var D,F=u.entries()[Symbol.iterator]();!(M=(D=F.next()).done);M=!0){var P=d(D.value,2),G=P[0],H=Array.from(P[1].values());if(H.length>0){var V=n.viewController.renderMerge(G,H);n.createIncludeFile(G,V)}}}catch(e){_=!0,B=e}finally{try{M||null==F.return||F.return()}finally{if(_)throw B}}}},O=r.values()[Symbol.iterator]();!(A=(L=O.next()).done);A=!0)R()}catch(e){S=!0,N=e}finally{try{A||null==O.return||O.return()}finally{if(S)throw N}}var M=this.cacheProcessing.parent;if(!M.dataset.layoutName||oe(M.dataset.target)&&0!==M.renderExtension.size||this.createLayoutFile(ee(J(M.dataset.pathname),"/"),M.dataset.layoutName,o?"":a,M.renderExtension.size>0&&Array.from(M.renderExtension).some(function(e){return e.documentRoot})),o)0===M.renderExtension.size&&M.hide();else{var _=!0,B=!1,D=void 0;try{for(var F,P=this.extensions[Symbol.iterator]();!(_=(F=P.next()).done);_=!0){var G=F.value;G.setTarget(M),G.afterRender()}}catch(e){B=!0,D=e}finally{try{_||null==P.return||P.return()}finally{if(B)throw D}}}this.cacheProcessing.sort(function(e,t){if(e.visible){if(t.visible){if(e.renderDepth!==t.renderDepth)return e.renderDepth<t.renderDepth?-1:1;if(!e.domElement){var n=Be(e.baseElement);if(!n)return 1;e=n}if(!t.domElement){var i=Be(e.baseElement);if(!i)return-1;t=i}return e.documentParent!==t.documentParent?e.documentParent.id<t.documentParent.id?-1:1:e.renderIndex<t.renderIndex?-1:1}return-1}return 1}),(t=this.cacheSession.list).push.apply(t,g(this.cacheProcessing.list))}},{key:"writeFrameLayout",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||0!==e.children.length?this.viewController.renderGroup(e,t,w.FRAME):this.viewController.renderNode(e,t,w.FRAME)}},{key:"writeLinearLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,w.LINEAR,{horizontal:n})}},{key:"writeGridLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,w.GRID,{columnCount:n,rowCount:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0})}},{key:"writeRelativeLayout",value:function(e,t){return this.viewController.renderGroup(e,t,w.RELATIVE)}},{key:"writeConstraintLayout",value:function(e,t){return this.viewController.renderGroup(e,t,w.CONSTRAINT)}},{key:"writeNode",value:function(e,t,n){return this.viewController.renderNode(e,t,n)}},{key:"writeFrameLayoutHorizontal",value:function(t,n,i,r){var a=this,o="",l=[];if(0===r.size&&!i.some(function(e){return e.autoMargin})){var s=[],u=[],h=[],c=!0,f=!1,d=void 0;try{for(var p,m=i[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var v=p.value;v.floating?"right"===v.float?h.push(v):u.push(v):s.push(v)}}catch(e){f=!0,d=e}finally{try{c||null==m.return||m.return()}finally{if(f)throw d}}if(s.length===i.length||u.length===i.length||h.length===i.length)return t.alignmentType|=s.length>0?x.HORIZONTAL:x.FLOAT,h.length>0&&(t.alignmentType|=x.RIGHT),o=e.isRelativeHorizontal(i,r)?this.writeRelativeLayout(t,n):this.writeLinearLayout(t,n,!0);if(0===u.length||0===h.length){var y=0===h.length?u.concat(s):s.concat(h);if(Ge.linearY(y))return o=this.writeLinearLayout(t,n,!1),t.alignmentType|=x.VERTICAL,o;if(e.isRelativeHorizontal(y,r))return o=this.writeRelativeLayout(t,n),t.alignmentType|=x.HORIZONTAL,h.length>0&&(t.alignmentType|=x.RIGHT),o;0===h.length&&(this.settings.floatOverlapDisabled||(o=this.writeLinearLayout(t,n,!0),l=[u,s],t.alignmentType|=x.FLOAT))}}var b=[],E=[],T=[],A=[],w=[],I=[],S=[],N=[];if(0===l.length){for(var L="",R=0,C=0;C<i.length;C++){var O=i[C];if(r.has(O)){var M=r.get(O);if(j(R,"right"===M?4:2)||0!==R&&"both"===M)switch(M){case"left":R^=2,L="left";break;case"right":R^=4,L="right";break;case"both":switch(R){case 2:L="left";break;case 4:L="right";break;default:L="both"}R=0}}if(""===L)O.floating?"right"===O.float?(A.push(O),O.floating&&(R|=4)):(T.push(O),O.floating&&(R|=2)):O.autoMargin?O.autoMarginLeft?A.length>0?I.push(O):A.push(O):O.autoMarginRight?T.length>0?w.push(O):T.push(O):b.length>0?0===T.length?T.push(O):A.push(O):b.push(O):b.push(O);else if(O.floating)"right"===O.float?(0===I.length&&(R|=4),!this.settings.floatOverlapDisabled&&"right"!==L&&A.length>0?A.push(O):I.push(O)):(0===w.length&&(R|=2),!this.settings.floatOverlapDisabled&&"left"!==L&&T.length>0?T.push(O):w.push(O));else if(O.autoMargin)O.autoMarginLeft&&I.length>0?I.push(O):O.autoMarginRight&&w.length>0?w.push(O):E.push(O);else switch(L){case"left":w.push(O);break;case"right":I.push(O);break;default:E.push(O)}}T.length>0&&w.length>0?(S=[T,w],w.length>1&&(w[0].alignmentType|=x.EXTENDABLE)):T.length>0?S=T:w.length>0&&(S=w),A.length>0&&I.length>0?(N=[A,I],I.length>1&&(I[0].alignmentType|=x.EXTENDABLE)):A.length>0?N=A:I.length>0&&(N=I),this.settings.floatOverlapDisabled?(n.linearVertical?(o=Ve(t.id),t.renderDepth--):o=this.writeLinearLayout(t,n,!1),l.push(b,[T,A],E)):(0!==b.length||0!==S.length&&0!==N.length?o=this.writeFrameLayout(t,n,!0):(o=this.writeLinearLayout(t,n,!1),N.length>0&&(t.alignmentType|=x.RIGHT)),b.length>0?(I.length>0?l.push(S=[b,T],N):w.length>0?l.push(N=[b,A],S):l.push(b,S,N),b.length>1&&(b[0].alignmentType|=x.EXTENDABLE)):S===w&&N===A||S===T&&N===I?l.push(0===w.length?[T,I]:[A,w]):l.push(S,N),l=l.filter(function(e){return e&&e.length>0})),t.alignmentType|=x.FLOAT}if(l.length>0){var _=null;l.forEach(function(n,i){if(Array.isArray(n[0])){var r=[];n.forEach(function(e){return r.push.apply(r,g(e))}),r.sort(Ge.siblingIndex),a.settings.floatOverlapDisabled?(_=a.viewController.createGroup(t,r[0],r),o=ze(o,t.id,a.writeFrameLayout(_,t,!0))):t.linearVertical?_=t:(_=a.viewController.createGroup(t,r[0],r),o=ze(o,t.id,a.writeLinearLayout(_,t,!1)),n.some(function(e){return e===N||e===A})&&(_.alignmentType|=x.RIGHT)),_.alignmentType|=x.FLOAT}else _=null;(Array.isArray(n[0])?n:[n]).forEach(function(n){var r=t;if(_&&[b,T,w,A,I].includes(n)&&(r=_),n.length>1){var l="",s=a.viewController.createGroup(r,n[0],n),u=n.some(function(e){return"left"===e.float}),h=n.some(function(e){return"right"===e.float});if(e.isRelativeHorizontal(n,Ge.cleared(n)))l=a.writeRelativeLayout(s,r),s.alignmentType|=x.HORIZONTAL;else if(l=a.writeLinearLayout(s,r,Ge.linearX(n)),h&&s.children.some(function(e){return e.marginLeft<0})){var c=[],f=0;s.children.slice().forEach(function(e){var t=!1;f<0&&(Math.abs(f)>e.bounds.width?(f+=e.bounds.width,e.modifyBox(k.MARGIN_RIGHT,-1*e.bounds.width,!0),t=!0):Math.abs(f)>=e.marginRight?(e.modifyBox(k.MARGIN_RIGHT,Math.ceil(Math.abs(f)-e.marginRight)),e.modifyBox(k.MARGIN_RIGHT,null)):e.modifyBox(k.MARGIN_RIGHT,f,!0)),e.marginLeft<0&&(f+=Math.max(e.marginLeft,-1*e.bounds.width),e.modifyBox(k.MARGIN_LEFT,null)),t?c.splice(c.length-1,0,e):c.push(e)}),s.children=c.reverse(),a.saveSortOrder(s.id,s.children)}s.alignmentType|=x.SEGMENTED,(u||h)&&(s.alignmentType|=x.FLOAT,h&&(s.alignmentType|=x.RIGHT)),o=ze(o,r.id,l),r.appendRendered(s)}else if(n.length>0){var d=n[0];d.alignmentType|=x.SINGLE,"right"===d.float&&(d.alignmentType|=x.RIGHT),d.renderPosition=i,o=ze(o,r.id,"{:".concat(r.id,":").concat(i,"}")),r.appendRendered(d)}})})}return o}},{key:"writeFrameLayoutVertical",value:function(e,t,n,i){var r=this,a="";e?(a=this.writeLinearLayout(e,t,!1),e.alignmentType|=x.VERTICAL):a=Ve((e=t).id);var o=[],l=[],s=[],u=[],h=0,c=!1,f=!0;n.some(function(e){return!e.floating&&(h+=e.linear.height,!0)});var d=!0,g=!1,p=void 0;try{for(var m,v=n[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var y=m.value;i.has(y)&&(y.floating?c=!0:(y.modifyBox(k.MARGIN_TOP,null),o.push(s.slice()),s.length=0,l.push(u.slice()),u.length=0)),y.floating?u.push(y):(c&&!i.has(y)&&(f=!1),s.push(y))}}catch(e){g=!0,p=e}finally{try{d||null==v.return||v.return()}finally{if(g)throw p}}return u.length>0&&l.push(u),s.length>0&&o.push(s),f||function(){for(var t="",i=0;i<Math.max(l.length,o.length);i++){var s=l[i]||[],u=o[i]||[];(u.length>0||s.length>0)&&function(){var a=r.viewController.createGroup(e,s[0]||u[0],[]),o=[],l=null;s.length>1?(l=r.viewController.createGroup(a,s[0],s),a.alignmentType|=x.FLOAT):s.length>0&&((l=s[0]).parent=a,a.alignmentType|=x.FLOAT),l&&(o.push(l),0===i&&h>0&&l.modifyBox(k.MARGIN_TOP,h),l=null),u.length>1?l=r.viewController.createGroup(a,u[0],u):u.length>0&&((l=u[0]).parent=a),l&&o.push(l),a.init(),t+=r.writeFrameLayout(a,e,!0),a.alignmentType|=x.VERTICAL,o.forEach(function(e,i){n.includes(e)?t=ze(t,a.id,"{:".concat(a.id,":").concat(i,"}")):(t=ze(t,a.id,r.writeLinearLayout(e,a,!1)),e.alignmentType|=x.SEGMENTED)})}()}a=ze(a,e.id,t)}(),a}},{key:"appendRenderQueue",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.extensions[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value,o=!0,l=!1,s=void 0;try{for(var u,h=a.subscribers[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){a.setTarget(u.value),a.beforeInsert()}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}var c={};for(var f in this.renderQueue){var g=d(f.split(":"),1)[0],p=g;if(!Y(p)){var m=Be(document.getElementById(p));m&&(p=""+m.id)}var v=this.renderQueue[f].join("\n");if(p!==g){var y=this.cacheSession.find("id",parseInt(p));if(y){var b=y.renderDepth+1;v=Ue(v,b);for(var E=/{@(\d+)}/g,x=null,T=0;null!=(x=E.exec(v));){var A=this.cacheSession.find("id",parseInt(x[1]));A&&(A.renderDepth=0==T++?b:A.parent.renderDepth+1)}}}c[p]=v}for(var w in c)for(var k in c)w!==k&&(c[w]=c[w].replace(Ve(k),c[k]),c[k]=c[k].replace(Ve(w),c[w]));var I=!0,S=!1,N=void 0;try{for(var L,R=this.layouts[Symbol.iterator]();!(I=(L=R.next()).done);I=!0){var C=L.value;for(var O in c)C.content=C.content.replace(Ve(O),c[O]);C.content=this.viewController.appendRenderQueue(C.content)}}catch(e){S=!0,N=e}finally{try{I||null==R.return||R.return()}finally{if(S)throw N}}var M=!0,_=!1,B=void 0;try{for(var D,F=this.extensions[Symbol.iterator]();!(M=(D=F.next()).done);M=!0){var P=D.value,G=!0,H=!1,V=void 0;try{for(var z,U=P.subscribers[Symbol.iterator]();!(G=(z=U.next()).done);G=!0){P.setTarget(z.value),P.afterInsert()}}catch(e){H=!0,V=e}finally{try{G||null==U.return||U.return()}finally{if(H)throw V}}}}catch(e){_=!0,B=e}finally{try{M||null==F.return||F.return()}finally{if(_)throw B}}}},{key:"createLayoutFile",value:function(e,t,n){var i={pathname:e=e||this.viewController.settingsInternal.layout.pathName,filename:t,content:n};arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&this._views.length>0&&""===this._views[0].content?(this._views[0]=i,this._currentIndex=0):this.layoutProcessing=i}},{key:"createIncludeFile",value:function(e,t){this._includes.push({pathname:this.viewController.settingsInternal.layout.pathName,filename:e,content:t})}},{key:"addRenderQueue",value:function(e,t){var n;null==this.renderQueue[e]&&(this.renderQueue[e]=[]),(n=this.renderQueue[e]).push.apply(n,g(t))}},{key:"saveSortOrder",value:function(e,t){this._sorted[""+e]=t.map(function(e){return e.id})}},{key:"insertNode",value:function(e,t){var n=null;if("#"===e.nodeName.charAt(0))"#text"===e.nodeName&&(Ie(e,!0)||Te(e,"whiteSpace","pre","pre-wrap"))&&(n=new this.nodeObject(this.cacheProcessing.nextId,e),this.viewController.initNode(n),n.nodeName="PLAINTEXT",t?(n.parent=t,n.inherit(t,"style")):n.css("whiteSpace",(e.parentElement?ye(e.parentElement).whiteSpace:null)||"normal"),n.css({position:"static",display:"inline",clear:"none",cssFloat:"none",verticalAlign:"baseline"}));else if(Re(e)){var i=new this.nodeObject(this.cacheProcessing.nextId,e);this.viewController.initNode(i),Ce(e,this.settings.hideOffScreenElements)?(n=i).setExclusions():(i.excluded=!0,i.visible=!1)}return n&&this.cacheProcessing.append(n),n}},{key:"getExtension",value:function(e){return this.extensions.find(function(t){return t.name===e})}},{key:"toString",value:function(){return this._views.length>0?this._views[0].content:""}},{key:"setStyleMap",value:function(){for(var e=this,t=!1,n=fe(y.FIREFOX),i=0;i<document.styleSheets.length;i++){var r=document.styleSheets[i];if(r.cssRules)for(var a=0;a<r.cssRules.length;a++)try{!function(){for(var t=r.cssRules[a],i=new Set,o=Array.from(t.style),l=0;l<o.length;l++){i.add(F(o[l]))}Array.from(document.querySelectorAll(t.selectorText)).forEach(function(r){for(var a=Array.from(r.style),o=0;o<a.length;o++){i.add(F(a[o]))}var l=ye(r),s={},u=!0,h=!1,c=void 0;try{for(var f,d=i[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var g=f.value,p=t.style[g];if(r.style[g])s[g]=r.style[g];else if(l[g]===p)s[g]=l[g];else if(p)switch(g){case"fontSize":s[g]=l[g]||p;break;case"width":case"height":case"lineHeight":case"verticalAlign":case"textIndent":case"columnGap":case"top":case"right":case"bottom":case"left":case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":s[g]=/^[A-Za-z\-]+$/.test(p)||K(p)?p:z(p,l.fontSize);break;default:null==s[g]&&(s[g]=p)}}}catch(e){h=!0,c=e}finally{try{u||null==d.return||d.return()}finally{if(h)throw c}}if(e.settings.preloadImages&&oe(s.backgroundImage)&&"initial"!==s.backgroundImage&&s.backgroundImage.split(",").map(function(e){return e.trim()}).forEach(function(t){var n=Ee(t);""===n||e.cacheImage.has(n)||e.cacheImage.set(n,{width:0,height:0,uri:n})}),n&&null==s.display)switch(r.tagName){case"INPUT":case"TEXTAREA":case"SELECT":case"BUTTON":s.display="inline-block"}var m=Me(r,"styleMap");m?Object.assign(m,s):(Oe(r,"style",l),Oe(r,"styleMap",s))})}()}catch(e){t||(alert("External CSS files cannot be parsed when loading this program from your hard drive with Chrome 64+ (file://). Either use a local web server (http://), embed your CSS files into a <style> tag, or use a different browser. See the README for further instructions.\n\n"+"".concat(r.href,"\n\n").concat(e)),t=!0)}}}},{key:"appName",set:function(e){this.resourceHandler&&(this.resourceHandler.file.appName=e)},get:function(){return this.resourceHandler?this.resourceHandler.file.appName:""}},{key:"settings",set:function(e){this._settings=e,this.viewController&&(this.viewController.settings=e),this.resourceHandler&&(this.resourceHandler.settings=e)},get:function(){return this._settings?this._settings:{}}},{key:"layoutProcessing",set:function(e){this._currentIndex=this._views.length,this._views.push(e)},get:function(){return this._views[this._currentIndex]}},{key:"layouts",get:function(){return g(this._views).concat(g(this._includes))}},{key:"viewData",get:function(){return{cache:this.cacheSession,views:this._views,includes:this._includes}}},{key:"size",get:function(){return this._views.length+this._includes.length}}],[{key:"isFrameHorizontal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Ge.floated(e),r=e.filter(function(e){return e.autoMargin});return 0===(n?Le(e[0].baseElement,e[e.length-1].baseElement).filter(function(e){return"BR"===e.tagName}).length:0)&&(i.has("right")||t.size>0||r.length>0||!Ge.linearX(e))}},{key:"isRelativeHorizontal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,n=e.filter(function(e){return e.visible}),i=Ge.floated(e),r=d(new Ge(e).partition(function(e){return e.floating}),2),a=r[0],o=r[1],l=o.length>0?Math.min.apply(null,o.list.map(function(e){return e.siblingIndex})):Number.MAX_VALUE,s=a.length>0?Math.max.apply(null,a.list.map(function(e){return e.siblingIndex})):-1,u=Ge.linearX(e);return!n.some(function(e){return e.autoMarginHorizontal})&&(1===i.size&&a.length===e.length?!(u&&0===t.size):0===t.size&&!i.has("right")&&(0===o.length||0===a.length||s<l)&&n.every(function(e){var t=e.css("verticalAlign");return e.toInt("top")>=0&&(["baseline","initial","unset","top","middle","sub","super"].includes(t)||q(t)&&parseInt(t)>=0)})&&(n.some(function(e){return(e.textElement||e.imageElement||e.svgElement)&&e.baseline||e.plainText&&e.multiLine})||!u&&e.every(function(e){return e.pageflow&&e.inlineElement})))}}]),e}(),Ze=function(){function e(){r(this,e),this._before={},this._after={}}return o(e,[{key:"reset",value:function(){this._before={},this._after={}}},{key:"appendRenderQueue",value:function(e){for(var t in this._before)e=e.replace("{<".concat(t,"}"),this._before[t].join(""));for(var n in this._after)e=e.replace("{>".concat(n,"}"),this._after[n].join(""));return e}},{key:"prependBefore",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;null==this._before[e]&&(this._before[e]=[]),-1!==n&&n<this._before[e].length?this._before[e].splice(n,0,t):this._before[e].push(t)}},{key:"appendAfter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;null==this._after[e]&&(this._after[e]=[]),-1!==n&&n<this._after[e].length?this._after[e].splice(n,0,t):this._after[e].push(t)}},{key:"hasAppendProcessing",value:function(e){return null!=this._before[e]||null!=this._after[e]}}]),e}(),qe={Pink:{hex:"#FFC0CB"},LightPink:{hex:"#FFB6C1"},HotPink:{hex:"#FF69B4"},DeepPink:{hex:"#FF1493"},PaleVioletRed:{hex:"#DB7093"},MediumVioletRed:{hex:"#C71585"},LightSalmon:{hex:"#FFA07A"},Salmon:{hex:"#FA8072"},DarkSalmon:{hex:"#E9967A"},LightCoral:{hex:"#F08080"},IndianRed:{hex:"#CD5C5C"},Crimson:{hex:"#DC143C"},Firebrick:{hex:"#B22222"},DarkRed:{hex:"#8B0000"},Red:{hex:"#FF0000"},OrangeRed:{hex:"#FF4500"},Tomato:{hex:"#FF6347"},Coral:{hex:"#FF7F50"},Orange:{hex:"#FFA500"},DarkOrange:{hex:"#FF8C00"},Yellow:{hex:"#FFFF00"},LightYellow:{hex:"#FFFFE0"},LemonChiffon:{hex:"#FFFACD"},LightGoldenrodYellow:{hex:"#FAFAD2"},PapayaWhip:{hex:"#FFEFD5"},Moccasin:{hex:"#FFE4B5"},PeachPuff:{hex:"#FFDAB9"},PaleGoldenrod:{hex:"#EEE8AA"},Khaki:{hex:"#F0E68C"},DarkKhaki:{hex:"#BDB76B"},Gold:{hex:"#FFD700"},Cornsilk:{hex:"#FFF8DC"},BlanchedAlmond:{hex:"#FFEBCD"},Bisque:{hex:"#FFE4C4"},NavajoWhite:{hex:"#FFDEAD"},Wheat:{hex:"#F5DEB3"},Burlywood:{hex:"#DEB887"},Tan:{hex:"#D2B48C"},RosyBrown:{hex:"#BC8F8F"},SandyBrown:{hex:"#F4A460"},Goldenrod:{hex:"#DAA520"},DarkGoldenrod:{hex:"#B8860B"},Peru:{hex:"#CD853F"},Chocolate:{hex:"#D2691E"},SaddleBrown:{hex:"#8B4513"},Sienna:{hex:"#A0522D"},Brown:{hex:"#A52A2A"},Maroon:{hex:"#800000"},DarkOliveGreen:{hex:"#556B2F"},Olive:{hex:"#808000"},OliveDrab:{hex:"#6B8E23"},YellowGreen:{hex:"#9ACD32"},LimeGreen:{hex:"#32CD32"},Lime:{hex:"#00FF00"},LawnGreen:{hex:"#7CFC00"},Chartreuse:{hex:"#7FFF00"},GreenYellow:{hex:"#ADFF2F"},SpringGreen:{hex:"#00FF7F"},MediumSpringGreen:{hex:"#00FA9A"},LightGreen:{hex:"#90EE90"},PaleGreen:{hex:"#98FB98"},DarkSeaGreen:{hex:"#8FBC8F"},MediumAquamarine:{hex:"#66CDAA"},MediumSeaGreen:{hex:"#3CB371"},SeaGreen:{hex:"#2E8B57"},ForestGreen:{hex:"#228B22"},Green:{hex:"#008000"},DarkGreen:{hex:"#006400"},Aqua:{hex:"#00FFFF"},Cyan:{hex:"#00FFFF"},LightCyan:{hex:"#E0FFFF"},PaleTurquoise:{hex:"#AFEEEE"},Aquamarine:{hex:"#7FFFD4"},Turquoise:{hex:"#40E0D0"},DarkTurquoise:{hex:"#00CED1"},MediumTurquoise:{hex:"#48D1CC"},LightSeaGreen:{hex:"#20B2AA"},CadetBlue:{hex:"#5F9EA0"},DarkCyan:{hex:"#008B8B"},Teal:{hex:"#008080"},LightSteelBlue:{hex:"#B0C4DE"},PowderBlue:{hex:"#B0E0E6"},LightBlue:{hex:"#ADD8E6"},SkyBlue:{hex:"#87CEEB"},LightSkyBlue:{hex:"#87CEFA"},DeepSkyBlue:{hex:"#00BFFF"},DodgerBlue:{hex:"#1E90FF"},Cornflower:{hex:"#6495ED"},SteelBlue:{hex:"#4682B4"},RoyalBlue:{hex:"#4169E1"},Blue:{hex:"#0000FF"},MediumBlue:{hex:"#0000CD"},DarkBlue:{hex:"#00008B"},Navy:{hex:"#000080"},MidnightBlue:{hex:"#191970"},Lavender:{hex:"#E6E6FA"},Thistle:{hex:"#D8BFD8"},Plum:{hex:"#DDA0DD"},Violet:{hex:"#EE82EE"},Orchid:{hex:"#DA70D6"},Fuchsia:{hex:"#FF00FF"},Magenta:{hex:"#FF00FF"},MediumOrchid:{hex:"#BA55D3"},MediumPurple:{hex:"#9370DB"},BlueViolet:{hex:"#8A2BE2"},DarkViolet:{hex:"#9400D3"},DarkOrchid:{hex:"#9932CC"},DarkMagenta:{hex:"#8B008B"},Purple:{hex:"#800080"},RebeccaPurple:{hex:"#663399"},Indigo:{hex:"#4B0082"},DarkSlateBlue:{hex:"#483D8B"},SlateBlue:{hex:"#6A5ACD"},MediumSlateBlue:{hex:"#7B68EE"},White:{hex:"#FFFFFF"},Snow:{hex:"#FFFAFA"},Honeydew:{hex:"#F0FFF0"},MintCream:{hex:"#F5FFFA"},Azure:{hex:"#F0FFFF"},AliceBlue:{hex:"#F0F8FF"},GhostWhite:{hex:"#F8F8FF"},WhiteSmoke:{hex:"#F5F5F5"},Seashell:{hex:"#FFF5EE"},Beige:{hex:"#F5F5DC"},OldLace:{hex:"#FDF5E6"},FloralWhite:{hex:"#FFFAF0"},Ivory:{hex:"#FFFFF0"},AntiqueWhite:{hex:"#FAEBD7"},Linen:{hex:"#FAF0E6"},LavenderBlush:{hex:"#FFF0F5"},MistyRose:{hex:"#FFE4E1"},Gainsboro:{hex:"#DCDCDC"},LightGray:{hex:"#D3D3D3"},Silver:{hex:"#C0C0C0"},DarkGray:{hex:"#A9A9A9"},Gray:{hex:"#808080"},DimGray:{hex:"#696969"},LightSlateGray:{hex:"#778899"},SlateGray:{hex:"#708090"},DarkSlateGray:{hex:"#2F4F4F"},Black:{hex:"#000000"}},Ke=[];for(var Qe in qe){var $e=qe[Qe];$e.name=Qe;var Je=at($e.hex);Je&&($e.rgb=Je,$e.hsl=et($e.rgb),Ke.push($e))}function et(e){var t=e.r,n=void 0===t?0:t,i=e.g,r=void 0===i?0:i,a=e.b,o=void 0===a?0:a,l=Math.min(n/=255,r/=255,o/=255),s=Math.max(n,r,o),u=(s+l)/2,h=u,c=u;if(s===l)u=0,h=0;else{var f=s-l;switch(h=c>.5?f/(2-s-l):f/(s+l),s){case n:u=(r-o)/f+(r<o?6:0);break;case r:u=(o-n)/f+2;break;case o:u=(n-r)/f+4}u/=6}return{h:360*u,s:100*h,l:100*c}}function tt(e,t){if(e.hsl&&t.hsl){var n=[e.hsl.h,t.hsl.h],i=n[0],r=n[1];if(i===r){var a=[e.hsl.s,t.hsl.s];if((i=a[0])===(r=a[1])){var o=[e.hsl.l,t.hsl.l];i=o[0],r=o[1]}}return i>=r?1:-1}return 0}function nt(e){return e?"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"):""}function it(e){for(var t in qe)if(t.toLowerCase()===e.trim().toLowerCase())return qe[t];return null}function rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="0123456789ABCDEF",i=parseInt(e)*t;return isNaN(i)?"00":n.charAt(((i=Math.max(0,Math.min(i,255)))-i%16)/16)+n.charAt(i%16)}function at(e){return 3===(e=e.replace("#","").trim()).length&&(e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2)),6===e.length?{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16)}:null}function ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";if(""!==e){if("initial"===e)return[];if("transparent"===e)e="#000000",t="0";else{var n=it(e);if(n)return[n.hex,nt(n.rgb),t]}var i=at(e);i&&(e=nt(i));var r=e.match(/rgba?\((\d+), (\d+), (\d+),?\s*([\d.]+)?\)/);if(r&&r.length>=4&&"0"!==r[4])return null==r[4]&&(r[4]=t),["#".concat(rt(r[1])+rt(r[2])+rt(r[3])),r[0],parseFloat(r[4])<1?parseFloat(r[4]).toFixed(2):"1"]}return[]}function lt(e){if(""!==e){var t=ot(e=e.trim());if(t.length>0&&(e=t[0]),/^#[a-zA-Z\d]{3,8}$/.test(e)){9===e.length&&(e="#".concat(e.substring(3)));var n=at(e);return 4===e.length&&n?ot(nt(n))[0]:e}}return""}Ke.sort(tt);var st=Object.freeze({getColorByName:it,convertToHex:rt,convertToRGB:at,getColorNearest:function(e){var t=Ke.slice(),n=t.findIndex(function(t){return t.hex===e});if(-1!==n)return t[n];var i=at(e);if(i){var r=et(i);if(r)return t.push({name:"",hsl:r,rgb:{r:-1,g:-1,b:-1},hex:""}),t.sort(tt),n=t.findIndex(function(e){return""===e.name}),t[Math.min(n+1,t.length-1)]}return null},parseRGBA:ot,parseHex:lt,reduceToRGB:function(e,t){var n=at(e);if(n){var i=t<0?0:255;return"rgb(".concat(Math.round((i-n.r)*(t=Math.abs(t)))+n.r,", ").concat(Math.round((i-n.g)*t)+n.g,", ").concat(Math.round((i-n.b)*t)+n.b,")")}return e}}),ut=function(){function e(t){r(this,e),this.file=t,this.file.stored=e.STORED}return o(e,[{key:"addFile",value:function(e,t){this.file.addFile(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")}},{key:"reset",value:function(){for(var t in e.STORED)e.STORED[t]=new Map;this.file.reset()}},{key:"setBoxSpacing",value:function(){var e=this;this.cache.elements.forEach(function(t){if(!t.hasBit("excludeResource",T.BOX_SPACING)&&(!Me(t.element,"boxSpacing")||e.settings.alwaysReevaluateResources)){var n=be(t.element),i={};for(var r in n)i[r]=!t.inlineStatic||"marginTop"!==r&&"marginBottom"!==r?z(n[r],t.css("fontSize")):"0px";Oe(t.element,"boxSpacing",i)}})}},{key:"setBoxStyle",value:function(){var e=this;this.cache.elements.forEach(function(t){if(!t.hasBit("excludeResource",T.BOX_STYLE)&&(!Me(t.element,"boxStyle")||e.settings.alwaysReevaluateResources)){var n={background:null,borderTop:null,borderRight:null,borderBottom:null,borderLeft:null,borderRadius:null,backgroundColor:null,backgroundSize:null,backgroundImage:null,backgroundRepeat:null,backgroundPositionX:null,backgroundPositionY:null};for(var i in n){var r=t.css(i);switch(i){case"borderTop":case"borderRight":case"borderBottom":case"borderLeft":var a=t.css("".concat(i,"Color"));switch(a.toLowerCase()){case"initial":a="#000000";break;case"inherit":case"currentcolor":a=xe(t.element,"".concat(i,"Color"))}var o=t.css("".concat(i,"Width"))||"1px",l=t.css("".concat(i,"Style"))||"none",s="none"!==l?ot(a,t.css("opacity")):[];"inset"===l&&"0px"===o&&(o="1px"),n[i]={width:o,style:l,color:s.length>0?s:["#000000","rgb(0, 0, 0)","0"]};break;case"borderRadius":var u=[t.css("borderTopLeftRadius"),t.css("borderTopRightRadius"),t.css("borderBottomLeftRadius"),t.css("borderBottomRightRadius")],h=u[0],c=u[1],f=u[2],d=u[3];n.borderRadius=h===c&&c===f&&f===d?""===h||"0px"===h?[]:[h]:[h,c,f,d];break;case"backgroundColor":n.backgroundColor=ot(r,t.css("opacity"));break;case"backgroundSize":var g=[];if("auto"!==r&&"auto auto"!==r&&"initial"!==r&&"0px"!==r){var p=r.match(/^(?:([\d.]+(?:px|pt|em|%)|auto)\s*)+$/),m=t.css("fontSize");p&&(g="auto"===p[1]||"auto"===p[2]?["auto"===p[1]?"":z(p[1],m),"auto"===p[2]?"":z(p[2],m)]:K(p[1])&&null==p[3]?[p[1],p[2]]:null==p[2]||p[1]===p[2]&&p[1]===p[3]&&p[1]===p[4]?[z(p[1],m)]:null==p[3]||p[1]===p[3]&&p[2]===p[4]?[z(p[1],m),z(p[2],m)]:[z(p[1],m),z(p[2],m),z(p[3],m),z(p[4],m)])}n.backgroundSize=g;break;case"background":case"backgroundImage":"none"===r||t.hasBit("excludeResource",T.IMAGE_SOURCE)||function(){for(var e="(?:,?\\s*(rgba?\\(\\d+, \\d+, \\d+(?:,\\s*[\\d.]+)?\\)|[a-z]+)\\s*(\\d+[a-z%]+)?)",t=[],i=RegExp("([a-z-]+)-gradient\\(([\\w\\s%]+)?".concat(e).concat(e).concat(e,"?\\)"),"g"),a=null;null!=(a=i.exec(r));)t.push("linear"===a[1]?{type:"linear",angle:function(){switch(a[2]){case"to top":return 0;case"to right top":return 45;case"to right":return 90;case"to right bottom":return 135;case"to bottom":return 180;case"to left bottom":return 225;case"to left":return 270;case"to left top":return 305;default:return H(a[2])}}(),startColor:ot(a[3]),startColorStop:a[4],endColor:ot(a[5]),endColorStop:a[6]}:{type:"radial",shapePosition:function(){var e=["ellipse","center"];if(a[2]){var t=a[2].split("at").map(function(e){return e.trim()});switch(t[0]){case"ellipse":case"circle":case"closest-side":case"closest-corner":case"farthest-side":case"farthest-corner":e[0]=t[0];break;default:e[1]=t[0]}t[1]&&(e[1]=t[1])}return e}(),startColor:ot(a[3]),startColorStop:a[4],endColor:ot(a[7]||a[5]),endColorStop:a[8]||a[6],centerColor:a[7]?ot(a[5]):[],centerColorStop:a[8]?a[6]:void 0});if(t.length>0)n.backgroundGradient=t.reverse();else{var o=[];for(i=RegExp(C.URL,"g"),a=null;null!=(a=i.exec(r));)a&&o.push(a[0]);n.backgroundImage=o}}();break;case"backgroundRepeat":case"backgroundPositionX":case"backgroundPositionY":n[i]=r}}Array.isArray(n.backgroundColor)&&!t.has("backgroundColor")&&(t.cssParent("backgroundColor",!1,!0)===n.backgroundColor[1]||t.documentParent.visible&&Ae(t.element,"backgroundColor"))&&(n.backgroundColor.length=0);var v=JSON.stringify(n.borderTop);v===JSON.stringify(n.borderRight)&&v===JSON.stringify(n.borderBottom)&&v===JSON.stringify(n.borderLeft)&&(n.border=n.borderTop),Oe(t.element,"boxStyle",n)}})}},{key:"setFontStyle",value:function(){var t=this;this.cache.each(function(n){if(!n.hasBit("excludeResource",T.FONT_STYLE)&&(!Me(n.element,"fontStyle")||t.settings.alwaysReevaluateResources)){var i=e.hasDrawableBackground(Me(n.element,"boxStyle"));if(n.length>0||n.imageElement||"HR"===n.tagName||n.inlineText&&!i&&!n.preserveWhiteSpace&&""===n.element.innerHTML.trim())return;var r=ot(n.css("color"),n.css("opacity")),a=[];i||n.cssParent("backgroundColor",!1,!0)===a[1]&&(n.plainText||a[1]!==n.styleMap.backgroundColor)||!n.has("backgroundColor")&&Ae(n.element,"backgroundColor")||a.push.apply(a,g(ot(n.css("backgroundColor"),n.css("opacity"))));var o=n.css("fontFamily"),l=n.css("fontSize"),s=n.css("fontWeight");if(fe(y.EDGE)&&!n.has("fontFamily"))switch(n.tagName){case"TT":case"CODE":case"KBD":case"SAMP":o="monospace"}if(0===H(l))switch(l){case"xx-small":l="8px";break;case"x-small":l="10px";break;case"small":l="13px";break;case"medium":l="16px";break;case"large":l="18px";break;case"x-large":l="24px";break;case"xx-large":l="32px"}if(!Y(s))switch(s){case"lighter":s="200";break;case"bold":s="700";break;case"bolder":s="900";break;default:s="400"}var u={fontFamily:o,fontStyle:n.css("fontStyle"),fontSize:l,fontWeight:s,color:r,backgroundColor:a};Oe(n.element,"fontStyle",u)}})}},{key:"setImageSource",value:function(){var e=this;this.cache.visible.forEach(function(t){if(!t.hasBit("excludeResource",T.IMAGE_SOURCE)&&(!Me(t.element,"imageSource")||e.settings.alwaysReevaluateResources)&&t.svgElement){var n=t.element;if(n.children.length>0){var i=function(e,t,n){if(""===t&&(t=we(e,"d")),t&&"none"!==t&&"none"!==we(e,"display")&&!["hidden","collpase"].includes(we(e,"visibility"))){var i=we(e,"fill"),r=we(e,"stroke"),a=lt(we(e,"color"));if(""!==i)switch(i.toLowerCase()){case"none":case"transparent":i="";break;case"currentcolor":i=a||lt(xe(e,"color"));break;default:i=lt(i)}if(""!==r)switch(r.toLowerCase()){case"none":case"transparent":r="";break;case"currentcolor":r=a||lt(xe(e,"color"));break;default:r=lt(r)}var o=parseFloat(we(e,"fill-opacity")),l=parseFloat(we(e,"stroke-opacity"));return{name:e.id,color:a,fillColor:i,strokeColor:r,strokeWidth:""+H(we(e,"stroke-width")),fillAlpha:!isNaN(o)&&o<1?o:1,strokeAlpha:!isNaN(l)&&l<1?l:1,strokeLineCap:we(e,"stroke-linecap"),strokeLineJoin:we(e,"stroke-linejoin"),strokeMiterLimit:we(e,"stroke-miterlimit"),clipPath:n,d:t}}return null},r=V(t.css("opacity")),a={element:n,name:n.id,width:n.width.baseVal.value,height:n.height.baseVal.value,viewBoxWidth:n.viewBox.baseVal.width,viewBoxHeight:n.viewBox.baseVal.height,opacity:!isNaN(r)&&r<1?r:1,children:[]},o=Array.from(n.children).filter(function(e){return"svg"===e.tagName||"g"===e.tagName});[n].concat(g(o)).forEach(function(e,t){var r={element:e,name:n.id||"group_".concat(t),translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,nestedSVG:!1,children:[]};if("g"===e.tagName)for(var o=e,l=0;l<o.transform.baseVal.numberOfItems;l++){var s=o.transform.baseVal.getItem(l);switch(s.type){case SVGTransform.SVG_TRANSFORM_TRANSLATE:r.translateX=s.matrix.e,r.translateY=s.matrix.f;break;case SVGTransform.SVG_TRANSFORM_SCALE:r.scaleX=s.matrix.a,r.scaleY=s.matrix.d;break;case SVGTransform.SVG_TRANSFORM_ROTATE:r.rotation=s.angle;break;case SVGTransform.SVG_TRANSFORM_SKEWX:r.skewX=s.angle;break;case SVGTransform.SVG_TRANSFORM_SKEWY:r.skewY=s.angle}}else t>0&&(r.x=e.x.baseVal.value,r.y=e.y.baseVal.value,r.nestedSVG=!0);var u=Array.from(e.children).filter(function(e){return"clipPath"===e.tagName});[e].concat(g(u)).forEach(function(e,t){for(var n=0;n<e.children.length;n++){var a=e.children[n].tagName,o=t>0;switch(a){case"path":var l=i(e.children[n],"",o);l&&r.children.push(l);break;case"line":var s=e.children[n];if(0!==s.x1.baseVal.value||0!==s.y1.baseVal.value||0!==s.x2.baseVal.value||0!==s.y2.baseVal.value){var u=i(s,"M".concat(s.x1.baseVal.value,",").concat(s.y1.baseVal.value," L").concat(s.x2.baseVal.value,",").concat(s.y2.baseVal.value),o);u&&u.strokeColor&&(u.fillColor="",r.children.push(u))}break;case"rect":var h=e.children[n];if(h.width.baseVal.value>0&&h.height.baseVal.value>0){var c=h.x.baseVal.value,f=h.y.baseVal.value,d=i(h,"M".concat(c,",").concat(f," H").concat(c+h.width.baseVal.value," V").concat(f+h.height.baseVal.value," H").concat(c," L").concat(c,",").concat(f),o);d&&r.children.push(d)}break;case"polyline":case"polygon":var g=e.children[n];if(g.points.numberOfItems>0){for(var p=[],m=0;m<g.points.numberOfItems;m++){var v=g.points.getItem(m);p.push("".concat(v.x,",").concat(v.y))}var y=i(g,"M".concat(p.join(" ")+("polygon"===a?"z":"")),o);y&&r.children.push(y)}break;case"circle":var b=e.children[n],E=b.r.baseVal.value;if(E>0){var x=i(b,"M".concat(b.cx.baseVal.value,",").concat(b.cy.baseVal.value," m-").concat(E,",0 a").concat(E,",").concat(E," 0 1,0 ").concat(2*E,",0 a").concat(E,",").concat(E," 0 1,0 -").concat(2*E,",0"),o);x&&r.children.push(x)}break;case"ellipse":var T=e.children[n],A=T.rx.baseVal.value,w=T.ry.baseVal.value;if(A>0&&w>0){var k=i(T,"M".concat(T.cx.baseVal.value-A,",").concat(T.cy.baseVal.value,"a").concat(A,",").concat(w," 0 1,0 ").concat(2*A,",0a").concat(A,",").concat(w," 0 1,0 -").concat(2*A,",0"),o);k&&r.children.push(k)}}}}),a.children.push(r)}),a.children.length>0&&Oe(n,"imageSource",a)}}})}},{key:"setValueString",value:function(){var t=this;function n(e,t){switch(e.multiLine&&!e.renderParent.linearVertical&&(t=t.replace(/^\s*\n/,"")),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," ");break;case"pre":case"pre-wrap":e.renderParent.linearVertical||(t=t.replace(/^\n/,"")),t=(t=t.replace(/\n/g,"\\n")).replace(/\s/g,"&#160;");break;case"pre-line":t=(t=t.replace(/\n/g,"\\n")).replace(/\s+/g," ");break;default:return Ne(e.element.previousSibling)&&(t=t.replace(/^\s+/,"")),Ne(e.element.nextSibling)&&(t=t.replace(/\s+$/,"")),[t,!1]}return[t,!0]}this.cache.visible.forEach(function(i){var r=i.element;if(!i.hasBit("excludeResource",T.VALUE_STRING)&&(!Me(r,"valueString")||t.settings.alwaysReevaluateResources)){var a="",o="",l=!1,s=!0;if(r instanceof HTMLInputElement)switch(r.type){case"text":case"number":case"email":case"search":case"submit":case"reset":case"button":o=r.value.trim();break;default:i.companion&&!i.companion.visible&&(o=i.companion.textContent.trim())}else if(r instanceof HTMLTextAreaElement)o=r.value.trim();else if(r instanceof HTMLElement)if("BUTTON"===r.tagName)o=r.innerText;else if(i.inlineText){a=i.textContent.trim();var u=d(n(i,o=Xe(r.children.length>0||"CODE"===r.tagName?r.innerHTML:i.textContent)),2);l=u[1],o=(o=(o=u[0]).replace(/\s*<br\s*\/?>\s*/g,"\\n")).replace(/\s+(class|style)=".*?"/g,"")}else""===r.innerText.trim()&&e.hasDrawableBackground(Me(r,"boxStyle"))&&(o=Xe(r.innerText),s=!1);else if(i.plainText){a=i.textContent.trim();var h=d(n(i,o=(o=Xe(i.textContent)).replace(/&[A-Za-z]+;/g,function(e){return e.replace("&","&amp;")})),2);o=h[0],l=h[1]}if(""!==o){if(s){var c=i.previousSibling(),f=i.nextSibling(),g=!1;if(!c||c.multiLine||c.lineBreak?o=o.replace(/^\s+/,""):g=/\s+$/.test(c.element.innerText||c.element.textContent||""),l){var p=o;o=o.trim(),!c||c.block||c.lineBreak||g||!/^\s+/.test(p)||(o="&#160;"+o),f&&!f.lineBreak&&/\s+$/.test(p)&&(o+="&#160;")}else/^\s+$/.test(o)?o.length>0&&(o="&#160;"+o.substring(1)):o=(o=o.replace(/^\s+/,c&&(c.block||c.lineBreak||c.element instanceof HTMLElement&&c.element.innerText.length>1&&g||i.multiLine&&Se(r))?"":"&#160;")).replace(/\s+$/,f&&f.lineBreak?"":"&#160;")}if(""!==o){if(i.renderParent.layoutVertical&&i.inlineText){var m=i.toInt("textIndent");m>0&&(o="&#160;".repeat(Math.ceil(m/6))+o)}Oe(r,"valueString",{name:a,value:o})}}}})}},{key:"setOptionArray",value:function(){var e=this;this.cache.list.filter(function(e){return e.visible&&"SELECT"===e.tagName&&!e.hasBit("excludeResource",T.OPTION_ARRAY)}).forEach(function(t){var n=t.element;if(!Me(n,"optionArray")||e.settings.alwaysReevaluateResources){for(var i=[],r=[],a=-1;++a<n.children.length;){var o=n.children[a].text.trim();if(""!==o)if(r&&0===i.length&&Y(o))r.push(o);else{if(r&&r.length>0){a=-1,r=null;continue}""!==o&&i.push(o)}}Oe(n,"optionArray",{stringArray:i.length>0?i:null,numberArray:r&&r.length>0?r:null})}})}}],[{key:"parseBackgroundPosition",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={top:0,left:0,right:0,bottom:0,horizontal:"left",vertical:"top"},a=e.split(" ");return 4===a.length?a.forEach(function(e,a){switch(a){case 0:r.horizontal=e;break;case 2:r.vertical=e;break;case 1:case 3:var o=pe(e,1===a?t.width:t.height,n,i);r[e[a-1]]=H(o)}}):2===a.length&&a.forEach(function(e,a){switch(e){case"0%":break;case"50%":0===a?r.horizontal="center":r.vertical="center";break;case"100%":0===a?r.horizontal="right":r.vertical="bottom";break;default:if(/^[a-z]+$/.test(e))0===a?r.horizontal=e:r.vertical=e;else{var o=pe(e,1===a?t.width:t.height,n,i);r[0===a?"left":"top"]=H(o)}}}),r}},{key:"insertStoredAsset",value:function(t,n,i){var r=e.STORED[t];if(r){var a="",o=!0,l=!1,s=void 0;try{for(var u,h=r.entries()[Symbol.iterator]();!(o=(u=h.next()).done);o=!0){var c=d(u.value,2),f=c[0],g=c[1];if(JSON.stringify(i)===JSON.stringify(g)){a=f;break}}}catch(e){l=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(l)throw s}}if(""===a&&(Y(n)&&(n="__".concat(n)),oe(i))){var p=0;do{a=n,p>0&&(a+="_".concat(p)),r.has(a)||r.set(a,i),p++}while(r.has(a)&&r.get(a)!==i)}return a}return""}},{key:"isBorderVisible",value:function(e){return e&&!("none"===e.style||"0px"===e.width||""===e.color||Array.isArray(e.color)&&(0===e.color.length||""+parseFloat(e.color[2])=="0"))}},{key:"hasDrawableBackground",value:function(e){return null!=e&&(this.isBorderVisible(e.borderTop)||this.isBorderVisible(e.borderRight)||this.isBorderVisible(e.borderBottom)||this.isBorderVisible(e.borderLeft)||e.borderRadius.length>0||Array.isArray(e.backgroundImage)&&e.backgroundImage.length>0)}}]),e}();ut.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,styles:new Map,dimens:new Map,drawables:new Map,images:new Map};var ht,ct,ft=function(){function e(){r(this,e),this.appName="",this.queue=[]}return o(e,[{key:"addFile",value:function(e,t,n,i){if(""!==n||""!==i){var r=this.queue.findIndex(function(n){return n.pathname===e&&n.filename===t});-1!==r?(this.queue[r].content=n||"",this.queue[r].uri=i||""):this.queue.push({pathname:e,filename:t,content:n,uri:i})}}},{key:"reset",value:function(){this.queue.length=0}},{key:"saveToDisk",value:function(t){location.protocol.startsWith("http")?Array.isArray(t)&&t.length>0&&(t.push.apply(t,g(this.queue)),fetch("/api/savetodisk"+"?directory=".concat(encodeURIComponent(ee(this.settings.outputDirectory,"/")))+"&appname=".concat(encodeURIComponent(this.appName.trim()))+"&filetype=".concat(this.settings.outputArchiveFileType.toLowerCase())+"&processingtime=".concat((""+this.settings.outputMaxProcessingTime).trim()),{method:"POST",body:JSON.stringify(t),headers:new Headers({Accept:"application/json, text/plain, */*","Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(t){t&&(t.zipname?fetch("/api/downloadtobrowser?filename=".concat(encodeURIComponent(t.zipname))).then(function(e){return e.blob()}).then(function(n){return e.downloadToDisk(n,re(t.zipname))}):t.system&&alert("".concat(t.application,"\n\n").concat(t.system)))}).catch(function(e){return alert("ERROR: ".concat(e))})):alert("SERVER (required): See README for instructions")}}],[{key:"downloadToDisk",value:function(e,t){var n=new Blob([e],{type:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")||"application/octet-stream"});if(void 0===window.navigator.msSaveBlob){var i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,r.setAttribute("download",t),void 0===r.download&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(function(){return window.URL.revokeObjectURL(i)},1)}else window.navigator.msSaveBlob(n,t)}}]),e}(),dt=function(){function e(t,n,i,a){r(this,e),this.name=t,this.framework=n,this.options={},this.tagNames=[],this.documentRoot=!1,this.dependencies=[],this.subscribers=new Set,this.subscribersChild=new Set,Array.isArray(i)&&(this.tagNames=i.map(function(e){return e.trim().toUpperCase()})),a&&Object.assign(this.options,a)}return o(e,[{key:"setTarget",value:function(e,t,n){this._node=e,this._parent=t,this._element=n||e&&e.element}},{key:"is",value:function(e){return 0===this.tagNames.length||this.tagNames.includes(e.tagName)}},{key:"require",value:function(e){this.dependencies.push({name:e,init:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}},{key:"included",value:function(e){return e||(e=this.element),!!e&&Q(e.dataset.ext,this.name)}},{key:"beforeInit",value:function(){var e=this;!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.beforeInit(!0))})}},{key:"init",value:function(e){return!1}},{key:"afterInit",value:function(){var e=this;!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.afterInit(!0))})}},{key:"condition",value:function(){var e=this.node;return!(!e||!Re(e.element))&&(e.dataset.ext?this.included():this.tagNames.length>0)}},{key:"processNode",value:function(e,t){return{output:"",complete:!1}}},{key:"processChild",value:function(e,t){return{output:"",complete:!1}}},{key:"afterRender",value:function(){}},{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"finalize",value:function(){}},{key:"getData",value:function(){var e={};if(this.node&&this.node.styleElement){var t=this.node.element,n=F(this.name,"\\.");for(var i in t.dataset)i.length>n.length&&i.startsWith(n)&&(e[G(i.substring(n.length),!1)]=t.dataset[i])}return e}},{key:"node",get:function(){return this._node}},{key:"parent",get:function(){return this._parent}},{key:"element",get:function(){return this._element}}]),e}(),gt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"afterInit",value:function(){var e=this;Array.from(this.application.cacheProcessing.elements).forEach(function(t){if(!t.hasBit("excludeProcedure",A.ACCESSIBILITY)){var n=t.element;if(n instanceof HTMLInputElement)switch(n.type){case"radio":case"checkbox":[t.nextElementSibling,t.previousElementSibling].some(function(i){var r=Be(i),a=i&&i.parentElement&&"LABEL"===i.parentElement.tagName?Be(i.parentElement):null;return!!(r&&r.visible&&r.pageflow&&(oe(i.htmlFor)&&i.htmlFor===n.id?t.companion=r:r.textElement&&a&&(t.companion=r,a.renderAs=t),t.companion))&&(e.options&&!e.options.showLabel&&r.hide(),!0)})}}})}}]),t}(),pt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"is",value:function(e){return f(s(t.prototype),"is",this).call(this,e)&&("INPUT"!==e.tagName||["button","file","image","reset","search","submit"].includes(e.element.type))}},{key:"condition",value:function(){return this.included()}}]),t}(),mt=function(e){function t(e,n,i,a){var o;return r(this,t),(o=h(this,s(t).call(this,e,n,i,a))).require(R.EXTERNAL,!0),o}return l(t,dt),o(t,[{key:"processNode",value:function(){var e=this,t=this.node,n=this.parent,i=this.getData(),r="";return i.tag&&(r=t.children.length>0?this.application.viewController.renderGroup(t,n,i.tag):this.application.viewController.renderNode(t,n,i.tag),t.nodeType=t.blockStatic?w.BLOCK:w.INLINE),i.tagChild&&t.each(function(t){t.styleElement&&(t.dataset.ext=e.name,t.dataset.andromeCustomTag=i.tagChild)}),{output:r,complete:!1}}}]),t}(),vt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"beforeInit",value:function(){if(this.element&&(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.included())&&!Me(this.element,"andromeExternalDisplay")){for(var e=[],t=this.element;t;)e.push(ye(t).display),t.style.display="block",t=t.parentElement;Oe(this.element,"andromeExternalDisplay",e)}}},{key:"init",value:function(e){return this.included(e)&&this.application.elements.add(e),!1}},{key:"afterInit",value:function(){if(this.element&&(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.included())){var e=Me(this.element,"andromeExternalDisplay");if(e){for(var t=e,n=this.element,i=0;n;)n.style.display=t[i],n=n.parentElement,i++;_e(this.element,"andromeExternalDisplay")}}}},{key:"is",value:function(){return!1}},{key:"condition",value:function(){return!1}}]),t}(),yt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"condition",value:function(){var e=this.node;return this.included()||e.children.length>1&&("table"===e.display&&e.children.every(function(e){return"table-row"===e.display&&e.children.every(function(e){return"table-cell"===e.display})})||e.children.every(function(e){return e.pageflow&&!e.has("backgroundColor")&&!e.has("backgroundImage")&&e.borderTopWidth+e.borderRightWidth+e.borderBottomWidth+e.borderLeftWidth===0&&(!e.inlineElement||e.blockStatic)})&&("none"===e.css("listStyle")||e.children.every(function(e){return"list-item"===e.display&&"none"===e.css("listStyleType")})||!oe(e.dataset.ext)&&!e.flex.enabled&&e.children.length>1&&e.children.some(function(e){return e.children.length>1})&&!e.children.some(function(e){return"list-item"===e.display||e.textElement})))}},{key:"processNode",value:function(e){var t=this.node,n=this.parent,i=!!this.options.columnBalance,r="",a=[],o={padding:{top:0,left:0,right:0,bottom:0},columnEnd:[],columnCount:0};if(i){var l=[];t.each(function(e,t){l[t]=[];for(var n=0;n<e.children.length;n++)l[t].push(e.children[n].bounds.width);a.push(e.children.slice())});var s=a[l.findIndex(function(e){return e===l.reduce(function(e,t){return e.length===t.length?e.reduce(function(e,t){return e+t},0)<t.reduce(function(e,t){return e+t},0)?e:t:e.length<t.length?e:t})})];if(s&&s.length>1)for(var u=[],h=!1,c=function(e){var t=s[e].bounds,n=[];if(e<s.length-1)for(var i=function(i){if(a[i]===s)n.push(e);else{var r=a[i].findIndex(function(n,r){return r>=e&&Math.floor(n.bounds.width)===Math.floor(t.width)&&r<a[i].length-1});if(-1===r)return n.length=0,"break";n.push(r)}},r=0;r<a.length;r++){if("break"===i(r))break}else for(r=0;r<a.length;r++)if(a[r].length>s.length){var o=a[r].splice(u[r]+(h?2:1),a[r].length-s.length);a[r][u[r]+(h?1:0)].data(R.GRID,"siblings",g(o))}if(n.length===a.length){var l=n.reduce(function(e,t){return Math.min(e,t)});if(n.reduce(function(e,t){return Math.max(e,t)})>l)for(var c=0;c<a.length;c++)if(n[c]>l){var f=a[c].splice(l,n[c]-l);a[c][u[c]+(h?1:0)].data(R.GRID,"siblings",g(f))}u=n,h=!0}else u=Array(a.length).fill(e),h=!1},f=0;f<s.length;f++)c(f);else a.length=0}else{var d=function(e){return a[0].findIndex(function(t){return le(t.linear.top,e.linear.top)||e.linear.top>=t.linear.top&&e.linear.bottom<=t.linear.bottom})},p=e[t.depth+2],m=p?Object.keys(p):[],v=[];if(m.length>1){var y=[];for(f=0;f<m.length;f++){var b=ue(p[parseInt(m[f])].filter(function(e){return e.documentParent.documentParent.id===t.id}),"linear.top");if(0===f&&0===b.length)return{output:"",complete:!1};y[f]=0===f?0:y[f-1];for(var E=0;E<b.length;E++){var x=b[E],T=[x.linear.left,x.linear.right],A=T[0],w=T[1],I=f;if(I>0&&Re(x.element)&&"right"===x.float){x.element.style.cssFloat="left";var S=x.element.getBoundingClientRect();if(S.left-x.marginLeft!==A){A=S.left-x.marginLeft,w=S.right+x.marginRight;for(var N=1;N<y.length&&(I=N,!(A>y[N-1]));N++);}x.element.style.cssFloat="right"}if(0===I||A>=y[I-1])if(null==a[I]&&(a[I]=[]),0===I||a[0].length===b.length)a[I][E]=x;else{var L=d(x);-1!==L&&(a[I][L]=x)}else{var C=a.length-1;if(a[C]){var O=a[C].reduce(function(e,t){return Math.min(e,t.linear.left)},Number.MAX_VALUE),M=a[C].reduce(function(e,t){return Math.max(e,t.linear.right)},0);if(A>O&&w>M){var _=a.filter(function(e){return e}),B=d(x);-1!==B&&null==_[_.length-1][B]&&(a[C].length=0)}}}y[f]=Math.max(x.linear.right,y[f])}}for(var D=0,F=-1;D<y.length;D++)if(-1===F&&null==a[D])F=D-1;else{if(null==a[D]){-1!==F&&D===y.length-1&&(y[F]=y[D]);continue}-1!==F&&(y[F]=y[D-1],F=-1)}for(var P=0;P<a.length;P++)a[P]&&a[P].length>0&&v.push(y[P]);for(var G=(a=a.filter(function(e){return e&&e.length>0})).reduce(function(e,t){return Math.max(e,t.length)},0),H=0;H<G;H++)for(var V=0;V<a.length;V++)null==a[V][H]&&(a[V][H]={spacer:1})}v.length>0&&(o.columnEnd=v,o.columnEnd[o.columnEnd.length-1]=t.box.right)}if(a.length>1&&a[0].length===t.children.length){o.columnCount=i?a[0].length:a.length,r=this.application.writeGridLayout(t,n,o.columnCount),t.children.slice().forEach(function(e){t.removeChild(e),e.hide()});for(var z=0,U=0;z<a.length;z++)for(var X=0,W=0,j=0;W<a[z].length;W++){var Y=a[z][W];if(Y.spacer)1===Y.spacer&&X++;else{Y.parent=t;var Z={inherit:!0,rowSpan:0,columnSpan:0,index:-1,cellFirst:!1,cellLast:!1,rowEnd:!1,rowStart:!1};if(i)Z.rowStart=0===W,Z.rowEnd=W===a[z].length-1,Z.cellFirst=0===z&&0===W,Z.cellLast=z===a.length-1&&Z.rowEnd,Z.index=W;else{for(var q=1,K=1+X,Q=z+1;Q<a.length&&1===a[Q][W].spacer;Q++)K++,a[Q][W].spacer=2;if(1===K)for(var $=W+1;$<a[z].length&&1===a[z][$].spacer;$++)q++,a[z][$].spacer=2;Z.rowSpan=q,Z.columnSpan=K,Z.rowStart=0==j++,Z.rowEnd=K+z===a.length,Z.cellFirst=0==U++,Z.cellLast=Z.rowEnd&&W===a[z].length-1,Z.index=z,X=0}Y.data(R.GRID,"cellData",Z)}}ue(t.children,"documentParent.siblingIndex","siblingIndex"),"table"===t.display&&"collapse"===t.css("borderCollapse")&&(t.modifyBox(k.PADDING_TOP,null),t.modifyBox(k.PADDING_RIGHT,null),t.modifyBox(k.PADDING_BOTTOM,null),t.modifyBox(k.PADDING_LEFT,null)),t.data(R.GRID,"mainData",o),t.render(n)}return{output:r,complete:!0}}},{key:"processChild",value:function(){var e=this.node,t=this.parent,n=t.data(R.GRID,"mainData"),i=e.data(R.GRID,"cellData"),r="";if(n&&i){var a;if(this.options.columnBalance)a=e.data(R.GRID,"siblings");else{var o=n.columnEnd[Math.min(i.index+(i.columnSpan-1),n.columnEnd.length-1)];a=Array.from(e.documentParent.element.children).map(function(t){var n=Be(t);return n&&n.visible&&!n.excluded&&!n.rendered&&n.linear.left>=e.linear.right&&n.linear.right<=o?n:null}).filter(function(e){return e})}if(a&&a.length>0){a.unshift(e);var l=this.application.viewController.createGroup(t,e,a),s=Ge.linearX(a);return s&&Ye.isRelativeHorizontal(a)?(r=this.application.writeRelativeLayout(l,t),l.alignmentType|=x.HORIZONTAL):(r=s||Ge.linearY(a)?this.application.writeLinearLayout(l,t,s):this.application.writeConstraintLayout(l,t),l.alignmentType|=x.SEGMENTED),e.alignmentType|=x.EXCLUDE,{output:r,parent:l,complete:!0}}}return{output:r,complete:!0}}}]),t}(),bt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"condition",value:function(){var e=this,n=this.node.children;return f(s(t.prototype),"condition",this).call(this)&&n.length>0&&(n.every(function(e){return e.blockStatic})||n.every(function(e){return e.inlineElement})||n.every(function(e){return e.floating})&&1===Ge.floated(n).size||n.every(function(e,t){return!e.floating&&(0===t||t===n.length-1||e.blockStatic||e.inlineElement&&n[t-1].blockStatic&&n[t+1].blockStatic)}))&&(n.some(function(t){return"list-item"===t.display&&("none"!==t.css("listStyleType")||e.hasSingleImage(t))})||n.every(function(t){return"LI"!==t.tagName&&"none"===t.styleMap.listStyleType&&e.hasSingleImage(t)}))}},{key:"processNode",value:function(){var e=this,t=this.node,n=this.parent,i="";i=Ge.linearY(t.children)?this.application.writeGridLayout(t,n,t.children.some(function(e){return"inside"===e.css("listStylePosition")})?3:2):this.application.writeLinearLayout(t,n,!0);var r=0;return t.each(function(t){var n={ordinal:"",imageSrc:"",imagePosition:""};if("list-item"===t.display||t.has("listStyleType")||e.hasSingleImage(t)){var i=t.css("listStyleImage");if(i&&"none"!==i)n.imageSrc=i;else switch(t.css("listStyleType")){case"disc":n.ordinal="●";break;case"square":n.ordinal="■";break;case"decimal":n.ordinal="".concat(""+(r+1),".");break;case"decimal-leading-zero":n.ordinal="".concat((r<9?"0":"")+(r+1),".");break;case"lower-alpha":case"lower-latin":n.ordinal="".concat(U(r).toLowerCase(),".");break;case"upper-alpha":case"upper-latin":n.ordinal="".concat(U(r),".");break;case"lower-roman":n.ordinal="".concat(X(r+1).toLowerCase(),".");break;case"upper-roman":n.ordinal="".concat(X(r+1),".");break;case"none":i="";var a="";"no-repeat"===t.css("backgroundRepeat")&&(i=t.css("backgroundImage"),a=t.css("backgroundPosition")),i&&"none"!==i&&(n.imageSrc=i,n.imagePosition=a,t.excludeResource|=T.IMAGE_SOURCE);break;default:n.ordinal="○"}r++}t.data(R.LIST,"mainData",n)}),{output:i,complete:!0}}},{key:"afterRender",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.subscribers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;a.modifyBox(k.MARGIN_LEFT,null),a.modifyBox(k.PADDING_LEFT,null)}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"hasSingleImage",value:function(e){return"none"!==e.css("backgroundImage")&&"no-repeat"===e.css("backgroundRepeat")}}]),t}(),Et=function(e){function t(e,n,i,a){var o;return r(this,t),(o=h(this,s(t).call(this,e,n,i,a))).require(R.EXTERNAL,!0),o}return l(t,dt),o(t,[{key:"init",value:function(e){if(this.included(e)){var t=!1;if(e.children.length>0){var n=e.children[0].tagName;t=Array.from(e.children).every(function(e){return e.tagName===n});for(var i=e.parentElement;i;){if("NAV"===i.tagName&&this.application.elements.has(i)){t=!1;break}i=i.parentElement}}t&&(Array.from(e.querySelectorAll("NAV")).forEach(function(t){"none"===ye(e).display&&(Oe(t,"andromeExternalDisplay","none"),t.style.display="block")}),this.application.elements.add(e))}return!1}},{key:"afterRender",value:function(){var e=this.node;this.included(e.element)&&Array.from(e.element.querySelectorAll("NAV")).forEach(function(e){var t=Me(e,"andromeExternalDisplay");t&&(e.style.display=t,_e(e,"andromeExternalDisplay"))})}}]),t}(),xt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"afterInit",value:function(){function e(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.bounds.left-=t,e.bounds.width+=Math.max(e.marginLeft<0?e.marginLeft+t:t,0),e.css("marginLeft",W(e.marginLeft+t*(n?-1:1))),e.setBounds(!0)}Array.from(this.application.cacheProcessing.elements).forEach(function(t){if(t.children.some(function(e){if(e.pageflow)return"right"!==e.float&&e.marginLeft<0&&t.marginLeft>=Math.abs(e.marginLeft)&&(Math.abs(e.marginLeft)>=e.bounds.width||t.documentRoot);var n=e.toInt("left"),i=e.toInt("right");return n<0&&t.marginLeft>=Math.abs(n)||i<0&&Math.abs(i)>=e.bounds.width})){var n=[],i=[];if(t.each(function(e){var r=0;if(e.pageflow){var a=e.marginLeft;a<0&&t.marginLeft>=Math.abs(a)&&(r=1)}else{var o=H(e.left)+e.marginLeft,l=H(e.right);o<0?t.marginLeft>=Math.abs(o)&&(r=2):l<0&&Math.abs(l)>=e.bounds.width&&i.push(e)}n.push(r)}),i.length>0){var r=d(new androme.lib.base.NodeList(t.children).partition(function(e){return!i.includes(e)}),2),a=r[0],o=r[1];if(a.length>0&&o.length>0){t.style.marginLeft&&t.autoMarginLeft&&t.css("marginLeft",t.style.marginLeft),t.modifyBox(k.MARGIN_RIGHT,null);var l=t.has("width",I.UNIT)?t.toInt("width"):Math.max.apply(null,o.list.map(function(e){return e.bounds.width})),s=Math.max.apply(null,o.list.map(function(e){return Math.abs(e.toInt("right"))}));a.each(function(e){return e.pageflow&&!e.hasWidth&&e.css(e.textElement?"maxWidth":"width",W(l))}),t.css("width",W(l+s))}}var u=Math.max.apply(null,n);u>0&&(t.each(function(i,r){if(2===n[r]){var a=i.toInt("left")+t.marginLeft;i.css("left",W(Math.max(a,0))),a<0&&(i.css("marginLeft",W(i.marginLeft+a)),e(i,a))}else(2===u||i.pageflow&&!i.plainText&&n.includes(1))&&e(i,t.marginLeft)}),t.has("width",I.UNIT)&&t.css("width",W(t.toInt("width")+t.marginLeft)),e(t,t.marginLeft,!0))}})}}]),t}(),Tt=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"condition",value:function(){var e=this.node,t=!1;if(e.hasWidth&&e.hasHeight&&0===e.children.length&&!e.inlineText){var n=e.css("backgroundImage");if(!n||"none"===n){n="";var i=C.URL.exec(e.css("background"));i&&(n=i[0])}if(""!==n&&(n=Ee(n),this.application.cacheImage.has(n))){var r=e.css("fontSize"),a=H(pe(e.has("width")?e.css("width"):e.css("minWidth"),e.bounds.width,r)),o=H(pe(e.has("height")?e.css("width"):e.css("minHeight"),e.bounds.height,r)),l=this.application.cacheImage.get(n),s=ut.parseBackgroundPosition("".concat(e.css("backgroundPositionX")," ").concat(e.css("backgroundPositionY")),e.bounds,r);a>0&&s.left<=0&&l.width>a&&o>0&&s.top<=0&&l.height>o&&(l.position={x:s.left,y:s.top},e.data(R.SPRITE,"image",l),t=!0)}}return t&&(!oe(e.dataset.ext)||this.included(e.element))}}]),t}(),At=function(e){function t(){return r(this,t),h(this,s(t).apply(this,arguments))}return l(t,dt),o(t,[{key:"processNode",value:function(){function e(e){e.data(R.TABLE,"percent","".concat(Math.round(e.bounds.width/n.bounds.width*100),"%")),e.data(R.TABLE,"expand",!0)}function t(e){e.css("width",W(e.bounds.width))}var n=this.node,i=this.parent,r=[],a=n.children.filter(function(e){return"THEAD"===e.tagName}),o=n.children.filter(function(e){return"TBODY"===e.tagName}),l=n.children.filter(function(e){return"TFOOT"===e.tagName}),s=Array.from(n.element.children).find(function(e){return"COLGROUP"===e.tagName}),u=n.css("width");a.length>0&&(a[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(a[0],"styleMap")}),r.push.apply(r,g(a[0].children)),a.forEach(function(e){return e.hide()})),o.length>0&&o.forEach(function(e){r.push.apply(r,g(e.children)),e.hide()}),l.length>0&&(l[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(l[0],"styleMap")}),r.push.apply(r,g(l[0].children)),l.forEach(function(e){return e.hide()}));var h="fixed"===n.css("tableLayout"),c="collapse"===n.css("borderCollapse"),f=d(c?[0,0]:n.css("borderSpacing").split(" ").map(function(e){return parseInt(e)}),2),p=f[0],m=f[1];p>0?(n.modifyBox(k.PADDING_LEFT,p),n.modifyBox(k.PADDING_RIGHT,p)):(n.modifyBox(k.PADDING_LEFT,null),n.modifyBox(k.PADDING_RIGHT,null)),m>0?(n.modifyBox(k.PADDING_TOP,m),n.modifyBox(k.PADDING_BOTTOM,m)):(n.modifyBox(k.PADDING_TOP,null),n.modifyBox(k.PADDING_BOTTOM,null));for(var v=W(p>1?Math.round(p/2):p),y=W(m>1?Math.round(m/2):m),b=[],E=[],x=Array(r.length).fill(0),T=!1,A=0;A<r.length;A++)for(var w=r[A],S=0;S<w.children.length;S++){for(var N=w.children[S],L=w.children[S].element,C=0;C<L.rowSpan-1;C++){var O=A+1+C;null!=x[O]&&(x[O]+=L.colSpan)}if(!N.has("background")&&!N.has("backgroundColor")){var M=N.element;if(s){var _=ye(s.children[x[A]]);_.background?M.style.background=_.background:_.backgroundColor&&(M.style.backgroundColor=_.backgroundColor)}else{var B=xe(M,"background",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]);""!==B?M.style.background=B:""!==(B=xe(M,"backgroundColor",["rgba(0, 0, 0, 0)","transparent"],["TABLE"]))&&(M.style.backgroundColor=B)}}var D=N.styleMap.width,F=x[A];if(0===A||null==b[F]||!h)if(D&&"auto"!==D){var P=K(D),G=q(b[F]);(null==b[F]||N.bounds.width<E[F]||N.bounds.width===E[F]&&("auto"===b[F]&&(P||G)||P&&G||P&&K(b[F])&&V(D)>V(b[F])||G&&q(D)&&H(D)>H(b[F])))&&(b[F]=D),1===L.colSpan&&(E[F]=N.bounds.width)}else null==b[F]&&(b[F]=D||"0px",E[F]=0);N.css({marginTop:0===A?"0px":y,marginRight:S<w.children.length-1?v:"0px",marginBottom:A+L.rowSpan-1>=r.length-1?"0px":y,marginLeft:0===x[A]?"0px":v}),T||(T=N.multiLine),x[A]+=L.colSpan}var z=Math.max.apply(null,x),U=r.length;if(b.every(function(e){return K(e)})&&b.reduce(function(e,t){return e+parseFloat(t)},0)>1){var X=100;b.forEach(function(e,t){var n=parseFloat(e);X<=0?b[t]="0px":X-n<0&&(b[t]="".concat(X,"%")),X-=n})}else if(b.every(function(e){return q(e)})){var Y=b.reduce(function(e,t){return e+parseInt(t)},0);K(u)&&"100%"!==u||Y<n.viewWidth?b.filter(function(e){return"0px"!==e}).forEach(function(e,t){return b[t]="".concat(parseInt(e)/Y*100,"%")}):"auto"===u?b.filter(function(e){return"0px"!==e}).forEach(function(e,t){return b[t]=null==E[t]?"undefined":"".concat(E[t]/n.bounds.width*100,"%")}):Y>n.viewWidth&&(n.css("width","auto"),h||n.cascade().forEach(function(e){return e.css("width","auto")}))}var Z=b.reduce(function(e,t){return e+(K(t)?parseFloat(t):0)},0),Q=function(){if(b.some(function(e){return K(e)})||b.every(function(e){return q(e)&&"0px"!==e}))return 3;if(b.every(function(e){return e===b[0]})){if(T)return n.children.some(function(e){return e.has("height")})?2:3;if("auto"===b[0])return n.has("width")?3:0;if(n.hasWidth)return 2}return b.every(function(e){return"auto"===e||q(e)&&"0px"!==e})?1:0}();(T||2===Q&&!n.hasWidth)&&n.data(R.TABLE,"expand",!0);var $=n.children.find(function(e){return"CAPTION"===e.tagName});n.children.length=0,$&&($.has("textAlign",I.LEFT)||$.css("textAlign","center"),U++,$.data(R.TABLE,"colSpan",z),$.parent=n),x=Array(r.length).fill(0);for(var J=0,ee=0;ee<r.length;ee++){for(var te=r[ee],ne=te.children.slice(),ie=0;ie<ne.length;ie++){for(var re=ne[ie],ae=re.element,oe=0;oe<ae.rowSpan-1;oe++){var le=ee+1+oe;null!=x[le]&&(x[le]+=ae.colSpan)}ae.rowSpan>1&&re.data(R.TABLE,"rowSpan",ae.rowSpan),ae.colSpan>1&&re.data(R.TABLE,"colSpan",ae.colSpan),re.has("verticalAlign")||re.css("verticalAlign","middle"),0===ee&&re.has("borderTopStyle")&&H(re.css("borderTopWidth"))>0&&(J|=2),0===ie&&re.has("borderLeftStyle")&&H(re.css("borderLeftWidth"))>0&&(J|=4),ie===ne.length-1&&re.has("borderRightStyle")&&H(re.css("borderRightWidth"))>0&&(J|=8),ee===r.length-1&&re.has("borderBottomStyle")&&H(re.css("borderBottomWidth"))>0&&(J|=16);var se=b[x[ee]];if("undefined"!==se)switch(Q){case 3:"auto"===se?Z>=1?(t(re),re.data(R.TABLE,"exceed",!0),re.data(R.TABLE,"downsized",!0)):e(re):K(se)?(re.data(R.TABLE,"percent",se),re.data(R.TABLE,"expand",!0)):q(se)&&parseInt(se)>0?re.bounds.width>=parseInt(se)?(t(re),re.data(R.TABLE,"expand",!1),re.data(R.TABLE,"downsized",!1)):h?(e(re),re.data(R.TABLE,"downsized",!0)):(t(re),re.data(R.TABLE,"expand",!1)):(re.has("width")&&!re.has("width",I.PERCENT)||t(re),re.data(R.TABLE,"expand",!1));break;case 2:re.css("width","0px");break;case 1:"auto"===se?re.css("width","0px"):(h?re.data(R.TABLE,"downsized",!0):t(re),re.data(R.TABLE,"expand",!1))}x[ee]+=ae.colSpan,re.parent=n}if(x[ee]<z)ne[ne.length-1].data(R.TABLE,"spaceSpan",z-x[ee]);te.hide()}return c&&0!==J&&n.css({borderTopWidth:j(J,2)?"0px":"",borderRightWidth:j(J,8)?"0px":"",borderBottomWidth:j(J,16)?"0px":"",borderLeftWidth:j(J,4)?"0px":""}),{output:this.application.writeGridLayout(n,i,z,U),complete:!0}}}]),t}();e.settings={},e.system={};var wt=new Set,kt=new Map;function It(e){return!!(ht&&e instanceof dt)&&ht.registerExtension(e)}function St(n,i){if("object"===t(i)){if(n instanceof dt)return Object.assign(n.options,i),!0;if(Z(n)&&ht){var r=ht.getExtension(n)||Array.from(wt).find(function(e){return e.name===n});if(r)return Object.assign(r.options,i),!0;if(kt.set(n,i),e.settings.handleExtensionsAsync)return!0}}return!1}function Nt(e){return ht&&ht.getExtension(e)}function Lt(){ht&&ht.reset()}var Rt={base:{Node:Fe,NodeList:Ge,NodeGroup:He,Application:Ye,Controller:Ze,Resource:ut,File:ft,Extension:dt,extensions:{Accessibility:gt,Button:pt,Custom:mt,External:vt,Grid:yt,List:bt,Nav:Et,Origin:xt,Sprite:Tt,Table:At}},enumeration:S,constant:O,util:ce,dom:De,xml:We,color:st};e.setFramework=function(t){if(ct!==t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.cached():t.create();if(e.settings=ht||0===Object.keys(e.settings).length?n.settings:Object.assign(n.settings,e.settings),(ht=n.application).settings=e.settings,Array.isArray(e.settings.builtInExtensions)){var i=new Set,r=!0,a=!1,o=void 0;try{for(var l,s=e.settings.builtInExtensions[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;if(u=u.trim(),ht.builtInExtensions[u])i.add(ht.builtInExtensions[u]);else for(var h in ht.builtInExtensions)h.startsWith("".concat(u,"."))&&i.add(ht.builtInExtensions[h])}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}var c=!0,f=!1,d=void 0;try{for(var g,p=i[Symbol.iterator]();!(c=(g=p.next()).done);c=!0)ht.registerExtension(g.value)}catch(e){f=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(f)throw d}}}ct=t,e.system=t.system}Lt()},e.parseDocument=function(){if(ht&&!ht.closed){var t;if(e.settings.handleExtensionsAsync){wt.forEach(function(e){return ht.registerExtension(e)});var n=!0,i=!1,r=void 0;try{for(var a,o=kt.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var l=d(a.value,2);St(l[0],l[1])}}catch(e){i=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}wt.clear(),kt.clear()}return(t=ht).parseDocument.apply(t,arguments)}return{then:function(){}}},e.registerExtension=It,e.registerExtensionAsync=function(t){return!!It(t)||!!(t instanceof dt&&(wt.add(t),e.settings.handleExtensionsAsync))},e.configureExtension=St,e.getExtension=Nt,e.ext=function(e,n){return e instanceof dt?It(e):Z(e)?"object"===t(n)?St(e,n):Nt(e):void 0},e.ready=function(){return ht&&!ht.loading&&!ht.closed},e.close=function(){ht&&!ht.loading&&ht.size>0&&ht.finalize()},e.reset=Lt,e.saveAllToDisk=function(){ht&&!ht.loading&&ht.size>0&&(ht.closed||ht.finalize(),ht.saveAllToDisk())},e.toString=function(){return ht?""+ht:""},e.lib=Rt,Object.defineProperty(e,"__esModule",{value:!0})});
