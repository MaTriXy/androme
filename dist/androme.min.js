/* androme 1.10.1 https://github.com/anpham6/androme */ /* androme 1.10.1 https://github.com/anpham6/androme */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.androme={})})(this,function(e){"use strict";var be=Math.abs,we=Math.min,De=Math.ceil,_e=Math.max,Se=Math.floor,Be=Math.round;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){this.wrapped=e}function r(e){function t(i,a){try{var l=e[i](a),o=l.value,s=o instanceof n;Promise.resolve(s?o.wrapped:o).then(function(e){return s?void t("next",e):void r(l.done?"return":"normal",e)},function(e){t("throw",e)})}catch(e){r("throw",e)}}function r(e,n){switch(e){case"return":i.resolve({value:n,done:!0});break;case"throw":i.reject(n);break;default:i.resolve({value:n,done:!1});}i=i.next,i?t(i.key,i.arg):a=null}var i,a;this._invoke=function(e,n){return new Promise(function(r,l){var o={key:e,arg:n,resolve:r,reject:l,next:null};a?a=a.next=o:(i=a=o,t(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function o(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){return d=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},d.apply(this,arguments)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function g(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function c(){return c=g()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=Function.bind.apply(e,r),a=new i;return n&&h(a,n.prototype),a},c.apply(null,arguments)}function p(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function m(e){var t="function"==typeof Map?new Map:void 0;return m=function(e){function n(){return c(e,arguments,u(this).constructor)}if(null===e||!p(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),h(n,e)},m(e)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=u(e),null!==e););return e}function y(e,t,n){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},y(e,t,n||e)}function f(e,t,n,r){return f="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,r){var i,a=E(e,t);if(a){if(i=Object.getOwnPropertyDescriptor(a,t),i.set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,t),i){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,t,i)}else s(r,t,n);return!0},f(e,t,n,r)}function x(e,t){return A(e)||N(e,t)||R()}function T(e){return I(e)||v(e)||L()}function I(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function A(e){if(Array.isArray(e))return e}function v(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function N(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(e){i=!0,a=e}finally{try{r||null==o["return"]||o["return"]()}finally{if(i)throw a}}return n}function L(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function R(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function F(e){for(var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.sort(function(e,n){for(var i=0;i<r.length;i++){var a=r[i],l=Y(e,n,a);if(l&&l[0]!==l[1])return 0===t?l[0]>l[1]?1:-1:l[0]<l[1]?1:-1}return 0})}function C(e,t){var n=[],r=[],i=!0,a=!1,l=void 0;try{for(var o,s,d=e[Symbol.iterator]();!(i=(o=d.next()).done);i=!0)s=o.value,t(s)?n.push(s):r.push(s)}catch(e){a=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw l}}return[n,r]}function O(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"-";e=e.replace(new RegExp("^".concat(t,"+")),"");var n=e.match(new RegExp("(".concat(t,"{1}[a-z]{1})"),"g"));if(n){var r=!0,i=!1,a=void 0;try{for(var l,o,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)o=l.value,e=e.replace(o,o[1].toUpperCase())}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}return e}function b(e){return e?e.replace(/[^\w]/g,"_").trim():""}function w(e){var t=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function D(e){return e&&parseInt(e)||0}function _(e,t){if(Q(e)){if(B(e))return"".concat(Be(e),"px");var n=parseFloat(e);if(!isNaN(n)){var r=e.match(/(pt|em)/);if(r)switch(r[0]){case"pt":n*=4/3;break;case"em":n*=D(t)||16;}return"".concat(n,"px")}}return"0px"}function S(e,t){return(e&t)===t}function B(e){return /^-?[0-9]+(\.[0-9]+)?$/.test(e.toString().trim())}function k(e){return"string"==typeof e&&""!==e}function G(e){return!!k(e)&&/^-?[0-9\.]+(px|pt|em)$/.test(e.trim())}function M(e){return /^[0-9]+(\.[0-9]+)?%$/.test(e)}function P(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:",";return!!e&&e.split(n).map(function(e){return e.trim()}).includes(t)}function H(e,n,r){var a=!1,l=null;if("object"===t(e)){l=e;var o=n.split("."),s=0;do l=null==l[o[s]]?null:l[o[s]];while(null!=l&&++s<o.length&&"string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l);a=null!=l&&s===o.length}return"object"===r?a?l:null:"number"===r?a&&!isNaN(parseInt(l))?parseInt(l):0:"boolean"===r?a&&!0===l:a?l.toString():""}function z(e){if(!/^\w+:\/\//.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n,r=[],i=0;e.split("/").forEach(function(e){".."===e?i++:r.push(e)}),t=t.slice(0,_e(t.length-i,0)),(n=t).push.apply(n,r),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function X(e){return e?e.trim():""}function V(e,t){return e?U(Z(e,t),t):""}function U(e,t){return e.replace(new RegExp("^".concat(t,"+"),"g"),"")}function Z(e,t){return e.replace(new RegExp("".concat(t,"+$"),"g"),"")}function W(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"\t";return t.repeat(e)}function Y(e,t,n){var r=n.split("."),i=e,a=t,l=!0,o=!1,s=void 0;try{for(var d,u,h=r[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)if(u=d.value,null!=i[u]&&null!=a[u])i=i[u],a=a[u];else return(null!=i[u]||null!=a[u])&&(null==i[u]?[0,1]:[1,0])}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}return isNaN(parseInt(i))&&isNaN(parseInt(a))?[i,a]:[D(i),D(a)]}function Q(e){return"undefined"!=typeof e&&null!==e&&""!==e.toString().trim()}function q(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return F.apply(void 0,[e,0].concat(n))}function K(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return F.apply(void 0,[e,1].concat(n))}function $(e,t,n){e&&(e["__".concat(t)]=n)}function J(e,t){return e?e["__".concat(t)]:null}function ee(e){if(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i,a=0;a<n.length;a++)i=n[a],delete e["__".concat(i)]}}function te(e){return J(e,"node")}function ne(e){var t=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(e){if(t){var n=te(e),r=J(e,"style");if(r)return r;if(n){if(n.style)return n.style;if(n.plainText)return n.styleMap}}if(e.nodeName&&"#"!==e.nodeName.charAt(0)){var i=getComputedStyle(e);return $(e,"style",i),i}}return{}}function re(e){var t=e.match(/^url\("?(.*?)"?\)$/);return t?z(t[1]):""}function ie(e,t){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return!!("#"!==e.nodeName.charAt(0)&&r.includes(ne(e)[t]))||!!e.parentElement&&r.includes(ne(e.parentElement)[t])}function ae(e){function t(e){return a++===n||e.some(function(e){if("#text"===e.nodeName){if(le(e,r)||ie(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return i=!0,!0;}else if(e instanceof HTMLElement&&0<e.childNodes.length)return t(Array.from(e.childNodes));return!1})}var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=!1,a=-1;return"#text"===e.nodeName?(n=0,t([e])):t(Array.from(e.childNodes)),i}function le(e){var t=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];if(e&&"#text"===e.nodeName&&e.textContent){if(t){for(var n=e.textContent,r=!1,a=0;a<n.length;a++)switch(n.charCodeAt(a)){case 9:case 10:case 13:case 32:continue;default:r=!0;}return r&&""!==n}return""!==e.textContent.trim()}return!1}function oe(e){var t=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],n=te(e);return!!n&&("BR"===n.tagName||t&&n.block&&(n.excluded||""===n.textContent.trim()))}function se(e,t){var n=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],r=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3];if(!e||e.parentElement===t.parentElement){var i=t.parentElement;if(i){var a=Array.from(i.childNodes),l=e?a.findIndex(function(t){return t===e}):0,o=a.findIndex(function(e){return e===t});if(-1!==l&&-1!==o&&l!==o){var s=a.slice(we(l,o)+1,_e(l,o));return s=r?s.filter(function(e){return"#comment"!==e.nodeName}):s.filter(function(e){return"#"!==e.nodeName.charAt(0)||le(e)}),n&&(s=s.filter(function(e){return te(e)})),s}}}return[]}function de(e){if(!J(e,"supportInline")){if(e instanceof HTMLElement){switch(e.tagName){case"BR":case"OPTION":case"MAP":case"AREA":return!1;}if("function"==typeof e.getBoundingClientRect){var t=e.getBoundingClientRect();if(0!==t.width&&0!==t.height||Q(e.dataset.ext)||"none"!==ne(e).clear)return!0;for(var n=e.parentElement,r=!0;n;){if("none"===ne(n).display){r=!1;break}n=n.parentElement}if(r&&0<e.children.length)return Array.from(e.children).some(function(e){var t=ne(e),n=t.cssFloat,r=t.position;return"static"!==r&&"initial"!==r||"left"===n||"right"===n})}return!1}return le(e)}return!1}function ue(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:":";return"{".concat(t+e.toString(),"}")}function he(e,t,n){var r=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],i="number"==typeof t?ue(t):t;return e.replace(i,(r?i:"")+n+(r?"":i))}function ge(e,t){if(0<=t){var n=-1;return e.split("\n").map(function(e){var r=/^({.*?})(\t*)(<.*)/.exec(e);return r?(-1===n&&(n=r[2].length),r[1]+W(t+(r[2].length-n))+r[3]):e}).join("\n")}return e}function ce(e,t,n){e/=255,t/=255,n/=255;var i=we(e,t,n),a=_e(e,t,n),o=(a+i)/2,u=o,c=o;if(a===i)o=0,u=0;else{var l=a-i;u=.5<c?l/(2-a-i):l/(a+i);a===e?o=(t-n)/l+(t<n?6:0):a===t?o=(n-e)/l+2:a===n?o=(e-t)/l+4:void 0;o/=6}return{h:360*o,s:100*u,l:100*c}}function pe(e){for(var t in Ke)if(t.toLowerCase()===e.trim().toLowerCase())return Ke[t];return""}function me(e){var t=e.rgb;return t?"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"):""}function Ee(e){return e=e.replace("#","").trim(),3===e.length&&(e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2)),6===e.length?{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16)}:null}function ye(){for(var e,t=!1,n=0;n<document.styleSheets.length;n++)if(e=document.styleSheets[n],e.cssRules)for(var r=0;r<e.cssRules.length;r++)try{(function(){for(var t,n=e.cssRules[r],i=new Set,a=Array.from(n.style),l=0;l<a.length;l++)t=a[l],i.add(O(t));Array.from(document.querySelectorAll(n.selectorText)).forEach(function(e){for(var t,r=Array.from(e.style),a=0;a<r.length;a++)t=r[a],i.add(O(t));var l=ne(e),o={},s=!0,d=!1,u=void 0;try{for(var h,g,c=i[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){if(g=h.value,-1!==g.toLowerCase().indexOf("color")){var p=pe(n.style[g]);""!==p&&(n.style[g]=me(p))}var m=n.style[g];e.style[g]?o[g]=e.style[g]:l[g]===m?o[g]=l[g]:m&&("fontSize"===g?o[g]=l[g]:"width"===g||"height"===g||"lineHeight"===g||"verticalAlign"===g||"columnGap"===g||"top"===g||"right"===g||"bottom"===g||"left"===g||"marginTop"===g||"marginRight"===g||"marginBottom"===g||"marginLeft"===g||"paddingTop"===g||"paddingRight"===g||"paddingBottom"===g||"paddingLeft"===g?o[g]=/^[A-Za-z\-]+$/.test(m)||M(m)?m:_(m,l.fontSize):null==o[g]&&(o[g]=m))}}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}tt.settings.preloadImages&&Q(o.backgroundImage)&&"initial"!==o.backgroundImage&&o.backgroundImage.split(",").map(function(e){return e.trim()}).forEach(function(e){var t=re(e);""===t||it.has(t)||it.set(t,{width:0,height:0,url:t})});var E=J(e,"styleMap");E?Object.assign(E,o):($(e,"style",l),$(e,"styleMap",o))})})()}catch(n){t||(alert("External CSS files cannot be parsed when loading this program from your hard drive with Chrome 64+ (file://). Either use a local web server (http://), embed your CSS files into a <style> tag, or use a different browser. See the README for further instructions.\n\n"+"".concat(e.href,"\n\n").concat(n)),t=!0)}}function fe(e){e&&Q(e.src)&&it.set(e.src,{width:e.naturalWidth,height:e.naturalHeight,url:e.src})}function xe(t){var n=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];if(nt!==t){var r=n?t.cached():t.create();if(e.settings=tt||0===Object.keys(e.settings).length?r.settings:Object.assign(r.settings,e.settings),tt=new Qe(r.framework),tt.settings=e.settings,tt.builtInExtensions=r.builtInExtensions,tt.nodeObject=r.nodeObject,tt.registerController(r.viewController),tt.registerResource(r.resourceHandler),Array.isArray(e.settings.builtInExtensions)){var i=new Set,a=tt.builtInExtensions,l=!0,o=!1,s=void 0;try{for(var d,u,h=e.settings.builtInExtensions[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)if(u=d.value,u=u.toLowerCase().trim(),a[u])i.add(a[u]);else for(var g in a)g.startsWith("".concat(u,"."))&&i.add(a[g])}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}var c=!0,p=!1,m=void 0;try{for(var E,y,f=i[Symbol.iterator]();!(c=(E=f.next()).done);c=!0)y=E.value,tt.registerExtension(y)}catch(e){p=!0,m=e}finally{try{c||null==f.return||f.return()}finally{if(p)throw m}}}nt=t,e.system=t.system}Fe()}function Te(){function e(){tt.loading=!1,tt.settings.preloadImages&&o&&Array.from(o.getElementsByClassName("androme.preload")).forEach(function(e){return o.removeChild(e)}),tt.resourceHandler.imageDimensions=it;var e=!0,n=!1,r=void 0;try{for(var i,a,l=tt.elements[Symbol.iterator]();!(e=(i=l.next()).done);e=!0){a=i.value,""===tt.appName?(""===a.id&&(a.id="untitled"),tt.appName=a.id):""===a.id&&(a.id="content_".concat(tt.size));var s=X(a.dataset.filename).replace(new RegExp(".".concat(tt.viewController.settingsInternal.layout.fileExtension,"$")),"")||a.id,d=D(a.dataset.iteration)+1;a.dataset.iteration=d.toString(),a.dataset.layoutName=b(1<d?"".concat(s,"_").concat(d):s),tt.initCache(a)&&(tt.createDocument(),tt.setConstraints(),tt.setResources(),rt.add(a))}}catch(e){n=!0,r=e}finally{try{e||null==l.return||l.return()}finally{if(n)throw r}}"function"==typeof t&&t.call(tt)}if(tt&&!tt.closed){var t;tt.elements.clear(),tt.loading=!1,ye();for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];""===tt.appName&&0===r.length&&r.push(document.body);for(var a,l=0;l<r.length;l++)a=r[l],"string"==typeof a&&(a=document.getElementById(a)),a instanceof HTMLElement&&tt.elements.add(a);var o=tt.elements.values().next().value;if(tt.settings.preloadImages&&o){var s=!0,d=!1,u=void 0;try{for(var h,g,c=it.values()[Symbol.iterator]();!(s=(h=c.next()).done);s=!0)if(g=h.value,0===g.width&&0===g.height&&g.url){var p=document.createElement("IMG");p.src=g.url,p.complete&&0<p.naturalWidth&&0<p.naturalHeight?(g.width=p.naturalWidth,g.height=p.naturalHeight):(p.className="androme.preload",p.style.display="none",o.appendChild(p))}}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}}var m=Array.from(tt.elements).map(function(e){var t=[];return Array.from(e.querySelectorAll("IMG")).forEach(function(e){e.complete?fe(e):t.push(e)}),t}).reduce(function(e,t){return e.concat(t)},[]);if(0===m.length)e();else{tt.loading=!0;var E=m.map(function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})});Promise.all(E).then(function(t){Array.isArray(t)&&t.forEach(function(e){try{fe(e.srcElement)}catch(e){}}),e()}).catch(function(t){var n=t.srcElement?t.srcElement.src:"";(!Q(n)||confirm("FAIL: ".concat(n)))&&e()})}return{then:function(e){tt.loading?t=e:e()}}}}function Ie(e){tt&&e instanceof qe&&k(e.name)&&Array.isArray(e.tagNames)&&tt.registerExtension(e)}function Ae(e,n){if(tt){var r=tt.getExtension(e);r&&"object"===t(n)&&Object.assign(r.options,n)}}function ve(e){return tt&&tt.getExtension(e)}function Ne(e,n){if("object"===t(e))Ie(e);else if(k(e))if("object"===t(n))Ae(e,n);else return ve(e)}function Le(){return tt&&!tt.loading&&!tt.closed}function Re(){tt&&!tt.loading&&0<tt.size&&tt.finalize()}function Fe(){if(tt){var e=!0,t=!1,n=void 0;try{for(var r,i,a=rt[Symbol.iterator]();!(e=(r=a.next()).done);e=!0)i=r.value,delete i.dataset.iteration,delete i.dataset.layoutName}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}rt.clear(),tt.reset()}}function Ce(){tt&&!tt.loading&&0<tt.size&&(!tt.closed&&tt.finalize(),tt.resourceHandler.file.saveAllToDisk(tt.viewData))}function Oe(){return tt?tt.toString():""}var ke;"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)};var Ge,Me=0,Pe=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];(function(e){e[e.UNIVERSAL=0]="UNIVERSAL",e[e.ANDROID=2]="ANDROID"})(Ge||(Ge={}));var He;(function(e){e[e.NONE=0]="NONE",e[e.INCLUDE=2]="INCLUDE",e[e.DOM_TRAVERSE=4]="DOM_TRAVERSE",e[e.EXTENSION=8]="EXTENSION",e[e.RENDER=16]="RENDER",e[e.ALL=30]="ALL"})(He||(He={}));var ze;(function(e){e[e.NONE=0]="NONE",e[e.EXTENDABLE=2]="EXTENDABLE",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=8]="VERTICAL",e[e.ABSOLUTE=16]="ABSOLUTE",e[e.FLOAT=32]="FLOAT",e[e.SEGMENTED=64]="SEGMENTED",e[e.PERCENT=128]="PERCENT",e[e.TOP=256]="TOP",e[e.RIGHT=512]="RIGHT",e[e.BOTTOM=1024]="BOTTOM",e[e.LEFT=2048]="LEFT",e[e.SINGLE=4096]="SINGLE",e[e.MULTILINE=8192]="MULTILINE",e[e.SPACE=16384]="SPACE"})(ze||(ze={}));var Xe;(function(e){e[e.NONE=0]="NONE",e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.OPTION_ARRAY=32]="OPTION_ARRAY",e[e.IMAGE_SOURCE=64]="IMAGE_SOURCE",e[e.ASSET=120]="ASSET",e[e.ALL=126]="ALL"})(Xe||(Xe={}));var Ve;(function(e){e[e.NONE=0]="NONE",e[e.LAYOUT=2]="LAYOUT",e[e.ALIGNMENT=4]="ALIGNMENT",e[e.AUTOFIT=8]="AUTOFIT",e[e.OPTIMIZATION=16]="OPTIMIZATION",e[e.CUSTOMIZATION=32]="CUSTOMIZATION",e[e.ACCESSIBILITY=64]="ACCESSIBILITY",e[e.ALL=126]="ALL"})(Ve||(Ve={}));var Ue;(function(e){e[e.NONE=0]="NONE",e[e.CHECKBOX=1]="CHECKBOX",e[e.RADIO=2]="RADIO",e[e.EDIT=3]="EDIT",e[e.SELECT=4]="SELECT",e[e.RANGE=5]="RANGE",e[e.TEXT=6]="TEXT",e[e.IMAGE=7]="IMAGE",e[e.BUTTON=8]="BUTTON",e[e.INLINE=9]="INLINE",e[e.LINE=10]="LINE",e[e.SPACE=11]="SPACE",e[e.BLOCK=12]="BLOCK",e[e.WEB_VIEW=13]="WEB_VIEW",e[e.FRAME=14]="FRAME",e[e.LINEAR=15]="LINEAR",e[e.RADIO_GROUP=16]="RADIO_GROUP",e[e.GRID=17]="GRID",e[e.RELATIVE=18]="RELATIVE",e[e.CONSTRAINT=19]="CONSTRAINT",e[e.SCROLL_HORIZONTAL=20]="SCROLL_HORIZONTAL",e[e.SCROLL_VERTICAL=21]="SCROLL_VERTICAL"})(Ue||(Ue={}));var Ze,We=/*#__PURE__*/function(){function e(t,n){a(this,e),this.parent=n,this._currentId=0,this._list=[],Array.isArray(t)&&(this._list=t)}return o(e,[{key:Symbol.iterator,value:function(){var e=this._list,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"reset",value:function(){this._currentId=0,this.clear()}},{key:"get",value:function(e){return null==e?this._list[this._list.length-1]:this._list[e]}},{key:"append",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._list).push.apply(e,n),"function"==typeof this.delegateAppend&&this.delegateAppend.call(this,n)}},{key:"prepend",value:function(){var e;(e=this._list).unshift.apply(e,arguments)}},{key:"remove",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._list.splice(e,t)}},{key:"clone",value:function(){return new e(this._list.slice())}},{key:"filter",value:function(t){return new e(this._list.filter(t))}},{key:"sort",value:function(t){return new e(this._list.slice().sort(t))}},{key:"partition",value:function(t){var n=C(this._list,t),r=x(n,2),i=r[0],a=r[1];return[new e(i),new e(a)]}},{key:"each",value:function(e){this._list.forEach(e)}},{key:"locate",value:function(e,t){return"string"==typeof e?this._list.find(function(n){return n[e]===t}):this._list.find(e)}},{key:"clear",value:function(){this._list.length=0}},{key:"sortAsc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return q.apply(void 0,[this._list].concat(t)),this}},{key:"sortDesc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return K.apply(void 0,[this._list].concat(t)),this}},{key:"length",get:function(){return this._list.length}},{key:"list",get:function(){return this._list}},{key:"visible",get:function(){return new e(this._list.filter(function(e){return e.visible}))}},{key:"elements",get:function(){return new e(this._list.filter(function(e){return e.visible&&e.hasElement}))}},{key:"nextId",get:function(){return++this._currentId}},{key:"linearX",get:function(){return e.linearX(this._list)}},{key:"linearY",get:function(){return e.linearY(this._list)}}],[{key:"siblingIndex",value:function(e,t){return e.siblingIndex<=t.siblingIndex?-1:1}},{key:"outerRegion",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear",n=[],r=[],a=[],l=[],o=e.slice(),s=!0,d=!1,u=void 0;try{for(var h,g,c=e[Symbol.iterator]();!(s=(h=c.next()).done);s=!0)g=h.value,g.companion&&o.push(g.companion)}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}for(var p,m=0;m<o.length;m++)p=o[m],0==m?(n.push(p),r.push(p),a.push(p),l.push(p)):(n[0][t].top===p[t].top?n.push(p):p[t].top<n[0][t].top&&(n=[p]),r[0][t].right===p[t].right?r.push(p):p[t].right>r[0][t].right&&(r=[p]),a[0][t].bottom===p[t].bottom?a.push(p):p[t].bottom>a[0][t].bottom&&(a=[p]),l[0][t].left===p[t].left?l.push(p):p[t].left<l[0][t].left&&(l=[p]));return{top:n,right:r,bottom:a,left:l}}},{key:"floated",value:function(e){return new Set(e.map(function(e){return e.float}).filter(function(e){return"none"!==e}))}},{key:"cleared",value:function(e){var t=new Map,n=new Set;return e.forEach(function(e){if(e.siblingflow){var r=e.css("clear");0<n.size&&("both"===r?(t.set(e,2===n.size?"both":n.values().next().value),n.clear()):n.has(r)&&(n.delete(r),t.set(e,r))),e.floating&&n.add(e.float)}}),t}},{key:"textBaseline",value:function(e){var t=[];if(!e.some(function(e){return(e.textElement||e.imageElement)&&e.baseline}))t=e.filter(function(e){return e.baseline}).sort(function(e,t){var n=e.nodeType,r=t.nodeType;return e.layoutHorizontal&&(n=we.apply(null,e.children.map(function(e){return 0<e.nodeType?e.nodeType:Ue.INLINE}))),t.layoutHorizontal&&(r=we.apply(null,t.children.map(function(e){return 0<e.nodeType?e.nodeType:Ue.INLINE}))),n<=r?-1:1});else{var n=_e.apply(null,e.map(function(e){return e.lineHeight})),r=_e.apply(null,e.map(function(e){return e.bounds.height}));if(n>r){var i=e.filter(function(e){return e.lineHeight===n});return(i.length===e.length?i.filter(function(e){return e.hasElement}):i).filter(function(e){return e.baseline})}t=e.filter(function(e){return e.baselineInside}).sort(function(e,t){var n=D(e.css("fontSize")),r=D(t.css("fontSize")),i=e.bounds.height,a=t.bounds.height;return e.imageElement&&t.imageElement?i>=a?-1:1:e.nodeType!==t.nodeType&&(e.nodeType<Ue.TEXT||t.nodeType<Ue.TEXT)?e.textElement||e.imageElement?-1:t.textElement||t.imageElement?1:e.nodeType<t.nodeType?-1:1:e.lineHeight>a&&0===t.lineHeight||t.imageElement?-1:t.lineHeight>i&&0===e.lineHeight||e.imageElement?1:n===r&&i===a?e.hasElement&&!t.hasElement?-1:!e.hasElement&&t.hasElement?1:e.siblingIndex<=t.siblingIndex?-1:1:n!==r&&0!==n&&0!==r?n>r?-1:1:i>=a?-1:1})}var a,l,o;return t.filter(function(e,n){return 0===n?(a=e.css("fontFamily"),l=e.css("fontSize"),o=e.css("fontWeight"),!0):e.css("fontFamily")===a&&e.css("fontSize")===l&&e.css("fontWeight")===o&&e.nodeName===t[0].nodeName&&(0<e.lineHeight&&e.lineHeight===t[0].lineHeight||e.bounds.height===t[0].bounds.height)})}},{key:"linearX",value:function(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=t.filter(function(e){return e.pageflow});switch(r.length){case 0:return!1;case 1:return!0;default:var i=this.documentParent(r),a=!1;if(n&&r.every(function(e){return e.documentParent===i||e.companion&&e.companion.documentParent===i})){var l=e.cleared(Array.from(i.baseElement.children).map(function(e){return te(e)}).filter(function(e){return e}));a=r.slice().sort(e.siblingIndex).every(function(e,t){if(0<t){e.companion&&e.companion.documentParent===i&&(e=e.companion);var n=e.previousSibling();if(n)return!e.alignedVertically(n,l)}return!0})}return(a||!n)&&r.every(function(e){return!r.some(function(t){return!!(t!==e&&e.linear.top>=t.linear.bottom&&e.intersectY(t.linear))})});}}},{key:"linearY",value:function(t){var n=t.filter(function(e){return e.pageflow});switch(n.length){case 0:return!1;case 1:return!0;default:var r=this.documentParent(n);if(n.every(function(e){return e.documentParent===r||e.companion&&e.companion.documentParent===r})){var i=e.cleared(Array.from(r.baseElement.children).map(function(e){return te(e)}).filter(function(e){return e}));return n.slice().sort(e.siblingIndex).every(function(e,t){if(0<t&&!e.lineBreak){e.companion&&e.companion.documentParent===r&&(e=e.companion);var n=e.previousSibling();if(n)return e.alignedVertically(n,i)}return!0})}return!1;}}},{key:"documentParent",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0)if(a=i.value,!a.companion&&a.domElement)return a.documentParent}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}return e[0].documentParent}}]),e}();(function(e){e[e.MARGIN_TOP=2]="MARGIN_TOP",e[e.MARGIN_RIGHT=4]="MARGIN_RIGHT",e[e.MARGIN_BOTTOM=8]="MARGIN_BOTTOM",e[e.MARGIN_LEFT=16]="MARGIN_LEFT",e[e.PADDING_TOP=32]="PADDING_TOP",e[e.PADDING_RIGHT=64]="PADDING_RIGHT",e[e.PADDING_BOTTOM=128]="PADDING_BOTTOM",e[e.PADDING_LEFT=256]="PADDING_LEFT",e[e.MARGIN=30]="MARGIN",e[e.MARGIN_VERTICAL=10]="MARGIN_VERTICAL",e[e.MARGIN_HORIZONTAL=20]="MARGIN_HORIZONTAL",e[e.PADDING=480]="PADDING",e[e.PADDING_VERTICAL=160]="PADDING_VERTICAL",e[e.PADDING_HORIZONTAL=320]="PADDING_HORIZONTAL"})(Ze||(Ze={}));var Ye;(function(e){e[e.NONE=0]="NONE",e[e.UNIT=2]="UNIT",e[e.AUTO=4]="AUTO",e[e.LEFT=8]="LEFT",e[e.BASELINE=16]="BASELINE",e[e.PERCENT=32]="PERCENT",e[e.ZERO=64]="ZERO"})(Ye||(Ye={}));var je={INPUT:Ue.NONE,PLAINTEXT:Ue.TEXT,HR:Ue.LINE,IMG:Ue.IMAGE,SELECT:Ue.SELECT,RANGE:Ue.RANGE,TEXT:Ue.EDIT,PASSWORD:Ue.EDIT,NUMBER:Ue.EDIT,EMAIL:Ue.EDIT,SEARCH:Ue.EDIT,URL:Ue.EDIT,CHECKBOX:Ue.CHECKBOX,RADIO:Ue.RADIO,BUTTON:Ue.BUTTON,SUBMIT:Ue.BUTTON,RESET:Ue.BUTTON,TEXTAREA:Ue.EDIT,IFRAME:Ue.WEB_VIEW},Qe=/*#__PURE__*/function(){function e(t){a(this,e),this.framework=t,this.renderQueue={},this.loading=!1,this.closed=!1,this.cache=new We,this.cacheSession=new We,this.elements=new Set,this.extensions=[],this._sorted={},this._currentIndex=-1,this._views=[],this._includes=[]}return o(e,[{key:"registerController",value:function(e){e.application=this,e.settings=this.settings,e.cache=this.cache,this.viewController=e}},{key:"registerResource",value:function(e){e.application=this,e.settings=this.settings,e.cache=this.cache,this.resourceHandler=e}},{key:"registerExtension",value:function(e){var t=this,n=this.getExtension(e.name);n?(Array.isArray(e.tagNames)&&(n.tagNames=e.tagNames),Object.assign(n.options,e.options)):(0===e.framework||S(e.framework,this.framework))&&e.dependencies.every(function(e){return!!t.getExtension(e.name)})&&(e.application=this,this.extensions.push(e))}},{key:"finalize",value:function(){var e=this.cacheSession.visible.list.filter(function(e){return!e.hasAlign(ze.SPACE)}),t=!0,n=!1,r=void 0;try{for(var i,a,l=e[Symbol.iterator]();!(t=(i=l.next()).done);t=!0)a=i.value,a.hasBit("excludeProcedure",Ve.LAYOUT)||a.setLayout(),a.hasBit("excludeProcedure",Ve.ALIGNMENT)||a.setAlignment(this.settings)}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}var o=!0,s=!1,d=void 0;try{for(var u,h,g=e[Symbol.iterator]();!(o=(u=g.next()).done);o=!0)h=u.value,h.hasBit("excludeProcedure",Ve.OPTIMIZATION)||h.applyOptimizations(this.settings),h.hasBit("excludeProcedure",Ve.CUSTOMIZATION)||h.applyCustomizations(this.settings)}catch(e){s=!0,d=e}finally{try{o||null==g.return||g.return()}finally{if(s)throw d}}this.viewController.setBoxSpacing(this.viewData),this.appendRenderQueue(),this.viewController.setDimensions(this.viewData),this.resourceHandler.finalize(this.viewData),this.viewController.finalize(this.viewData);var c=!0,p=!1,m=void 0;try{for(var E,y=this.extensions[Symbol.iterator]();!(c=(E=y.next()).done);c=!0){var f=E.value,x=!0,T=!1,I=void 0;try{for(var A,v,N=f.subscribers[Symbol.iterator]();!(x=(A=N.next()).done);x=!0)v=A.value,f.setTarget(v),f.finalize()}catch(e){T=!0,I=e}finally{try{x||null==N.return||N.return()}finally{if(T)throw I}}}}catch(e){p=!0,m=e}finally{try{c||null==y.return||y.return()}finally{if(p)throw m}}this.closed=!0}},{key:"reset",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i,a=this.cacheSession[Symbol.iterator]();!(e=(r=a.next()).done);e=!0)i=r.value,ee(i.element,"node","style","styleMap","supportInline","boxSpacing","boxStyle","fontStyle","imageSource","optionArray","valueString")}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.cache.reset(),this.cacheSession.reset(),this.resetController(),this.resetResource(),this._views.length=0,this._includes.length=0,this._sorted={},this._currentIndex=-1,this.appName="",this.renderQueue={};var l=!0,o=!1,s=void 0;try{for(var d,u,h=this.extensions[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)u=d.value,u.subscribers.clear(),u.subscribersChild.clear()}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}this.closed=!1}},{key:"setConstraints",value:function(){this.viewController.setConstraints()}},{key:"resetController",value:function(){this.viewController.reset()}},{key:"setResources",value:function(){this.resourceHandler.setBoxStyle(),this.resourceHandler.setFontStyle(),this.resourceHandler.setBoxSpacing(),this.resourceHandler.setValueString(),this.resourceHandler.setOptionArray(),this.resourceHandler.setImageSource()}},{key:"resetResource",value:function(){this.resourceHandler.reset()}},{key:"initCache",value:function(e){function t(e){var t=J(e,"styleMap");return(!t||0===Object.keys(t).length)&&g.includes(e.tagName)&&0===e.children.length}var n=this,r=0;e===document.body&&Array.from(document.body.childNodes).some(function(e){return de(e)&&1<++r});var i=e===document.body?document.querySelectorAll(1<r?"body, body *":"body *"):e.querySelectorAll("*");this.cache.parent=void 0,this.cache.delegateAppend=void 0,this.cache.clear();var a=!0,l=!1,o=void 0;try{for(var s,d,u=this.extensions[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)d=s.value,d.setTarget({},void 0,e),d.beforeInit()}catch(e){l=!0,o=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw o}}var h=this.insertNode(e);if(h)h.parent=new this.nodeObject(0,(e===document.body?e:e.parentElement)||document.body),h.documentRoot=!0,this.viewController.initNode(h),this.cache.parent=h;else return!1;for(var g=this.settings.renderInlineText?["BR"]:this.viewController.supportInline,c=Array.from(i),p=function(){var r=c[m];if(!n.elements.has(r)&&(n.prioritizeExtensions(n.extensions,r).some(function(e){return e.init(r)}),!n.elements.has(r))){t(r)&&r.parentElement&&Array.from(r.parentElement.children).every(function(e){return t(e)})&&$(r,"supportInline",!0);for(var i=!0,a=r.parentElement;a&&a!==e;){if(a!==e&&n.elements.has(a)){i=!1;break}a=a.parentElement}i&&n.insertNode(r)}},m=0;m<c.length;m++)p();if(0<this.cache.length){var E=!0,y=!1,f=void 0;try{for(var x,I=function(){var e=x.value,t=[],r=!1;Array.from(e.element.childNodes).forEach(function(n){if("#text"===n.nodeName)"SELECT"!==e.tagName&&t.push(n);else if("BR"!==n.tagName){var i=te(n);g.includes(n.tagName)&&(!i||i.excluded)||(r=!0)}}),r&&t.forEach(function(t){return n.insertNode(t,e)})},A=this.cache[Symbol.iterator]();!(E=(x=A.next()).done);E=!0)I()}catch(e){y=!0,f=e}finally{try{E||null==A.return||A.return()}finally{if(y)throw f}}var v={},N=[],L=!0,R=!1,F=void 0;try{for(var C,O=function(){var e=C.value;if(e.hasElement){var t=e.element,n=e.css("textAlign");v[e.id]={};var r=v[e.id];["right","end","BUTTON"!==t.tagName&&"button"!==t.type?"center":""].some(function(e){return e===n&&(r.textAlign=e,t.style.textAlign="left",!0)}),0>e.marginLeft&&(r.marginLeft=e.css("marginLeft"),t.style.marginLeft="0px"),0>e.marginTop&&(r.marginTop=e.css("marginTop"),t.style.marginTop="0px"),"relative"===e.position&&["top","right","bottom","left"].forEach(function(n){e.has(n)&&(r[n]=e.styleMap[n],t.style[n]="auto")}),(e.overflowX||e.overflowY)&&(e.has("width")&&(r.width=e.styleMap.width,t.style.width="auto"),e.has("height")&&(r.height=e.styleMap.height,t.style.height="auto"),r.overflow=e.style.overflow||"",t.style.overflow="visible"),"rtl"===t.dir&&(t.dir="ltr",N.push(t)),e.setBounds()}e.setMultiLine()},b=this.cache[Symbol.iterator]();!(L=(C=b.next()).done);L=!0)O()}catch(e){R=!0,F=e}finally{try{L||null==b.return||b.return()}finally{if(R)throw F}}var w=!0,D=!1,_=void 0;try{for(var S,B,k=this.cache[Symbol.iterator]();!(w=(S=k.next()).done);w=!0){if(B=S.value,B.hasElement){var G=B.element,M=v[B.id];if(M){for(var P in M)G.style[P]=M[P];N.includes(G)&&(G.dir="rtl")}}if(1===B.children.length){var H=B.children[0];H.pageflow||0!==H.toInt("top")||0!==H.toInt("right")||0!==H.toInt("bottom")||0!==H.toInt("left")||(H.pageflow=!0)}}}catch(e){D=!0,_=e}finally{try{w||null==k.return||k.return()}finally{if(D)throw _}}var z=!0,X=!1,V=void 0;try{for(var U,Z,W=this.cache[Symbol.iterator]();!(z=(U=W.next()).done);z=!0)if(Z=U.value,!Z.documentRoot){var Y=Z.getParentElementAsNode(this.settings.supportNegativeLeftTop,this.cache.parent);Y||Z.pageflow||(Y=this.cache.parent),Y?(Z.parent=Y,Z.documentParent=Y):Z.hide()}}catch(e){X=!0,V=e}finally{try{z||null==W.return||W.return()}finally{if(X)throw V}}var j=!0,Q=!1,q=void 0;try{for(var K,ee=function(){var e,t=K.value,n=0;Array.from(t.element.childNodes).forEach(function(e){var t=te(e);t&&!t.excluded&&t.pageflow&&(t.siblingIndex=n++)}),t.children.sort(We.siblingIndex),(e=t.initial.children).push.apply(e,T(t.children.slice()))},ne=this.cache.elements[Symbol.iterator]();!(j=(K=ne.next()).done);j=!0)ee()}catch(e){Q=!0,q=e}finally{try{j||null==ne.return||ne.return()}finally{if(Q)throw q}}this.cache.sortAsc("depth","id");var re=!0,ie=!1,ae=void 0;try{for(var le,oe,se=this.extensions[Symbol.iterator]();!(re=(le=se.next()).done);re=!0)oe=le.value,oe.setTarget(h),oe.afterInit()}catch(e){ie=!0,ae=e}finally{try{re||null==se.return||se.return()}finally{if(ie)throw ae}}return this.createLayout(e.dataset.layoutName),!0}return!1}},{key:"createDocument",value:function(){function e(e,t,n){o.has(e)||o.set(e,new Map);var r=o.get(e);r&&r.set(t,n)}function t(e){var t=!0,n=!1,r=void 0;try{for(var i,a=o.values()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value,s=!0,d=!1,u=void 0;try{for(var h,g,c=l.values()[Symbol.iterator]();!(s=(h=c.next()).done);s=!0)if(g=h.value,g.id===e)return void l.delete(g.id)}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}var n,r=this,a=this,l=[],o=new Map,s=this.viewController.baseTemplate,d=!0;e(-1,0,this.cache.parent.parent);var u=0,h=!0,g=!1,c=void 0;try{for(var p,m=this.cache.visible[Symbol.iterator]();!(h=(p=m.next()).done);h=!0){var E=p.value,y=Se(E.linear.left);null==l[E.depth]&&(l[E.depth]={}),null==l[E.depth][y]&&(l[E.depth][y]=[]),l[E.depth][y].push(E),e(E.depth,E.id,E),u=_e(E.depth,u)}}catch(e){g=!0,c=e}finally{try{h||null==m.return||m.return()}finally{if(g)throw c}}for(var f=0;f<u;f++)o.set(-1*f-2,new Map);this.cache.delegateAppend=function(n){n.forEach(function(n){t(n.id),e(-1*n.initial.depth-2,n.id,n),n.cascade().forEach(function(n){t(n.id),e(-1*n.initial.depth-2,n.id,n)})})};var I=!0,A=!1,v=void 0;try{for(var N,L=function(){function e(e,t,n,r,i){var a=n+(""===i&&-1!==t.renderPosition?":".concat(t.renderPosition):"");e.has(a)||e.set(a,new Map);var l=e.get(a);l&&l.set(t.id,r)}function t(t,n,r){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4];if(""!==r)if(o&&t.each(function(n){[i,u].some(function(r){var a=!0,o=!1,s=void 0;try{for(var d,u=i.values()[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var h=d.value,g=h.get(n.id);if(g){var c=t.renderDepth+1;return n.renderDepth!==c&&(g=ge(g,c),n.renderDepth=c),e(r,n,t.id.toString(),g,l),h.delete(n.id),!0}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return!1})}),""!==l)e(u,t,l,r,l);else{if(!a.elements.has(t.element))if(Q(t.dataset.target)){var s=document.getElementById(t.dataset.target);if(s&&s!==n.element)return a.addRenderQueue(t.dataset.target,[r]),void(t.auto=!1)}else if(Q(n.dataset.target)){var d=document.getElementById(n.dataset.target);if(d)return a.addRenderQueue(n.nodeId,[r]),void(t.dataset.target=n.nodeId)}e(i,t,n.id.toString(),r,l)}}var n=N.value,i=new Map,u=new Map,h=!0,g=!1,c=void 0;try{for(var p,m,E=function(){var e=p.value;if(0===e.children.length||e.renderAs)return"continue";var n=[],i=[],a=[],s=[],d=!0,u=!1,h=void 0;try{for(var g,c,m=e.children[Symbol.iterator]();!(d=(g=m.next()).done);d=!0)c=g.value,c.documentRoot?n.push(c):c.pageflow||c.alignOrigin?a.push(c):0<=c.toInt("zIndex")||c.parent.element!==c.element.parentElement?s.push(c):i.push(c)}catch(e){u=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(u)throw h}}r.sortByAlignment(a,e),n.push.apply(n,T(q(i,"style.zIndex","id"))),n.push.apply(n,a),n.push.apply(n,T(q(s,"style.zIndex","id")));for(var E,y=We.cleared(n),f=[],x="",I=-1,A=function(){var e=n[I];if(!e.visible||!e.documentRoot&&r.elements.has(e.element))return"continue";var i=e.parent;if(!e.hasBit("excludeSection",He.INCLUDE)&&r.viewController.supportInclude){var a=X(e.dataset.include);if(""!==a&&-1===f.indexOf(a)&&(t(e,i,r.viewController.renderInclude(e,i,a),0<f.length?f[f.length-1]:""),f.push(a)),x=0<f.length?f[f.length-1]:"",""!==x){var s=i.clone();s.renderDepth=r.viewController.baseRenderDepth(x),e.parent=s,i=s}}if(e.renderAs&&(i.remove(e),e.hide(),e=e.renderAs),!e.hasBit("excludeSection",He.DOM_TRAVERSE)&&1<n.length&&I<n.length-1){var d=i.linearVertical;if(e.pageflow&&""===x&&!i.flex.enabled&&!i.has("columnCount")&&!i.is(Ue.GRID)&&(e.alignmentType===ze.NONE&&i.alignmentType===ze.NONE||e.hasAlign(ze.EXTENDABLE))){var u=[],h=[],g=new Set(["left","right"]),c=!1,p=I,E=0;e.hasAlign(ze.EXTENDABLE)&&(u.push(e),p++,E++);forloop1:for(;p<n.length;p++,E++){var A=n[p];if(A.pageflow){if(y.has(A)){var v=y.get(A);"both"===v?g.clear():g.delete(v)}A.floating&&g.add(A.float);var N=A.previousSibling(),L=A.nextSibling(!0);if(0===E&&L)A.blockStatic||L.alignedVertically(A,y,!0)?h.push(A):u.push(A);else if(N){var R=function(){var e=We.floated(u.concat(h)),t=u.concat(h,[A]),n=We.cleared(t),i=new Map;n.has(N)&&i.set(N,N.css("clear"));var a=A.alignedVertically(N,i);if(a||n.has(A)||r.settings.floatOverlapDisabled&&N.floating&&A.blockStatic&&2===g.size){if(0<u.length){if(!r.settings.floatOverlapDisabled&&!N.lineBreak){var l=new Set(t.map(function(e){return n.get(e)||""}).filter(function(e){return""!==e})),o=null;if(0<e.size&&(o=_e.apply(null,u.filter(function(e){return e.floating}).map(function(e){return e.bounds.bottom}))),0<g.size&&!l.has("both")&&(null==o||A.bounds.top<o)){if(n.has(A)){var s=n.has(A)?n.get(A):"none";if("none"!==s){if(2>g.size&&2===e.size&&!A.floating)return A.alignmentType|=ze.EXTENDABLE,c=!0,u.push(A),"continue";}else if(2>e.size&&(!A.floating||!e.has(A.float)||A.float===u[u.length-1].float))return u.push(A),"continue";return"break|forloop1"}if(!a)return u.push(A),"continue";if(1===e.size&&(!A.floating||g.has(A.float)))return u.push(A),"continue"}}return"break|forloop1"}if(d&&0<h.length){var p=h[h.length-1];if(p.linearVertical)return A.parent=p,"continue"}h.push(A)}else{if(0<h.length||c)return"break|forloop1";u.push(A)}}();switch(R){case"continue":continue;case"break|forloop1":break forloop1;}}else break forloop1}}var F=null,C="";if(1<u.length){var O=We.cleared(u);if(r.isFrameHorizontal(u,O))F=r.viewController.createGroup(i,e,u),C=r.writeFrameLayoutHorizontal(F,i,u,O);else if(u.length===n.length)i.alignmentType|=ze.HORIZONTAL;else{var b=We.floated(u);1===b.size&&u.some(function(e){return e.has("width",Ye.PERCENT)})&&u.every(function(e){return e.has("width",Ye.UNIT|Ye.PERCENT)})?(F=r.viewController.createGroup(i,e,u),C=r.writeConstraintLayout(F,i),F.alignmentType|=ze.PERCENT):r.isRelativeHorizontal(u,O)?(F=r.viewController.createGroup(i,e,u),C=r.writeRelativeLayout(F,i),F.alignmentType|=ze.HORIZONTAL):(F=r.viewController.createGroup(i,e,u),C=r.writeLinearLayout(F,i,!0),0<b.size?(F.alignmentType|=ze.FLOAT,F.alignmentType|=u.every(function(e){return"right"===e.float||e.autoMarginLeft})?ze.RIGHT:ze.LEFT):F.alignmentType|=ze.HORIZONTAL)}}else if(1<h.length){var w=We.floated(h),D=We.cleared(h);if(0<w.size&&0<D.size&&!(1===w.size&&h.slice(1,h.length-1).every(function(e){return D.has(e)}))?i.linearVertical?(F=e,C=r.writeFrameLayoutVertical(null,i,h,D)):(F=r.viewController.createGroup(i,e,h),C=r.writeFrameLayoutVertical(F,i,h,D)):h.length===n.length?i.alignmentType|=ze.VERTICAL:!d&&(F=r.viewController.createGroup(i,e,h),C=r.writeLinearLayout(F,i,!1),F.alignmentType|=ze.VERTICAL),h.length!==n.length){var _=h[h.length-1];_.blockStatic||_===n[n.length-1]||(_.alignmentType|=ze.EXTENDABLE)}}F&&(t(F,i,C,"",!0),i=e.parent),e.hasAlign(ze.EXTENDABLE)&&(e.alignmentType^=ze.EXTENDABLE)}}if(!e.hasBit("excludeSection",He.EXTENSION)&&!e.rendered){var S=!1;forloop2:{var B=[],k=!0,G=!1,M=void 0;try{for(var P,z,V=r.extensions[Symbol.iterator]();!(k=(P=V.next()).done);k=!0)z=P.value,z.subscribersChild.has(e)&&B.push(z)}catch(e){G=!0,M=e}finally{try{k||null==V.return||V.return()}finally{if(G)throw M}}for(var U,Z=T(i.renderExtension).concat(B),W=0;W<Z.length;W++){U=Z[W],U.setTarget(e,i);var Y=U.processChild();if(""!==Y.output&&t(e,i,Y.output,x),Y.parent&&(i=Y.parent),S=Y.next||!1,Y.complete||Y.next)break forloop2}}if(S)return"continue";if(e.element instanceof HTMLElement){var j=[];if(r.prioritizeExtensions(r.extensions,e.element).some(function(n){if(n.is(e)&&(n.setTarget(e,i),n.condition())){var r=n.processNode(l,o);if(""!==r.output&&t(e,i,r.output,x),r.parent&&(i=r.parent),(""!==r.output||r.include)&&j.push(n),S=r.next||!1,r.complete||r.next)return!0}return!1}),0<j.length)for(var q,K=0;K<j.length;K++)q=j[K],q.subscribers.add(e),e.renderExtension.add(q);if(S)return"continue"}}if(!e.hasBit("excludeSection",He.RENDER)&&!e.rendered){var $="";if(e.alignmentType===ze.NONE&&e.has("width",Ye.PERCENT,{not:"100%"})&&!e.imageElement&&(i.linearVertical||i.is(Ue.FRAME)&&e.singleChild)){var J=r.viewController.createGroup(i,e,[e]),ee=r.writeGridLayout(J,i,2,1);J.alignmentType|=ze.PERCENT,t(J,i,ee,x),r.viewController["right"===e.float||e.autoMarginLeft?"prependBefore":"appendAfter"](e.id,r.getEmptySpacer(Ue.GRID,J.renderDepth+1,"".concat(100-e.toInt("width"),"%"))),i=J}if(""===e.controlName){var te=0<e.borderTopWidth||0<e.borderBottomWidth||0<e.borderRightWidth||0<e.borderLeftWidth,ne=/url(.*?)/.test(e.css("backgroundImage")),re=e.has("backgroundColor"),ie=te||ne||re;if(0===e.children.length){var le=ae(e.element,r.settings.renderInlineText?0:1);le||te&&0<e.textContent.length?$=r.writeNode(e,i,Ue.TEXT):ne&&"no-repeat"===e.css("backgroundRepeat")&&(!e.inlineText||0>e.toInt("textIndent")+e.bounds.width)?(e.alignmentType|=ze.SINGLE,e.excludeResource|=Xe.FONT_STYLE|Xe.VALUE_STRING,$=r.writeNode(e,i,Ue.IMAGE)):e.block&&(re||ne)&&(te||0<e.paddingTop+e.paddingRight+e.paddingRight+e.paddingLeft)?$=r.writeNode(e,i,Ue.LINE):!e.documentRoot&&(!r.settings.collapseUnattributedElements||0!==e.bounds.height||Q(e.element.id)||Q(e.dataset.ext)||ie?ie?$=r.writeNode(e,i,Ue.TEXT):$=r.writeFrameLayout(e,i):(i.remove(e),e.hide()))}else if(e.flex.enabled||e.children.some(function(e){return!e.pageflow})||e.has("columnCount"))$=r.writeConstraintLayout(e,i);else if(1===e.children.length){var de=e.children.filter(function(e){if(Q(e.dataset.target)){var t=document.getElementById(e.dataset.target);return t&&Q(t.dataset.ext)&&t!==i.element}return!1});if(r.settings.collapseUnattributedElements&&!e.documentRoot&&!Q(e.element.id)&&!Q(e.dataset.ext)&&!Q(e.dataset.target)&&0===e.toInt("width")&&0===e.toInt("height")&&!ie&&!e.has("textAlign")&&!e.has("verticalAlign")&&"right"!==e.float&&!e.autoMargin&&e.alignOrigin&&!r.viewController.hasAppendProcessing(e.id)||e.documentRoot&&1===de.length){var ue=e.children[0];return ue.documentRoot=e.documentRoot,ue.siblingIndex=e.siblingIndex,0!==i.id&&(ue.parent=i),0===de.length&&(e.resetBox(Ze.MARGIN,ue,!0),ue.modifyBox(Ze.MARGIN_TOP,e.paddingTop),ue.modifyBox(Ze.MARGIN_RIGHT,e.paddingRight),ue.modifyBox(Ze.MARGIN_BOTTOM,e.paddingBottom),ue.modifyBox(Ze.MARGIN_LEFT,e.paddingLeft)),e.hide(),n[I]=ue,I--,"continue"}$=r.writeFrameLayout(e,i)}else{var he=e.children,ge=[We.linearX(he),We.linearY(he)],ce=ge[0],pe=ge[1],me=We.cleared(he),Ee=he.every(function(e){return e.pageflow&&e.inlineElement});if(!i.flex.enabled&&he.every(function(e){return e.pageflow})){var ye=We.floated(he);ce&&0===me.size?(0===ye.size&&he.every(function(e){return 0===e.toInt("verticalAlign")})&&(he.some(function(e){return["text-top","text-bottom"].includes(e.css("verticalAlign"))})?($=r.writeConstraintLayout(e,i),e.alignmentType|=ze.HORIZONTAL):r.isRelativeHorizontal(he)&&($=r.writeRelativeLayout(e,i),e.alignmentType|=ze.HORIZONTAL)),""===$&&(0===ye.size||!ye.has("right"))&&(r.isRelativeHorizontal(he)?($=r.writeRelativeLayout(e,i),e.alignmentType|=ze.HORIZONTAL):($=r.writeLinearLayout(e,i,!0),e.alignmentType|=ze.HORIZONTAL))):(pe||!Ee&&he.some(function(e){var t=e.previousSibling();return!!(t&&e.alignedVertically(t,me))}))&&($=r.writeLinearLayout(e,i,!1),pe&&!e.documentRoot&&(e.alignmentType|=ze.VERTICAL))}""===$&&(Ee?r.isFrameHorizontal(he,me,!0)?$=r.writeFrameLayoutHorizontal(e,i,he,me):($=r.writeRelativeLayout(e,i),0===se(he[0].baseElement,he[he.length-1].baseElement).filter(function(e){return oe(e)}).length&&(e.alignmentType|=ze.HORIZONTAL)):$=r.writeConstraintLayout(e,i))}}else $=r.writeNode(e,i,e.controlName);t(e,i,$,x)}!e.hasBit("excludeSection",He.INCLUDE)&&r.viewController.supportInclude&&0<f.length&&"true"===H(e,"dataset.includeEnd")&&f.pop()};++I<n.length;)E=A(),"continue"===E},y=n.values()[Symbol.iterator]();!(h=(p=y.next()).done);h=!0)m=E(),"continue"===m}catch(e){g=!0,c=e}finally{try{h||null==y.return||y.return()}finally{if(g)throw c}}var f=!0,I=!1,A=void 0;try{for(var v,L=function(){var e=x(v.value,2),t=e[0],n=e[1],i=[],a=t.split(":"),l=x(a,2),o=l[0],u=l[1],h=Array.from(n.values());if(0<h.length){if(r._sorted[o]){var g=[];r._sorted[o].forEach(function(e){var t=h.find(function(t){return-1!==t.indexOf(ue(e,"@"))});t&&g.push(t)}),g.length===h.length&&i.push.apply(i,g)}0===i.length&&i.push.apply(i,T(h)),t=o+(u?":".concat(u):"");var c=ue(t);-1===s.indexOf(c)?r.addRenderQueue(t,h):(s=he(s,c,i.join("")),d=!1)}},R=i.entries()[Symbol.iterator]();!(f=(v=R.next()).done);f=!0)L()}catch(e){I=!0,A=e}finally{try{f||null==R.return||R.return()}finally{if(I)throw A}}if(r.viewController.supportInclude){var F=!0,C=!1,O=void 0;try{for(var b,w=u.entries()[Symbol.iterator]();!(F=(b=w.next()).done);F=!0){var D=x(b.value,2),_=D[0],S=D[1],B=Array.from(S.values());if(0<B.length){var k=r.viewController.renderMerge(_,B);r.addInclude(_,k)}}}catch(e){C=!0,O=e}finally{try{F||null==w.return||w.return()}finally{if(C)throw O}}}},R=o.values()[Symbol.iterator]();!(I=(N=R.next()).done);I=!0)L()}catch(e){A=!0,v=e}finally{try{I||null==R.return||R.return()}finally{if(A)throw v}}var F=this.cache.parent;if(!Q(F.dataset.target)||0===F.renderExtension.size){var C=V(X(F.dataset.folder),"/");this.updateLayout(d?"":s,C,0<F.renderExtension.size&&Array.from(F.renderExtension).some(function(e){return e.documentRoot}))}else this._views.pop();if(!d){var O=!0,b=!1,w=void 0;try{for(var D,_,S=this.extensions[Symbol.iterator]();!(O=(D=S.next()).done);O=!0)_=D.value,_.setTarget(F),_.afterRender()}catch(e){b=!0,w=e}finally{try{O||null==S.return||S.return()}finally{if(b)throw w}}}else 0===F.renderExtension.size&&F.hide();this.cache.list.sort(function(e,t){if(!e.visible)return 1;if(!t.visible)return-1;if(e.renderDepth!==t.renderDepth)return e.renderDepth<t.renderDepth?-1:1;if(!e.domElement){var n=te(e.baseElement);if(n)e=n;else return 1}if(!t.domElement){var r=te(e.baseElement);if(r)t=r;else return-1}return e.documentParent===t.documentParent?e.renderIndex<t.renderIndex?-1:1:e.documentParent.id<t.documentParent.id?-1:1}),(n=this.cacheSession.list).push.apply(n,T(this.cache.list))}},{key:"writeFrameLayout",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return n||0!==e.children.length?this.viewController.renderGroup(e,t,Ue.FRAME):this.viewController.renderNode(e,t,Ue.FRAME)}},{key:"writeLinearLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,Ue.LINEAR,{horizontal:n})}},{key:"writeGridLayout",value:function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return this.viewController.renderGroup(e,t,Ue.GRID,{columns:n,rows:r})}},{key:"writeRelativeLayout",value:function(e,t){return this.viewController.renderGroup(e,t,Ue.RELATIVE)}},{key:"writeConstraintLayout",value:function(e,t){return this.viewController.renderGroup(e,t,Ue.CONSTRAINT)}},{key:"writeNode",value:function(e,t,n){return this.viewController.renderNode(e,t,n)}},{key:"writeFrameLayoutHorizontal",value:function(e,t,n,r){var a=this,l="",o=[];if(0===r.size&&!n.some(function(e){return e.autoMargin})){var s=[],d=[],u=[],h=!0,g=!1,c=void 0;try{for(var p,m,E=n[Symbol.iterator]();!(h=(p=E.next()).done);h=!0)m=p.value,m.floating?"right"===m.float?u.push(m):d.push(m):s.push(m)}catch(e){g=!0,c=e}finally{try{h||null==E.return||E.return()}finally{if(g)throw c}}if(s.length===n.length||d.length===n.length||u.length===n.length)return e.alignmentType|=0<s.length?ze.HORIZONTAL:ze.FLOAT,0<u.length&&(e.alignmentType|=ze.RIGHT),this.isRelativeHorizontal(n,r)?(l=this.writeRelativeLayout(e,t),l):(l=this.writeLinearLayout(e,t,!0),l);if(0===d.length||0===u.length){var y=0===u.length?d.concat(s):s.concat(u);if(We.linearY(y))return l=this.writeLinearLayout(e,t,!1),e.alignmentType|=ze.VERTICAL,l;if(this.isRelativeHorizontal(y,r))return l=this.writeRelativeLayout(e,t),e.alignmentType|=ze.HORIZONTAL,0<u.length&&(e.alignmentType|=ze.RIGHT),l;0===u.length&&(this.settings.floatOverlapDisabled||(l=this.writeLinearLayout(e,t,!0),o=[d,s],e.alignmentType|=ze.FLOAT))}}var f=[],x=[],I=[],A=[],v=[],N=[],L=[],R=[];if(0===o.length){for(var F,C="",O=0,b=0;b<n.length;b++){if(F=n[b],r.has(F)){var w=r.get(F);(S(O,"right"===w?4:2)||0!==O&&"both"===w)&&("left"===w?(O^=2,C="left"):"right"===w?(O^=4,C="right"):"both"===w?(C=2===O?"left":4===O?"right":"both",O=0):void 0)}""===C?F.floating?"right"===F.float?(A.push(F),F.floating&&(O|=4)):(I.push(F),F.floating&&(O|=2)):F.autoMargin?F.autoMarginLeft?0<A.length?N.push(F):A.push(F):F.autoMarginRight?0<I.length?v.push(F):I.push(F):0<f.length?0===I.length?I.push(F):A.push(F):f.push(F):f.push(F):F.floating?"right"===F.float?(0===N.length&&(O|=4),!this.settings.floatOverlapDisabled&&"right"!==C&&0<A.length?A.push(F):N.push(F)):(0===v.length&&(O|=2),!this.settings.floatOverlapDisabled&&"left"!==C&&0<I.length?I.push(F):v.push(F)):F.autoMargin?F.autoMarginLeft&&0<N.length?N.push(F):F.autoMarginRight&&0<v.length?v.push(F):x.push(F):"left"===C?v.push(F):"right"===C?N.push(F):x.push(F)}0<I.length&&0<v.length?(L=[I,v],1<v.length&&(v[0].alignmentType|=ze.EXTENDABLE)):0<I.length?L=I:0<v.length&&(L=v),0<A.length&&0<N.length?(R=[A,N],1<N.length&&(N[0].alignmentType|=ze.EXTENDABLE)):0<A.length?R=A:0<N.length&&(R=N),this.settings.floatOverlapDisabled?(t.linearVertical?(l=ue(e.id),e.renderDepth--):l=this.writeLinearLayout(e,t,!1),o.push(f,[I,A],x)):(0===f.length&&(0===L.length||0===R.length)?(l=this.writeLinearLayout(e,t,!1),0<R.length&&(e.alignmentType|=ze.RIGHT)):l=this.writeFrameLayout(e,t,!0),0<f.length?(0<N.length?(L=[f,I],o.push(L,R)):0<v.length?(R=[f,A],o.push(R,L)):o.push(f,L,R),1<f.length&&(f[0].alignmentType|=ze.EXTENDABLE)):L===v&&R===A||L===I&&R===N?0===v.length?o.push([I,N]):o.push([A,v]):o.push(L,R),o=o.filter(function(e){return e&&0<e.length})),e.alignmentType|=ze.FLOAT}if(0<o.length){var D=null;o.forEach(function(t,n){if(Array.isArray(t[0])){var r=[];t.forEach(function(e){return r.push.apply(r,T(e))}),r.sort(We.siblingIndex),D=a.viewController.createGroup(e,r[0],r),a.settings.floatOverlapDisabled?l=he(l,e.id,a.writeFrameLayout(D,e,!0)):(l=he(l,e.id,a.writeLinearLayout(D,e,!1)),t.some(function(e){return e===R||e===A})&&(D.alignmentType|=ze.RIGHT)),D.alignmentType|=ze.FLOAT}else D=null;(Array.isArray(t[0])?t:[t]).forEach(function(t){var r=e;if(D&&[f,I,v,A,N].includes(t)&&(r=D),1<t.length){var i="",o=a.viewController.createGroup(r,t[0],t),s=t.some(function(e){return"left"===e.float}),d=t.some(function(e){return"right"===e.float});if(a.isRelativeHorizontal(t,We.cleared(t)))i=a.writeRelativeLayout(o,r),o.alignmentType|=ze.HORIZONTAL;else if(i=a.writeLinearLayout(o,r,We.linearX(t)),d&&o.children.some(function(e){return 0>e.marginLeft})){var u=[],h=0;o.children.slice().forEach(function(e){var t=!1;0>h&&(be(h)>e.bounds.width?(h+=e.bounds.width,e.modifyBox(Ze.MARGIN_RIGHT,-1*e.bounds.width,!0),t=!0):be(h)>=e.marginRight?(e.modifyBox(Ze.MARGIN_RIGHT,De(be(h)-e.marginRight)),e.modifyBox(Ze.MARGIN_RIGHT,null)):e.modifyBox(Ze.MARGIN_RIGHT,h,!0)),0>e.marginLeft&&(h+=_e(e.marginLeft,-1*e.bounds.width),e.modifyBox(Ze.MARGIN_LEFT,null)),t?u.splice(u.length-1,0,e):u.push(e)}),o.children=u.reverse(),a.saveSortOrder(o.id,o.children)}o.alignmentType|=ze.SEGMENTED,(s||d)&&(o.alignmentType|=ze.FLOAT,d&&(o.alignmentType|=ze.RIGHT)),l=he(l,r.id,i),r.renderAppend(o)}else if(0<t.length){var g=t[0];g.alignmentType|=ze.SINGLE,"right"===g.float&&(g.alignmentType|=ze.RIGHT),g.renderPosition=n,l=he(l,r.id,"{:".concat(r.id,":").concat(n,"}")),r.renderAppend(g)}})})}return l}},{key:"writeFrameLayoutVertical",value:function(e,t,n,r){var a=this,l="";e?(l=this.writeLinearLayout(e,t,!1),e.alignmentType|=ze.VERTICAL):(e=t,l=ue(e.id));var o=[],s=[],d=[],u=[],h=0,g=!1,c=!0;n.some(function(e){return!e.floating&&(h+=e.linear.height,!0)});var p=!0,m=!1,E=void 0;try{for(var y,f,x=n[Symbol.iterator]();!(p=(y=x.next()).done);p=!0)f=y.value,r.has(f)&&(f.floating?g=!0:(f.modifyBox(Ze.MARGIN_TOP,null),o.push(d.slice()),d.length=0,s.push(u.slice()),u.length=0)),f.floating?u.push(f):(g&&!r.has(f)&&(c=!1),d.push(f))}catch(e){m=!0,E=e}finally{try{p||null==x.return||x.return()}finally{if(m)throw E}}return 0<u.length&&s.push(u),0<d.length&&o.push(d),c||function(){for(var t="",r=0;r<_e(s.length,o.length);r++){var d=s[r]||[],u=o[r]||[];(0<u.length||0<d.length)&&function(){var i=d[0]||u[0],l=a.viewController.createGroup(e,i,[]),o=[],s=null;1<d.length?(s=a.viewController.createGroup(l,d[0],d),l.alignmentType|=ze.FLOAT):0<d.length&&(s=d[0],s.parent=l,l.alignmentType|=ze.FLOAT),s&&(o.push(s),0==r&&0<h&&s.modifyBox(Ze.MARGIN_TOP,h),s=null),1<u.length?s=a.viewController.createGroup(l,u[0],u):0<u.length&&(s=u[0],s.parent=l),s&&o.push(s),l.init(),t+=a.writeFrameLayout(l,e,!0),l.alignmentType|=ze.VERTICAL,o.forEach(function(e,r){n.includes(e)?t=he(t,l.id,"{:".concat(l.id,":").concat(r,"}")):(t=he(t,l.id,a.writeLinearLayout(e,l,!1)),e.alignmentType|=ze.SEGMENTED)})}()}l=he(l,e.id,t)}(),l}},{key:"appendRenderQueue",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.extensions[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var l=r.value,o=!0,s=!1,d=void 0;try{for(var u,h,g=l.subscribers[Symbol.iterator]();!(o=(u=g.next()).done);o=!0)h=u.value,l.setTarget(h),l.beforeInsert()}catch(e){s=!0,d=e}finally{try{o||null==g.return||g.return()}finally{if(s)throw d}}}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}var c={};for(var p in this.renderQueue){var m=p.split(":"),E=x(m,1),y=E[0],f=y;if(!B(f)){var T=te(document.getElementById(f));T&&(f=T.id.toString())}var I=this.renderQueue[p].join("\n");if(f!==y){var A=this.cacheSession.locate("id",parseInt(f));if(A){var v=A.renderDepth+1;I=ge(I,v);for(var N,L=/{@([0-9]+)}/g,R=null,F=0;null!=(R=L.exec(I));)N=this.cacheSession.locate("id",parseInt(R[1])),N&&(0==F++?N.renderDepth=v:N.renderDepth=N.parent.renderDepth+1)}}c[f]=I}for(var C in c)for(var O in c)C!=O&&(c[C]=c[C].replace(ue(O),c[O]),c[O]=c[O].replace(ue(C),c[C]));var b=!0,w=!1,D=void 0;try{for(var _,S,k=this.layouts[Symbol.iterator]();!(b=(_=k.next()).done);b=!0){for(var G in S=_.value,c)S.content=S.content.replace(ue(G),c[G]);S.content=this.viewController.appendRenderQueue(S.content)}}catch(e){w=!0,D=e}finally{try{b||null==k.return||k.return()}finally{if(w)throw D}}var M=!0,P=!1,H=void 0;try{for(var z,X=this.extensions[Symbol.iterator]();!(M=(z=X.next()).done);M=!0){var V=z.value,U=!0,Z=!1,W=void 0;try{for(var Y,j,Q=V.subscribers[Symbol.iterator]();!(U=(Y=Q.next()).done);U=!0)j=Y.value,V.setTarget(j),V.afterInsert()}catch(e){Z=!0,W=e}finally{try{U||null==Q.return||Q.return()}finally{if(Z)throw W}}}}catch(e){P=!0,H=e}finally{try{M||null==X.return||X.return()}finally{if(P)throw H}}}},{key:"getEmptySpacer",value:function(e,t,n,r,i){return this.viewController.getEmptySpacer(e,t,n,r,i)}},{key:"createLayout",value:function(e){this._currentIndex=this._views.length,this._views.push({filename:e,pathname:"",content:""})}},{key:"updateLayout",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(t=t||this.viewController.settingsInternal.layout.directory,n&&0<this._views.length&&""===this._views[0].content){var r=this._views.pop();Object.assign(this._views[0],{pathname:t,filename:r.filename,content:e}),this._currentIndex=0}else this.layoutProcessing.pathname=t,this.layoutProcessing.content=e}},{key:"addInclude",value:function(e,t){this._includes.push({pathname:this.viewController.settingsInternal.layout.directory,filename:e,content:t})}},{key:"addRenderQueue",value:function(e,t){var n;null==this.renderQueue[e]&&(this.renderQueue[e]=[]),(n=this.renderQueue[e]).push.apply(n,T(t))}},{key:"sortByAlignment",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ze.NONE,r=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],i=!1;return t&&n===ze.NONE&&(t.linearHorizontal?n|=ze.HORIZONTAL:t.is(Ue.CONSTRAINT)&&e.some(function(e){return!e.pageflow})&&(n|=ze.ABSOLUTE)),S(n,ze.HORIZONTAL)&&e.some(function(e){return e.floating})&&(e.sort(function(e,t){return e.floating&&!t.floating?"left"===e.float?-1:1:!e.floating&&t.floating?"left"===t.float?1:-1:e.floating&&t.floating&&e.float!==t.float?"left"===e.float?-1:1:e.linear.left<=t.linear.left?-1:1}),i=!0),S(n,ze.ABSOLUTE)&&e.some(function(e){return 0!==e.toInt("zIndex")})&&(e.sort(function(e,t){var n=e.css("zIndex"),r=t.css("zIndex");return("auto"===n||""===n||"0"===n)&&("auto"===r||""===r||"0"===r)?e.siblingIndex<=t.siblingIndex?-1:1:D(n)<=D(r)?-1:1}),i=!0),r&&i&&t&&this.saveSortOrder(t.id,e),e}},{key:"saveSortOrder",value:function(e,t){this._sorted[e.toString()]=t.map(function(e){return e.id})}},{key:"getExtension",value:function(e){return this.extensions.find(function(t){return t.name===e})}},{key:"toString",value:function(){return 0<this._views.length?this._views[0].content:""}},{key:"insertNode",value:function(e,t){var n=null;if("#"===e.nodeName.charAt(0))"#text"===e.nodeName&&(le(e,!0)||ie(e,"whiteSpace","pre","pre-wrap"))&&(n=new this.nodeObject(this.cache.nextId,e),this.viewController.initNode(n),n.nodeName="PLAINTEXT",t?(n.parent=t,n.inherit(t,"style")):n.css("whiteSpace",(e.parentElement?ne(e.parentElement).whiteSpace:null)||"normal"),n.css({position:"static",display:"inline",clear:"none",cssFloat:"none",verticalAlign:"baseline"}));else if(e instanceof HTMLElement){switch(e.tagName){case"OPTION":case"MAP":case"AREA":return null;}var r=new this.nodeObject(this.cache.nextId,e);this.viewController.initNode(r),de(e)?(n=r,n.setExclusions()):(r.excluded=!0,r.visible=!1)}return n&&this.cache.append(n),n}},{key:"prioritizeExtensions",value:function(e,t){for(var n=[],r=t;r;)n=T(n).concat(T(X(r.dataset.ext).split(",").map(function(e){return e.trim()}))),r=r.parentElement;if(n=n.filter(function(e){return e}),0<n.length){var i=[],a=[],l=!0,o=!1,s=void 0;try{for(var d,u=e[Symbol.iterator]();!(l=(d=u.next()).done);l=!0){var h=d.value,g=n.indexOf(h.name);-1===g?a.push(h):i[g]=h}}catch(e){o=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(o)throw s}}return T(i.filter(function(e){return e})).concat(a)}return e}},{key:"isFrameHorizontal",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=We.floated(e),i=e.filter(function(e){return e.autoMargin}),a=n?se(e[0].baseElement,e[e.length-1].baseElement).filter(function(e){return"BR"===e.tagName}).length:0;return 0===a&&(r.has("right")||0<t.size||0<i.length||!We.linearX(e))}},{key:"isRelativeHorizontal",value:function(e){var t=Number.MAX_VALUE,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Map,r=e.filter(function(e){return e.visible}),i=We.floated(e),a=new We(e).partition(function(e){return e.floating}),l=x(a,2),o=l[0],s=l[1],d=0<s.length?we.apply(null,s.list.map(function(e){return e.siblingIndex})):t,u=0<o.length?_e.apply(null,o.list.map(function(e){return e.siblingIndex})):-1,h=We.linearX(e);return!r.some(function(e){return e.autoMarginHorizontal})&&(1===i.size&&o.length===e.length?!(h&&0===n.size):0===n.size&&!i.has("right")&&(0===s.length||0===o.length||u<d)&&r.every(function(e){var t=e.css("verticalAlign");return 0<=e.toInt("top")&&(["baseline","initial","unset","top","middle","sub","super"].includes(t)||G(t)&&0<=parseInt(t))})&&(r.some(function(e){return(e.textElement||e.imageElement)&&e.baseline||e.plainText&&e.multiLine})||!h&&e.every(function(e){return e.pageflow&&e.inlineElement})))}},{key:"appName",set:function(e){this.resourceHandler&&(this.resourceHandler.file.appName=e)},get:function(){return this.resourceHandler?this.resourceHandler.file.appName:""}},{key:"layoutProcessing",set:function(e){this._views[this._currentIndex]=e},get:function(){return this._views[this._currentIndex]}},{key:"layouts",get:function(){return T(this._views).concat(T(this._includes))}},{key:"viewData",get:function(){return{cache:this.cacheSession,views:this._views,includes:this._includes}}},{key:"size",get:function(){return this._views.length+this._includes.length}}]),e}(),qe=/*#__PURE__*/function(){function e(t,n,r,i){a(this,e),this.name=t,this.framework=n,this.options={},this.tagNames=[],this.documentRoot=!1,this.dependencies=[],this.subscribers=new Set,this.subscribersChild=new Set,Array.isArray(r)&&(this.tagNames=r.map(function(e){return e.trim().toUpperCase()})),i&&Object.assign(this.options,i)}return o(e,[{key:"setTarget",value:function(e,t,n){this.node=e,this.parent=t,this.element=n||this.node.element}},{key:"is",value:function(e){return e.hasElement&&(0===this.tagNames.length||this.tagNames.includes(e.tagName))}},{key:"require",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];this.dependencies.push({name:e,init:t})}},{key:"included",value:function(e){return e||(e=this.element),!!e&&P(e.dataset.ext,this.name)}},{key:"beforeInit",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];!t&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.beforeInit(!0))})}},{key:"init",value:function(){return!1}},{key:"afterInit",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];!t&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.afterInit(!0))})}},{key:"condition",value:function(){var e=this.node;if(e&&e.element instanceof HTMLElement){var t=e.dataset.ext;return t?this.included():0<this.tagNames.length}return!1}},{key:"processNode",value:function(){return{output:"",complete:!1}}},{key:"processChild",value:function(){return{output:"",complete:!1}}},{key:"afterRender",value:function(){}},{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"finalize",value:function(){}},{key:"getData",value:function(){var e={};if(this.element instanceof HTMLElement){var t=O(this.name,"\\.");for(var n in this.element.dataset)n.length>t.length&&n.startsWith(t)&&(e[w(n.substring(t.length),!1)]=this.element.dataset[n])}return e}}]),e}(),Ke={Pink:{hex:"#FFC0CB"},LightPink:{hex:"#FFB6C1"},HotPink:{hex:"#FF69B4"},DeepPink:{hex:"#FF1493"},PaleVioletRed:{hex:"#DB7093"},MediumVioletRed:{hex:"#C71585"},LightSalmon:{hex:"#FFA07A"},Salmon:{hex:"#FA8072"},DarkSalmon:{hex:"#E9967A"},LightCoral:{hex:"#F08080"},IndianRed:{hex:"#CD5C5C"},Crimson:{hex:"#DC143C"},Firebrick:{hex:"#B22222"},DarkRed:{hex:"#8B0000"},Red:{hex:"#FF0000"},OrangeRed:{hex:"#FF4500"},Tomato:{hex:"#FF6347"},Coral:{hex:"#FF7F50"},Orange:{hex:"#FFA500"},DarkOrange:{hex:"#FF8C00"},Yellow:{hex:"#FFFF00"},LightYellow:{hex:"#FFFFE0"},LemonChiffon:{hex:"#FFFACD"},LightGoldenrodYellow:{hex:"#FAFAD2"},PapayaWhip:{hex:"#FFEFD5"},Moccasin:{hex:"#FFE4B5"},PeachPuff:{hex:"#FFDAB9"},PaleGoldenrod:{hex:"#EEE8AA"},Khaki:{hex:"#F0E68C"},DarkKhaki:{hex:"#BDB76B"},Gold:{hex:"#FFD700"},Cornsilk:{hex:"#FFF8DC"},BlanchedAlmond:{hex:"#FFEBCD"},Bisque:{hex:"#FFE4C4"},NavajoWhite:{hex:"#FFDEAD"},Wheat:{hex:"#F5DEB3"},Burlywood:{hex:"#DEB887"},Tan:{hex:"#D2B48C"},RosyBrown:{hex:"#BC8F8F"},SandyBrown:{hex:"#F4A460"},Goldenrod:{hex:"#DAA520"},DarkGoldenrod:{hex:"#B8860B"},Peru:{hex:"#CD853F"},Chocolate:{hex:"#D2691E"},SaddleBrown:{hex:"#8B4513"},Sienna:{hex:"#A0522D"},Brown:{hex:"#A52A2A"},Maroon:{hex:"#800000"},DarkOliveGreen:{hex:"#556B2F"},Olive:{hex:"#808000"},OliveDrab:{hex:"#6B8E23"},YellowGreen:{hex:"#9ACD32"},LimeGreen:{hex:"#32CD32"},Lime:{hex:"#00FF00"},LawnGreen:{hex:"#7CFC00"},Chartreuse:{hex:"#7FFF00"},GreenYellow:{hex:"#ADFF2F"},SpringGreen:{hex:"#00FF7F"},MediumSpringGreen:{hex:"#00FA9A"},LightGreen:{hex:"#90EE90"},PaleGreen:{hex:"#98FB98"},DarkSeaGreen:{hex:"#8FBC8F"},MediumAquamarine:{hex:"#66CDAA"},MediumSeaGreen:{hex:"#3CB371"},SeaGreen:{hex:"#2E8B57"},ForestGreen:{hex:"#228B22"},Green:{hex:"#008000"},DarkGreen:{hex:"#006400"},Aqua:{hex:"#00FFFF"},Cyan:{hex:"#00FFFF"},LightCyan:{hex:"#E0FFFF"},PaleTurquoise:{hex:"#AFEEEE"},Aquamarine:{hex:"#7FFFD4"},Turquoise:{hex:"#40E0D0"},DarkTurquoise:{hex:"#00CED1"},MediumTurquoise:{hex:"#48D1CC"},LightSeaGreen:{hex:"#20B2AA"},CadetBlue:{hex:"#5F9EA0"},DarkCyan:{hex:"#008B8B"},Teal:{hex:"#008080"},LightSteelBlue:{hex:"#B0C4DE"},PowderBlue:{hex:"#B0E0E6"},LightBlue:{hex:"#ADD8E6"},SkyBlue:{hex:"#87CEEB"},LightSkyBlue:{hex:"#87CEFA"},DeepSkyBlue:{hex:"#00BFFF"},DodgerBlue:{hex:"#1E90FF"},Cornflower:{hex:"#6495ED"},SteelBlue:{hex:"#4682B4"},RoyalBlue:{hex:"#4169E1"},Blue:{hex:"#0000FF"},MediumBlue:{hex:"#0000CD"},DarkBlue:{hex:"#00008B"},Navy:{hex:"#000080"},MidnightBlue:{hex:"#191970"},Lavender:{hex:"#E6E6FA"},Thistle:{hex:"#D8BFD8"},Plum:{hex:"#DDA0DD"},Violet:{hex:"#EE82EE"},Orchid:{hex:"#DA70D6"},Fuchsia:{hex:"#FF00FF"},Magenta:{hex:"#FF00FF"},MediumOrchid:{hex:"#BA55D3"},MediumPurple:{hex:"#9370DB"},BlueViolet:{hex:"#8A2BE2"},DarkViolet:{hex:"#9400D3"},DarkOrchid:{hex:"#9932CC"},DarkMagenta:{hex:"#8B008B"},Purple:{hex:"#800080"},RebeccaPurple:{hex:"#663399"},Indigo:{hex:"#4B0082"},DarkSlateBlue:{hex:"#483D8B"},SlateBlue:{hex:"#6A5ACD"},MediumSlateBlue:{hex:"#7B68EE"},White:{hex:"#FFFFFF"},Snow:{hex:"#FFFAFA"},Honeydew:{hex:"#F0FFF0"},MintCream:{hex:"#F5FFFA"},Azure:{hex:"#F0FFFF"},AliceBlue:{hex:"#F0F8FF"},GhostWhite:{hex:"#F8F8FF"},WhiteSmoke:{hex:"#F5F5F5"},Seashell:{hex:"#FFF5EE"},Beige:{hex:"#F5F5DC"},OldLace:{hex:"#FDF5E6"},FloralWhite:{hex:"#FFFAF0"},Ivory:{hex:"#FFFFF0"},AntiqueWhite:{hex:"#FAEBD7"},Linen:{hex:"#FAF0E6"},LavenderBlush:{hex:"#FFF0F5"},MistyRose:{hex:"#FFE4E1"},Gainsboro:{hex:"#DCDCDC"},LightGray:{hex:"#D3D3D3"},Silver:{hex:"#C0C0C0"},DarkGray:{hex:"#A9A9A9"},Gray:{hex:"#808080"},DimGray:{hex:"#696969"},LightSlateGray:{hex:"#778899"},SlateGray:{hex:"#708090"},DarkSlateGray:{hex:"#2F4F4F"},Black:{hex:"#000000"}},$e=[];for(var Je in Ke){var i=Ke[Je];for(var et in i){var j=Ee(i[et]);j&&(i.rgb=j,i.hsl=ce(i.rgb.r,i.rgb.g,i.rgb.b)),$e.push({name:Je,rgb:i.rgb,hex:i.hex,hsl:i.hsl})}}$e.sort(function(e,t){if(e.hsl&&t.hsl){var n=[e.hsl.h,t.hsl.h],r=n[0],i=n[1];if(r===i){var a=[e.hsl.s,t.hsl.s];if(r=a[0],i=a[1],r===i){var l=[e.hsl.l,t.hsl.l];r=l[0],i=l[1]}}return r>=i?1:-1}return 0});var tt;e.settings={},e.system={};var nt,rt=new Set,it=new Map;e.setFramework=xe,e.parseDocument=Te,e.registerExtension=Ie,e.configureExtension=Ae,e.getExtension=ve,e.ext=Ne,e.ready=Le,e.close=Re,e.reset=Fe,e.saveAllToDisk=Ce,e.toString=Oe,e.Extension=qe,Object.defineProperty(e,"__esModule",{value:!0})});
