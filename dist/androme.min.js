/* androme 1.10.1 https://github.com/anpham6/androme */ /* androme 1.10.1 https://github.com/anpham6/androme */(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.androme={})})(this,function(e){"use strict";var ye=Math.min,xe=Math.max;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n,r=0;r<t.length;r++)n=t[r],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function l(e,t){return d(e)||h(e,t)||c()}function o(e){return s(e)||u(e)||g()}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function d(e){if(Array.isArray(e))return e}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function h(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var l,o=e[Symbol.iterator]();!(i=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));i=!0);}catch(e){r=!0,a=e}finally{try{i||null==o["return"]||o["return"]()}finally{if(r)throw a}}return n}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function p(e){for(var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return e.sort(function(e,n){for(var r=0;r<i.length;r++){var a=i[r],l=B(e,n,a);if(l&&l[0]!==l[1])return 0===t?l[0]>l[1]?1:-1:l[0]<l[1]?1:-1}return 0})}function m(e,t){var n=[],i=[],r=!0,a=!1,l=void 0;try{for(var o,s,d=e[Symbol.iterator]();!(r=(o=d.next()).done);r=!0)s=o.value,t(s)?n.push(s):i.push(s)}catch(e){a=!0,l=e}finally{try{r||null==d.return||d.return()}finally{if(a)throw l}}return[n,i]}function E(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"-";e=e.replace(new RegExp("^".concat(t,"+")),"");var n=e.match(new RegExp("(".concat(t,"{1}[a-z]{1})"),"g"));if(n){var i=!0,r=!1,a=void 0;try{for(var l,o,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)o=l.value,e=e.replace(o,o[1].toUpperCase())}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}}return e}function f(e){return e?e.replace(/[^\w]/g,"_").trim():""}function y(e){var t=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function x(e){return e&&parseInt(e)||0}function T(e,t){var n=Math.round;if(S(e)){if(A(e))return"".concat(n(e),"px");var i=parseFloat(e);if(!isNaN(i)){var r=e.match(/(pt|em)/);if(r)switch(r[0]){case"pt":i*=4/3;break;case"em":i*=x(t)||16;}return"".concat(i,"px")}}return"0px"}function I(e,t){return(e&t)===t}function A(e){return /^-?[0-9]+(\.[0-9]+)?$/.test(e.toString().trim())}function v(e){return"string"==typeof e&&""!==e}function N(e){return!!v(e)&&/^-?[0-9\.]+(px|pt|em)$/.test(e.trim())}function L(e){return /^[0-9]+(\.[0-9]+)?%$/.test(e)}function R(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:",";return!!e&&e.split(n).map(function(e){return e.trim()}).includes(t)}function F(e,n,r){var a=!1,l=null;if("object"===t(e)){l=e;var o=n.split("."),s=0;do l=null==l[o[s]]?null:l[o[s]];while(null!=l&&++s<o.length&&"string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l);a=null!=l&&s===o.length}return"object"===r?a?l:null:"number"===r?a&&!isNaN(parseInt(l))?parseInt(l):0:"boolean"===r?a&&!0===l:a?l.toString():""}function C(e){if(!/^\w+:\/\//.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n,i=[],r=0;e.split("/").forEach(function(e){".."===e?r++:i.push(e)}),t=t.slice(0,xe(t.length-r,0)),(n=t).push.apply(n,i),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function O(e){return e?e.trim():""}function b(e,t){return e?w(D(e,t),t):""}function w(e,t){return e.replace(new RegExp("^".concat(t,"+"),"g"),"")}function D(e,t){return e.replace(new RegExp("".concat(t,"+$"),"g"),"")}function _(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"\t";return t.repeat(e)}function B(e,t,n){var i=n.split("."),r=e,a=t,l=!0,o=!1,s=void 0;try{for(var d,u,h=i[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)if(u=d.value,null!=r[u]&&null!=a[u])r=r[u],a=a[u];else return(null!=r[u]||null!=a[u])&&(null==r[u]?[0,1]:[1,0])}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}return isNaN(parseInt(r))&&isNaN(parseInt(a))?[r,a]:[x(r),x(a)]}function S(e){return"undefined"!=typeof e&&null!==e&&""!==e.toString().trim()}function G(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return p.apply(void 0,[e,0].concat(n))}function M(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return p.apply(void 0,[e,1].concat(n))}function P(e,t,n){e&&(e["__".concat(t)]=n)}function H(e,t){return e?e["__".concat(t)]:null}function z(e){if(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r,a=0;a<n.length;a++)r=n[a],delete e["__".concat(r)]}}function U(e){return H(e,"node")}function V(e){var t=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1];if(e){if(t){var n=U(e),i=H(e,"style");if(i)return i;if(n){if(n.style)return n.style;if(n.plainText)return n.styleMap}}if(e.nodeName&&"#"!==e.nodeName.charAt(0)){var r=getComputedStyle(e);return P(e,"style",r),r}}return{}}function X(e){var t=e.match(/^url\("?(.*?)"?\)$/);return t?C(t[1]):""}function Z(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return!!("#"!==e.nodeName.charAt(0)&&i.includes(V(e)[t]))||!!e.parentElement&&i.includes(V(e.parentElement)[t])}function W(e){function t(e){return a++===n||e.some(function(e){if("#text"===e.nodeName){if(Y(e,i)||Z(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return r=!0,!0;}else if(e instanceof HTMLElement&&0<e.childNodes.length)return t(Array.from(e.childNodes));return!1})}var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=!1,a=-1;return"#text"===e.nodeName?(n=0,t([e])):t(Array.from(e.childNodes)),r}function Y(e){var t=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];if(e&&"#text"===e.nodeName&&e.textContent){if(t){for(var n=e.textContent,r=!1,a=0;a<n.length;a++)switch(n.charCodeAt(a)){case 9:case 10:case 13:case 32:continue;default:r=!0;}return r&&""!==n}return""!==e.textContent.trim()}return!1}function Q(e){var t=!(1<arguments.length&&arguments[1]!==void 0)||arguments[1],n=U(e);return!!n&&("BR"===n.tagName||t&&n.block&&(n.excluded||""===n.textContent.trim()))}function q(e,t){var n=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2],i=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3];if(!e||e.parentElement===t.parentElement){var r=t.parentElement;if(r){var a=Array.from(r.childNodes),l=e?a.findIndex(function(t){return t===e}):0,o=a.findIndex(function(e){return e===t});if(-1!==l&&-1!==o&&l!==o){var s=a.slice(ye(l,o)+1,xe(l,o));return s=i?s.filter(function(e){return"#comment"!==e.nodeName}):s.filter(function(e){return"#"!==e.nodeName.charAt(0)||Y(e)}),n&&(s=s.filter(function(e){return U(e)})),s}}}return[]}function K(e){if(!H(e,"supportInline")){if(e instanceof HTMLElement){switch(e.tagName){case"BR":case"OPTION":case"MAP":case"AREA":return!1;}if("function"==typeof e.getBoundingClientRect){var t=e.getBoundingClientRect();if(0!==t.width&&0!==t.height||S(e.dataset.ext)||"none"!==V(e).clear)return!0;for(var n=e.parentElement,i=!0;n;){if("none"===V(n).display){i=!1;break}n=n.parentElement}if(i&&0<e.children.length)return Array.from(e.children).some(function(e){var t=V(e),n=t.cssFloat,i=t.position;return"static"!==i&&"initial"!==i||"left"===n||"right"===n})}return!1}return Y(e)}return!1}function $(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:":";return"{".concat(t+e.toString(),"}")}function J(e,t,n){var i=!!(3<arguments.length&&arguments[3]!==void 0)&&arguments[3],r="number"==typeof t?$(t):t;return e.replace(r,(i?r:"")+n+(i?"":r))}function ee(e,t){if(0<=t){var n=-1;return e.split("\n").map(function(e){var i=/^({.*?})(\t*)(<.*)/.exec(e);return i?(-1===n&&(n=i[2].length),i[1]+_(t+(i[2].length-n))+i[3]):e}).join("\n")}return e}function te(e,t,n){e/=255,t/=255,n/=255;var i=ye(e,t,n),a=xe(e,t,n),o=(a+i)/2,u=o,c=o;if(a===i)o=0,u=0;else{var l=a-i;u=.5<c?l/(2-a-i):l/(a+i);a===e?o=(t-n)/l+(t<n?6:0):a===t?o=(n-e)/l+2:a===n?o=(e-t)/l+4:void 0;o/=6}return{h:360*o,s:100*u,l:100*c}}function ne(e){for(var t in De)if(t.toLowerCase()===e.trim().toLowerCase())return De[t];return""}function ie(e){var t=e.rgb;return t?"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"):""}function re(e){return e=e.replace("#","").trim(),3===e.length&&(e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2)),6===e.length?{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16)}:null}function ae(){for(var e,t=!1,n=0;n<document.styleSheets.length;n++)if(e=document.styleSheets[n],e.cssRules)for(var r=0;r<e.cssRules.length;r++)try{(function(){for(var t,n=e.cssRules[r],i=new Set,a=Array.from(n.style),l=0;l<a.length;l++)t=a[l],i.add(E(t));Array.from(document.querySelectorAll(n.selectorText)).forEach(function(e){for(var t,r=Array.from(e.style),a=0;a<r.length;a++)t=r[a],i.add(E(t));var l=V(e),o={},s=!0,d=!1,u=void 0;try{for(var h,g,c=i[Symbol.iterator]();!(s=(h=c.next()).done);s=!0){if(g=h.value,-1!==g.toLowerCase().indexOf("color")){var p=ne(n.style[g]);""!==p&&(n.style[g]=ie(p))}var m=n.style[g];e.style[g]?o[g]=e.style[g]:l[g]===m?o[g]=l[g]:m&&("fontSize"===g?o[g]=l[g]:"width"===g||"height"===g||"lineHeight"===g||"verticalAlign"===g||"columnGap"===g||"top"===g||"right"===g||"bottom"===g||"left"===g||"marginTop"===g||"marginRight"===g||"marginBottom"===g||"marginLeft"===g||"paddingTop"===g||"paddingRight"===g||"paddingBottom"===g||"paddingLeft"===g?o[g]=/^[A-Za-z\-]+$/.test(m)||L(m)?m:T(m,l.fontSize):null==o[g]&&(o[g]=m))}}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}Se.settings.preloadImages&&S(o.backgroundImage)&&"initial"!==o.backgroundImage&&o.backgroundImage.split(",").map(function(e){return e.trim()}).forEach(function(e){var t=X(e);""===t||Me.has(t)||Me.set(t,{width:0,height:0,url:t})});var f=H(e,"styleMap");f?Object.assign(f,o):(P(e,"style",l),P(e,"styleMap",o))})})()}catch(n){t||(alert("External CSS files cannot be parsed when loading this program from your hard drive with Chrome 64+ (file://). Either use a local web server (http://), embed your CSS files into a <style> tag, or use a different browser. See the README for further instructions.\n\n"+"".concat(e.href,"\n\n").concat(n)),t=!0)}}function le(e){e&&S(e.src)&&Me.set(e.src,{width:e.naturalWidth,height:e.naturalHeight,url:e.src})}function oe(t){var n=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];if(ke!==t){var i=n?t.cached():t.create();if(e.settings=Se||0===Object.keys(e.settings).length?i.settings:Object.assign(i.settings,e.settings),Se=new be(i.framework),Se.settings=e.settings,Se.builtInExtensions=i.builtInExtensions,Se.nodeObject=i.nodeObject,Se.registerController(i.viewController),Se.registerResource(i.resourceHandler),Array.isArray(e.settings.builtInExtensions)){var r=new Set,a=Se.builtInExtensions,l=!0,o=!1,s=void 0;try{for(var d,u,h=e.settings.builtInExtensions[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)if(u=d.value,u=u.toLowerCase().trim(),a[u])r.add(a[u]);else for(var g in a)g.startsWith("".concat(u,"."))&&r.add(a[g])}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}var c=!0,p=!1,m=void 0;try{for(var E,f,y=r[Symbol.iterator]();!(c=(E=y.next()).done);c=!0)f=E.value,Se.registerExtension(f)}catch(e){p=!0,m=e}finally{try{c||null==y.return||y.return()}finally{if(p)throw m}}}ke=t,e.system=t.system}me()}function se(){function e(){Se.loading=!1,Se.settings.preloadImages&&o&&Array.from(o.getElementsByClassName("androme.preload")).forEach(function(e){return o.removeChild(e)}),Se.resourceHandler.imageDimensions=Me;var e=!0,n=!1,i=void 0;try{for(var r,a,l=Se.elements[Symbol.iterator]();!(e=(r=l.next()).done);e=!0){a=r.value,""===Se.appName?(""===a.id&&(a.id="untitled"),Se.appName=a.id):""===a.id&&(a.id="content_".concat(Se.size));var s=O(a.dataset.filename).replace(new RegExp(".".concat(Se.viewController.settingsInternal.layout.fileExtension,"$")),"")||a.id,d=x(a.dataset.iteration)+1;a.dataset.iteration=d.toString(),a.dataset.layoutName=f(1<d?"".concat(s,"_").concat(d):s),Se.initCache(a)&&(Se.createDocument(),Se.setConstraints(),Se.setResources(),Ge.add(a))}}catch(e){n=!0,i=e}finally{try{e||null==l.return||l.return()}finally{if(n)throw i}}"function"==typeof t&&t.call(Se)}if(Se&&!Se.closed){var t;Se.elements.clear(),Se.loading=!1,ae();for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];""===Se.appName&&0===i.length&&i.push(document.body);for(var a,l=0;l<i.length;l++)a=i[l],"string"==typeof a&&(a=document.getElementById(a)),a instanceof HTMLElement&&Se.elements.add(a);var o=Se.elements.values().next().value;if(Se.settings.preloadImages&&o){var s=!0,d=!1,u=void 0;try{for(var h,g,c=Me.values()[Symbol.iterator]();!(s=(h=c.next()).done);s=!0)if(g=h.value,0===g.width&&0===g.height&&g.url){var p=document.createElement("IMG");p.src=g.url,p.complete&&0<p.naturalWidth&&0<p.naturalHeight?(g.width=p.naturalWidth,g.height=p.naturalHeight):(p.className="androme.preload",p.style.display="none",o.appendChild(p))}}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}}var m=Array.from(Se.elements).map(function(e){var t=[];return Array.from(e.querySelectorAll("IMG")).forEach(function(e){e.complete?le(e):t.push(e)}),t}).reduce(function(e,t){return e.concat(t)},[]);if(0===m.length)e();else{Se.loading=!0;var E=m.map(function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})});Promise.all(E).then(function(t){Array.isArray(t)&&t.forEach(function(e){try{le(e.srcElement)}catch(e){}}),e()}).catch(function(t){var n=t.srcElement?t.srcElement.src:"";(!S(n)||confirm("FAIL: ".concat(n)))&&e()})}return{then:function(e){Se.loading?t=e:e()}}}}function de(e){Se&&e instanceof we&&v(e.name)&&Array.isArray(e.tagNames)&&Se.registerExtension(e)}function ue(e,n){if(Se){var i=Se.getExtension(e);i&&"object"===t(n)&&Object.assign(i.options,n)}}function he(e){return Se&&Se.getExtension(e)}function ge(e,n){if("object"===t(e))de(e);else if(v(e))if("object"===t(n))ue(e,n);else return he(e)}function ce(){return Se&&!Se.loading&&!Se.closed}function pe(){Se&&!Se.loading&&0<Se.size&&Se.finalize()}function me(){if(Se){var e=!0,t=!1,n=void 0;try{for(var i,r,a=Ge[Symbol.iterator]();!(e=(i=a.next()).done);e=!0)r=i.value,delete r.dataset.iteration,delete r.dataset.layoutName}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}Ge.clear(),Se.reset()}}function Ee(){Se&&!Se.loading&&0<Se.size&&(!Se.closed&&Se.finalize(),Se.resourceHandler.file.saveAllToDisk(Se.viewData))}function fe(){return Se?Se.toString():""}var Te;(function(e){e[e.UNIVERSAL=0]="UNIVERSAL",e[e.ANDROID=2]="ANDROID"})(Te||(Te={}));var Ie;(function(e){e[e.NONE=0]="NONE",e[e.INCLUDE=2]="INCLUDE",e[e.DOM_TRAVERSE=4]="DOM_TRAVERSE",e[e.EXTENSION=8]="EXTENSION",e[e.RENDER=16]="RENDER",e[e.ALL=30]="ALL"})(Ie||(Ie={}));var Ae;(function(e){e[e.NONE=0]="NONE",e[e.EXTENDABLE=2]="EXTENDABLE",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=8]="VERTICAL",e[e.ABSOLUTE=16]="ABSOLUTE",e[e.FLOAT=32]="FLOAT",e[e.SEGMENTED=64]="SEGMENTED",e[e.PERCENT=128]="PERCENT",e[e.TOP=256]="TOP",e[e.RIGHT=512]="RIGHT",e[e.BOTTOM=1024]="BOTTOM",e[e.LEFT=2048]="LEFT",e[e.SINGLE=4096]="SINGLE",e[e.MULTILINE=8192]="MULTILINE",e[e.SPACE=16384]="SPACE"})(Ae||(Ae={}));var ve;(function(e){e[e.NONE=0]="NONE",e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.OPTION_ARRAY=32]="OPTION_ARRAY",e[e.IMAGE_SOURCE=64]="IMAGE_SOURCE",e[e.ASSET=120]="ASSET",e[e.ALL=126]="ALL"})(ve||(ve={}));var Ne;(function(e){e[e.NONE=0]="NONE",e[e.LAYOUT=2]="LAYOUT",e[e.ALIGNMENT=4]="ALIGNMENT",e[e.AUTOFIT=8]="AUTOFIT",e[e.OPTIMIZATION=16]="OPTIMIZATION",e[e.CUSTOMIZATION=32]="CUSTOMIZATION",e[e.ACCESSIBILITY=64]="ACCESSIBILITY",e[e.ALL=126]="ALL"})(Ne||(Ne={}));var Le;(function(e){e[e.NONE=0]="NONE",e[e.CHECKBOX=1]="CHECKBOX",e[e.RADIO=2]="RADIO",e[e.EDIT=3]="EDIT",e[e.SELECT=4]="SELECT",e[e.RANGE=5]="RANGE",e[e.TEXT=6]="TEXT",e[e.IMAGE=7]="IMAGE",e[e.BUTTON=8]="BUTTON",e[e.INLINE=9]="INLINE",e[e.LINE=10]="LINE",e[e.SPACE=11]="SPACE",e[e.BLOCK=12]="BLOCK",e[e.WEB_VIEW=13]="WEB_VIEW",e[e.FRAME=14]="FRAME",e[e.LINEAR=15]="LINEAR",e[e.RADIO_GROUP=16]="RADIO_GROUP",e[e.GRID=17]="GRID",e[e.RELATIVE=18]="RELATIVE",e[e.CONSTRAINT=19]="CONSTRAINT",e[e.SCROLL_HORIZONTAL=20]="SCROLL_HORIZONTAL",e[e.SCROLL_VERTICAL=21]="SCROLL_VERTICAL"})(Le||(Le={}));var Re,Fe=/*#__PURE__*/function(){function e(t,i){n(this,e),this.parent=i,this._currentId=0,this._list=[],Array.isArray(t)&&(this._list=t)}return a(e,[{key:Symbol.iterator,value:function(){var e=this._list,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"reset",value:function(){this._currentId=0,this.clear()}},{key:"get",value:function(e){return null==e?this._list[this._list.length-1]:this._list[e]}},{key:"append",value:function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];(e=this._list).push.apply(e,n),"function"==typeof this.delegateAppend&&this.delegateAppend.call(this,n)}},{key:"prepend",value:function(){var e;(e=this._list).unshift.apply(e,arguments)}},{key:"remove",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._list.splice(e,t)}},{key:"clone",value:function(){return new e(this._list.slice())}},{key:"filter",value:function(t){return new e(this._list.filter(t))}},{key:"sort",value:function(t){return new e(this._list.slice().sort(t))}},{key:"partition",value:function(t){var n=m(this._list,t),i=l(n,2),r=i[0],a=i[1];return[new e(r),new e(a)]}},{key:"each",value:function(e){this._list.forEach(e)}},{key:"locate",value:function(e,t){return"string"==typeof e?this._list.find(function(n){return n[e]===t}):this._list.find(e)}},{key:"clear",value:function(){this._list.length=0}},{key:"sortAsc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return G.apply(void 0,[this._list].concat(t)),this}},{key:"sortDesc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return M.apply(void 0,[this._list].concat(t)),this}},{key:"length",get:function(){return this._list.length}},{key:"list",get:function(){return this._list}},{key:"visible",get:function(){return new e(this._list.filter(function(e){return e.visible}))}},{key:"elements",get:function(){return new e(this._list.filter(function(e){return e.visible&&e.hasElement}))}},{key:"nextId",get:function(){return++this._currentId}},{key:"linearX",get:function(){return e.linearX(this._list)}},{key:"linearY",get:function(){return e.linearY(this._list)}}],[{key:"siblingIndex",value:function(e,t){return e.siblingIndex<=t.siblingIndex?-1:1}},{key:"outerRegion",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear",n=[],r=[],a=[],l=[],o=e.slice(),s=!0,d=!1,u=void 0;try{for(var h,g,c=e[Symbol.iterator]();!(s=(h=c.next()).done);s=!0)g=h.value,g.companion&&o.push(g.companion)}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}for(var p,m=0;m<o.length;m++)p=o[m],0==m?(n.push(p),r.push(p),a.push(p),l.push(p)):(n[0][t].top===p[t].top?n.push(p):p[t].top<n[0][t].top&&(n=[p]),r[0][t].right===p[t].right?r.push(p):p[t].right>r[0][t].right&&(r=[p]),a[0][t].bottom===p[t].bottom?a.push(p):p[t].bottom>a[0][t].bottom&&(a=[p]),l[0][t].left===p[t].left?l.push(p):p[t].left<l[0][t].left&&(l=[p]));return{top:n,right:r,bottom:a,left:l}}},{key:"floated",value:function(e){return new Set(e.map(function(e){return e.float}).filter(function(e){return"none"!==e}))}},{key:"cleared",value:function(e){var t=new Map,n=new Set;return e.forEach(function(e){if(e.siblingflow){var i=e.css("clear");0<n.size&&("both"===i?(t.set(e,2===n.size?"both":n.values().next().value),n.clear()):n.has(i)&&(n.delete(i),t.set(e,i))),e.floating&&n.add(e.float)}}),t}},{key:"textBaseline",value:function(e){var t=[];if(!e.some(function(e){return(e.textElement||e.imageElement)&&e.baseline}))t=e.filter(function(e){return e.baseline}).sort(function(e,t){var n=e.nodeType,i=t.nodeType;return e.layoutHorizontal&&(n=ye.apply(null,e.children.map(function(e){return 0<e.nodeType?e.nodeType:Le.INLINE}))),t.layoutHorizontal&&(i=ye.apply(null,t.children.map(function(e){return 0<e.nodeType?e.nodeType:Le.INLINE}))),n<=i?-1:1});else{var n=xe.apply(null,e.map(function(e){return e.lineHeight})),i=xe.apply(null,e.map(function(e){return e.bounds.height}));if(n>i){var r=e.filter(function(e){return e.lineHeight===n});return(r.length===e.length?r.filter(function(e){return e.hasElement}):r).filter(function(e){return e.baseline})}t=e.filter(function(e){return e.baselineInside}).sort(function(e,t){var n=x(e.css("fontSize")),i=x(t.css("fontSize")),r=e.bounds.height,a=t.bounds.height;return e.imageElement&&t.imageElement?r>=a?-1:1:e.nodeType!==t.nodeType&&(e.nodeType<Le.TEXT||t.nodeType<Le.TEXT)?e.textElement||e.imageElement?-1:t.textElement||t.imageElement?1:e.nodeType<t.nodeType?-1:1:e.lineHeight>a&&0===t.lineHeight||t.imageElement?-1:t.lineHeight>r&&0===e.lineHeight||e.imageElement?1:n===i&&r===a?e.hasElement&&!t.hasElement?-1:!e.hasElement&&t.hasElement?1:e.siblingIndex<=t.siblingIndex?-1:1:n!==i&&0!==n&&0!==i?n>i?-1:1:r>=a?-1:1})}var a,l,o;return t.filter(function(e,n){return 0===n?(a=e.css("fontFamily"),l=e.css("fontSize"),o=e.css("fontWeight"),!0):e.css("fontFamily")===a&&e.css("fontSize")===l&&e.css("fontWeight")===o&&e.nodeName===t[0].nodeName&&(0<e.lineHeight&&e.lineHeight===t[0].lineHeight||e.bounds.height===t[0].bounds.height)})}},{key:"linearX",value:function(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=t.filter(function(e){return e.pageflow});switch(i.length){case 0:return!1;case 1:return!0;default:var r=this.documentParent(i),a=!1;if(n&&i.every(function(e){return e.documentParent===r||e.companion&&e.companion.documentParent===r})){var l=e.cleared(Array.from(r.baseElement.children).map(function(e){return U(e)}).filter(function(e){return e}));a=i.slice().sort(e.siblingIndex).every(function(e,t){if(0<t){e.companion&&e.companion.documentParent===r&&(e=e.companion);var n=e.previousSibling();if(n)return!e.alignedVertically(n,l)}return!0})}return(a||!n)&&i.every(function(e){return!i.some(function(t){return!!(t!==e&&e.linear.top>=t.linear.bottom&&e.intersectY(t.linear))})});}}},{key:"linearY",value:function(t){var n=t.filter(function(e){return e.pageflow});switch(n.length){case 0:return!1;case 1:return!0;default:var i=this.documentParent(n);if(n.every(function(e){return e.documentParent===i||e.companion&&e.companion.documentParent===i})){var r=e.cleared(Array.from(i.baseElement.children).map(function(e){return U(e)}).filter(function(e){return e}));return n.slice().sort(e.siblingIndex).every(function(e,t){if(0<t&&!e.lineBreak){e.companion&&e.companion.documentParent===i&&(e=e.companion);var n=e.previousSibling();if(n)return e.alignedVertically(n,r)}return!0})}return!1;}}},{key:"documentParent",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0)if(a=r.value,!a.companion&&a.domElement)return a.documentParent}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}return e[0].documentParent}}]),e}();(function(e){e[e.MARGIN_TOP=2]="MARGIN_TOP",e[e.MARGIN_RIGHT=4]="MARGIN_RIGHT",e[e.MARGIN_BOTTOM=8]="MARGIN_BOTTOM",e[e.MARGIN_LEFT=16]="MARGIN_LEFT",e[e.PADDING_TOP=32]="PADDING_TOP",e[e.PADDING_RIGHT=64]="PADDING_RIGHT",e[e.PADDING_BOTTOM=128]="PADDING_BOTTOM",e[e.PADDING_LEFT=256]="PADDING_LEFT",e[e.MARGIN=30]="MARGIN",e[e.MARGIN_VERTICAL=10]="MARGIN_VERTICAL",e[e.MARGIN_HORIZONTAL=20]="MARGIN_HORIZONTAL",e[e.PADDING=480]="PADDING",e[e.PADDING_VERTICAL=160]="PADDING_VERTICAL",e[e.PADDING_HORIZONTAL=320]="PADDING_HORIZONTAL"})(Re||(Re={}));var Ce;(function(e){e[e.NONE=0]="NONE",e[e.UNIT=2]="UNIT",e[e.AUTO=4]="AUTO",e[e.LEFT=8]="LEFT",e[e.BASELINE=16]="BASELINE",e[e.PERCENT=32]="PERCENT",e[e.ZERO=64]="ZERO"})(Ce||(Ce={}));var Oe={INPUT:Le.NONE,PLAINTEXT:Le.TEXT,HR:Le.LINE,IMG:Le.IMAGE,SELECT:Le.SELECT,RANGE:Le.RANGE,TEXT:Le.EDIT,PASSWORD:Le.EDIT,NUMBER:Le.EDIT,EMAIL:Le.EDIT,SEARCH:Le.EDIT,URL:Le.EDIT,CHECKBOX:Le.CHECKBOX,RADIO:Le.RADIO,BUTTON:Le.BUTTON,SUBMIT:Le.BUTTON,RESET:Le.BUTTON,TEXTAREA:Le.EDIT,IFRAME:Le.WEB_VIEW},be=/*#__PURE__*/function(){function e(t){n(this,e),this.framework=t,this.renderQueue={},this.loading=!1,this.closed=!1,this.cache=new Fe,this.cacheSession=new Fe,this.elements=new Set,this.extensions=[],this._sorted={},this._currentIndex=-1,this._views=[],this._includes=[]}return a(e,[{key:"registerController",value:function(e){e.application=this,e.settings=this.settings,e.cache=this.cache,this.viewController=e}},{key:"registerResource",value:function(e){e.application=this,e.settings=this.settings,e.cache=this.cache,this.resourceHandler=e}},{key:"registerExtension",value:function(e){var t=this,n=this.getExtension(e.name);n?(Array.isArray(e.tagNames)&&(n.tagNames=e.tagNames),Object.assign(n.options,e.options)):(0===e.framework||I(e.framework,this.framework))&&e.dependencies.every(function(e){return!!t.getExtension(e.name)})&&(e.application=this,this.extensions.push(e))}},{key:"finalize",value:function(){var e=this.cacheSession.visible.list.filter(function(e){return!e.hasAlign(Ae.SPACE)}),t=!0,n=!1,i=void 0;try{for(var r,a,l=e[Symbol.iterator]();!(t=(r=l.next()).done);t=!0)a=r.value,a.hasBit("excludeProcedure",Ne.LAYOUT)||a.setLayout(),a.hasBit("excludeProcedure",Ne.ALIGNMENT)||a.setAlignment(this.settings)}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}var o=!0,s=!1,d=void 0;try{for(var u,h,g=e[Symbol.iterator]();!(o=(u=g.next()).done);o=!0)h=u.value,h.hasBit("excludeProcedure",Ne.OPTIMIZATION)||h.applyOptimizations(this.settings),h.hasBit("excludeProcedure",Ne.CUSTOMIZATION)||h.applyCustomizations(this.settings)}catch(e){s=!0,d=e}finally{try{o||null==g.return||g.return()}finally{if(s)throw d}}this.viewController.setBoxSpacing(this.viewData),this.appendRenderQueue(),this.viewController.setDimensions(this.viewData),this.resourceHandler.finalize(this.viewData),this.viewController.finalize(this.viewData);var c=!0,p=!1,m=void 0;try{for(var E,f=this.extensions[Symbol.iterator]();!(c=(E=f.next()).done);c=!0){var y=E.value,x=!0,T=!1,I=void 0;try{for(var A,v,N=y.subscribers[Symbol.iterator]();!(x=(A=N.next()).done);x=!0)v=A.value,y.setTarget(v),y.finalize()}catch(e){T=!0,I=e}finally{try{x||null==N.return||N.return()}finally{if(T)throw I}}}}catch(e){p=!0,m=e}finally{try{c||null==f.return||f.return()}finally{if(p)throw m}}this.closed=!0}},{key:"reset",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r,a=this.cacheSession[Symbol.iterator]();!(e=(i=a.next()).done);e=!0)r=i.value,z(r.element,"node","style","styleMap","supportInline","boxSpacing","boxStyle","fontStyle","imageSource","optionArray","valueString")}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}this.cache.reset(),this.cacheSession.reset(),this.resetController(),this.resetResource(),this._views.length=0,this._includes.length=0,this._sorted={},this._currentIndex=-1,this.appName="",this.renderQueue={};var l=!0,o=!1,s=void 0;try{for(var d,u,h=this.extensions[Symbol.iterator]();!(l=(d=h.next()).done);l=!0)u=d.value,u.subscribers.clear(),u.subscribersChild.clear()}catch(e){o=!0,s=e}finally{try{l||null==h.return||h.return()}finally{if(o)throw s}}this.closed=!1}},{key:"setConstraints",value:function(){this.viewController.setConstraints()}},{key:"resetController",value:function(){this.viewController.reset()}},{key:"setResources",value:function(){this.resourceHandler.setBoxStyle(),this.resourceHandler.setFontStyle(),this.resourceHandler.setBoxSpacing(),this.resourceHandler.setValueString(),this.resourceHandler.setOptionArray(),this.resourceHandler.setImageSource()}},{key:"resetResource",value:function(){this.resourceHandler.reset()}},{key:"initCache",value:function(e){function t(e){var t=H(e,"styleMap");return(!t||0===Object.keys(t).length)&&0===e.children.length&&c.includes(e.tagName)}var n=this,i=0;e===document.body&&Array.from(document.body.childNodes).some(function(e){return K(e)&&1<++i});var r=e===document.body?document.querySelectorAll(1<i?"body, body *":"body *"):e.querySelectorAll("*");this.cache.parent=void 0,this.cache.delegateAppend=void 0,this.cache.clear();var a=!0,l=!1,s=void 0;try{for(var d,u,h=this.extensions[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)u=d.value,u.setTarget({},void 0,e),u.beforeInit()}catch(e){l=!0,s=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw s}}var g=this.insertNode(e);if(g)g.parent=new this.nodeObject(0,(e===document.body?e:e.parentElement)||document.body),g.documentRoot=!0,this.viewController.initNode(g),this.cache.parent=g;else return!1;for(var c=this.settings.renderInlineText?["BR"]:this.viewController.supportInline,p=Array.from(r),m=function(){var i=p[E];if(!n.elements.has(i)&&(n.prioritizeExtensions(n.extensions,i).some(function(e){return e.init(i)}),!n.elements.has(i))){t(i)&&i.parentElement&&Array.from(i.parentElement.children).every(function(e){return t(e)})&&P(i,"supportInline",!0);for(var r=!0,a=i.parentElement;a&&a!==e;){if(a!==e&&n.elements.has(a)){r=!1;break}a=a.parentElement}if(r){var l=H(i,"styleMap");switch(l||(l={},P(i,"styleMap",l)),i.tagName){case"SELECT":null==l.verticalAlign&&1<i.size&&(l.verticalAlign="text-bottom");}n.insertNode(i)}}},E=0;E<p.length;E++)m();if(0<this.cache.length){var f=!0,y=!1,x=void 0;try{for(var T,I=function(){var e=T.value,t=[],i=!1;Array.from(e.element.childNodes).forEach(function(n){if("#text"===n.nodeName)"SELECT"!==e.tagName&&t.push(n);else if("BR"!==n.tagName){var r=U(n);c.includes(n.tagName)&&(!r||r.excluded)||(i=!0)}}),i&&t.forEach(function(t){return n.insertNode(t,e)})},A=this.cache[Symbol.iterator]();!(f=(T=A.next()).done);f=!0)I()}catch(e){y=!0,x=e}finally{try{f||null==A.return||A.return()}finally{if(y)throw x}}var v={},N=[],L=!0,R=!1,F=void 0;try{for(var C,O=function(){var e=C.value;if(e.hasElement){var t=e.element,n=e.css("textAlign");v[e.id]={};var i=v[e.id];["right","end","BUTTON"!==t.tagName&&"button"!==t.type?"center":""].some(function(e){return e===n&&(i.textAlign=e,t.style.textAlign="left",!0)}),0>e.marginLeft&&(i.marginLeft=e.css("marginLeft"),t.style.marginLeft="0px"),0>e.marginTop&&(i.marginTop=e.css("marginTop"),t.style.marginTop="0px"),"relative"===e.position&&["top","right","bottom","left"].forEach(function(n){e.has(n)&&(i[n]=e.styleMap[n],t.style[n]="auto")}),(e.overflowX||e.overflowY)&&(e.has("width")&&(i.width=e.styleMap.width,t.style.width="auto"),e.has("height")&&(i.height=e.styleMap.height,t.style.height="auto"),i.overflow=e.style.overflow||"",t.style.overflow="visible"),"rtl"===t.dir&&(t.dir="ltr",N.push(t)),e.setBounds()}e.setMultiLine()},b=this.cache[Symbol.iterator]();!(L=(C=b.next()).done);L=!0)O()}catch(e){R=!0,F=e}finally{try{L||null==b.return||b.return()}finally{if(R)throw F}}var w=!0,D=!1,_=void 0;try{for(var B,S,k=this.cache[Symbol.iterator]();!(w=(B=k.next()).done);w=!0){if(S=B.value,S.hasElement){var G=S.element,M=v[S.id];if(M){for(var z in M)G.style[z]=M[z];N.includes(G)&&(G.dir="rtl")}}if(1===S.children.length){var V=S.children[0];V.pageflow||0!==V.toInt("top")||0!==V.toInt("right")||0!==V.toInt("bottom")||0!==V.toInt("left")||(V.pageflow=!0)}}}catch(e){D=!0,_=e}finally{try{w||null==k.return||k.return()}finally{if(D)throw _}}var X=!0,Z=!1,W=void 0;try{for(var Y,j,Q=this.cache[Symbol.iterator]();!(X=(Y=Q.next()).done);X=!0)if(j=Y.value,!j.documentRoot){var q=j.getParentElementAsNode(this.settings.supportNegativeLeftTop,this.cache.parent);q||j.pageflow||(q=this.cache.parent),q?(j.parent=q,j.documentParent=q):j.hide()}}catch(e){Z=!0,W=e}finally{try{X||null==Q.return||Q.return()}finally{if(Z)throw W}}var $=!0,J=!1,ee=void 0;try{for(var te,ne=function(){var e,t=te.value,n=0;Array.from(t.element.childNodes).forEach(function(e){var t=U(e);t&&!t.excluded&&t.pageflow&&(t.siblingIndex=n++)}),t.children.sort(Fe.siblingIndex),(e=t.initial.children).push.apply(e,o(t.children.slice()))},ie=this.cache.elements[Symbol.iterator]();!($=(te=ie.next()).done);$=!0)ne()}catch(e){J=!0,ee=e}finally{try{$||null==ie.return||ie.return()}finally{if(J)throw ee}}this.cache.sortAsc("depth","id");var re=!0,ae=!1,le=void 0;try{for(var oe,se,de=this.extensions[Symbol.iterator]();!(re=(oe=de.next()).done);re=!0)se=oe.value,se.setTarget(g),se.afterInit()}catch(e){ae=!0,le=e}finally{try{re||null==de.return||de.return()}finally{if(ae)throw le}}return this.createLayout(e.dataset.layoutName),!0}return!1}},{key:"createDocument",value:function(){var n=Math.floor;function e(e,t,n){u.has(e)||u.set(e,new Map);var i=u.get(e);i&&i.set(t,n)}function t(e){var t=!0,n=!1,i=void 0;try{for(var r,a=u.values()[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var l=r.value,o=!0,s=!1,d=void 0;try{for(var h,g,c=l.values()[Symbol.iterator]();!(o=(h=c.next()).done);o=!0)if(g=h.value,g.id===e)return void l.delete(g.id)}catch(e){s=!0,d=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw d}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}var r,a=this,s=this,d=[],u=new Map,h=this.viewController.baseTemplate,g=!0;e(-1,0,this.cache.parent.parent);var c=0,p=!0,m=!1,E=void 0;try{for(var f,y=this.cache.visible[Symbol.iterator]();!(p=(f=y.next()).done);p=!0){var T=f.value,I=n(T.linear.left);null==d[T.depth]&&(d[T.depth]={}),null==d[T.depth][I]&&(d[T.depth][I]=[]),d[T.depth][I].push(T),e(T.depth,T.id,T),c=xe(T.depth,c)}}catch(e){m=!0,E=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw E}}for(var x=0;x<c;x++)u.set(-1*x-2,new Map);this.cache.delegateAppend=function(n){n.forEach(function(n){t(n.id),e(-1*n.initial.depth-2,n.id,n),n.cascade().forEach(function(n){t(n.id),e(-1*n.initial.depth-2,n.id,n)})})};var A=!0,v=!1,N=void 0;try{for(var L,R=function(){function e(e,t,n,i,r){var a=n+(""===r&&-1!==t.renderPosition?":".concat(t.renderPosition):"");e.has(a)||e.set(a,new Map);var l=e.get(a);l&&l.set(t.id,i)}function t(t,n,a){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4];if(""!==a)if(o&&t.each(function(n){[i,r].some(function(r){var a=!0,o=!1,s=void 0;try{for(var d,u=i.values()[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var h=d.value,g=h.get(n.id);if(g){var c=t.renderDepth+1;return n.renderDepth!==c&&(g=ee(g,c),n.renderDepth=c),e(r,n,t.id.toString(),g,l),h.delete(n.id),!0}}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return!1})}),""!==l)e(r,t,l,a,l);else{if(!s.elements.has(t.element))if(S(t.dataset.target)){var d=document.getElementById(t.dataset.target);if(d&&d!==n.element)return s.addRenderQueue(t.dataset.target,[a]),void(t.auto=!1)}else if(S(n.dataset.target)){var u=document.getElementById(n.dataset.target);if(u)return s.addRenderQueue(n.nodeId,[a]),void(t.dataset.target=n.nodeId)}e(i,t,n.id.toString(),a,l)}}var n=L.value,i=new Map,r=new Map,c=!0,p=!1,m=void 0;try{for(var E,f,y=function(){var e=E.value;if(0===e.children.length||e.renderAs)return"continue";var n=[],i=[],r=[],l=[],s=!0,h=!1,g=void 0;try{for(var c,p,m=e.children[Symbol.iterator]();!(s=(c=m.next()).done);s=!0)p=c.value,p.documentRoot?n.push(p):p.pageflow||p.alignOrigin?r.push(p):0<=p.toInt("zIndex")||p.parent.element!==p.element.parentElement?l.push(p):i.push(p)}catch(e){h=!0,g=e}finally{try{s||null==m.return||m.return()}finally{if(h)throw g}}a.sortByAlignment(r,e),n.push.apply(n,o(G(i,"style.zIndex","id"))),n.push.apply(n,r),n.push.apply(n,o(G(l,"style.zIndex","id")));for(var f,y=Fe.cleared(n),x=[],T="",I=-1,A=function(){var e=n[I];if(!e.visible||!e.documentRoot&&a.elements.has(e.element))return"continue";var i=e.parent;if(!e.hasBit("excludeSection",Ie.INCLUDE)&&a.viewController.supportInclude){var r=O(e.dataset.include);if(""!==r&&-1===x.indexOf(r)&&(t(e,i,a.viewController.renderInclude(e,i,r),0<x.length?x[x.length-1]:""),x.push(r)),T=0<x.length?x[x.length-1]:"",""!==T){var s=i.clone();s.renderDepth=a.viewController.baseRenderDepth(T),e.parent=s,i=s}}if(e.renderAs&&(i.remove(e),e.hide(),e=e.renderAs),!e.hasBit("excludeSection",Ie.DOM_TRAVERSE)&&1<n.length&&I<n.length-1){var h=i.linearVertical;if(e.pageflow&&""===T&&!i.flex.enabled&&!i.has("columnCount")&&!i.is(Le.GRID)&&(e.alignmentType===Ae.NONE&&i.alignmentType===Ae.NONE||e.hasAlign(Ae.EXTENDABLE))){var g=[],c=[],p=new Set(["left","right"]),E=!1,f=I,A=0;e.hasAlign(Ae.EXTENDABLE)&&(g.push(e),f++,A++);forloop1:for(;f<n.length;f++,A++){var v=n[f];if(v.pageflow){if(y.has(v)){var N=y.get(v);"both"===N?p.clear():p.delete(N)}v.floating&&p.add(v.float);var L=v.previousSibling(),R=v.nextSibling(!0);if(0===A&&R)v.blockStatic||R.alignedVertically(v,y,!0)?c.push(v):g.push(v);else if(L){var C=function(){var e=Fe.floated(g.concat(c)),t=g.concat(c,[v]),n=Fe.cleared(t),i=new Map;n.has(L)&&i.set(L,L.css("clear"));var r=v.alignedVertically(L,i);if(r||n.has(v)||a.settings.floatOverlapDisabled&&L.floating&&v.blockStatic&&2===p.size){if(0<g.length){if(!a.settings.floatOverlapDisabled&&!L.lineBreak){var l=new Set(t.map(function(e){return n.get(e)||""}).filter(function(e){return""!==e})),o=null;if(0<e.size&&(o=xe.apply(null,g.filter(function(e){return e.floating}).map(function(e){return e.bounds.bottom}))),0<p.size&&!l.has("both")&&(null==o||v.bounds.top<o)){if(n.has(v)){var s=n.has(v)?n.get(v):"none";if("none"!==s){if(2>p.size&&2===e.size&&!v.floating)return v.alignmentType|=Ae.EXTENDABLE,E=!0,g.push(v),"continue";}else if(2>e.size&&(!v.floating||!e.has(v.float)||v.float===g[g.length-1].float))return g.push(v),"continue";return"break|forloop1"}if(!r)return g.push(v),"continue";if(1===e.size&&(!v.floating||p.has(v.float)))return g.push(v),"continue"}}return"break|forloop1"}if(h&&0<c.length){var d=c[c.length-1];if(d.linearVertical)return v.parent=d,"continue"}c.push(v)}else{if(0<c.length||E)return"break|forloop1";g.push(v)}}();switch(C){case"continue":continue;case"break|forloop1":break forloop1;}}else break forloop1}}var b=null,w="";if(1<g.length){var D=Fe.cleared(g);if(a.isFrameHorizontal(g,D))b=a.viewController.createGroup(i,e,g),w=a.writeFrameLayoutHorizontal(b,i,g,D);else if(g.length===n.length)i.alignmentType|=Ae.HORIZONTAL;else{var _=Fe.floated(g);1===_.size&&g.some(function(e){return e.has("width",Ce.PERCENT)})&&g.every(function(e){return e.has("width",Ce.UNIT|Ce.PERCENT)})?(b=a.viewController.createGroup(i,e,g),w=a.writeConstraintLayout(b,i),b.alignmentType|=Ae.PERCENT):a.isRelativeHorizontal(g,D)?(b=a.viewController.createGroup(i,e,g),w=a.writeRelativeLayout(b,i),b.alignmentType|=Ae.HORIZONTAL):(b=a.viewController.createGroup(i,e,g),w=a.writeLinearLayout(b,i,!0),0<_.size?(b.alignmentType|=Ae.FLOAT,b.alignmentType|=g.every(function(e){return"right"===e.float||e.autoMarginLeft})?Ae.RIGHT:Ae.LEFT):b.alignmentType|=Ae.HORIZONTAL)}}else if(1<c.length){var B=Fe.floated(c),k=Fe.cleared(c);if(0<B.size&&0<k.size&&!(1===B.size&&c.slice(1,c.length-1).every(function(e){return k.has(e)}))?i.linearVertical?(b=e,w=a.writeFrameLayoutVertical(null,i,c,k)):(b=a.viewController.createGroup(i,e,c),w=a.writeFrameLayoutVertical(b,i,c,k)):c.length===n.length?i.alignmentType|=Ae.VERTICAL:!h&&(b=a.viewController.createGroup(i,e,c),w=a.writeLinearLayout(b,i,!1),b.alignmentType|=Ae.VERTICAL),c.length!==n.length){var G=c[c.length-1];G.blockStatic||G===n[n.length-1]||(G.alignmentType|=Ae.EXTENDABLE)}}b&&(t(b,i,w,"",!0),i=e.parent),e.hasAlign(Ae.EXTENDABLE)&&(e.alignmentType^=Ae.EXTENDABLE)}}if(!e.hasBit("excludeSection",Ie.EXTENSION)&&!e.rendered){var M=!1;forloop2:{var P=[],H=!0,z=!1,U=void 0;try{for(var V,X,Z=a.extensions[Symbol.iterator]();!(H=(V=Z.next()).done);H=!0)X=V.value,X.subscribersChild.has(e)&&P.push(X)}catch(e){z=!0,U=e}finally{try{H||null==Z.return||Z.return()}finally{if(z)throw U}}for(var Y,j=o(i.renderExtension).concat(P),K=0;K<j.length;K++){Y=j[K],Y.setTarget(e,i);var $=Y.processChild();if(""!==$.output&&t(e,i,$.output,T),$.parent&&(i=$.parent),M=$.next||!1,$.complete||$.next)break forloop2}}if(M)return"continue";if(e.element instanceof HTMLElement){var J=[];if(a.prioritizeExtensions(a.extensions,e.element).some(function(n){if(n.is(e)&&(n.setTarget(e,i),n.condition())){var r=n.processNode(d,u);if(""!==r.output&&t(e,i,r.output,T),r.parent&&(i=r.parent),(""!==r.output||r.include)&&J.push(n),M=r.next||!1,r.complete||r.next)return!0}return!1}),0<J.length)for(var ee,te=0;te<J.length;te++)ee=J[te],ee.subscribers.add(e),e.renderExtension.add(ee);if(M)return"continue"}}if(!e.hasBit("excludeSection",Ie.RENDER)&&!e.rendered){var ne="";if(e.alignmentType===Ae.NONE&&e.has("width",Ce.PERCENT,{not:"100%"})&&!e.imageElement&&(i.linearVertical||i.is(Le.FRAME)&&e.singleChild)){var ie=a.viewController.createGroup(i,e,[e]),re=a.writeGridLayout(ie,i,2,1);ie.alignmentType|=Ae.PERCENT,t(ie,i,re,T),a.viewController["right"===e.float||e.autoMarginLeft?"prependBefore":"appendAfter"](e.id,a.getEmptySpacer(Le.GRID,ie.renderDepth+1,"".concat(100-e.toInt("width"),"%"))),i=ie}if(""===e.controlName){var ae=0<e.borderTopWidth||0<e.borderBottomWidth||0<e.borderRightWidth||0<e.borderLeftWidth,le=/url(.*?)/.test(e.css("backgroundImage")),oe=e.has("backgroundColor"),se=ae||le||oe;if(0===e.children.length){var de=W(e.element,a.settings.renderInlineText?0:1);de||ae&&0<e.textContent.length?ne=a.writeNode(e,i,Le.TEXT):le&&"no-repeat"===e.css("backgroundRepeat")&&(!e.inlineText||0>e.toInt("textIndent")+e.bounds.width)?(e.alignmentType|=Ae.SINGLE,e.excludeResource|=ve.FONT_STYLE|ve.VALUE_STRING,ne=a.writeNode(e,i,Le.IMAGE)):e.block&&(oe||le)&&(ae||0<e.paddingTop+e.paddingRight+e.paddingRight+e.paddingLeft)?ne=a.writeNode(e,i,Le.LINE):!e.documentRoot&&(!a.settings.collapseUnattributedElements||0!==e.bounds.height||S(e.element.id)||S(e.dataset.ext)||se?se?ne=a.writeNode(e,i,Le.TEXT):ne=a.writeFrameLayout(e,i):(i.remove(e),e.hide()))}else if(e.flex.enabled||e.children.some(function(e){return!e.pageflow})||e.has("columnCount"))ne=a.writeConstraintLayout(e,i);else if(1===e.children.length){var ue=e.children.filter(function(e){if(S(e.dataset.target)){var t=document.getElementById(e.dataset.target);return t&&S(t.dataset.ext)&&t!==i.element}return!1});if(a.settings.collapseUnattributedElements&&!e.documentRoot&&!S(e.element.id)&&!S(e.dataset.ext)&&!S(e.dataset.target)&&0===e.toInt("width")&&0===e.toInt("height")&&!se&&!e.has("textAlign")&&!e.has("verticalAlign")&&"right"!==e.float&&!e.autoMargin&&e.alignOrigin&&!a.viewController.hasAppendProcessing(e.id)||e.documentRoot&&1===ue.length){var he=e.children[0];return he.documentRoot=e.documentRoot,he.siblingIndex=e.siblingIndex,0!==i.id&&(he.parent=i),0===ue.length&&(e.resetBox(Re.MARGIN,he,!0),he.modifyBox(Re.MARGIN_TOP,e.paddingTop),he.modifyBox(Re.MARGIN_RIGHT,e.paddingRight),he.modifyBox(Re.MARGIN_BOTTOM,e.paddingBottom),he.modifyBox(Re.MARGIN_LEFT,e.paddingLeft)),e.hide(),n[I]=he,I--,"continue"}ne=a.writeFrameLayout(e,i)}else{var ge=e.children,ce=[Fe.linearX(ge),Fe.linearY(ge)],pe=ce[0],me=ce[1],Ee=Fe.cleared(ge),fe=ge.every(function(e){return e.pageflow&&e.inlineElement});if(!i.flex.enabled&&ge.every(function(e){return e.pageflow})){var ye=Fe.floated(ge);pe&&0===Ee.size?(0===ye.size&&ge.every(function(e){return 0===e.toInt("verticalAlign")})&&(ge.some(function(e){return["text-top","text-bottom"].includes(e.css("verticalAlign"))})?(ne=a.writeConstraintLayout(e,i),e.alignmentType|=Ae.HORIZONTAL):a.isRelativeHorizontal(ge)&&(ne=a.writeRelativeLayout(e,i),e.alignmentType|=Ae.HORIZONTAL)),""===ne&&(0===ye.size||!ye.has("right"))&&(a.isRelativeHorizontal(ge)?(ne=a.writeRelativeLayout(e,i),e.alignmentType|=Ae.HORIZONTAL):(ne=a.writeLinearLayout(e,i,!0),e.alignmentType|=Ae.HORIZONTAL))):(me||!fe&&ge.some(function(e){var t=e.previousSibling();return!!(t&&e.alignedVertically(t,Ee))}))&&(ne=a.writeLinearLayout(e,i,!1),me&&!e.documentRoot&&(e.alignmentType|=Ae.VERTICAL))}""===ne&&(fe?a.isFrameHorizontal(ge,Ee,!0)?ne=a.writeFrameLayoutHorizontal(e,i,ge,Ee):(ne=a.writeRelativeLayout(e,i),0===q(ge[0].baseElement,ge[ge.length-1].baseElement).filter(function(e){return Q(e)}).length&&(e.alignmentType|=Ae.HORIZONTAL)):ne=a.writeConstraintLayout(e,i))}}else ne=a.writeNode(e,i,e.controlName);t(e,i,ne,T)}!e.hasBit("excludeSection",Ie.INCLUDE)&&a.viewController.supportInclude&&0<x.length&&"true"===F(e,"dataset.includeEnd")&&x.pop()};++I<n.length;)f=A(),"continue"===f},x=n.values()[Symbol.iterator]();!(c=(E=x.next()).done);c=!0)f=y(),"continue"===f}catch(e){p=!0,m=e}finally{try{c||null==x.return||x.return()}finally{if(p)throw m}}var T=!0,I=!1,A=void 0;try{for(var v,N=function(){var e=l(v.value,2),t=e[0],n=e[1],i=[],r=t.split(":"),s=l(r,2),d=s[0],u=s[1],c=Array.from(n.values());if(0<c.length){if(a._sorted[d]){var p=[];a._sorted[d].forEach(function(e){var t=c.find(function(t){return-1!==t.indexOf($(e,"@"))});t&&p.push(t)}),p.length===c.length&&i.push.apply(i,p)}0===i.length&&i.push.apply(i,o(c)),t=d+(u?":".concat(u):"");var m=$(t);-1===h.indexOf(m)?a.addRenderQueue(t,c):(h=J(h,m,i.join("")),g=!1)}},R=i.entries()[Symbol.iterator]();!(T=(v=R.next()).done);T=!0)N()}catch(e){I=!0,A=e}finally{try{T||null==R.return||R.return()}finally{if(I)throw A}}if(a.viewController.supportInclude){var C=!0,b=!1,w=void 0;try{for(var D,_=r.entries()[Symbol.iterator]();!(C=(D=_.next()).done);C=!0){var B=l(D.value,2),k=B[0],M=B[1],P=Array.from(M.values());if(0<P.length){var H=a.viewController.renderMerge(k,P);a.addInclude(k,H)}}}catch(e){b=!0,w=e}finally{try{C||null==_.return||_.return()}finally{if(b)throw w}}}},C=u.values()[Symbol.iterator]();!(A=(L=C.next()).done);A=!0)R()}catch(e){v=!0,N=e}finally{try{A||null==C.return||C.return()}finally{if(v)throw N}}var w=this.cache.parent;if(!S(w.dataset.target)||0===w.renderExtension.size){var D=b(O(w.dataset.folder),"/");this.updateLayout(g?"":h,D,0<w.renderExtension.size&&Array.from(w.renderExtension).some(function(e){return e.documentRoot}))}else this._views.pop();if(!g){var _=!0,B=!1,k=void 0;try{for(var M,P,H=this.extensions[Symbol.iterator]();!(_=(M=H.next()).done);_=!0)P=M.value,P.setTarget(w),P.afterRender()}catch(e){B=!0,k=e}finally{try{_||null==H.return||H.return()}finally{if(B)throw k}}}else 0===w.renderExtension.size&&w.hide();this.cache.list.sort(function(e,t){if(!e.visible)return 1;if(!t.visible)return-1;if(e.renderDepth!==t.renderDepth)return e.renderDepth<t.renderDepth?-1:1;if(!e.domElement){var n=U(e.baseElement);if(n)e=n;else return 1}if(!t.domElement){var i=U(e.baseElement);if(i)t=i;else return-1}return e.documentParent===t.documentParent?e.renderIndex<t.renderIndex?-1:1:e.documentParent.id<t.documentParent.id?-1:1}),(r=this.cacheSession.list).push.apply(r,o(this.cache.list))}},{key:"writeFrameLayout",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return n||0!==e.children.length?this.viewController.renderGroup(e,t,Le.FRAME):this.viewController.renderNode(e,t,Le.FRAME)}},{key:"writeLinearLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,Le.LINEAR,{horizontal:n})}},{key:"writeGridLayout",value:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return this.viewController.renderGroup(e,t,Le.GRID,{columns:n,rows:i})}},{key:"writeRelativeLayout",value:function(e,t){return this.viewController.renderGroup(e,t,Le.RELATIVE)}},{key:"writeConstraintLayout",value:function(e,t){return this.viewController.renderGroup(e,t,Le.CONSTRAINT)}},{key:"writeNode",value:function(e,t,n){return this.viewController.renderNode(e,t,n)}},{key:"writeFrameLayoutHorizontal",value:function(e,t,n,r){var a=this,l="",s=[];if(0===r.size&&!n.some(function(e){return e.autoMargin})){var d=[],u=[],h=[],g=!0,c=!1,p=void 0;try{for(var m,E,f=n[Symbol.iterator]();!(g=(m=f.next()).done);g=!0)E=m.value,E.floating?"right"===E.float?h.push(E):u.push(E):d.push(E)}catch(e){c=!0,p=e}finally{try{g||null==f.return||f.return()}finally{if(c)throw p}}if(d.length===n.length||u.length===n.length||h.length===n.length)return e.alignmentType|=0<d.length?Ae.HORIZONTAL:Ae.FLOAT,0<h.length&&(e.alignmentType|=Ae.RIGHT),this.isRelativeHorizontal(n,r)?(l=this.writeRelativeLayout(e,t),l):(l=this.writeLinearLayout(e,t,!0),l);if(0===u.length||0===h.length){var y=0===h.length?u.concat(d):d.concat(h);if(Fe.linearY(y))return l=this.writeLinearLayout(e,t,!1),e.alignmentType|=Ae.VERTICAL,l;if(this.isRelativeHorizontal(y,r))return l=this.writeRelativeLayout(e,t),e.alignmentType|=Ae.HORIZONTAL,0<h.length&&(e.alignmentType|=Ae.RIGHT),l;0===h.length&&(this.settings.floatOverlapDisabled||(l=this.writeLinearLayout(e,t,!0),s=[u,d],e.alignmentType|=Ae.FLOAT))}}var x=[],T=[],A=[],v=[],N=[],L=[],R=[],F=[];if(0===s.length){for(var C,O="",b=0,w=0;w<n.length;w++){if(C=n[w],r.has(C)){var D=r.get(C);(I(b,"right"===D?4:2)||0!==b&&"both"===D)&&("left"===D?(b^=2,O="left"):"right"===D?(b^=4,O="right"):"both"===D?(O=2===b?"left":4===b?"right":"both",b=0):void 0)}""===O?C.floating?"right"===C.float?(v.push(C),C.floating&&(b|=4)):(A.push(C),C.floating&&(b|=2)):C.autoMargin?C.autoMarginLeft?0<v.length?L.push(C):v.push(C):C.autoMarginRight?0<A.length?N.push(C):A.push(C):0<x.length?0===A.length?A.push(C):v.push(C):x.push(C):x.push(C):C.floating?"right"===C.float?(0===L.length&&(b|=4),!this.settings.floatOverlapDisabled&&"right"!==O&&0<v.length?v.push(C):L.push(C)):(0===N.length&&(b|=2),!this.settings.floatOverlapDisabled&&"left"!==O&&0<A.length?A.push(C):N.push(C)):C.autoMargin?C.autoMarginLeft&&0<L.length?L.push(C):C.autoMarginRight&&0<N.length?N.push(C):T.push(C):"left"===O?N.push(C):"right"===O?L.push(C):T.push(C)}0<A.length&&0<N.length?(R=[A,N],1<N.length&&(N[0].alignmentType|=Ae.EXTENDABLE)):0<A.length?R=A:0<N.length&&(R=N),0<v.length&&0<L.length?(F=[v,L],1<L.length&&(L[0].alignmentType|=Ae.EXTENDABLE)):0<v.length?F=v:0<L.length&&(F=L),this.settings.floatOverlapDisabled?(t.linearVertical?(l=$(e.id),e.renderDepth--):l=this.writeLinearLayout(e,t,!1),s.push(x,[A,v],T)):(0===x.length&&(0===R.length||0===F.length)?(l=this.writeLinearLayout(e,t,!1),0<F.length&&(e.alignmentType|=Ae.RIGHT)):l=this.writeFrameLayout(e,t,!0),0<x.length?(0<L.length?(R=[x,A],s.push(R,F)):0<N.length?(F=[x,v],s.push(F,R)):s.push(x,R,F),1<x.length&&(x[0].alignmentType|=Ae.EXTENDABLE)):R===N&&F===v||R===A&&F===L?0===N.length?s.push([A,L]):s.push([v,N]):s.push(R,F),s=s.filter(function(e){return e&&0<e.length})),e.alignmentType|=Ae.FLOAT}if(0<s.length){var _=null;s.forEach(function(t,n){if(Array.isArray(t[0])){var i=[];t.forEach(function(e){return i.push.apply(i,o(e))}),i.sort(Fe.siblingIndex),_=a.viewController.createGroup(e,i[0],i),a.settings.floatOverlapDisabled?l=J(l,e.id,a.writeFrameLayout(_,e,!0)):(l=J(l,e.id,a.writeLinearLayout(_,e,!1)),t.some(function(e){return e===F||e===v})&&(_.alignmentType|=Ae.RIGHT)),_.alignmentType|=Ae.FLOAT}else _=null;(Array.isArray(t[0])?t:[t]).forEach(function(t){var i=e;if(_&&[x,A,N,v,L].includes(t)&&(i=_),1<t.length){var r="",o=a.viewController.createGroup(i,t[0],t),s=t.some(function(e){return"left"===e.float}),d=t.some(function(e){return"right"===e.float});if(a.isRelativeHorizontal(t,Fe.cleared(t)))r=a.writeRelativeLayout(o,i),o.alignmentType|=Ae.HORIZONTAL;else if(r=a.writeLinearLayout(o,i,Fe.linearX(t)),d&&o.children.some(function(e){return 0>e.marginLeft})){var u=[],h=0;o.children.slice().forEach(function(e){var t=Math.ceil,n=Math.abs,i=!1;0>h&&(n(h)>e.bounds.width?(h+=e.bounds.width,e.modifyBox(Re.MARGIN_RIGHT,-1*e.bounds.width,!0),i=!0):n(h)>=e.marginRight?(e.modifyBox(Re.MARGIN_RIGHT,t(n(h)-e.marginRight)),e.modifyBox(Re.MARGIN_RIGHT,null)):e.modifyBox(Re.MARGIN_RIGHT,h,!0)),0>e.marginLeft&&(h+=xe(e.marginLeft,-1*e.bounds.width),e.modifyBox(Re.MARGIN_LEFT,null)),i?u.splice(u.length-1,0,e):u.push(e)}),o.children=u.reverse(),a.saveSortOrder(o.id,o.children)}o.alignmentType|=Ae.SEGMENTED,(s||d)&&(o.alignmentType|=Ae.FLOAT,d&&(o.alignmentType|=Ae.RIGHT)),l=J(l,i.id,r),i.renderAppend(o)}else if(0<t.length){var g=t[0];g.alignmentType|=Ae.SINGLE,"right"===g.float&&(g.alignmentType|=Ae.RIGHT),g.renderPosition=n,l=J(l,i.id,"{:".concat(i.id,":").concat(n,"}")),i.renderAppend(g)}})})}return l}},{key:"writeFrameLayoutVertical",value:function(e,t,n,i){var r=this,a="";e?(a=this.writeLinearLayout(e,t,!1),e.alignmentType|=Ae.VERTICAL):(e=t,a=$(e.id));var l=[],o=[],s=[],d=[],u=0,h=!1,g=!0;n.some(function(e){return!e.floating&&(u+=e.linear.height,!0)});var c=!0,p=!1,m=void 0;try{for(var E,f,y=n[Symbol.iterator]();!(c=(E=y.next()).done);c=!0)f=E.value,i.has(f)&&(f.floating?h=!0:(f.modifyBox(Re.MARGIN_TOP,null),l.push(s.slice()),s.length=0,o.push(d.slice()),d.length=0)),f.floating?d.push(f):(h&&!i.has(f)&&(g=!1),s.push(f))}catch(e){p=!0,m=e}finally{try{c||null==y.return||y.return()}finally{if(p)throw m}}return 0<d.length&&o.push(d),0<s.length&&l.push(s),g||function(){for(var t="",s=0;s<xe(o.length,l.length);s++){var d=o[s]||[],h=l[s]||[];(0<h.length||0<d.length)&&function(){var i=d[0]||h[0],a=r.viewController.createGroup(e,i,[]),l=[],o=null;1<d.length?(o=r.viewController.createGroup(a,d[0],d),a.alignmentType|=Ae.FLOAT):0<d.length&&(o=d[0],o.parent=a,a.alignmentType|=Ae.FLOAT),o&&(l.push(o),0==s&&0<u&&o.modifyBox(Re.MARGIN_TOP,u),o=null),1<h.length?o=r.viewController.createGroup(a,h[0],h):0<h.length&&(o=h[0],o.parent=a),o&&l.push(o),a.init(),t+=r.writeFrameLayout(a,e,!0),a.alignmentType|=Ae.VERTICAL,l.forEach(function(e,i){n.includes(e)?t=J(t,a.id,"{:".concat(a.id,":").concat(i,"}")):(t=J(t,a.id,r.writeLinearLayout(e,a,!1)),e.alignmentType|=Ae.SEGMENTED)})}()}a=J(a,e.id,t)}(),a}},{key:"appendRenderQueue",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.extensions[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var o=r.value,s=!0,d=!1,u=void 0;try{for(var h,g,c=o.subscribers[Symbol.iterator]();!(s=(h=c.next()).done);s=!0)g=h.value,o.setTarget(g),o.beforeInsert()}catch(e){d=!0,u=e}finally{try{s||null==c.return||c.return()}finally{if(d)throw u}}}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}var p={};for(var m in this.renderQueue){var E=m.split(":"),f=l(E,1),y=f[0],x=y;if(!A(x)){var T=U(document.getElementById(x));T&&(x=T.id.toString())}var I=this.renderQueue[m].join("\n");if(x!==y){var v=this.cacheSession.locate("id",parseInt(x));if(v){var N=v.renderDepth+1;I=ee(I,N);for(var L,R=/{@([0-9]+)}/g,F=null,C=0;null!=(F=R.exec(I));)L=this.cacheSession.locate("id",parseInt(F[1])),L&&(0==C++?L.renderDepth=N:L.renderDepth=L.parent.renderDepth+1)}}p[x]=I}for(var O in p)for(var b in p)O!=b&&(p[O]=p[O].replace($(b),p[b]),p[b]=p[b].replace($(O),p[O]));var w=!0,D=!1,_=void 0;try{for(var B,S,k=this.layouts[Symbol.iterator]();!(w=(B=k.next()).done);w=!0){for(var G in S=B.value,p)S.content=S.content.replace($(G),p[G]);S.content=this.viewController.appendRenderQueue(S.content)}}catch(e){D=!0,_=e}finally{try{w||null==k.return||k.return()}finally{if(D)throw _}}var M=!0,P=!1,H=void 0;try{for(var z,V=this.extensions[Symbol.iterator]();!(M=(z=V.next()).done);M=!0){var X=z.value,Z=!0,W=!1,Y=void 0;try{for(var j,Q,q=X.subscribers[Symbol.iterator]();!(Z=(j=q.next()).done);Z=!0)Q=j.value,X.setTarget(Q),X.afterInsert()}catch(e){W=!0,Y=e}finally{try{Z||null==q.return||q.return()}finally{if(W)throw Y}}}}catch(e){P=!0,H=e}finally{try{M||null==V.return||V.return()}finally{if(P)throw H}}}},{key:"getEmptySpacer",value:function(e,t,n,i,r){return this.viewController.getEmptySpacer(e,t,n,i,r)}},{key:"createLayout",value:function(e){this._currentIndex=this._views.length,this._views.push({filename:e,pathname:"",content:""})}},{key:"updateLayout",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(t=t||this.viewController.settingsInternal.layout.directory,n&&0<this._views.length&&""===this._views[0].content){var i=this._views.pop();Object.assign(this._views[0],{pathname:t,filename:i.filename,content:e}),this._currentIndex=0}else this.layoutProcessing.pathname=t,this.layoutProcessing.content=e}},{key:"addInclude",value:function(e,t){this._includes.push({pathname:this.viewController.settingsInternal.layout.directory,filename:e,content:t})}},{key:"addRenderQueue",value:function(e,t){var n;null==this.renderQueue[e]&&(this.renderQueue[e]=[]),(n=this.renderQueue[e]).push.apply(n,o(t))}},{key:"sortByAlignment",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Ae.NONE,i=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],r=!1;return t&&n===Ae.NONE&&(t.linearHorizontal?n|=Ae.HORIZONTAL:t.is(Le.CONSTRAINT)&&e.some(function(e){return!e.pageflow})&&(n|=Ae.ABSOLUTE)),I(n,Ae.HORIZONTAL)&&e.some(function(e){return e.floating})&&(e.sort(function(e,t){return e.floating&&!t.floating?"left"===e.float?-1:1:!e.floating&&t.floating?"left"===t.float?1:-1:e.floating&&t.floating&&e.float!==t.float?"left"===e.float?-1:1:e.linear.left<=t.linear.left?-1:1}),r=!0),I(n,Ae.ABSOLUTE)&&e.some(function(e){return 0!==e.toInt("zIndex")})&&(e.sort(function(e,t){var n=e.css("zIndex"),i=t.css("zIndex");return("auto"===n||""===n||"0"===n)&&("auto"===i||""===i||"0"===i)?e.siblingIndex<=t.siblingIndex?-1:1:x(n)<=x(i)?-1:1}),r=!0),i&&r&&t&&this.saveSortOrder(t.id,e),e}},{key:"saveSortOrder",value:function(e,t){this._sorted[e.toString()]=t.map(function(e){return e.id})}},{key:"getExtension",value:function(e){return this.extensions.find(function(t){return t.name===e})}},{key:"toString",value:function(){return 0<this._views.length?this._views[0].content:""}},{key:"insertNode",value:function(e,t){var n=null;if("#"===e.nodeName.charAt(0))"#text"===e.nodeName&&(Y(e,!0)||Z(e,"whiteSpace","pre","pre-wrap"))&&(n=new this.nodeObject(this.cache.nextId,e),this.viewController.initNode(n),n.nodeName="PLAINTEXT",t?(n.parent=t,n.inherit(t,"style")):n.css("whiteSpace",(e.parentElement?V(e.parentElement).whiteSpace:null)||"normal"),n.css({position:"static",display:"inline",clear:"none",cssFloat:"none",verticalAlign:"baseline"}));else if(e instanceof HTMLElement){switch(e.tagName){case"OPTION":case"MAP":case"AREA":return null;}var i=new this.nodeObject(this.cache.nextId,e);this.viewController.initNode(i),K(e)?(n=i,n.setExclusions()):(i.excluded=!0,i.visible=!1)}return n&&this.cache.append(n),n}},{key:"prioritizeExtensions",value:function(e,t){for(var n=[],i=t;i;)n=o(n).concat(o(O(i.dataset.ext).split(",").map(function(e){return e.trim()}))),i=i.parentElement;if(n=n.filter(function(e){return e}),0<n.length){var r=[],a=[],l=!0,s=!1,d=void 0;try{for(var u,h=e[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var g=u.value,c=n.indexOf(g.name);-1===c?a.push(g):r[c]=g}}catch(e){s=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(s)throw d}}return o(r.filter(function(e){return e})).concat(a)}return e}},{key:"isFrameHorizontal",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=Fe.floated(e),r=e.filter(function(e){return e.autoMargin}),a=n?q(e[0].baseElement,e[e.length-1].baseElement).filter(function(e){return"BR"===e.tagName}).length:0;return 0===a&&(i.has("right")||0<t.size||0<r.length||!Fe.linearX(e))}},{key:"isRelativeHorizontal",value:function(e){var t=Number.MAX_VALUE,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Map,i=e.filter(function(e){return e.visible}),r=Fe.floated(e),a=new Fe(e).partition(function(e){return e.floating}),o=l(a,2),s=o[0],d=o[1],u=0<d.length?ye.apply(null,d.list.map(function(e){return e.siblingIndex})):t,h=0<s.length?xe.apply(null,s.list.map(function(e){return e.siblingIndex})):-1,g=Fe.linearX(e);return!i.some(function(e){return e.autoMarginHorizontal})&&(1===r.size&&s.length===e.length?!(g&&0===n.size):0===n.size&&!r.has("right")&&(0===d.length||0===s.length||h<u)&&i.every(function(e){var t=e.css("verticalAlign");return 0<=e.toInt("top")&&(["baseline","initial","unset","top","middle","sub","super"].includes(t)||N(t)&&0<=parseInt(t))})&&(i.some(function(e){return(e.textElement||e.imageElement)&&e.baseline||e.plainText&&e.multiLine})||!g&&e.every(function(e){return e.pageflow&&e.inlineElement})))}},{key:"appName",set:function(e){this.resourceHandler&&(this.resourceHandler.file.appName=e)},get:function(){return this.resourceHandler?this.resourceHandler.file.appName:""}},{key:"layoutProcessing",set:function(e){this._views[this._currentIndex]=e},get:function(){return this._views[this._currentIndex]}},{key:"layouts",get:function(){return o(this._views).concat(o(this._includes))}},{key:"viewData",get:function(){return{cache:this.cacheSession,views:this._views,includes:this._includes}}},{key:"size",get:function(){return this._views.length+this._includes.length}}]),e}(),we=/*#__PURE__*/function(){function e(t,i,r,a){n(this,e),this.name=t,this.framework=i,this.options={},this.tagNames=[],this.documentRoot=!1,this.dependencies=[],this.subscribers=new Set,this.subscribersChild=new Set,Array.isArray(r)&&(this.tagNames=r.map(function(e){return e.trim().toUpperCase()})),a&&Object.assign(this.options,a)}return a(e,[{key:"setTarget",value:function(e,t,n){this.node=e,this.parent=t,this.element=n||this.node.element}},{key:"is",value:function(e){return e.hasElement&&(0===this.tagNames.length||this.tagNames.includes(e.tagName))}},{key:"require",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];this.dependencies.push({name:e,init:t})}},{key:"included",value:function(e){return e||(e=this.element),!!e&&R(e.dataset.ext,this.name)}},{key:"beforeInit",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];!t&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.beforeInit(!0))})}},{key:"init",value:function(){return!1}},{key:"afterInit",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];!t&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.afterInit(!0))})}},{key:"condition",value:function(){var e=this.node;if(e&&e.element instanceof HTMLElement){var t=e.dataset.ext;return t?this.included():0<this.tagNames.length}return!1}},{key:"processNode",value:function(){return{output:"",complete:!1}}},{key:"processChild",value:function(){return{output:"",complete:!1}}},{key:"afterRender",value:function(){}},{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"finalize",value:function(){}},{key:"getData",value:function(){var e={};if(this.element instanceof HTMLElement){var t=E(this.name,"\\.");for(var n in this.element.dataset)n.length>t.length&&n.startsWith(t)&&(e[y(n.substring(t.length),!1)]=this.element.dataset[n])}return e}}]),e}(),De={Pink:{hex:"#FFC0CB"},LightPink:{hex:"#FFB6C1"},HotPink:{hex:"#FF69B4"},DeepPink:{hex:"#FF1493"},PaleVioletRed:{hex:"#DB7093"},MediumVioletRed:{hex:"#C71585"},LightSalmon:{hex:"#FFA07A"},Salmon:{hex:"#FA8072"},DarkSalmon:{hex:"#E9967A"},LightCoral:{hex:"#F08080"},IndianRed:{hex:"#CD5C5C"},Crimson:{hex:"#DC143C"},Firebrick:{hex:"#B22222"},DarkRed:{hex:"#8B0000"},Red:{hex:"#FF0000"},OrangeRed:{hex:"#FF4500"},Tomato:{hex:"#FF6347"},Coral:{hex:"#FF7F50"},Orange:{hex:"#FFA500"},DarkOrange:{hex:"#FF8C00"},Yellow:{hex:"#FFFF00"},LightYellow:{hex:"#FFFFE0"},LemonChiffon:{hex:"#FFFACD"},LightGoldenrodYellow:{hex:"#FAFAD2"},PapayaWhip:{hex:"#FFEFD5"},Moccasin:{hex:"#FFE4B5"},PeachPuff:{hex:"#FFDAB9"},PaleGoldenrod:{hex:"#EEE8AA"},Khaki:{hex:"#F0E68C"},DarkKhaki:{hex:"#BDB76B"},Gold:{hex:"#FFD700"},Cornsilk:{hex:"#FFF8DC"},BlanchedAlmond:{hex:"#FFEBCD"},Bisque:{hex:"#FFE4C4"},NavajoWhite:{hex:"#FFDEAD"},Wheat:{hex:"#F5DEB3"},Burlywood:{hex:"#DEB887"},Tan:{hex:"#D2B48C"},RosyBrown:{hex:"#BC8F8F"},SandyBrown:{hex:"#F4A460"},Goldenrod:{hex:"#DAA520"},DarkGoldenrod:{hex:"#B8860B"},Peru:{hex:"#CD853F"},Chocolate:{hex:"#D2691E"},SaddleBrown:{hex:"#8B4513"},Sienna:{hex:"#A0522D"},Brown:{hex:"#A52A2A"},Maroon:{hex:"#800000"},DarkOliveGreen:{hex:"#556B2F"},Olive:{hex:"#808000"},OliveDrab:{hex:"#6B8E23"},YellowGreen:{hex:"#9ACD32"},LimeGreen:{hex:"#32CD32"},Lime:{hex:"#00FF00"},LawnGreen:{hex:"#7CFC00"},Chartreuse:{hex:"#7FFF00"},GreenYellow:{hex:"#ADFF2F"},SpringGreen:{hex:"#00FF7F"},MediumSpringGreen:{hex:"#00FA9A"},LightGreen:{hex:"#90EE90"},PaleGreen:{hex:"#98FB98"},DarkSeaGreen:{hex:"#8FBC8F"},MediumAquamarine:{hex:"#66CDAA"},MediumSeaGreen:{hex:"#3CB371"},SeaGreen:{hex:"#2E8B57"},ForestGreen:{hex:"#228B22"},Green:{hex:"#008000"},DarkGreen:{hex:"#006400"},Aqua:{hex:"#00FFFF"},Cyan:{hex:"#00FFFF"},LightCyan:{hex:"#E0FFFF"},PaleTurquoise:{hex:"#AFEEEE"},Aquamarine:{hex:"#7FFFD4"},Turquoise:{hex:"#40E0D0"},DarkTurquoise:{hex:"#00CED1"},MediumTurquoise:{hex:"#48D1CC"},LightSeaGreen:{hex:"#20B2AA"},CadetBlue:{hex:"#5F9EA0"},DarkCyan:{hex:"#008B8B"},Teal:{hex:"#008080"},LightSteelBlue:{hex:"#B0C4DE"},PowderBlue:{hex:"#B0E0E6"},LightBlue:{hex:"#ADD8E6"},SkyBlue:{hex:"#87CEEB"},LightSkyBlue:{hex:"#87CEFA"},DeepSkyBlue:{hex:"#00BFFF"},DodgerBlue:{hex:"#1E90FF"},Cornflower:{hex:"#6495ED"},SteelBlue:{hex:"#4682B4"},RoyalBlue:{hex:"#4169E1"},Blue:{hex:"#0000FF"},MediumBlue:{hex:"#0000CD"},DarkBlue:{hex:"#00008B"},Navy:{hex:"#000080"},MidnightBlue:{hex:"#191970"},Lavender:{hex:"#E6E6FA"},Thistle:{hex:"#D8BFD8"},Plum:{hex:"#DDA0DD"},Violet:{hex:"#EE82EE"},Orchid:{hex:"#DA70D6"},Fuchsia:{hex:"#FF00FF"},Magenta:{hex:"#FF00FF"},MediumOrchid:{hex:"#BA55D3"},MediumPurple:{hex:"#9370DB"},BlueViolet:{hex:"#8A2BE2"},DarkViolet:{hex:"#9400D3"},DarkOrchid:{hex:"#9932CC"},DarkMagenta:{hex:"#8B008B"},Purple:{hex:"#800080"},RebeccaPurple:{hex:"#663399"},Indigo:{hex:"#4B0082"},DarkSlateBlue:{hex:"#483D8B"},SlateBlue:{hex:"#6A5ACD"},MediumSlateBlue:{hex:"#7B68EE"},White:{hex:"#FFFFFF"},Snow:{hex:"#FFFAFA"},Honeydew:{hex:"#F0FFF0"},MintCream:{hex:"#F5FFFA"},Azure:{hex:"#F0FFFF"},AliceBlue:{hex:"#F0F8FF"},GhostWhite:{hex:"#F8F8FF"},WhiteSmoke:{hex:"#F5F5F5"},Seashell:{hex:"#FFF5EE"},Beige:{hex:"#F5F5DC"},OldLace:{hex:"#FDF5E6"},FloralWhite:{hex:"#FFFAF0"},Ivory:{hex:"#FFFFF0"},AntiqueWhite:{hex:"#FAEBD7"},Linen:{hex:"#FAF0E6"},LavenderBlush:{hex:"#FFF0F5"},MistyRose:{hex:"#FFE4E1"},Gainsboro:{hex:"#DCDCDC"},LightGray:{hex:"#D3D3D3"},Silver:{hex:"#C0C0C0"},DarkGray:{hex:"#A9A9A9"},Gray:{hex:"#808080"},DimGray:{hex:"#696969"},LightSlateGray:{hex:"#778899"},SlateGray:{hex:"#708090"},DarkSlateGray:{hex:"#2F4F4F"},Black:{hex:"#000000"}},_e=[];for(var Be in De){var i=De[Be];for(var k in i){var j=re(i[k]);j&&(i.rgb=j,i.hsl=te(i.rgb.r,i.rgb.g,i.rgb.b)),_e.push({name:Be,rgb:i.rgb,hex:i.hex,hsl:i.hsl})}}_e.sort(function(e,t){if(e.hsl&&t.hsl){var n=[e.hsl.h,t.hsl.h],i=n[0],r=n[1];if(i===r){var a=[e.hsl.s,t.hsl.s];if(i=a[0],r=a[1],i===r){var l=[e.hsl.l,t.hsl.l];i=l[0],r=l[1]}}return i>=r?1:-1}return 0});var Se;e.settings={},e.system={};var ke,Ge=new Set,Me=new Map;e.setFramework=oe,e.parseDocument=se,e.registerExtension=de,e.configureExtension=ue,e.getExtension=he,e.ext=ge,e.ready=ce,e.close=pe,e.reset=me,e.saveAllToDisk=Ee,e.toString=fe,e.Extension=we,Object.defineProperty(e,"__esModule",{value:!0})});
