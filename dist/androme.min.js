var androme=function(e){"use strict";var tt=Number.MAX_VALUE,nt=Math.abs,it=Math.min,at=Math.ceil,lt=Math.max,rt=Math.floor,ot=Math.round;function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){this.wrapped=e}function a(e){function t(a,l){try{var r=e[a](l),o=r.value,d=o instanceof n;Promise.resolve(d?o.wrapped:o).then(function(e){return d?void t("next",e):void i(r.done?"return":"normal",e)},function(e){t("throw",e)})}catch(e){i("throw",e)}}function i(e,n){"return"===e?a.resolve({value:n,done:!0}):"throw"===e?a.reject(n):a.resolve({value:n,done:!1});a=a.next,a?t(a.key,a.arg):l=null}var a,l;this._invoke=function(e,n){return new Promise(function(i,r){var o={key:e,arg:n,resolve:i,reject:r,next:null};l?l=l.next=o:(a=l=o,t(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1,n;t<arguments.length;t++)for(var a in n=arguments[t],n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},s.apply(this,arguments)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function p(){return p=c()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=Function.bind.apply(e,i),l=new a;return n&&g(l,n.prototype),l},p.apply(null,arguments)}function m(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){function n(){return p(e,arguments,u(this).constructor)}if(null===e||!m(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},f(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return t&&("object"==typeof t||"function"==typeof t)?t:y(e)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=u(e),null!==e););return e}function x(e,t,n){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=b(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}},x(e,t,n||e)}function T(e,t,n,i){return T="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(e,t,n,i){var a=b(e,t),l;if(a){if(l=Object.getOwnPropertyDescriptor(a,t),l.set)return l.set.call(i,n),!0;if(!l.writable)return!1}if(l=Object.getOwnPropertyDescriptor(i,t),l){if(!l.writable)return!1;l.value=n,Object.defineProperty(i,t,l)}else d(i,t,n);return!0},T(e,t,n,i)}function v(e,t){return k(e)||N(e,t)||_()}function I(e){return A(e)||L(e)||R()}function A(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function k(e){if(Array.isArray(e))return e}function L(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function N(e,t){var n=[],i=!0,a=!1,l=void 0;try{for(var r=e[Symbol.iterator](),o;!(i=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(e){a=!0,l=e}finally{try{i||null==r["return"]||r["return"]()}finally{if(a)throw l}}return n}function R(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function w(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length,i=Array(2<n?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return e.sort(function(e,n){for(var a=0;a<i.length;a++){var l=i[a],r=ie(e,n,l);if(r&&r[0]!==r[1])return 0===t?r[0]>r[1]?1:-1:r[0]<r[1]?1:-1}return 0})}function S(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"-";e=e.replace(new RegExp("^".concat(t,"+")),"");var n=e.match(new RegExp("(".concat(t,"{1}[a-z]{1})"),"g"));if(n){var i=!0,a=!1,l=void 0;try{for(var r=n[Symbol.iterator](),o,d;!(i=(o=r.next()).done);i=!0)d=o.value,e=e.replace(d,d[1].toUpperCase())}catch(e){a=!0,l=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw l}}}return e}function C(e){return e?e.replace(/[^\w]/g,"_").trim():""}function B(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return e?e.charAt(0)[t?"toUpperCase":"toLowerCase"]()+e.substring(1)[t?"toLowerCase":"toString"]():""}function D(e){return e&&parseInt(e)||0}function O(e){return e&&parseFloat(e)||0}function F(e,t){if(ae(e)){if(U(e))return"".concat(ot(e),"px");var n=parseFloat(e);if(!isNaN(n)){var i=e.match(/(pt|em)/);if(i)switch(i[0]){case"pt":n*=4/3;break;case"em":n*=D(t)||16;}return"".concat(n,"px")}}return"0px"}function M(e){return e=e.replace(/\u00A0/g,"&#160;"),e=e.replace(/\u2002/g,"&#8194;"),e=e.replace(/\u2003/g,"&#8195;"),e=e.replace(/\u2009/g,"&#8201;"),e=e.replace(/\u200C/g,"&#8204;"),e=e.replace(/\u200D/g,"&#8205;"),e=e.replace(/\u200E/g,"&#8206;"),e=e.replace(/\u200F/g,"&#8207;"),e}function G(e){return e=parseFloat(e),"".concat(isNaN(e)?0:ot(e),"px")}function P(e){for(var t="",n;26<=e;){n=rt(e/26),1<n&&26>=n?(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(n-1),e-=26*n):26<n&&(t+=P(26*n),e-=26*n);var i=e%26;t+="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(i),e-=i+26}return t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(e)+t,t}function H(e){for(var t=e.toString().split(""),n="",a=3;a--;)n=(ht[parseInt(t.pop()||"")+10*a]||"")+n;return"M".repeat(parseInt(t.join("")))+n}function z(e,t){return(e&t)===t}function U(e){return /^-?[0-9]+(\.[0-9]+)?$/.test(e.toString().trim())}function X(e){return"string"==typeof e&&""!==e}function W(e){return!!X(e)&&/^-?[0-9\.]+(px|pt|em)$/.test(e.trim())}function V(e){return /^[0-9]+(\.[0-9]+)?%$/.test(e)}function Y(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:",";return!!e&&e.split(n).map(function(e){return e.trim()}).includes(t)}function Z(e,n,a){var l=!1,r=null;if("object"===t(e)){r=e;var o=n.split("."),d=0;do r=null==r[o[d]]?null:r[o[d]];while(null!=r&&++d<o.length&&"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r);l=null!=r&&d===o.length}return"object"===a?l?r:null:"number"===a?l&&!isNaN(parseInt(r))?parseInt(r):0:"boolean"===a?l&&!0===r:l?r.toString():""}function q(e){if(!/^\w+:\/\//.test(e)){var t=location.pathname.split("/");if(t.pop(),"/"===e.charAt(0))e=location.origin+e;else if(e.startsWith("../")){var n=[],i=0,a;e.split("/").forEach(function(e){".."===e?i++:n.push(e)}),t=t.slice(0,lt(t.length-i,0)),(a=t).push.apply(a,n),e=location.origin+t.join("/")}else e="".concat(location.origin+t.join("/"),"/").concat(e)}return e}function Q(e){return e?e.trim():""}function K(e,t){return e?J($(e,t),t):""}function J(e,t){return e.replace(new RegExp("^".concat(t,"+"),"g"),"")}function $(e,t){return e.replace(new RegExp("".concat(t,"+$"),"g"),"")}function ee(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"\t";return t.repeat(e)}function te(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"/";return e.substring(e.lastIndexOf(t)+1)}function ne(e,n){var a=[];if("object"===t(n))for(var l in n){var r=n[l];ae(e[r])&&a.push([r,e[r]])}else{var o=function(e){return e===n};for(var d in /^\*.+\*$/.test(n)?o=function(e){return-1!==e.indexOf(n.replace(/\*/g,""))}:/^\*/.test(n)?o=function(e){return e.endsWith(n.replace(/\*/,""))}:/\*$/.test(n)&&(o=function(e){return e.startsWith(n.replace(/\*/,""))}),e)o(d)&&a.push([d,e[d]])}return a}function ie(e,t,n){var i=n.split("."),a=e,l=t,r=!0,o=!1,d=void 0;try{for(var s=i[Symbol.iterator](),h,u;!(r=(h=s.next()).done);r=!0)if(u=h.value,null!=a[u]&&null!=l[u])a=a[u],l=l[u];else return(null!=a[u]||null!=l[u])&&(null==a[u]?[0,1]:[1,0])}catch(e){o=!0,d=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw d}}return isNaN(parseInt(a))&&isNaN(parseInt(l))?[a,l]:[D(a),D(l)]}function ae(e){return"undefined"!=typeof e&&null!==e&&""!==e.toString().trim()}function le(e,t){return e===t||rt(e)===rt(t)||at(e)===at(t)||at(e)===rt(t)||rt(e)===at(t)}function re(e,t){var n=[],i=[],a=!0,l=!1,r=void 0;try{for(var o=e[Symbol.iterator](),d,s;!(a=(d=o.next()).done);a=!0)s=d.value,t(s)?n.push(s):i.push(s)}catch(e){l=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw r}}return[n,i]}function oe(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return w.apply(void 0,[e,0].concat(n))}function de(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return w.apply(void 0,[e,1].concat(n))}function se(){return{top:0,left:0,right:0,bottom:0}}function he(){return{top:0,left:0,right:0,bottom:0,width:0,height:0}}function ue(e,t,n){e&&(e["__".concat(t)]=n)}function ge(e,t){return e?e["__".concat(t)]:null}function ce(e){if(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var a=0,l;a<n.length;a++)l=n[a],delete e["__".concat(l)]}}function pe(e){return ge(e,"node")}function me(e){var t=document.createRange();t.selectNodeContents(e);var n=Array.from(t.getClientRects()),a=!1,l=null;if(0<n.length){l=fe(n[0]);for(var r=new Set([l.top]),o=new Set([l.bottom]),d=1,s;d<n.length;d++)s=n[d],r.add(s.top),o.add(s.bottom),l.width+=s.width,l.right=lt(s.right,l.right),l.height=lt(s.height,l.height);1<r.size&&1<o.size&&(l.top=it.apply(null,Array.from(r)),l.bottom=lt.apply(null,Array.from(o)),n[n.length-1].top>=n[0].bottom&&e.textContent&&(""!==e.textContent.trim()||/^\s*\n/.test(e.textContent))&&(a=!0))}return[l,a]}function fe(e){return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function ye(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e){if(t){var n=pe(e),i=ge(e,"style");if(i)return i;if(n){if(n.style)return n.style;if(n.plainText)return n.styleMap}}if(e.nodeName&&"#"!==e.nodeName.charAt(0)){var a=getComputedStyle(e);return ue(e,"style",a),a}}return{}}function Ee(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i={},a=pe(e),l=ye(e);return["Top","Left","Right","Bottom"].forEach(function(e){var r=0;["padding","margin"].forEach(function(n){var o=n+e,d=D((a||l)[o]);(t||0!==d)&&(i[o]=d),r+=d}),n&&(i["padding".concat(e)]=r,t?i["margin".concat(e)]=0:delete i["margin".concat(e)])}),i}function be(e){var t=e.match(/^url\("?(.*?)"?\)$/);return t?q(t[1]):""}function xe(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length?arguments[3]:void 0,a="",l=e.parentElement;l&&l.tagName!==n&&(a=ye(l)[t]||"",i&&i.some(function(e){return-1!==a.indexOf(e)})&&(a=""),!(l===document.body||a));)l=l.parentElement;return a}function Te(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];return!!("#"!==e.nodeName.charAt(0)&&i.includes(ye(e)[t]))||!!e.parentElement&&i.includes(ye(e.parentElement)[t])}function ve(e,t){if(e instanceof HTMLElement&&e.parentElement){var n=pe(e),i=ye(e);return i&&i[t]===ye(e.parentElement)[t]&&(!n||!n.styleMap[t])}return!1}function Ie(e){function t(e){return l++===n||e.some(function(e){if("#text"===e.nodeName){if(Ae(e,i)||Te(e,"whiteSpace","pre","pre-wrap")&&e.textContent&&""!==e.textContent)return a=!0,!0;}else if(e instanceof HTMLElement&&0<e.childNodes.length)return t(Array.from(e.childNodes));return!1})}var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],a=!1,l=-1;return"#text"===e.nodeName?(n=0,t([e])):t(Array.from(e.childNodes)),a}function Ae(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(e&&"#text"===e.nodeName&&e.textContent){if(t){for(var n=e.textContent,a=!1,l=0;l<n.length;l++)switch(n.charCodeAt(l)){case 9:case 10:case 13:case 32:continue;default:a=!0;}return a&&""!==n}return""!==e.textContent.trim()}return!1}function ke(e){if(e){var t=pe(e),n="#text"===e.nodeName,i="";return i=t?t.css("whiteSpace"):ye(e).whiteSpace||"",e instanceof HTMLElement&&0<e.children.length&&Array.from(e.children).some(function(e){return"BR"===e.tagName})||/\n/.test(e.textContent||"")&&(["pre","pre-wrap"].includes(i)||n&&Te(e,"whiteSpace","pre","pre-wrap"))}return!1}function Le(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=pe(e);return!!n&&("BR"===n.tagName||t&&n.block&&(n.excluded||""===n.textContent.trim()))}function Ne(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3];if(!e||e.parentElement===t.parentElement){var a=t.parentElement;if(a){var l=Array.from(a.childNodes),r=e?l.findIndex(function(t){return t===e}):0,o=l.findIndex(function(e){return e===t});if(-1!==r&&-1!==o&&r!==o){var d=l.slice(it(r,o)+1,lt(r,o));return d=i?d.filter(function(e){return"#comment"!==e.nodeName}):d.filter(function(e){return"#"!==e.nodeName.charAt(0)||Ae(e)}),n&&(d=d.filter(function(e){return pe(e)})),d}}}return[]}function Re(e){if(!ge(e,"supportInline")){if(e instanceof HTMLElement){switch(e.tagName){case"BR":case"OPTION":case"MAP":case"AREA":return!1;}if("function"==typeof e.getBoundingClientRect){var t=e.getBoundingClientRect();if(0!==t.width&&0!==t.height||ae(e.dataset.ext)||"none"!==ye(e).clear)return!0;for(var n=e.parentElement,i=!0;n;){if("none"===ye(n).display){i=!1;break}n=n.parentElement}if(i&&0<e.children.length)return Array.from(e.children).some(function(e){var t=ye(e),n=t.cssFloat,i=t.position;return"static"!==i&&"initial"!==i||"left"===n||"right"===n})}return!1}return Ae(e)}return!1}function _e(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:":";return"{".concat(t+e.toString(),"}")}function we(e,t,n){var i=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],a="number"==typeof t?_e(t):t;return e.replace(a,(i?a:"")+n+(i?"":a))}function Se(e,t){if(0<=t){var n=-1;return e.split("\n").map(function(e){var i=/^({.*?})(\t*)(<.*)/.exec(e);return i?(-1===n&&(n=i[2].length),i[1]+ee(t+(i[2].length-n))+i[3]):e}).join("\n")}return e}function Ce(e){return e=e.replace(/&#([0-9]+);/g,function(e,t){var n=String.fromCharCode;return n(parseInt(t))}),e=e.replace(/&nbsp;/g,"&#160;"),M(e)}function Be(e,t,n,a,l){var r=n?e[n]:"";for(var o in t["#include"]&&(a=t["#include"],delete t["#include"]),t["#exclude"]&&(l=t["#exclude"],delete t["#exclude"]),t){var i="";if(!1===t[o]){r=r.replace("{%".concat(o,"}"),"");continue}else if(Array.isArray(t[o]))for(var d in t[o])i+=Be(e,t[o][d],o,a,l);else i=t[o];X(i)?r=n?r.replace(new RegExp("{[%@&]*".concat(o,"}"),"g"),i):i.trim():!1===i||new RegExp("{%".concat(o,"}")).test(r)?r=r.replace("{%".concat(o,"}"),""):new RegExp("{&".concat(o,"}")).test(r)&&(r="");for(var s=/\s+[\w:]+="{#(\w+)=(.*?)}"/g,h=void 0;null!=(h=s.exec(r));)if(a&&a[h[1]]){var u="{#".concat(h[1],"=").concat(h[2],"}");r=r.replace(u,t[h[2]]||h[2])}else l&&l[h[1]]&&(r=r.replace(h[0],""))}return r.replace(/\s+[\w:]+="{@\w+}"/g,"")}function De(e){var t=ze(e);return t?Oe(t.r,t.g,t.b):null}function Oe(e,t,n){e/=255,t/=255,n/=255;var i=it(e,t,n),a=lt(e,t,n),o=(a+i)/2,u=o,c=o;if(a===i)o=0,u=0;else{var l=a-i;u=.5<c?l/(2-a-i):l/(a+i),a===e?o=(t-n)/l+(t<n?6:0):a===t?o=(n-e)/l+2:a===n?o=(e-t)/l+4:void 0,o/=6}return{h:360*o,s:100*u,l:100*c}}function Fe(e,t){if(e.hsl&&t.hsl){var n=[e.hsl.h,t.hsl.h],i=n[0],a=n[1];if(i===a){var l=[e.hsl.s,t.hsl.s];if(i=l[0],a=l[1],i===a){var r=[e.hsl.l,t.hsl.l];i=r[0],a=r[1]}}return i>=a?1:-1}return 0}function Me(e){for(var t in Ct)if(t.toLowerCase()===e.trim().toLowerCase())return Ct[t];return""}function Ge(e){var t=e.rgb;return t?"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")"):""}function Pe(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"1";if(""!==e){var n=Me(e);if(""!==n)return[n.hex,Ge(n),t];var i=e.match(/rgb(?:a)?\(([0-9]{1,3}), ([0-9]{1,3}), ([0-9]{1,3})(?:, ([0-9\.]{1,3}))?\)/);if(i&&4<=i.length&&"0"!==i[4])return null==i[4]&&(i[4]=t),["#".concat(He(i[1])+He(i[2])+He(i[3])),i[0],1>parseFloat(i[4])?parseFloat(i[4]).toFixed(2):"1"]}return[]}function He(e){var t=parseInt(e);return isNaN(t)?"00":(t=lt(0,it(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))}function ze(e){return e=e.replace("#","").trim(),3===e.length&&(e=e.charAt(0).repeat(2)+e.charAt(1).repeat(2)+e.charAt(2).repeat(2)),6===e.length?{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4),16)}:null}function Ue(){for(var e=!1,t=0,n;t<document.styleSheets.length;t++)if(n=document.styleSheets[t],n.cssRules)for(var a=0;a<n.cssRules.length;a++)try{(function(){for(var e=n.cssRules[a],t=new Set,i=Array.from(e.style),l=0,r;l<i.length;l++)r=i[l],t.add(S(r));Array.from(document.querySelectorAll(e.selectorText)).forEach(function(n){for(var i=Array.from(n.style),a=0,l;a<i.length;a++)l=i[a],t.add(S(l));var r=ye(n),o={},d=!0,s=!1,h=void 0;try{for(var u=t[Symbol.iterator](),g;!(d=(g=u.next()).done);d=!0){var c=g.value,p=e.style[c];n.style[c]?o[c]=n.style[c]:r[c]===p?o[c]=r[c]:p&&("fontSize"===c?o[c]=r[c]:"width"===c||"height"===c||"lineHeight"===c||"verticalAlign"===c||"columnGap"===c||"top"===c||"right"===c||"bottom"===c||"left"===c||"marginTop"===c||"marginRight"===c||"marginBottom"===c||"marginLeft"===c||"paddingTop"===c||"paddingRight"===c||"paddingBottom"===c||"paddingLeft"===c?o[c]=/^[A-Za-z\-]+$/.test(p)||V(p)?p:F(p,r.fontSize):null==o[c]&&(o[c]=p))}}catch(e){s=!0,h=e}finally{try{d||null==u.return||u.return()}finally{if(s)throw h}}qt.settings.preloadImages&&ae(o.backgroundImage)&&"initial"!==o.backgroundImage&&o.backgroundImage.split(",").map(function(e){return e.trim()}).forEach(function(e){var t=be(e);""===t||Jt.has(t)||Jt.set(t,{width:0,height:0,url:t})});var m=ge(n,"styleMap");m?Object.assign(m,o):(ue(n,"style",r),ue(n,"styleMap",o))})})()}catch(t){e||(alert("External CSS files cannot be parsed when loading this program from your hard drive with Chrome 64+ (file://). Either use a local web server (http://), embed your CSS files into a <style> tag, or use a different browser. See the README for further instructions.\n\n"+"".concat(n.href,"\n\n").concat(t)),e=!0)}}function Xe(e){e&&ae(e.src)&&Jt.set(e.src,{width:e.naturalWidth,height:e.naturalHeight,url:e.src})}function We(t){var n=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(Qt!==t){var i=n?t.cached():t.create();if(e.settings=qt||0===Object.keys(e.settings).length?i.settings:Object.assign(i.settings,e.settings),qt=i.application?i.application:new $t.base.Application(i.framework),qt.settings=e.settings,qt.builtInExtensions=i.builtInExtensions,qt.nodeObject=i.nodeObject,qt.registerController(i.viewController),qt.registerResource(i.resourceHandler),Array.isArray(e.settings.builtInExtensions)){var a=new Set,l=qt.builtInExtensions,r=!0,o=!1,d=void 0;try{for(var s=e.settings.builtInExtensions[Symbol.iterator](),h,u;!(r=(h=s.next()).done);r=!0)if(u=h.value,u=u.toLowerCase().trim(),l[u])a.add(l[u]);else for(var g in l)g.startsWith("".concat(u,"."))&&a.add(l[g])}catch(e){o=!0,d=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw d}}var c=!0,p=!1,m=void 0;try{for(var f=a[Symbol.iterator](),y,E;!(c=(y=f.next()).done);c=!0)E=y.value,qt.registerExtension(E)}catch(e){p=!0,m=e}finally{try{c||null==f.return||f.return()}finally{if(p)throw m}}}Qt=t,e.system=t.system}Je()}function Ve(){function e(){qt.loading=!1,qt.settings.preloadImages&&o&&Array.from(o.getElementsByClassName("androme.preload")).forEach(function(e){return o.removeChild(e)}),qt.resourceHandler.imageDimensions=Jt;var e=!0,n=!1,i=void 0;try{for(var a=qt.elements[Symbol.iterator](),l,r;!(e=(l=a.next()).done);e=!0){r=l.value,""===qt.appName?(""===r.id&&(r.id="untitled"),qt.appName=r.id):""===r.id&&(r.id="content_".concat(qt.size));var d=Q(r.dataset.filename).replace(new RegExp(".".concat(qt.viewController.settingsInternal.layout.fileExtension,"$")),"")||r.id,s=D(r.dataset.iteration)+1;r.dataset.iteration=s.toString(),r.dataset.layoutName=C(1<s?"".concat(d,"_").concat(s):d),qt.initCache(r)&&(qt.createDocument(),qt.setConstraints(),qt.setResources(),Kt.add(r))}}catch(e){n=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}"function"==typeof t&&t.call(qt)}if(qt&&!qt.closed){var t;qt.elements.clear(),qt.loading=!1,Ue();for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];""===qt.appName&&0===i.length&&i.push(document.body);for(var l=0,r;l<i.length;l++)r=i[l],"string"==typeof r&&(r=document.getElementById(r)),r instanceof HTMLElement&&qt.elements.add(r);var o=qt.elements.values().next().value;if(qt.settings.preloadImages&&o){var d=!0,s=!1,h=void 0;try{for(var u=Jt.values()[Symbol.iterator](),g,c;!(d=(g=u.next()).done);d=!0)if(c=g.value,0===c.width&&0===c.height&&c.url){var p=document.createElement("IMG");p.src=c.url,p.complete&&0<p.naturalWidth&&0<p.naturalHeight?(c.width=p.naturalWidth,c.height=p.naturalHeight):(p.className="androme.preload",p.style.display="none",o.appendChild(p))}}catch(e){s=!0,h=e}finally{try{d||null==u.return||u.return()}finally{if(s)throw h}}}var m=Array.from(qt.elements).map(function(e){var t=[];return Array.from(e.querySelectorAll("IMG")).forEach(function(e){e.complete?Xe(e):t.push(e)}),t}).reduce(function(e,t){return e.concat(t)},[]);if(0===m.length)e();else{qt.loading=!0;var f=m.map(function(e){return new Promise(function(t,n){e.onload=t,e.onerror=n})});Promise.all(f).then(function(t){Array.isArray(t)&&t.forEach(function(e){try{Xe(e.srcElement)}catch(e){}}),e()}).catch(function(t){var n=t.srcElement?t.srcElement.src:"";(!ae(n)||confirm("FAIL: ".concat(n)))&&e()})}return{then:function(e){qt.loading?t=e:e()}}}}function je(e){qt&&X(e.name)&&Array.isArray(e.tagNames)&&qt.registerExtension(e)}function Ye(e,n){if(qt){var i=qt.getExtension(e);i&&"object"===t(n)&&Object.assign(i.options,n)}}function Ze(e){return qt&&qt.getExtension(e)}function qe(e,n){if("object"===t(e))je(e);else if(X(e))if("object"===t(n))Ye(e,n);else return Ze(e)}function Qe(){return qt&&!qt.loading&&!qt.closed}function Ke(){qt&&!qt.loading&&0<qt.size&&qt.finalize()}function Je(){if(qt){var e=!0,t=!1,n=void 0;try{for(var i=Kt[Symbol.iterator](),a,l;!(e=(a=i.next()).done);e=!0)l=a.value,delete l.dataset.iteration,delete l.dataset.layoutName}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}Kt.clear(),qt.reset()}}function $e(){qt&&!qt.loading&&0<qt.size&&(!qt.closed&&qt.finalize(),qt.resourceHandler.file.saveAllToDisk(qt.viewData))}function et(){return qt?qt.toString():""}var dt;"function"==typeof Symbol&&Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this}),a.prototype.next=function(e){return this._invoke("next",e)},a.prototype.throw=function(e){return this._invoke("throw",e)},a.prototype.return=function(e){return this._invoke("return",e)};var st=0,ht=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],ut=/*#__PURE__*/Object.freeze({formatString:function(e){for(var t=0;t<(1>=arguments.length?0:arguments.length-1);t++)e=e.replace("{".concat(t,"}"),1>t+1||arguments.length<=t+1?void 0:arguments[t+1]);return e},cameltoLowerCase:function(e){e=e.charAt(0).toLowerCase()+e.substring(1);var t=e.match(/([a-z]{1}[A-Z]{1})/g);if(t){var n=!0,i=!1,a=void 0;try{for(var l=t[Symbol.iterator](),r,o;!(n=(r=l.next()).done);n=!0)o=r.value,e=e.replace(o,"".concat(o[0],"_").concat(o[1].toLowerCase()))}catch(e){i=!0,a=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw a}}}return e},convertCamelCase:S,convertWord:C,capitalize:B,convertInt:D,convertFloat:O,convertPX:F,replaceWhiteSpace:M,formatPX:G,convertAlpha:P,convertRoman:H,convertEnum:function(e,t,n){for(var i=Object.keys(t),a=0;a<i.length;a++){var l=i[a],r=t[l];if(e===r)return n[l]}return""},hasBit:z,isNumber:U,isString:X,isUnit:W,isPercent:V,includes:Y,optional:Z,resolvePath:q,trimNull:Q,trimString:K,trimStart:J,trimEnd:$,repeat:ee,indexOf:function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var a=0;a<n.length;a++){var l=n[a],r=e.indexOf(l);if(-1!==r)return r}return-1},lastIndexOf:te,sameValue:function(e,t){for(var n=arguments.length,i=Array(2<n?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];for(var l=0;l<i.length;l++){var r=i[l],o=ie(e,t,r);if(!o||o[0]!==o[1])return!1}return!0},searchObject:ne,compareObject:ie,hasValue:ae,withinRange:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return t>=e-i&&t<=e+i},withinFraction:le,overwriteDefault:function(e,t,n,i){""===t?null==e[n]&&(e[n]=i):(null==e[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=i))},partition:re,sortAsc:oe,sortDesc:de}),gt=/*#__PURE__*/Object.freeze({getBoxRect:se,getClientRect:he,getBoxModel:function(){return{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}},setElementCache:ue,getElementCache:ge,deleteElementCache:ce,getNodeFromElement:pe,getRangeClientRect:me,assignBounds:fe,getStyle:ye,getBoxSpacing:Ee,parseBackgroundUrl:be,cssInherit:xe,cssParent:Te,cssFromParent:ve,hasFreeFormText:Ie,isPlainText:Ae,hasLineBreak:ke,isLineBreak:Le,getElementsBetweenSiblings:Ne,isElementVisible:Re,locateExtension:function(e,t){return e instanceof HTMLElement?Array.from(e.children).find(function(e){return Y(e.dataset.ext,t)}):null}}),ct;(function(e){e[e.UNIVERSAL=0]="UNIVERSAL",e[e.ANDROID=2]="ANDROID"})(ct||(ct={}));var pt;(function(e){e[e.NONE=0]="NONE",e[e.INCLUDE=2]="INCLUDE",e[e.DOM_TRAVERSE=4]="DOM_TRAVERSE",e[e.EXTENSION=8]="EXTENSION",e[e.RENDER=16]="RENDER",e[e.ALL=30]="ALL"})(pt||(pt={}));var mt;(function(e){e[e.NONE=0]="NONE",e[e.EXTENDABLE=2]="EXTENDABLE",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=8]="VERTICAL",e[e.ABSOLUTE=16]="ABSOLUTE",e[e.FLOAT=32]="FLOAT",e[e.SEGMENTED=64]="SEGMENTED",e[e.PERCENT=128]="PERCENT",e[e.TOP=256]="TOP",e[e.RIGHT=512]="RIGHT",e[e.BOTTOM=1024]="BOTTOM",e[e.LEFT=2048]="LEFT",e[e.SINGLE=4096]="SINGLE",e[e.MULTILINE=8192]="MULTILINE",e[e.SPACE=16384]="SPACE"})(mt||(mt={}));var ft;(function(e){e[e.NONE=0]="NONE",e[e.BOX_STYLE=2]="BOX_STYLE",e[e.BOX_SPACING=4]="BOX_SPACING",e[e.FONT_STYLE=8]="FONT_STYLE",e[e.VALUE_STRING=16]="VALUE_STRING",e[e.OPTION_ARRAY=32]="OPTION_ARRAY",e[e.IMAGE_SOURCE=64]="IMAGE_SOURCE",e[e.ASSET=120]="ASSET",e[e.ALL=126]="ALL"})(ft||(ft={}));var yt;(function(e){e[e.NONE=0]="NONE",e[e.LAYOUT=2]="LAYOUT",e[e.ALIGNMENT=4]="ALIGNMENT",e[e.AUTOFIT=8]="AUTOFIT",e[e.OPTIMIZATION=16]="OPTIMIZATION",e[e.CUSTOMIZATION=32]="CUSTOMIZATION",e[e.ACCESSIBILITY=64]="ACCESSIBILITY",e[e.ALL=126]="ALL"})(yt||(yt={}));var Et;(function(e){e[e.NONE=0]="NONE",e[e.CHECKBOX=1]="CHECKBOX",e[e.RADIO=2]="RADIO",e[e.EDIT=3]="EDIT",e[e.SELECT=4]="SELECT",e[e.RANGE=5]="RANGE",e[e.TEXT=6]="TEXT",e[e.IMAGE=7]="IMAGE",e[e.BUTTON=8]="BUTTON",e[e.INLINE=9]="INLINE",e[e.LINE=10]="LINE",e[e.SPACE=11]="SPACE",e[e.BLOCK=12]="BLOCK",e[e.WEB_VIEW=13]="WEB_VIEW",e[e.FRAME=14]="FRAME",e[e.LINEAR=15]="LINEAR",e[e.RADIO_GROUP=16]="RADIO_GROUP",e[e.GRID=17]="GRID",e[e.RELATIVE=18]="RELATIVE",e[e.CONSTRAINT=19]="CONSTRAINT",e[e.SCROLL_HORIZONTAL=20]="SCROLL_HORIZONTAL",e[e.SCROLL_VERTICAL=21]="SCROLL_VERTICAL"})(Et||(Et={}));var bt;(function(e){e[e.MARGIN_TOP=2]="MARGIN_TOP",e[e.MARGIN_RIGHT=4]="MARGIN_RIGHT",e[e.MARGIN_BOTTOM=8]="MARGIN_BOTTOM",e[e.MARGIN_LEFT=16]="MARGIN_LEFT",e[e.PADDING_TOP=32]="PADDING_TOP",e[e.PADDING_RIGHT=64]="PADDING_RIGHT",e[e.PADDING_BOTTOM=128]="PADDING_BOTTOM",e[e.PADDING_LEFT=256]="PADDING_LEFT",e[e.MARGIN=30]="MARGIN",e[e.MARGIN_VERTICAL=10]="MARGIN_VERTICAL",e[e.MARGIN_HORIZONTAL=20]="MARGIN_HORIZONTAL",e[e.PADDING=480]="PADDING",e[e.PADDING_VERTICAL=160]="PADDING_VERTICAL",e[e.PADDING_HORIZONTAL=320]="PADDING_HORIZONTAL"})(bt||(bt={}));var xt;(function(e){e[e.NONE=0]="NONE",e[e.UNIT=2]="UNIT",e[e.AUTO=4]="AUTO",e[e.LEFT=8]="LEFT",e[e.BASELINE=16]="BASELINE",e[e.PERCENT=32]="PERCENT",e[e.ZERO=64]="ZERO"})(xt||(xt={}));var Tt=/*#__PURE__*/Object.freeze({get APP_FRAMEWORK(){return ct},get APP_SECTION(){return pt},get NODE_ALIGNMENT(){return mt},get NODE_RESOURCE(){return ft},get NODE_PROCEDURE(){return yt},get NODE_STANDARD(){return Et},get BOX_STANDARD(){return bt},get CSS_STANDARD(){return xt}}),vt={INPUT:Et.NONE,PLAINTEXT:Et.TEXT,HR:Et.LINE,IMG:Et.IMAGE,SELECT:Et.SELECT,RANGE:Et.RANGE,TEXT:Et.EDIT,PASSWORD:Et.EDIT,NUMBER:Et.EDIT,EMAIL:Et.EDIT,SEARCH:Et.EDIT,URL:Et.EDIT,CHECKBOX:Et.CHECKBOX,RADIO:Et.RADIO,BUTTON:Et.BUTTON,SUBMIT:Et.BUTTON,RESET:Et.BUTTON,TEXTAREA:Et.EDIT,IFRAME:Et.WEB_VIEW},It=["A","ABBR","ACRONYM","B","BDO","BIG","BR","BUTTON","CITE","CODE","DFN","EM","I","IFRAME","IMG","INPUT","KBD","LABEL","MAP","OBJECT","Q","S","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRIKE","STRONG","SUB","SUP","TEXTAREA","TIME","TT","U","VAR","PLAINTEXT"],At={EXTERNAL:"androme.external",ORIGIN:"androme.origin",ACCESSIBILITY:"androme.accessibility",CUSTOM:"androme.custom",GRID:"androme.grid",LIST:"androme.list",TABLE:"androme.table"},kt=/*#__PURE__*/Object.freeze({MAP_ELEMENT:vt,BLOCK_ELEMENT:["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","CANVAS","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","LI","MAIN","NAV","OL","OUTPUT","P","PRE","SECTION","TFOOT","TH","THEAD","TR","UL","VIDEO"],INLINE_ELEMENT:It,EXT_NAME:At}),Lt=/*#__PURE__*/function(){function e(t,n){l(this,e),this.id=t,this.styleMap={},this.nodeType=0,this.alignmentType=0,this.depth=-1,this.siblingIndex=tt,this.renderIndex=tt,this.renderPosition=-1,this.excludeSection=0,this.excludeProcedure=0,this.excludeResource=0,this.renderExtension=new Set,this.documentRoot=!1,this.auto=!0,this.visible=!0,this.excluded=!1,this.rendered=!1,this._data={},this._initialized=!1,this.initial={depth:-1,children:[],styleMap:{},bounds:he()},n&&(this._element=n,this.init())}return o(e,[{key:"init",value:function(){if(!this._initialized){var e=this._element;if(e instanceof HTMLElement){for(var t=ge(e,"styleMap")||{},n=Array.from(e.style),i=0,a;i<n.length;i++)a=n[i],t[S(a)]=e.style[a];this.style=ge(e,"style")||getComputedStyle(e),this.styleMap=Object.assign({},t),Object.assign(this.initial.styleMap,t)}0!==this.id&&ue(e,"node",this),this._initialized=!0}}},{key:"is",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var i=0,a;i<t.length;i++)if(a=t[i],this.nodeType===a)return!0;return!1}},{key:"of",value:function(e){if(this.nodeType===e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var a=0,l;a<n.length;a++)if(l=n[a],this.hasAlign(l))return!0}return!1}},{key:"attr",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],a="_".concat(e||"_");if(ae(n)){if(null==this[a]&&(this._namespaces.add(e),this[a]={}),!i&&null!=this[a][t])return"";this[a][t]=n.toString()}return this[a][t]||""}},{key:"get",value:function(e){var t="_".concat(e||"_");return this[t]||{}}},{key:"delete",value:function(e){var t="_".concat(e||"_");if(this[t]){for(var n=arguments.length,i=Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var l=0,r;l<i.length;l++)if(r=i[l],-1!==r.indexOf("*")){var o=!0,d=!1,s=void 0;try{for(var h=ne(this[t],r)[Symbol.iterator](),u;!(o=(u=h.next()).done);o=!0){var g=v(u.value,1),c=g[0];delete this[t][c]}}catch(e){d=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(d)throw s}}}else delete this[t][r]}}},{key:"apply",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};for(var n in e){var i=e[n];if("object"===t(i)){for(var a in i)this.attr(n,a,i[a]);delete e[n]}}}},{key:"each",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return(t?this.renderChildren:this.children).forEach(e),this}},{key:"render",value:function(e){this.renderParent=e,this.renderDepth=this.documentRoot||this===e||ae(e.dataset.target)?0:e.renderDepth+1,this.rendered=!0}},{key:"hide",value:function(){this.rendered=!0,this.visible=!1}},{key:"data",value:function(e,t,n){var i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return ae(n)&&(null==this._data[e]&&(this._data[e]={}),(i||null==this._data[e][t])&&(this._data[e][t]=n)),null==this._data[e]?null:this._data[e][t]}},{key:"ascend",value:function(){for(var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=[],a=e?"parent":"documentParent",l=this[a],r=-1;l&&0!==l.id&&!n.includes(l)&&(n.push(l),++r!==t);)l=l[a];return n}},{key:"cascade",value:function e(){function e(t){var n=I(t.children),i=!0,a=!1,l=void 0;try{for(var r=t.children[Symbol.iterator](),o,d;!(i=(o=r.next()).done);i=!0)d=o.value,n.push.apply(n,I(e(d)))}catch(e){a=!0,l=e}finally{try{i||null==r.return||r.return()}finally{if(a)throw l}}return n}return e(this)}},{key:"inherit",value:function(e){var n=this;if(this._initialized){for(var i=function(e,t){for(var n in e)if(null==e[n]){var i=e[n];t[n]=i}},a=arguments.length,l=Array(1<a?a-1:0),r=1;r<a;r++)l[r-1]=arguments[r];for(var o=0,d;o<l.length;o++)switch(d=l[o],d){case"initial":Object.assign(this.initial,e.initial);break;case"base":this.style=e.style;case"dimensions":this.bounds=fe(e.bounds),this.linear=fe(e.linear),this.box=fe(e.box);break;case"data":for(var s in this._data)for(var h in this._data[s]){var u=this._data[s][h];if("object"===t(u)&&!0===u.inherit){var g=e.data(s,h);if(g)for(var c in u)switch(t(u[c])){case"number":g[c]+=u[c];break;case"boolean":!0===u[c]&&(g[c]=!0);break;default:g[c]=u[c];}else e.data(s,h,u);delete this._data[s][h]}}break;case"alignment":["position","display","verticalAlign","cssFloat","clear"].forEach(function(t){n.styleMap[t]=e.css(t),n.initial.styleMap[t]=e.cssInitial(t)}),"auto"===e.css("marginLeft")&&(this.styleMap.marginLeft="auto",this.initial.styleMap.marginLeft="auto"),"auto"===e.css("marginRight")&&(this.styleMap.marginRight="auto",this.initial.styleMap.marginRight="auto");break;case"style":var p={whiteSpace:e.css("whiteSpace")};for(var m in e.style)if(m.startsWith("font")||m.startsWith("color")){var f=S(m);p[f]=e.style[f]}this.css(p);break;case"styleMap":i(e.styleMap,this.styleMap);}}}},{key:"alignedVertically",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Map,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(this.documentParent.baseElement===e.documentParent.baseElement){var i=this.documentParent.has("width",xt.UNIT)?this.documentParent.toInt("width"):this.documentParent.box.width;return this.lineBreak||e.lineBreak||e.blockStatic||e.bounds&&e.bounds.width>i&&(!e.textElement||"nowrap"===e.css("whiteSpace"))||"left"===e.float&&this.autoMarginRight||"right"===e.float&&this.autoMarginLeft||!e.floating&&(!this.inlineElement&&!this.floating||this.blockStatic)||e.plainText&&e.multiLine&&this.parent&&!this.parent.is(Et.RELATIVE)||this.blockStatic&&(!e.inlineElement||t.has(e)&&e.floating)||!n&&t.has(this)||!n&&this.floating&&e.floating&&this.linear.top>=e.linear.bottom}return!1}},{key:"intersect",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear",n=e.top>this[t].top&&e.top<this[t].bottom,i=rt(e.right)>at(this[t].left)&&e.right<this[t].right,a=rt(e.bottom)>at(this[t].top)&&e.bottom<this[t].bottom,l=e.left>this[t].left&&e.left<this[t].right;return n&&(l||i)||a&&(l||i)}},{key:"intersectX",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear";return e.top>=this[t].top&&e.top<this[t].bottom||e.bottom>this[t].top&&e.bottom<=this[t].bottom||this[t].top>=e.top&&this[t].bottom<=e.bottom||e.top>=this[t].top&&e.bottom<=this[t].bottom}},{key:"intersectY",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear";return e.left>=this[t].left&&e.left<this[t].right||e.right>this[t].left&&e.right<=this[t].right||this[t].left>=e.left&&this[t].right<=e.right||e.left>=this[t].left&&e.right<=this[t].right}},{key:"withinX",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear";return this[t].top>=e.top&&this[t].bottom<=e.bottom}},{key:"withinY",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear";return this[t].left>=e.left&&this[t].right<=e.right}},{key:"outsideX",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear";return this[t].right<e.left||this[t].left>e.right}},{key:"outsideY",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear";return this[t].bottom<e.top||this[t].top>e.bottom}},{key:"css",value:function(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"object"===t(e)?(Object.assign(this.styleMap,e),""):(2===arguments.length&&(this.styleMap[e]=ae(n)?n:""),this.styleMap[e]||this.style&&this.style[e]||"")}},{key:"cssInitial",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return this.initial.styleMap[e]||(t?this.css(e):"")}},{key:"cssParent",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i="";if(this.baseElement)for(var a=t?this:pe(this.baseElement.parentElement);a;){if(i=a.initial.styleMap[e]||"",i||a.documentBody){n&&!a.visible&&(i="");break}a=pe(a.baseElement.parentElement)}return i}},{key:"has",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0,i=(n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e];if(ae(i))switch(i){case"0px":if(z(t,xt.ZERO))return!0;case"left":if(z(t,xt.LEFT))return!0;case"baseline":if(z(t,xt.BASELINE))return!0;case"auto":if(z(t,xt.AUTO))return!0;case"none":case"initial":case"normal":case"transparent":case"rgba(0, 0, 0, 0)":return!1;default:if(n&&null!=n.not)if(Array.isArray(n.not)){var a=!0,l=!1,r=void 0;try{for(var o=n.not[Symbol.iterator](),d,s;!(a=(d=o.next()).done);a=!0)if(s=d.value,i===s)return!1}catch(e){l=!0,r=e}finally{try{a||null==o.return||o.return()}finally{if(l)throw r}}}else if(i===n.not)return!1;var h=0===t;return z(t,xt.UNIT)&&W(i)&&(h=!0),z(t,xt.PERCENT)&&V(i)&&(h=!0),z(t,xt.AUTO)&&(h=!1),h;}return!1}},{key:"isSet",value:function(e,t){return!!(this[e]&&null!=this[e][t])&&ae(this[e][t])}},{key:"hasBit",value:function(e,t){return null!=this[e]&&z(this[e],t)}},{key:"toInt",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length?arguments[2]:void 0,i=(n&&"initial"===n.map?this.initial.styleMap:this.styleMap)[e];return parseInt(i)||t}},{key:"hasAlign",value:function(e){return z(this.alignmentType,e)}},{key:"setExclusions",value:function(){var e=this;this.hasElement&&[["excludeSection",pt],["excludeProcedure",yt],["excludeResource",ft]].forEach(function(t){var n=e.dataset[t[0]]||"";e._element.parentElement&&(n+="|"+Q(e._element.parentElement.dataset["".concat(t[0],"Child")])),n.split("|").map(function(e){return e.toUpperCase().trim()}).forEach(function(n){null!=t[1][n]&&(e[t[0]]|=t[1][n])})})}},{key:"setBounds",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(this._element&&!e)if(this.hasElement)this.bounds=fe(this._element.getBoundingClientRect());else{var t=me(this._element);t[0]&&(this.bounds=t[0])}this.bounds&&(0===this.initial.bounds.width&&0===this.initial.bounds.height&&Object.assign(this.initial.bounds,fe(this.bounds)),this.linear={top:this.bounds.top-(0<this.marginTop?this.marginTop:0),right:this.bounds.right+this.marginRight,bottom:this.bounds.bottom+this.marginBottom,left:this.bounds.left-(0<this.marginLeft?this.marginLeft:0),width:0,height:0},this.box={top:this.bounds.top+(this.paddingTop+this.borderTopWidth),right:this.bounds.right-(this.paddingRight+this.borderRightWidth),bottom:this.bounds.bottom-(this.paddingBottom+this.borderBottomWidth),left:this.bounds.left+(this.paddingLeft+this.borderLeftWidth),width:0,height:0},this.setDimensions())}},{key:"setDimensions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["linear","box"],t=!0,n=!1,i=void 0;try{for(var a=e[Symbol.iterator](),l;!(t=(l=a.next()).done);t=!0){var r=l.value,o=this[r];o.width=this.bounds.width,this.plainText||("linear"===r?o.width+=(0<this.marginLeft?this.marginLeft:0)+this.marginRight:"box"===r?o.width-=this.paddingLeft+this.borderLeftWidth+this.paddingRight+this.borderRightWidth:void 0),o.height=o.bottom-o.top,null==this.initial[r]&&(this.initial[r]=fe(o))}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"setMultiLine",value:function(){if(this._element)switch(this._multiLine=!1,this._element.tagName){case"IMG":case"INPUT":case"BUTTON":case"TEXTAREA":case"HR":case"IFRAME":return;default:if(this.textElement){var e=me(this._element),t=v(e,2),n=t[0],i=t[1];this.plainText?(n?(this.bounds=n,this.setBounds(!0)):this.hide(),this.multiLine=i):!this.hasWidth&&(this.blockStatic||"table-cell"===this.display||ke(this._element))&&(this.multiLine=i)}}else this._multiLine=!1}},{key:"getParentElementAsNode",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],t=1<arguments.length?arguments[1]:void 0;if(this._element){var n=pe(this._element.parentElement);if(!this.pageflow){for(var i=!1,a=null,l=null,r=!1;n&&0!==n.id;){if(!l&&"absolute"===this.position){if(!["static","initial"].includes(n.position)){var o=D(this.top),d=D(this.left);if(0<=o&&0<=d||!e||e&&nt(o)<=n.marginTop&&nt(d)<=n.marginLeft||this.imageElement)if(e&&!n.documentRoot&&0!==o&&0!==d&&null==this.bottom&&null==this.right&&(this.outsideX(n.linear)||this.outsideY(n.linear)))r=!0;else{i=!0;break}l=n}}else if(a&&(this.linear.top>=n.linear.top&&this.linear.top<a.linear.top||this.linear.right<=n.linear.right&&this.linear.right>a.linear.right||this.linear.bottom<=n.linear.bottom&&this.linear.bottom>a.linear.bottom||this.linear.left>=n.linear.left&&this.linear.left<a.linear.left)||this.withinX(n.box)&&this.withinY(n.box)){i=!0;break}a=n,n=pe(n.element.parentElement)}i||(n=r&&t?t:l)}return n}return null}},{key:"remove",value:function(e){this.children=this.children.filter(function(t){return t!==e})}},{key:"renderAppend",value:function(e){-1===this.renderChildren.indexOf(e)&&(e.renderIndex=this.renderChildren.length,this.renderChildren.push(e))}},{key:"resetBox",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=[];z(e,bt.MARGIN)&&i.push("marginTop","marginRight","marginBottom","marginLeft"),z(e,bt.PADDING)&&i.push("paddingTop","paddingRight","paddingBottom","paddingLeft");for(var a=0,l;a<i.length;a++)l=i[a],this._boxReset[l]=1,t&&t.modifyBox(l,this[l],n)}},{key:"removeElement",value:function(){this._element&&(null==this._nodeName&&(this._nodeName=this.nodeName),null==this._tagName&&(this._tagName=this.tagName),this._baseElement=this._element,this._element=void 0)}},{key:"previousSibling",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=null;if(this._element)i=this._element.previousSibling;else if(0<this.initial.children.length){var a=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});i=0<a.length?a[0].element.previousSibling:null}for(;i;){var l=pe(i);if(l&&(!l.lineBreak||t)&&(!l.excluded||n)&&(e&&l.pageflow||!e&&l.siblingflow))return l;i=i.previousSibling}return null}},{key:"nextSibling",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],i=null;if(this._element)i=this._element.nextSibling;else if(0<this.initial.children.length){var a=this.initial.children.filter(function(t){return e?t.pageflow:t.siblingflow});i=0<a.length?a[0].element.nextSibling:null}for(;i;){var l=pe(i);if(l&&(!l.lineBreak||t)&&(!l.excluded||n)&&(e&&l.pageflow||!e&&l.siblingflow))return l;i=i.nextSibling}return null}},{key:"actualLeft",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&this.companion[e]?it(this[e].left,this.companion[e].left):this[e].left}},{key:"actualRight",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"linear";return this.companion&&this.companion[e]?lt(this[e].right,this.companion[e].right):this[e].right}},{key:"boxAttribute",value:function(e,t){var n=e+t;if(this.hasElement){var i=this.css(n);return V(i)?this.style[n]&&this.style[n]!==i?D(this.style[n]):this.documentParent.box["Left"===t||"Right"===t?"width":"height"]*(D(i)/100):D(i)}return D(this.css(n))}},{key:"getOverflow",value:function(){if(null==this._overflow&&(this._overflow=0,this.hasElement)){var e=[this.css("overflow"),this.css("overflowX"),this.css("overflowY")],t=e[0],n=e[1],i=e[2];0<this.toInt("width")&&("scroll"===t||"scroll"===n||"auto"===n&&this._element.clientWidth!==this._element.scrollWidth)&&(this._overflow|=mt.HORIZONTAL),0<this.toInt("height")&&("scroll"===t||"scroll"===i||"auto"===i&&this._element.clientHeight!==this._element.scrollHeight)&&(this._overflow|=mt.VERTICAL)}return this._overflow}},{key:"parent",set:function(e){var t=this;e!==this._parent&&(this._parent&&(this._parent.children=this._parent.children.filter(function(e){return e!==t})),this._parent=e),e?(!e.children.includes(this)&&(e.children.push(this),!e.hasElement&&-1!==this.siblingIndex&&(e.siblingIndex=it(this.siblingIndex,e.siblingIndex))),-1===this.initial.depth&&(this.initial.depth=e.depth+1),this.depth=e.depth+1):this.depth=-1},get:function(){return this._parent}},{key:"nodeName",set:function(e){this._nodeName=e},get:function(){return this._nodeName||(this.hasElement?"INPUT"===this.tagName?this._element.type.toUpperCase():this.tagName:"")}},{key:"element",set:function(e){this._element=e},get:function(){return this._element||{dataset:{},style:{}}}},{key:"baseElement",get:function(){return this._baseElement||this.element}},{key:"tagName",get:function(){return this._tagName||this._element&&this._element.tagName||""}},{key:"hasElement",get:function(){return this._element instanceof HTMLElement}},{key:"domElement",get:function(){return this.hasElement||this.plainText}},{key:"documentBody",get:function(){return this._element===document.body}},{key:"renderAs",set:function(e){this.rendered||e.rendered||(this._renderAs=e)},get:function(){return this._renderAs}},{key:"renderDepth",set:function(e){this._renderDepth=e},get:function(){return null==this._renderDepth&&(this.documentRoot?this._renderDepth=0:this.parent&&(this._renderDepth=this.parent.renderDepth+1)),this._renderDepth||0}},{key:"dataset",get:function(){return this._element instanceof HTMLElement?this._element.dataset:{}}},{key:"extension",get:function(){return ae(this.dataset.ext)?this.dataset.ext.split(",")[0].trim():""}},{key:"flex",get:function(){var e=this.style;return e?{enabled:-1!==e.display.indexOf("flex"),direction:e.flexDirection,basis:e.flexBasis,grow:D(e.flexGrow),shrink:D(e.flexShrink),wrap:e.flexWrap,alignSelf:!this.has("alignSelf")&&this.documentParent.has("alignItems")?this.documentParent.css("alignItems"):e.alignSelf,justifyContent:e.justifyContent,order:D(e.order)}:{enabled:!1}}},{key:"viewWidth",get:function(){return this.inlineStatic||this.has("width",xt.PERCENT)?0:this.toInt("width")||this.toInt("minWidth")}},{key:"viewHeight",get:function(){return this.inlineStatic||this.has("height",xt.PERCENT)?0:this.toInt("height")||this.toInt("minHeight")}},{key:"hasWidth",get:function(){return!this.inlineStatic&&(this.has("width",xt.UNIT|xt.PERCENT,{map:"initial",not:["0px","0%"]})||0<this.toInt("minWidth"))}},{key:"hasHeight",get:function(){return!this.inlineStatic&&(this.has("height",xt.UNIT|xt.PERCENT,{map:"initial",not:["0px","0%"]})||0<this.toInt("minHeight"))}},{key:"lineHeight",get:function(){if(this.rendered){if(null==this._lineHeight&&(this._lineHeight=0,0===this.children.length&&!this.renderParent.linearHorizontal)){var e=this.toInt("lineHeight");this._lineHeight=this.inlineElement?e||this.documentParent.toInt("lineHeight"):e}return this._lineHeight}return 0}},{key:"display",get:function(){return this.css("display")}},{key:"position",get:function(){return this.css("position")}},{key:"top",get:function(){var e=this.styleMap.top;return e&&"auto"!==e?D(e):null}},{key:"right",get:function(){var e=this.styleMap.right;return e&&"auto"!==e?D(e):null}},{key:"bottom",get:function(){var e=this.styleMap.bottom;return e&&"auto"!==e?D(e):null}},{key:"left",get:function(){var e=this.styleMap.left;return e&&"auto"!==e?D(e):null}},{key:"marginTop",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Top")}},{key:"marginRight",get:function(){return this.boxAttribute("margin","Right")}},{key:"marginBottom",get:function(){return this.inlineStatic?0:this.boxAttribute("margin","Bottom")}},{key:"marginLeft",get:function(){return this.boxAttribute("margin","Left")}},{key:"borderTopWidth",get:function(){return"none"===this.css("borderTopStyle")?0:D(this.css("borderTopWidth"))}},{key:"borderRightWidth",get:function(){return"none"===this.css("borderRightStyle")?0:D(this.css("borderRightWidth"))}},{key:"borderBottomWidth",get:function(){return"none"===this.css("borderBottomStyle")?0:D(this.css("borderBottomWidth"))}},{key:"borderLeftWidth",get:function(){return"none"===this.css("borderLeftStyle")?0:D(this.css("borderLeftWidth"))}},{key:"paddingTop",get:function(){return this.boxAttribute("padding","Top")}},{key:"paddingRight",get:function(){return this.boxAttribute("padding","Right")}},{key:"paddingBottom",get:function(){return this.boxAttribute("padding","Bottom")}},{key:"paddingLeft",get:function(){return this.boxAttribute("padding","Left")}},{key:"pageflow",set:function(e){this._pageflow=e},get:function(){if(null==this._pageflow){var e=this.position;return"static"===e||"initial"===e||"relative"===e||this.alignOrigin}return this._pageflow}},{key:"siblingflow",get:function(){var e=this.position;return"absolute"!==e&&"fixed"!==e}},{key:"inline",get:function(){var e=this.display;return"inline"===e||"initial"===e&&It.includes(this.tagName)}},{key:"inlineElement",get:function(){var e=this.position,t=this.display;return this.inline||-1!==t.indexOf("inline")||"table-cell"===t||this.floating||("absolute"===e||"fixed"===e)&&this.alignOrigin}},{key:"inlineStatic",get:function(){return this.inline&&!this.floating&&!this.imageElement}},{key:"inlineText",get:function(){if(null==this._inlineText)switch(this.tagName){case"INPUT":case"BUTTON":case"IMG":case"SELECT":case"TEXTAREA":this._inlineText=!1;break;default:this._inlineText=this.hasElement&&Ie(this._element)&&(0===this.children.length||this.children.every(function(e){return!!ge(e.element,"supportInline")}))&&(0===this._element.childNodes.length||!Array.from(this._element.childNodes).some(function(e){var t=pe(e);return!!t&&!t.lineBreak&&(!t.excluded||!t.visible)}));}return this._inlineText}},{key:"plainText",get:function(){return"PLAINTEXT"===this._nodeName}},{key:"imageElement",get:function(){return"IMG"===this.tagName}},{key:"lineBreak",get:function(){return"BR"===this.tagName}},{key:"textElement",get:function(){return this.plainText||this.inlineText}},{key:"block",get:function(){var e=this.display;return"block"===e||"list-item"===e}},{key:"blockStatic",get:function(){return this.block&&this.siblingflow&&(!this.floating||"100%"===this.cssInitial("width"))}},{key:"alignOrigin",get:function(){return null==this.top&&null==this.right&&null==this.bottom&&null==this.left}},{key:"alignNegative",get:function(){return 0>this.toInt("top")||0>this.toInt("left")}},{key:"autoMargin",get:function(){return this.blockStatic&&("auto"===this.initial.styleMap.marginLeft||"auto"===this.initial.styleMap.marginRight)}},{key:"autoMarginLeft",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"!==this.initial.styleMap.marginRight}},{key:"autoMarginRight",get:function(){return this.blockStatic&&"auto"!==this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginHorizontal",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginLeft&&"auto"===this.initial.styleMap.marginRight}},{key:"autoMarginVertical",get:function(){return this.blockStatic&&"auto"===this.initial.styleMap.marginTop&&"auto"===this.initial.styleMap.marginBottom}},{key:"floating",get:function(){var e=this.css("cssFloat");return"absolute"!==this.position&&("left"===e||"right"===e)}},{key:"float",get:function(){return this.floating?this.css("cssFloat"):"none"}},{key:"textContent",get:function(){if(this._element){if(this._element instanceof HTMLElement)return this._element.innerText||this._element.innerHTML;if("#text"===this._element.nodeName)return this._element.textContent||""}return""}},{key:"overflowX",get:function(){return z(this.getOverflow(),mt.HORIZONTAL)}},{key:"overflowY",get:function(){return z(this.getOverflow(),mt.VERTICAL)}},{key:"baseline",get:function(){var e=this.css("verticalAlign");return("baseline"===e||"initial"===e||"unset"===e)&&this.siblingflow}},{key:"baselineInside",get:function(){return 0<this.nodes.length?this.nodes.every(function(e){return e.baseline}):this.baseline}},{key:"multiLine",set:function(e){this._multiLine=e},get:function(){return null==this._multiLine&&this.setMultiLine(),this._multiLine}},{key:"preserveWhiteSpace",get:function(){var e=this.css("whiteSpace");return"pre"===e||"pre-wrap"===e}},{key:"actualHeight",get:function(){return this.plainText?this.bounds.bottom-this.bounds.top:this.bounds.height}},{key:"singleChild",get:function(){return this.rendered?1===this.renderParent.length:1===this.parent.length}},{key:"dir",get:function(){switch(this.css("direction")){case"unset":case"inherit":var e=this.documentParent;do{var t=e.dir;if(""!==t)return t;e=e.documentParent}while(0!==e.id);return"";case"rtl":return"rtl";default:return"ltr";}}},{key:"nodes",get:function(){return this.rendered?this.renderChildren:this.children}},{key:"length",get:function(){return this.nodes.length}},{key:"previousElementSibling",get:function(){for(var e=this.baseElement.previousSibling;e;){if(Ae(e)||e instanceof HTMLElement||"BR"===e.tagName)return e;e=e.previousSibling}return null}},{key:"nextElementSibling",get:function(){for(var e=this.baseElement.nextSibling;e;){if(Ae(e)||e instanceof HTMLElement||"BR"===e.tagName)return e;e=e.nextSibling}return null}},{key:"firstElementChild",get:function(){var e=this.baseElement;if(e instanceof HTMLElement)for(var t=0,n;t<e.childNodes.length;t++){if(n=e.childNodes[t],n instanceof Element)return n;if(Ae(n))return n}return null}},{key:"lastElementChild",get:function(){var e=this.baseElement;if(e instanceof HTMLElement)for(var t=e.childNodes.length-1,n;0<=t;t--){if(n=e.childNodes[t],n instanceof Element)return n;if(Ae(n))return n}return null}},{key:"center",get:function(){return{x:this.bounds.left+rt(this.bounds.width/2),y:this.bounds.top+rt(this.actualHeight/2)}}}]),e}(),Nt=/*#__PURE__*/function(){function e(t,n){l(this,e),this.parent=n,this._currentId=0,this._list=[],Array.isArray(t)&&(this._list=t)}return o(e,[{key:Symbol.iterator,value:function(){var e=this._list,t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0,value:void 0}}}}},{key:"reset",value:function(){this._currentId=0,this.clear()}},{key:"get",value:function(e){return null==e?this._list[this._list.length-1]:this._list[e]}},{key:"append",value:function(){for(var e=arguments.length,t=Array(e),n=0,i;n<e;n++)t[n]=arguments[n];(i=this._list).push.apply(i,t),"function"==typeof this.delegateAppend&&this.delegateAppend.call(this,t)}},{key:"prepend",value:function(){var e;(e=this._list).unshift.apply(e,arguments)}},{key:"remove",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this._list.splice(e,t)}},{key:"clone",value:function(){return new e(this._list.slice())}},{key:"filter",value:function(t){return new e(this._list.filter(t))}},{key:"sort",value:function(t){return new e(this._list.slice().sort(t))}},{key:"partition",value:function(t){var n=re(this._list,t),i=v(n,2),a=i[0],l=i[1];return[new e(a),new e(l)]}},{key:"each",value:function(e){this._list.forEach(e)}},{key:"locate",value:function(e,t){return"string"==typeof e?this._list.find(function(n){return n[e]===t}):this._list.find(e)}},{key:"clear",value:function(){this._list.length=0}},{key:"sortAsc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return oe.apply(void 0,[this._list].concat(t)),this}},{key:"sortDesc",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return de.apply(void 0,[this._list].concat(t)),this}},{key:"length",get:function(){return this._list.length}},{key:"list",get:function(){return this._list}},{key:"visible",get:function(){return new e(this._list.filter(function(e){return e.visible}))}},{key:"elements",get:function(){return new e(this._list.filter(function(e){return e.visible&&e.hasElement}))}},{key:"nextId",get:function(){return++this._currentId}},{key:"linearX",get:function(){return e.linearX(this._list)}},{key:"linearY",get:function(){return e.linearY(this._list)}}],[{key:"siblingIndex",value:function(e,t){return e.siblingIndex<=t.siblingIndex?-1:1}},{key:"outerRegion",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"linear",n=[],a=[],l=[],r=[],o=e.slice(),d=!0,s=!1,h=void 0;try{for(var u=e[Symbol.iterator](),g,c;!(d=(g=u.next()).done);d=!0)c=g.value,c.companion&&o.push(c.companion)}catch(e){s=!0,h=e}finally{try{d||null==u.return||u.return()}finally{if(s)throw h}}for(var p=0,m;p<o.length;p++)m=o[p],0==p?(n.push(m),a.push(m),l.push(m),r.push(m)):(n[0][t].top===m[t].top?n.push(m):m[t].top<n[0][t].top&&(n=[m]),a[0][t].right===m[t].right?a.push(m):m[t].right>a[0][t].right&&(a=[m]),l[0][t].bottom===m[t].bottom?l.push(m):m[t].bottom>l[0][t].bottom&&(l=[m]),r[0][t].left===m[t].left?r.push(m):m[t].left<r[0][t].left&&(r=[m]));return{top:n,right:a,bottom:l,left:r}}},{key:"floated",value:function(e){return new Set(e.map(function(e){return e.float}).filter(function(e){return"none"!==e}))}},{key:"cleared",value:function(e){var t=new Map,n=new Set;return e.forEach(function(e){if(e.siblingflow){var i=e.css("clear");0<n.size&&("both"===i?(t.set(e,2===n.size?"both":n.values().next().value),n.clear()):n.has(i)&&(n.delete(i),t.set(e,i))),e.floating&&n.add(e.float)}}),t}},{key:"textBaseline",value:function(e){var t=[];if(!e.some(function(e){return(e.textElement||e.imageElement)&&e.baseline}))t=e.filter(function(e){return e.baseline}).sort(function(e,t){var n=e.nodeType,i=t.nodeType;return e.layoutHorizontal&&(n=it.apply(null,e.children.map(function(e){return 0<e.nodeType?e.nodeType:Et.INLINE}))),t.layoutHorizontal&&(i=it.apply(null,t.children.map(function(e){return 0<e.nodeType?e.nodeType:Et.INLINE}))),n<=i?-1:1});else{var n=lt.apply(null,e.map(function(e){return e.lineHeight})),i=lt.apply(null,e.map(function(e){return e.bounds.height}));if(n>i){var a=e.filter(function(e){return e.lineHeight===n});return(a.length===e.length?a.filter(function(e){return e.hasElement}):a).filter(function(e){return e.baseline})}t=e.filter(function(e){return e.baselineInside}).sort(function(e,t){var n=D(e.css("fontSize")),i=D(t.css("fontSize")),a=e.bounds.height,l=t.bounds.height;return e.imageElement&&t.imageElement?a>=l?-1:1:e.nodeType!==t.nodeType&&(e.nodeType<Et.TEXT||t.nodeType<Et.TEXT)?e.textElement||e.imageElement?-1:t.textElement||t.imageElement?1:e.nodeType<t.nodeType?-1:1:e.lineHeight>l&&0===t.lineHeight||t.imageElement?-1:t.lineHeight>a&&0===e.lineHeight||e.imageElement?1:n===i&&a===l?e.hasElement&&!t.hasElement?-1:!e.hasElement&&t.hasElement?1:e.siblingIndex<=t.siblingIndex?-1:1:n!==i&&0!==n&&0!==i?n>i?-1:1:a>=l?-1:1})}var l,r,o;return t.filter(function(e,n){return 0===n?(l=e.css("fontFamily"),r=e.css("fontSize"),o=e.css("fontWeight"),!0):e.css("fontFamily")===l&&e.css("fontSize")===r&&e.css("fontWeight")===o&&e.nodeName===t[0].nodeName&&(0<e.lineHeight&&e.lineHeight===t[0].lineHeight||e.bounds.height===t[0].bounds.height)})}},{key:"linearX",value:function(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=t.filter(function(e){return e.pageflow});switch(i.length){case 0:return!1;case 1:return!0;default:var a=this.documentParent(i),l=!1;if(n&&i.every(function(e){return e.documentParent===a||e.companion&&e.companion.documentParent===a})){var r=e.cleared(Array.from(a.baseElement.children).map(function(e){return pe(e)}).filter(function(e){return e}));l=i.slice().sort(e.siblingIndex).every(function(e,t){if(0<t){e.companion&&e.companion.documentParent===a&&(e=e.companion);var n=e.previousSibling();if(n)return!e.alignedVertically(n,r)}return!0})}return(l||!n)&&i.every(function(e){return!i.some(function(t){return!!(t!==e&&e.linear.top>=t.linear.bottom&&e.intersectY(t.linear))})});}}},{key:"linearY",value:function(t){var n=t.filter(function(e){return e.pageflow});switch(n.length){case 0:return!1;case 1:return!0;default:var i=this.documentParent(n);if(n.every(function(e){return e.documentParent===i||e.companion&&e.companion.documentParent===i})){var a=e.cleared(Array.from(i.baseElement.children).map(function(e){return pe(e)}).filter(function(e){return e}));return n.slice().sort(e.siblingIndex).every(function(e,t){if(0<t&&!e.lineBreak){e.companion&&e.companion.documentParent===i&&(e=e.companion);var n=e.previousSibling();if(n)return e.alignedVertically(n,a)}return!0})}return!1;}}},{key:"documentParent",value:function(e){var t=!0,n=!1,i=void 0;try{for(var a=e[Symbol.iterator](),l,r;!(t=(l=a.next()).done);t=!0)if(r=l.value,!r.companion&&r.domElement)return r.documentParent}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return e[0].documentParent}}]),e}(),Rt=/*#__PURE__*/function(e){function t(e,n){return l(this,t),E(this,u(t).call(this,e,n))}return h(t,e),o(t,[{key:"init",value:function(){var e=this,n;x(u(t.prototype),"init",this).call(this),this.children.forEach(function(t){e.siblingIndex=it(e.siblingIndex,t.siblingIndex),t.parent=e}),this.parent.children.sort(Nt.siblingIndex),(n=this.initial.children).push.apply(n,I(this.children.slice())),this.setBounds(),this.css("direction",this.documentParent.dir)}},{key:"setBounds",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(!e){var t=Nt.outerRegion(this.children);this.bounds={top:t.top[0].linear.top,right:t.right[0].linear.right,bottom:t.bottom[0].linear.bottom,left:t.left[0].linear.left,width:0,height:0},this.bounds.width=this.bounds.right-this.bounds.left,this.bounds.height=this.bounds.bottom-this.bounds.top}this.linear=fe(this.bounds),this.box=fe(this.bounds),this.setDimensions()}},{key:"previousSibling",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return 0<this.children.length?this.children[0].previousSibling(e,t,n):null}},{key:"nextSibling",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0],t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return 0<this.children.length?this.children[this.children.length-1].nextSibling(e,t,n):null}},{key:"inline",get:function(){return this.children.every(function(e){return e.inline})}},{key:"pageflow",get:function(){return this.children.every(function(e){return e.pageflow})}},{key:"siblingflow",get:function(){return this.children.every(function(e){return e.siblingflow})}},{key:"inlineElement",get:function(){return this.hasAlign(mt.SEGMENTED)}},{key:"inlineStatic",get:function(){return this.children.every(function(e){return e.inlineStatic})}},{key:"blockStatic",get:function(){return this.children.every(function(e){return e.blockStatic})}},{key:"floating",get:function(){return this.hasAlign(mt.FLOAT)}},{key:"float",get:function(){return this.floating?this.hasAlign(mt.RIGHT)?"right":"left":"none"}},{key:"baseline",get:function(){return this.children.every(function(e){return e.baseline})}},{key:"multiLine",get:function(){return this.children.some(function(e){return e.multiLine})}},{key:"display",get:function(){return this.has("display")?this.css("display"):this.children.every(function(e){return e.blockStatic})||this.of(Et.CONSTRAINT,mt.PERCENT)?"block":this.children.every(function(e){return e.inline})?"inline":"inline-block"}},{key:"baseElement",get:function(){function e(t){for(var n=0,a;n<t.length;n++){if(a=t[n],a.hasElement||a.plainText)return a.element;if(0<a.length){var l=e(a.nodes);if(l)return l}}return null}return e(this.nodes)||x(u(t.prototype),"baseElement",this)}},{key:"firstElementChild",get:function(){var e=this.documentParent.element;if(e instanceof HTMLElement)for(var t=0,n;t<e.childNodes.length;t++)if(n=e.childNodes[t],this.nodes.includes(pe(n)))return n;return null}},{key:"lastElementChild",get:function(){var e=this.baseElement;if(e instanceof HTMLElement)for(var t=e.childNodes.length-1,n;0<=t;t--)if(n=e.childNodes[t],this.nodes.includes(pe(n)))return n;return null}}]),t}(Lt),_t=/*#__PURE__*/Object.freeze({formatPlaceholder:_e,replacePlaceholder:we,removePlaceholders:function(e){return e.replace(/{[<:@>]{1}[0-9]+(\:[0-9]+)?}/g,"").trim()},replaceIndent:Se,replaceTab:function(e,t){var n=t.insertSpaces,i=void 0===n?4:n,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return 0<i&&(a?e=e.split("\n").map(function(e){var t=e.match(/^(\t+)(.*)$/);return t?" ".repeat(i*t[1].length)+t[2]:e}).join("\n"):e=e.replace(/\t/g," ".repeat(i))),e},replaceEntity:Ce,getTemplateLevel:function(e){for(var t=e,n=arguments.length,i=Array(1<n?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];for(var l=0;l<i.length;l++){var r=i[l],o=r.split("-"),d=v(o,2),s=d[0],h=d[1],u=void 0===h?"0":h;t=t[s][u]}return t},parseTemplate:function(e){var t={},n=null,i=!1,a=0,l=e.length;do{if(i){var r=i[0].replace(new RegExp(i[1],"g"),"");for(var o in t)t[o]=t[o].replace(new RegExp(i[0],"g"),"{%".concat(i[2],"}"));t[i[2]]=r,l-=i[0].length}if(null==i||0===l){if(e=t[a++],!e)break;l=e.length,i=null}if(i||(n=/(!([0-9]+)\n?)[\w\W]*\1/g),n)i=n.exec(e);else break}while(!0);return t},insertTemplateData:Be}),wt=/*#__PURE__*/function(){function e(t){l(this,e),this.framework=t,this.renderQueue={},this.loading=!1,this.closed=!1,this.cache=new Nt,this.cacheSession=new Nt,this.elements=new Set,this.extensions=[],this._sorted={},this._currentIndex=-1,this._views=[],this._includes=[]}return o(e,[{key:"registerController",value:function(e){e.application=this,e.settings=this.settings,e.cache=this.cache,this.viewController=e}},{key:"registerResource",value:function(e){e.application=this,e.settings=this.settings,e.cache=this.cache,this.resourceHandler=e}},{key:"registerExtension",value:function(e){var t=this,n=this.getExtension(e.name);n?(Array.isArray(e.tagNames)&&(n.tagNames=e.tagNames),Object.assign(n.options,e.options)):(0===e.framework||z(e.framework,this.framework))&&e.dependencies.every(function(e){return!!t.getExtension(e.name)})&&(e.application=this,this.extensions.push(e))}},{key:"finalize",value:function(){var e=this.cacheSession.visible.list.filter(function(e){return!e.hasAlign(mt.SPACE)}),t=!0,n=!1,i=void 0;try{for(var a=e[Symbol.iterator](),l,r;!(t=(l=a.next()).done);t=!0)r=l.value,r.hasBit("excludeProcedure",yt.LAYOUT)||r.setLayout(),r.hasBit("excludeProcedure",yt.ALIGNMENT)||r.setAlignment(this.settings)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}var o=!0,d=!1,s=void 0;try{for(var h=e[Symbol.iterator](),u,g;!(o=(u=h.next()).done);o=!0)g=u.value,g.hasBit("excludeProcedure",yt.OPTIMIZATION)||g.applyOptimizations(this.settings),g.hasBit("excludeProcedure",yt.CUSTOMIZATION)||g.applyCustomizations(this.settings)}catch(e){d=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(d)throw s}}this.viewController.setBoxSpacing(this.viewData),this.appendRenderQueue(),this.viewController.setDimensions(this.viewData),this.resourceHandler.finalize(this.viewData),this.viewController.finalize(this.viewData);var c=!0,p=!1,m=void 0;try{for(var f=this.extensions[Symbol.iterator](),y;!(c=(y=f.next()).done);c=!0){var E=y.value,b=!0,x=!1,T=void 0;try{for(var v=E.subscribers[Symbol.iterator](),I,A;!(b=(I=v.next()).done);b=!0)A=I.value,E.setTarget(A),E.finalize()}catch(e){x=!0,T=e}finally{try{b||null==v.return||v.return()}finally{if(x)throw T}}}}catch(e){p=!0,m=e}finally{try{c||null==f.return||f.return()}finally{if(p)throw m}}this.closed=!0}},{key:"reset",value:function(){var e=!0,t=!1,n=void 0;try{for(var i=this.cacheSession[Symbol.iterator](),a,l;!(e=(a=i.next()).done);e=!0)l=a.value,ce(l.element,"node","style","styleMap","supportInline","boxSpacing","boxStyle","fontStyle","imageSource","optionArray","valueString")}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.reset(),this.cacheSession.reset(),this.resetController(),this.resetResource(),this._views.length=0,this._includes.length=0,this._sorted={},this._currentIndex=-1,this.appName="",this.renderQueue={};var r=!0,o=!1,d=void 0;try{for(var s=this.extensions[Symbol.iterator](),h,u;!(r=(h=s.next()).done);r=!0)u=h.value,u.subscribers.clear(),u.subscribersChild.clear()}catch(e){o=!0,d=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw d}}this.closed=!1}},{key:"setConstraints",value:function(){this.viewController.setConstraints()}},{key:"resetController",value:function(){this.viewController.reset()}},{key:"setResources",value:function(){this.resourceHandler.setBoxStyle(),this.resourceHandler.setFontStyle(),this.resourceHandler.setBoxSpacing(),this.resourceHandler.setValueString(),this.resourceHandler.setOptionArray(),this.resourceHandler.setImageSource()}},{key:"resetResource",value:function(){this.resourceHandler.reset()}},{key:"initCache",value:function(e){function t(e){var t=ge(e,"styleMap");return(!t||0===Object.keys(t).length)&&0===e.children.length&&g.includes(e.tagName)}var n=this,i=0;e===document.body&&Array.from(document.body.childNodes).some(function(e){return Re(e)&&1<++i});var a=e===document.body?document.querySelectorAll(1<i?"body, body *":"body *"):e.querySelectorAll("*");this.cache.parent=void 0,this.cache.delegateAppend=void 0,this.cache.clear();var l=!0,r=!1,o=void 0;try{for(var d=this.extensions[Symbol.iterator](),s,h;!(l=(s=d.next()).done);l=!0)h=s.value,h.setTarget({},void 0,e),h.beforeInit()}catch(e){r=!0,o=e}finally{try{l||null==d.return||d.return()}finally{if(r)throw o}}var u=this.insertNode(e);if(u)u.parent=new this.nodeObject(0,(e===document.body?e:e.parentElement)||document.body),u.documentRoot=!0,this.viewController.initNode(u),this.cache.parent=u;else return!1;for(var g=this.settings.renderInlineText?["BR"]:this.viewController.supportInline,c=Array.from(a),p=function(){var i=c[m];if(!n.elements.has(i)&&(n.prioritizeExtensions(n.extensions,i).some(function(e){return e.init(i)}),!n.elements.has(i))){t(i)&&i.parentElement&&Array.from(i.parentElement.children).every(function(e){return t(e)})&&ue(i,"supportInline",!0);for(var a=!0,l=i.parentElement;l&&l!==e;){if(l!==e&&n.elements.has(l)){a=!1;break}l=l.parentElement}if(a){var r=ge(i,"styleMap");switch(r||(r={},ue(i,"styleMap",r)),i.tagName){case"SELECT":null==r.verticalAlign&&1<i.size&&(r.verticalAlign="text-bottom");}n.insertNode(i)}}},m=0;m<c.length;m++)p();if(0<this.cache.length){var f=!0,y=!1,E=void 0;try{for(var b=function(){var e=T.value,t=[],i=!1;Array.from(e.element.childNodes).forEach(function(n){if("#text"===n.nodeName)"SELECT"!==e.tagName&&t.push(n);else if("BR"!==n.tagName){var a=pe(n);g.includes(n.tagName)&&(!a||a.excluded)||(i=!0)}}),i&&t.forEach(function(t){return n.insertNode(t,e)})},x=this.cache[Symbol.iterator](),T;!(f=(T=x.next()).done);f=!0)b()}catch(e){y=!0,E=e}finally{try{f||null==x.return||x.return()}finally{if(y)throw E}}var v={},A=[],k=!0,L=!1,N=void 0;try{for(var R=function(){var e=w.value;if(e.hasElement){var t=e.element,n=e.css("textAlign");v[e.id]={};var i=v[e.id];["right","end","BUTTON"!==t.tagName&&"button"!==t.type?"center":""].some(function(e){return e===n&&(i.textAlign=e,t.style.textAlign="left",!0)}),0>e.marginLeft&&(i.marginLeft=e.css("marginLeft"),t.style.marginLeft="0px"),0>e.marginTop&&(i.marginTop=e.css("marginTop"),t.style.marginTop="0px"),"relative"===e.position&&["top","right","bottom","left"].forEach(function(n){e.has(n)&&(i[n]=e.styleMap[n],t.style[n]="auto")}),(e.overflowX||e.overflowY)&&(e.has("width")&&(i.width=e.styleMap.width,t.style.width="auto"),e.has("height")&&(i.height=e.styleMap.height,t.style.height="auto"),i.overflow=e.style.overflow||"",t.style.overflow="visible"),"rtl"===t.dir&&(t.dir="ltr",A.push(t)),e.setBounds()}e.setMultiLine()},_=this.cache[Symbol.iterator](),w;!(k=(w=_.next()).done);k=!0)R()}catch(e){L=!0,N=e}finally{try{k||null==_.return||_.return()}finally{if(L)throw N}}var S=!0,C=!1,B=void 0;try{for(var D=this.cache[Symbol.iterator](),O,F;!(S=(O=D.next()).done);S=!0){if(F=O.value,F.hasElement){var M=F.element,G=v[F.id];if(G){for(var P in G)M.style[P]=G[P];A.includes(M)&&(M.dir="rtl")}}if(1===F.children.length){var H=F.children[0];H.pageflow||0!==H.toInt("top")||0!==H.toInt("right")||0!==H.toInt("bottom")||0!==H.toInt("left")||(H.pageflow=!0)}}}catch(e){C=!0,B=e}finally{try{S||null==D.return||D.return()}finally{if(C)throw B}}var z=!0,U=!1,X=void 0;try{for(var W=this.cache[Symbol.iterator](),V,j;!(z=(V=W.next()).done);z=!0)if(j=V.value,!j.documentRoot){var Y=j.getParentElementAsNode(this.settings.supportNegativeLeftTop,this.cache.parent);Y||j.pageflow||(Y=this.cache.parent),Y?(j.parent=Y,j.documentParent=Y):j.hide()}}catch(e){U=!0,X=e}finally{try{z||null==W.return||W.return()}finally{if(U)throw X}}var Z=!0,q=!1,Q=void 0;try{for(var K=function(){var e=$.value,t=0,n;Array.from(e.element.childNodes).forEach(function(e){var n=pe(e);n&&!n.excluded&&n.pageflow&&(n.siblingIndex=t++)}),e.children.sort(Nt.siblingIndex),(n=e.initial.children).push.apply(n,I(e.children.slice()))},J=this.cache.elements[Symbol.iterator](),$;!(Z=($=J.next()).done);Z=!0)K()}catch(e){q=!0,Q=e}finally{try{Z||null==J.return||J.return()}finally{if(q)throw Q}}this.cache.sortAsc("depth","id");var ee=!0,te=!1,ne=void 0;try{for(var ie=this.extensions[Symbol.iterator](),ae,le;!(ee=(ae=ie.next()).done);ee=!0)le=ae.value,le.setTarget(u),le.afterInit()}catch(e){te=!0,ne=e}finally{try{ee||null==ie.return||ie.return()}finally{if(te)throw ne}}return this.createLayout(e.dataset.layoutName),!0}return!1}},{key:"createDocument",value:function(){function e(e,t,n){r.has(e)||r.set(e,new Map);var i=r.get(e);i&&i.set(t,n)}function t(e){var t=!0,n=!1,i=void 0;try{for(var a=r.values()[Symbol.iterator](),l;!(t=(l=a.next()).done);t=!0){var o=l.value,d=!0,s=!1,h=void 0;try{for(var u=o.values()[Symbol.iterator](),g,c;!(d=(g=u.next()).done);d=!0)if(c=g.value,c.id===e)return void o.delete(c.id)}catch(e){s=!0,h=e}finally{try{d||null==u.return||u.return()}finally{if(s)throw h}}}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}var n=this,a=this,l=[],r=new Map,o=this.viewController.baseTemplate,d=!0,s;e(-1,0,this.cache.parent.parent);var h=0,u=!0,g=!1,c=void 0;try{for(var p=this.cache.visible[Symbol.iterator](),m;!(u=(m=p.next()).done);u=!0){var f=m.value,y=rt(f.linear.left);null==l[f.depth]&&(l[f.depth]={}),null==l[f.depth][y]&&(l[f.depth][y]=[]),l[f.depth][y].push(f),e(f.depth,f.id,f),h=lt(f.depth,h)}}catch(e){g=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(g)throw c}}for(var E=0;E<h;E++)r.set(-1*E-2,new Map);this.cache.delegateAppend=function(n){n.forEach(function(n){t(n.id),e(-1*n.initial.depth-2,n.id,n),n.cascade().forEach(function(n){t(n.id),e(-1*n.initial.depth-2,n.id,n)})})};var b=!0,x=!1,T=void 0;try{for(var A=function(){function e(e,t,n,i,a){var l=n+(""===a&&-1!==t.renderPosition?":".concat(t.renderPosition):"");e.has(l)||e.set(l,new Map);var r=e.get(l);r&&r.set(t.id,i)}function t(t,n,i){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",r=!!(4<arguments.length&&void 0!==arguments[4])&&arguments[4];if(""!==i)if(r&&t.each(function(n){[s,h].some(function(i){var a=!0,r=!1,o=void 0;try{for(var d=s.values()[Symbol.iterator](),h;!(a=(h=d.next()).done);a=!0){var u=h.value,g=u.get(n.id);if(g){var c=t.renderDepth+1;return n.renderDepth!==c&&(g=Se(g,c),n.renderDepth=c),e(i,n,t.id.toString(),g,l),u.delete(n.id),!0}}}catch(e){r=!0,o=e}finally{try{a||null==d.return||d.return()}finally{if(r)throw o}}return!1})}),""!==l)e(h,t,l,i,l);else{if(!a.elements.has(t.element))if(ae(t.dataset.target)){var o=document.getElementById(t.dataset.target);if(o&&o!==n.element)return a.addRenderQueue(t.dataset.target,[i]),void(t.auto=!1)}else if(ae(n.dataset.target)){var d=document.getElementById(n.dataset.target);if(d)return a.addRenderQueue(n.nodeId,[i]),void(t.dataset.target=n.nodeId)}e(s,t,n.id.toString(),i,l)}}var i=L.value,s=new Map,h=new Map,u=!0,g=!1,c=void 0;try{for(var p=function(){var e=f.value;if(0===e.children.length||e.renderAs)return"continue";var i=[],a=[],o=[],d=[],s=!0,h=!1,u=void 0;try{for(var g=e.children[Symbol.iterator](),c,p;!(s=(c=g.next()).done);s=!0)p=c.value,p.documentRoot?i.push(p):p.pageflow||p.alignOrigin?o.push(p):0<=p.toInt("zIndex")||p.parent.element!==p.element.parentElement?d.push(p):a.push(p)}catch(e){h=!0,u=e}finally{try{s||null==g.return||g.return()}finally{if(h)throw u}}n.sortByAlignment(o,e),i.push.apply(i,I(oe(a,"style.zIndex","id"))),i.push.apply(i,o),i.push.apply(i,I(oe(d,"style.zIndex","id")));for(var y=Nt.cleared(i),E=[],b="",x=-1,m=function(){var e=i[x];if(!e.visible||!e.documentRoot&&n.elements.has(e.element))return"continue";var a=e.parent;if(!e.hasBit("excludeSection",pt.INCLUDE)&&n.viewController.supportInclude){var o=Q(e.dataset.include);if(""!==o&&-1===E.indexOf(o)&&(t(e,a,n.viewController.renderInclude(e,a,o),0<E.length?E[E.length-1]:""),E.push(o)),b=0<E.length?E[E.length-1]:"",""!==b){var d=a.clone();d.renderDepth=n.viewController.baseRenderDepth(b),e.parent=d,a=d}}if(e.renderAs&&(a.remove(e),e.hide(),e=e.renderAs),!e.hasBit("excludeSection",pt.DOM_TRAVERSE)&&1<i.length&&x<i.length-1){var s=a.linearVertical;if(e.pageflow&&""===b&&!a.flex.enabled&&!a.has("columnCount")&&!a.is(Et.GRID)&&(e.alignmentType===mt.NONE&&a.alignmentType===mt.NONE||e.hasAlign(mt.EXTENDABLE))){var h=[],u=[],g=new Set(["left","right"]),c=!1,p=x,f=0;e.hasAlign(mt.EXTENDABLE)&&(h.push(e),p++,f++);forloop1:for(;p<i.length;p++,f++){var T=i[p];if(T.pageflow){if(y.has(T)){var v=y.get(T);"both"===v?g.clear():g.delete(v)}T.floating&&g.add(T.float);var A=T.previousSibling(),k=T.nextSibling(!0);if(0===f&&k)T.blockStatic||k.alignedVertically(T,y,!0)?u.push(T):h.push(T);else if(A){var L=function(){var e=Nt.floated(h.concat(u)),t=h.concat(u,[T]),i=Nt.cleared(t),a=new Map;i.has(A)&&a.set(A,A.css("clear"));var l=T.alignedVertically(A,a);if(l||i.has(T)||n.settings.floatOverlapDisabled&&A.floating&&T.blockStatic&&2===g.size){if(0<h.length){if(!n.settings.floatOverlapDisabled&&!A.lineBreak){var r=new Set(t.map(function(e){return i.get(e)||""}).filter(function(e){return""!==e})),o=null;if(0<e.size&&(o=lt.apply(null,h.filter(function(e){return e.floating}).map(function(e){return e.bounds.bottom}))),0<g.size&&!r.has("both")&&(null==o||T.bounds.top<o)){if(i.has(T)){var d=i.has(T)?i.get(T):"none";if("none"!==d){if(2>g.size&&2===e.size&&!T.floating)return T.alignmentType|=mt.EXTENDABLE,c=!0,h.push(T),"continue";}else if(2>e.size&&(!T.floating||!e.has(T.float)||T.float===h[h.length-1].float))return h.push(T),"continue";return"break|forloop1"}if(!l)return h.push(T),"continue";if(1===e.size&&(!T.floating||g.has(T.float)))return h.push(T),"continue"}}return"break|forloop1"}if(s&&0<u.length){var p=u[u.length-1];if(p.linearVertical)return T.parent=p,"continue"}u.push(T)}else{if(0<u.length||c)return"break|forloop1";h.push(T)}}();switch(L){case"continue":continue;case"break|forloop1":break forloop1;}}else break forloop1}}var N=null,R="";if(1<h.length){var _=Nt.cleared(h);if(n.isFrameHorizontal(h,_))N=n.viewController.createGroup(a,e,h),R=n.writeFrameLayoutHorizontal(N,a,h,_);else if(h.length===i.length)a.alignmentType|=mt.HORIZONTAL;else{var w=Nt.floated(h);1===w.size&&h.some(function(e){return e.has("width",xt.PERCENT)})&&h.every(function(e){return e.has("width",xt.UNIT|xt.PERCENT)})?(N=n.viewController.createGroup(a,e,h),R=n.writeConstraintLayout(N,a),N.alignmentType|=mt.PERCENT):n.isRelativeHorizontal(h,_)?(N=n.viewController.createGroup(a,e,h),R=n.writeRelativeLayout(N,a),N.alignmentType|=mt.HORIZONTAL):(N=n.viewController.createGroup(a,e,h),R=n.writeLinearLayout(N,a,!0),0<w.size?(N.alignmentType|=mt.FLOAT,N.alignmentType|=h.every(function(e){return"right"===e.float||e.autoMarginLeft})?mt.RIGHT:mt.LEFT):N.alignmentType|=mt.HORIZONTAL)}}else if(1<u.length){var S=Nt.floated(u),C=Nt.cleared(u);if(0<S.size&&0<C.size&&!(1===S.size&&u.slice(1,u.length-1).every(function(e){return C.has(e)}))?a.linearVertical?(N=e,R=n.writeFrameLayoutVertical(null,a,u,C)):(N=n.viewController.createGroup(a,e,u),R=n.writeFrameLayoutVertical(N,a,u,C)):u.length===i.length?a.alignmentType|=mt.VERTICAL:!s&&(N=n.viewController.createGroup(a,e,u),R=n.writeLinearLayout(N,a,!1),N.alignmentType|=mt.VERTICAL),u.length!==i.length){var B=u[u.length-1];B.blockStatic||B===i[i.length-1]||(B.alignmentType|=mt.EXTENDABLE)}}N&&(t(N,a,R,"",!0),a=e.parent),e.hasAlign(mt.EXTENDABLE)&&(e.alignmentType^=mt.EXTENDABLE)}}if(!e.hasBit("excludeSection",pt.EXTENSION)&&!e.rendered){var D=!1;forloop2:{var O=[],F=!0,M=!1,G=void 0;try{for(var P=n.extensions[Symbol.iterator](),H,z;!(F=(H=P.next()).done);F=!0)z=H.value,z.subscribersChild.has(e)&&O.push(z)}catch(e){M=!0,G=e}finally{try{F||null==P.return||P.return()}finally{if(M)throw G}}for(var U=I(a.renderExtension).concat(O),X=0,W;X<U.length;X++){W=U[X],W.setTarget(e,a);var V=W.processChild();if(""!==V.output&&t(e,a,V.output,b),V.parent&&(a=V.parent),D=V.next||!1,V.complete||V.next)break forloop2}}if(D)return"continue";if(e.element instanceof HTMLElement){var j=[];if(n.prioritizeExtensions(n.extensions,e.element).some(function(n){if(n.is(e)&&(n.setTarget(e,a),n.condition())){var i=n.processNode(l,r);if(""!==i.output&&t(e,a,i.output,b),i.parent&&(a=i.parent),(""!==i.output||i.include)&&j.push(n),D=i.next||!1,i.complete||i.next)return!0}return!1}),0<j.length)for(var Y=0,q;Y<j.length;Y++)q=j[Y],q.subscribers.add(e),e.renderExtension.add(q);if(D)return"continue"}}if(!e.hasBit("excludeSection",pt.RENDER)&&!e.rendered){var K="";if(e.alignmentType===mt.NONE&&e.has("width",xt.PERCENT,{not:"100%"})&&!e.imageElement&&(a.linearVertical||a.is(Et.FRAME)&&e.singleChild)){var J=n.viewController.createGroup(a,e,[e]),$=n.writeGridLayout(J,a,2,1);J.alignmentType|=mt.PERCENT,t(J,a,$,b),n.viewController["right"===e.float||e.autoMarginLeft?"prependBefore":"appendAfter"](e.id,n.getEmptySpacer(Et.GRID,J.renderDepth+1,"".concat(100-e.toInt("width"),"%"))),a=J}if(""===e.controlName){var ee=0<e.borderTopWidth||0<e.borderBottomWidth||0<e.borderRightWidth||0<e.borderLeftWidth,te=/url(.*?)/.test(e.css("backgroundImage")),ne=e.has("backgroundColor"),ie=ee||te||ne;if(0===e.children.length){var le=Ie(e.element,n.settings.renderInlineText?0:1);le||ee&&0<e.textContent.length?K=n.writeNode(e,a,Et.TEXT):te&&"no-repeat"===e.css("backgroundRepeat")&&(!e.inlineText||0>e.toInt("textIndent")+e.bounds.width)?(e.alignmentType|=mt.SINGLE,e.excludeResource|=ft.FONT_STYLE|ft.VALUE_STRING,K=n.writeNode(e,a,Et.IMAGE)):e.block&&(ne||te)&&(ee||0<e.paddingTop+e.paddingRight+e.paddingRight+e.paddingLeft)?K=n.writeNode(e,a,Et.LINE):!e.documentRoot&&(!n.settings.collapseUnattributedElements||0!==e.bounds.height||ae(e.element.id)||ae(e.dataset.ext)||ie?ie?K=n.writeNode(e,a,Et.TEXT):K=n.writeFrameLayout(e,a):(a.remove(e),e.hide()))}else if(e.flex.enabled||e.children.some(function(e){return!e.pageflow})||e.has("columnCount"))K=n.writeConstraintLayout(e,a);else if(1===e.children.length){var re=e.children.filter(function(e){if(ae(e.dataset.target)){var t=document.getElementById(e.dataset.target);return t&&ae(t.dataset.ext)&&t!==a.element}return!1});if(n.settings.collapseUnattributedElements&&!e.documentRoot&&!ae(e.element.id)&&!ae(e.dataset.ext)&&!ae(e.dataset.target)&&0===e.toInt("width")&&0===e.toInt("height")&&!ie&&!e.has("textAlign")&&!e.has("verticalAlign")&&"right"!==e.float&&!e.autoMargin&&e.alignOrigin&&!n.viewController.hasAppendProcessing(e.id)||e.documentRoot&&1===re.length){var oe=e.children[0];return oe.documentRoot=e.documentRoot,oe.siblingIndex=e.siblingIndex,0!==a.id&&(oe.parent=a),0===re.length&&(e.resetBox(bt.MARGIN,oe,!0),oe.modifyBox(bt.MARGIN_TOP,e.paddingTop),oe.modifyBox(bt.MARGIN_RIGHT,e.paddingRight),oe.modifyBox(bt.MARGIN_BOTTOM,e.paddingBottom),oe.modifyBox(bt.MARGIN_LEFT,e.paddingLeft)),e.hide(),i[x]=oe,x--,"continue"}K=n.writeFrameLayout(e,a)}else{var de=e.children,se=[Nt.linearX(de),Nt.linearY(de)],he=se[0],ue=se[1],ge=Nt.cleared(de),ce=de.every(function(e){return e.pageflow&&e.inlineElement});if(!a.flex.enabled&&de.every(function(e){return e.pageflow})){var pe=Nt.floated(de);he&&0===ge.size?(0===pe.size&&de.every(function(e){return 0===e.toInt("verticalAlign")})&&(de.some(function(e){return["text-top","text-bottom"].includes(e.css("verticalAlign"))})?(K=n.writeConstraintLayout(e,a),e.alignmentType|=mt.HORIZONTAL):n.isRelativeHorizontal(de)&&(K=n.writeRelativeLayout(e,a),e.alignmentType|=mt.HORIZONTAL)),""===K&&(0===pe.size||!pe.has("right"))&&(n.isRelativeHorizontal(de)?(K=n.writeRelativeLayout(e,a),e.alignmentType|=mt.HORIZONTAL):(K=n.writeLinearLayout(e,a,!0),e.alignmentType|=mt.HORIZONTAL))):(ue||!ce&&de.some(function(e){var t=e.previousSibling();return!!(t&&e.alignedVertically(t,ge))}))&&(K=n.writeLinearLayout(e,a,!1),ue&&!e.documentRoot&&(e.alignmentType|=mt.VERTICAL))}""===K&&(ce?n.isFrameHorizontal(de,ge,!0)?K=n.writeFrameLayoutHorizontal(e,a,de,ge):(K=n.writeRelativeLayout(e,a),0===Ne(de[0].baseElement,de[de.length-1].baseElement).filter(function(e){return Le(e)}).length&&(e.alignmentType|=mt.HORIZONTAL)):K=n.writeConstraintLayout(e,a))}}else K=n.writeNode(e,a,e.controlName);t(e,a,K,b)}!e.hasBit("excludeSection",pt.INCLUDE)&&n.viewController.supportInclude&&0<E.length&&"true"===Z(e,"dataset.includeEnd")&&E.pop()},T;++x<i.length;)T=m(),"continue"===T},m=i.values()[Symbol.iterator](),f,y;!(u=(f=m.next()).done);u=!0)y=p(),"continue"===y}catch(e){g=!0,c=e}finally{try{u||null==m.return||m.return()}finally{if(g)throw c}}var E=!0,b=!1,x=void 0;try{for(var T=function(){var e=v(k.value,2),t=e[0],i=e[1],a=[],l=t.split(":"),r=v(l,2),s=r[0],h=r[1],u=Array.from(i.values());if(0<u.length){if(n._sorted[s]){var g=[];n._sorted[s].forEach(function(e){var t=u.find(function(t){return-1!==t.indexOf(_e(e,"@"))});t&&g.push(t)}),g.length===u.length&&a.push.apply(a,g)}0===a.length&&a.push.apply(a,I(u)),t=s+(h?":".concat(h):"");var c=_e(t);-1===o.indexOf(c)?n.addRenderQueue(t,u):(o=we(o,c,a.join("")),d=!1)}},A=s.entries()[Symbol.iterator](),k;!(E=(k=A.next()).done);E=!0)T()}catch(e){b=!0,x=e}finally{try{E||null==A.return||A.return()}finally{if(b)throw x}}if(n.viewController.supportInclude){var N=!0,R=!1,_=void 0;try{for(var w=h.entries()[Symbol.iterator](),S;!(N=(S=w.next()).done);N=!0){var C=v(S.value,2),B=C[0],D=C[1],O=Array.from(D.values());if(0<O.length){var F=n.viewController.renderMerge(B,O);n.addInclude(B,F)}}}catch(e){R=!0,_=e}finally{try{N||null==w.return||w.return()}finally{if(R)throw _}}}},k=r.values()[Symbol.iterator](),L;!(b=(L=k.next()).done);b=!0)A()}catch(e){x=!0,T=e}finally{try{b||null==k.return||k.return()}finally{if(x)throw T}}var N=this.cache.parent;if(!ae(N.dataset.target)||0===N.renderExtension.size){var R=K(Q(N.dataset.folder),"/");this.updateLayout(d?"":o,R,0<N.renderExtension.size&&Array.from(N.renderExtension).some(function(e){return e.documentRoot}))}else this._views.pop();if(!d){var _=!0,w=!1,S=void 0;try{for(var C=this.extensions[Symbol.iterator](),B,D;!(_=(B=C.next()).done);_=!0)D=B.value,D.setTarget(N),D.afterRender()}catch(e){w=!0,S=e}finally{try{_||null==C.return||C.return()}finally{if(w)throw S}}}else 0===N.renderExtension.size&&N.hide();this.cache.list.sort(function(e,t){if(!e.visible)return 1;if(!t.visible)return-1;if(e.renderDepth!==t.renderDepth)return e.renderDepth<t.renderDepth?-1:1;if(!e.domElement){var n=pe(e.baseElement);if(n)e=n;else return 1}if(!t.domElement){var i=pe(e.baseElement);if(i)t=i;else return-1}return e.documentParent===t.documentParent?e.renderIndex<t.renderIndex?-1:1:e.documentParent.id<t.documentParent.id?-1:1}),(s=this.cacheSession.list).push.apply(s,I(this.cache.list))}},{key:"writeFrameLayout",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return n||0!==e.children.length?this.viewController.renderGroup(e,t,Et.FRAME):this.viewController.renderNode(e,t,Et.FRAME)}},{key:"writeLinearLayout",value:function(e,t,n){return this.viewController.renderGroup(e,t,Et.LINEAR,{horizontal:n})}},{key:"writeGridLayout",value:function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return this.viewController.renderGroup(e,t,Et.GRID,{columns:n,rows:i})}},{key:"writeRelativeLayout",value:function(e,t){return this.viewController.renderGroup(e,t,Et.RELATIVE)}},{key:"writeConstraintLayout",value:function(e,t){return this.viewController.renderGroup(e,t,Et.CONSTRAINT)}},{key:"writeNode",value:function(e,t,n){return this.viewController.renderNode(e,t,n)}},{key:"writeFrameLayoutHorizontal",value:function(e,t,n,a){var l=this,r="",o=[];if(0===a.size&&!n.some(function(e){return e.autoMargin})){var d=[],s=[],h=[],u=!0,g=!1,c=void 0;try{for(var p=n[Symbol.iterator](),m,f;!(u=(m=p.next()).done);u=!0)f=m.value,f.floating?"right"===f.float?h.push(f):s.push(f):d.push(f)}catch(e){g=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(g)throw c}}if(d.length===n.length||s.length===n.length||h.length===n.length)return e.alignmentType|=0<d.length?mt.HORIZONTAL:mt.FLOAT,0<h.length&&(e.alignmentType|=mt.RIGHT),this.isRelativeHorizontal(n,a)?(r=this.writeRelativeLayout(e,t),r):(r=this.writeLinearLayout(e,t,!0),r);if(0===s.length||0===h.length){var y=0===h.length?s.concat(d):d.concat(h);if(Nt.linearY(y))return r=this.writeLinearLayout(e,t,!1),e.alignmentType|=mt.VERTICAL,r;if(this.isRelativeHorizontal(y,a))return r=this.writeRelativeLayout(e,t),e.alignmentType|=mt.HORIZONTAL,0<h.length&&(e.alignmentType|=mt.RIGHT),r;0===h.length&&(this.settings.floatOverlapDisabled||(r=this.writeLinearLayout(e,t,!0),o=[s,d],e.alignmentType|=mt.FLOAT))}}var E=[],b=[],x=[],T=[],v=[],A=[],k=[],L=[];if(0===o.length){for(var N="",R=0,_=0,w;_<n.length;_++){if(w=n[_],a.has(w)){var S=a.get(w);(z(R,"right"===S?4:2)||0!==R&&"both"===S)&&("left"===S?(R^=2,N="left"):"right"===S?(R^=4,N="right"):"both"===S?(N=2===R?"left":4===R?"right":"both",R=0):void 0)}""===N?w.floating?"right"===w.float?(T.push(w),w.floating&&(R|=4)):(x.push(w),w.floating&&(R|=2)):w.autoMargin?w.autoMarginLeft?0<T.length?A.push(w):T.push(w):w.autoMarginRight?0<x.length?v.push(w):x.push(w):0<E.length?0===x.length?x.push(w):T.push(w):E.push(w):E.push(w):w.floating?"right"===w.float?(0===A.length&&(R|=4),!this.settings.floatOverlapDisabled&&"right"!==N&&0<T.length?T.push(w):A.push(w)):(0===v.length&&(R|=2),!this.settings.floatOverlapDisabled&&"left"!==N&&0<x.length?x.push(w):v.push(w)):w.autoMargin?w.autoMarginLeft&&0<A.length?A.push(w):w.autoMarginRight&&0<v.length?v.push(w):b.push(w):"left"===N?v.push(w):"right"===N?A.push(w):b.push(w)}0<x.length&&0<v.length?(k=[x,v],1<v.length&&(v[0].alignmentType|=mt.EXTENDABLE)):0<x.length?k=x:0<v.length&&(k=v),0<T.length&&0<A.length?(L=[T,A],1<A.length&&(A[0].alignmentType|=mt.EXTENDABLE)):0<T.length?L=T:0<A.length&&(L=A),this.settings.floatOverlapDisabled?(t.linearVertical?(r=_e(e.id),e.renderDepth--):r=this.writeLinearLayout(e,t,!1),o.push(E,[x,T],b)):(0===E.length&&(0===k.length||0===L.length)?(r=this.writeLinearLayout(e,t,!1),0<L.length&&(e.alignmentType|=mt.RIGHT)):r=this.writeFrameLayout(e,t,!0),0<E.length?(0<A.length?(k=[E,x],o.push(k,L)):0<v.length?(L=[E,T],o.push(L,k)):o.push(E,k,L),1<E.length&&(E[0].alignmentType|=mt.EXTENDABLE)):k===v&&L===T||k===x&&L===A?0===v.length?o.push([x,A]):o.push([T,v]):o.push(k,L),o=o.filter(function(e){return e&&0<e.length})),e.alignmentType|=mt.FLOAT}if(0<o.length){var C=null;o.forEach(function(t,n){if(Array.isArray(t[0])){var i=[];t.forEach(function(e){return i.push.apply(i,I(e))}),i.sort(Nt.siblingIndex),C=l.viewController.createGroup(e,i[0],i),l.settings.floatOverlapDisabled?r=we(r,e.id,l.writeFrameLayout(C,e,!0)):(r=we(r,e.id,l.writeLinearLayout(C,e,!1)),t.some(function(e){return e===L||e===T})&&(C.alignmentType|=mt.RIGHT)),C.alignmentType|=mt.FLOAT}else C=null;(Array.isArray(t[0])?t:[t]).forEach(function(t){var i=e;if(C&&[E,x,v,T,A].includes(t)&&(i=C),1<t.length){var a="",o=l.viewController.createGroup(i,t[0],t),d=t.some(function(e){return"left"===e.float}),s=t.some(function(e){return"right"===e.float});if(l.isRelativeHorizontal(t,Nt.cleared(t)))a=l.writeRelativeLayout(o,i),o.alignmentType|=mt.HORIZONTAL;else if(a=l.writeLinearLayout(o,i,Nt.linearX(t)),s&&o.children.some(function(e){return 0>e.marginLeft})){var h=[],u=0;o.children.slice().forEach(function(e){var t=!1;0>u&&(nt(u)>e.bounds.width?(u+=e.bounds.width,e.modifyBox(bt.MARGIN_RIGHT,-1*e.bounds.width,!0),t=!0):nt(u)>=e.marginRight?(e.modifyBox(bt.MARGIN_RIGHT,at(nt(u)-e.marginRight)),e.modifyBox(bt.MARGIN_RIGHT,null)):e.modifyBox(bt.MARGIN_RIGHT,u,!0)),0>e.marginLeft&&(u+=lt(e.marginLeft,-1*e.bounds.width),e.modifyBox(bt.MARGIN_LEFT,null)),t?h.splice(h.length-1,0,e):h.push(e)}),o.children=h.reverse(),l.saveSortOrder(o.id,o.children)}o.alignmentType|=mt.SEGMENTED,(d||s)&&(o.alignmentType|=mt.FLOAT,s&&(o.alignmentType|=mt.RIGHT)),r=we(r,i.id,a),i.renderAppend(o)}else if(0<t.length){var g=t[0];g.alignmentType|=mt.SINGLE,"right"===g.float&&(g.alignmentType|=mt.RIGHT),g.renderPosition=n,r=we(r,i.id,"{:".concat(i.id,":").concat(n,"}")),i.renderAppend(g)}})})}return r}},{key:"writeFrameLayoutVertical",value:function(e,t,n,i){var a=this,l="";e?(l=this.writeLinearLayout(e,t,!1),e.alignmentType|=mt.VERTICAL):(e=t,l=_e(e.id));var r=[],o=[],d=[],s=[],h=0,u=!1,g=!0;n.some(function(e){return!e.floating&&(h+=e.linear.height,!0)});var c=!0,p=!1,m=void 0;try{for(var f=n[Symbol.iterator](),y,E;!(c=(y=f.next()).done);c=!0)E=y.value,i.has(E)&&(E.floating?u=!0:(E.modifyBox(bt.MARGIN_TOP,null),r.push(d.slice()),d.length=0,o.push(s.slice()),s.length=0)),E.floating?s.push(E):(u&&!i.has(E)&&(g=!1),d.push(E))}catch(e){p=!0,m=e}finally{try{c||null==f.return||f.return()}finally{if(p)throw m}}return 0<s.length&&o.push(s),0<d.length&&r.push(d),g||function(){for(var t="",d=0;d<lt(o.length,r.length);d++){var s=o[d]||[],u=r[d]||[];(0<u.length||0<s.length)&&function(){var i=s[0]||u[0],l=a.viewController.createGroup(e,i,[]),r=[],o=null;1<s.length?(o=a.viewController.createGroup(l,s[0],s),l.alignmentType|=mt.FLOAT):0<s.length&&(o=s[0],o.parent=l,l.alignmentType|=mt.FLOAT),o&&(r.push(o),0==d&&0<h&&o.modifyBox(bt.MARGIN_TOP,h),o=null),1<u.length?o=a.viewController.createGroup(l,u[0],u):0<u.length&&(o=u[0],o.parent=l),o&&r.push(o),l.init(),t+=a.writeFrameLayout(l,e,!0),l.alignmentType|=mt.VERTICAL,r.forEach(function(e,i){n.includes(e)?t=we(t,l.id,"{:".concat(l.id,":").concat(i,"}")):(t=we(t,l.id,a.writeLinearLayout(e,l,!1)),e.alignmentType|=mt.SEGMENTED)})}()}l=we(l,e.id,t)}(),l}},{key:"appendRenderQueue",value:function(){var e=!0,t=!1,n=void 0;try{for(var a=this.extensions[Symbol.iterator](),l;!(e=(l=a.next()).done);e=!0){var r=l.value,o=!0,d=!1,s=void 0;try{for(var h=r.subscribers[Symbol.iterator](),u,g;!(o=(u=h.next()).done);o=!0)g=u.value,r.setTarget(g),r.beforeInsert()}catch(e){d=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(d)throw s}}}}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}var c={};for(var p in this.renderQueue){var m=p.split(":"),f=v(m,1),y=f[0],E=y;if(!U(E)){var b=pe(document.getElementById(E));b&&(E=b.id.toString())}var x=this.renderQueue[p].join("\n");if(E!==y){var T=this.cacheSession.locate("id",parseInt(E));if(T){var I=T.renderDepth+1;x=Se(x,I);for(var A=/{@([0-9]+)}/g,k=null,L=0,N;null!=(k=A.exec(x));)N=this.cacheSession.locate("id",parseInt(k[1])),N&&(0==L++?N.renderDepth=I:N.renderDepth=N.parent.renderDepth+1)}}c[E]=x}for(var R in c)for(var _ in c)R!=_&&(c[R]=c[R].replace(_e(_),c[_]),c[_]=c[_].replace(_e(R),c[R]));var w=!0,S=!1,C=void 0;try{for(var B=this.layouts[Symbol.iterator](),D,O;!(w=(D=B.next()).done);w=!0){for(var F in O=D.value,c)O.content=O.content.replace(_e(F),c[F]);O.content=this.viewController.appendRenderQueue(O.content)}}catch(e){S=!0,C=e}finally{try{w||null==B.return||B.return()}finally{if(S)throw C}}var M=!0,G=!1,P=void 0;try{for(var H=this.extensions[Symbol.iterator](),z;!(M=(z=H.next()).done);M=!0){var X=z.value,W=!0,V=!1,j=void 0;try{for(var Y=X.subscribers[Symbol.iterator](),Z,q;!(W=(Z=Y.next()).done);W=!0)q=Z.value,X.setTarget(q),X.afterInsert()}catch(e){V=!0,j=e}finally{try{W||null==Y.return||Y.return()}finally{if(V)throw j}}}}catch(e){G=!0,P=e}finally{try{M||null==H.return||H.return()}finally{if(G)throw P}}}},{key:"getEmptySpacer",value:function(e,t,n,i,a){return this.viewController.getEmptySpacer(e,t,n,i,a)}},{key:"createLayout",value:function(e){this._currentIndex=this._views.length,this._views.push({filename:e,pathname:"",content:""})}},{key:"updateLayout",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(t=t||this.viewController.settingsInternal.layout.directory,n&&0<this._views.length&&""===this._views[0].content){var i=this._views.pop();Object.assign(this._views[0],{pathname:t,filename:i.filename,content:e}),this._currentIndex=0}else this.layoutProcessing.pathname=t,this.layoutProcessing.content=e}},{key:"addInclude",value:function(e,t){this._includes.push({pathname:this.viewController.settingsInternal.layout.directory,filename:e,content:t})}},{key:"addRenderQueue",value:function(e,t){var n;null==this.renderQueue[e]&&(this.renderQueue[e]=[]),(n=this.renderQueue[e]).push.apply(n,I(t))}},{key:"sortByAlignment",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:mt.NONE,i=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],a=!1;return t&&n===mt.NONE&&(t.linearHorizontal?n|=mt.HORIZONTAL:t.is(Et.CONSTRAINT)&&e.some(function(e){return!e.pageflow})&&(n|=mt.ABSOLUTE)),z(n,mt.HORIZONTAL)&&e.some(function(e){return e.floating})&&(e.sort(function(e,t){return e.floating&&!t.floating?"left"===e.float?-1:1:!e.floating&&t.floating?"left"===t.float?1:-1:e.floating&&t.floating&&e.float!==t.float?"left"===e.float?-1:1:e.linear.left<=t.linear.left?-1:1}),a=!0),z(n,mt.ABSOLUTE)&&e.some(function(e){return 0!==e.toInt("zIndex")})&&(e.sort(function(e,t){var n=e.css("zIndex"),i=t.css("zIndex");return("auto"===n||""===n||"0"===n)&&("auto"===i||""===i||"0"===i)?e.siblingIndex<=t.siblingIndex?-1:1:D(n)<=D(i)?-1:1}),a=!0),i&&a&&t&&this.saveSortOrder(t.id,e),e}},{key:"saveSortOrder",value:function(e,t){this._sorted[e.toString()]=t.map(function(e){return e.id})}},{key:"getExtension",value:function(e){return this.extensions.find(function(t){return t.name===e})}},{key:"toString",value:function(){return 0<this._views.length?this._views[0].content:""}},{key:"insertNode",value:function(e,t){var n=null;if("#"===e.nodeName.charAt(0))"#text"===e.nodeName&&(Ae(e,!0)||Te(e,"whiteSpace","pre","pre-wrap"))&&(n=new this.nodeObject(this.cache.nextId,e),this.viewController.initNode(n),n.nodeName="PLAINTEXT",t?(n.parent=t,n.inherit(t,"style")):n.css("whiteSpace",(e.parentElement?ye(e.parentElement).whiteSpace:null)||"normal"),n.css({position:"static",display:"inline",clear:"none",cssFloat:"none",verticalAlign:"baseline"}));else if(e instanceof HTMLElement){switch(e.tagName){case"OPTION":case"MAP":case"AREA":return null;}var i=new this.nodeObject(this.cache.nextId,e);this.viewController.initNode(i),Re(e)?(n=i,n.setExclusions()):(i.excluded=!0,i.visible=!1)}return n&&this.cache.append(n),n}},{key:"prioritizeExtensions",value:function(e,t){for(var n=[],i=t;i;)n=I(n).concat(I(Q(i.dataset.ext).split(",").map(function(e){return e.trim()}))),i=i.parentElement;if(n=n.filter(function(e){return e}),0<n.length){var a=[],l=[],r=!0,o=!1,d=void 0;try{for(var s=e[Symbol.iterator](),h;!(r=(h=s.next()).done);r=!0){var u=h.value,g=n.indexOf(u.name);-1===g?l.push(u):a[g]=u}}catch(e){o=!0,d=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw d}}return I(a.filter(function(e){return e})).concat(l)}return e}},{key:"isFrameHorizontal",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],i=Nt.floated(e),a=e.filter(function(e){return e.autoMargin}),l=n?Ne(e[0].baseElement,e[e.length-1].baseElement).filter(function(e){return"BR"===e.tagName}).length:0;return 0===l&&(i.has("right")||0<t.size||0<a.length||!Nt.linearX(e))}},{key:"isRelativeHorizontal",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Map,n=e.filter(function(e){return e.visible}),i=Nt.floated(e),a=new Nt(e).partition(function(e){return e.floating}),l=v(a,2),r=l[0],o=l[1],d=0<o.length?it.apply(null,o.list.map(function(e){return e.siblingIndex})):tt,s=0<r.length?lt.apply(null,r.list.map(function(e){return e.siblingIndex})):-1,h=Nt.linearX(e);return!n.some(function(e){return e.autoMarginHorizontal})&&(1===i.size&&r.length===e.length?!(h&&0===t.size):0===t.size&&!i.has("right")&&(0===o.length||0===r.length||s<d)&&n.every(function(e){var t=e.css("verticalAlign");return 0<=e.toInt("top")&&(["baseline","initial","unset","top","middle","sub","super"].includes(t)||W(t)&&0<=parseInt(t))})&&(n.some(function(e){return(e.textElement||e.imageElement)&&e.baseline||e.plainText&&e.multiLine})||!h&&e.every(function(e){return e.pageflow&&e.inlineElement})))}},{key:"appName",set:function(e){this.resourceHandler&&(this.resourceHandler.file.appName=e)},get:function(){return this.resourceHandler?this.resourceHandler.file.appName:""}},{key:"layoutProcessing",set:function(e){this._views[this._currentIndex]=e},get:function(){return this._views[this._currentIndex]}},{key:"layouts",get:function(){return I(this._views).concat(I(this._includes))}},{key:"viewData",get:function(){return{cache:this.cacheSession,views:this._views,includes:this._includes}}},{key:"size",get:function(){return this._views.length+this._includes.length}}]),e}(),St=/*#__PURE__*/function(){function e(){l(this,e),this._before={},this._after={}}return o(e,[{key:"reset",value:function(){this._before={},this._after={}}},{key:"appendRenderQueue",value:function(e){for(var t in this._before)e=e.replace("{<".concat(t,"}"),this._before[t].join(""));for(var n in this._after)e=e.replace("{>".concat(n,"}"),this._after[n].join(""));return e}},{key:"prependBefore",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1;null==this._before[e]&&(this._before[e]=[]),-1!==n&&n<this._before[e].length?this._before[e].splice(n,0,t):this._before[e].push(t)}},{key:"appendAfter",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1;null==this._after[e]&&(this._after[e]=[]),-1!==n&&n<this._after[e].length?this._after[e].splice(n,0,t):this._after[e].push(t)}},{key:"hasAppendProcessing",value:function(e){return null!=this._before[e]||null!=this._after[e]}}]),e}(),Ct={Pink:{hex:"#FFC0CB"},LightPink:{hex:"#FFB6C1"},HotPink:{hex:"#FF69B4"},DeepPink:{hex:"#FF1493"},PaleVioletRed:{hex:"#DB7093"},MediumVioletRed:{hex:"#C71585"},LightSalmon:{hex:"#FFA07A"},Salmon:{hex:"#FA8072"},DarkSalmon:{hex:"#E9967A"},LightCoral:{hex:"#F08080"},IndianRed:{hex:"#CD5C5C"},Crimson:{hex:"#DC143C"},Firebrick:{hex:"#B22222"},DarkRed:{hex:"#8B0000"},Red:{hex:"#FF0000"},OrangeRed:{hex:"#FF4500"},Tomato:{hex:"#FF6347"},Coral:{hex:"#FF7F50"},Orange:{hex:"#FFA500"},DarkOrange:{hex:"#FF8C00"},Yellow:{hex:"#FFFF00"},LightYellow:{hex:"#FFFFE0"},LemonChiffon:{hex:"#FFFACD"},LightGoldenrodYellow:{hex:"#FAFAD2"},PapayaWhip:{hex:"#FFEFD5"},Moccasin:{hex:"#FFE4B5"},PeachPuff:{hex:"#FFDAB9"},PaleGoldenrod:{hex:"#EEE8AA"},Khaki:{hex:"#F0E68C"},DarkKhaki:{hex:"#BDB76B"},Gold:{hex:"#FFD700"},Cornsilk:{hex:"#FFF8DC"},BlanchedAlmond:{hex:"#FFEBCD"},Bisque:{hex:"#FFE4C4"},NavajoWhite:{hex:"#FFDEAD"},Wheat:{hex:"#F5DEB3"},Burlywood:{hex:"#DEB887"},Tan:{hex:"#D2B48C"},RosyBrown:{hex:"#BC8F8F"},SandyBrown:{hex:"#F4A460"},Goldenrod:{hex:"#DAA520"},DarkGoldenrod:{hex:"#B8860B"},Peru:{hex:"#CD853F"},Chocolate:{hex:"#D2691E"},SaddleBrown:{hex:"#8B4513"},Sienna:{hex:"#A0522D"},Brown:{hex:"#A52A2A"},Maroon:{hex:"#800000"},DarkOliveGreen:{hex:"#556B2F"},Olive:{hex:"#808000"},OliveDrab:{hex:"#6B8E23"},YellowGreen:{hex:"#9ACD32"},LimeGreen:{hex:"#32CD32"},Lime:{hex:"#00FF00"},LawnGreen:{hex:"#7CFC00"},Chartreuse:{hex:"#7FFF00"},GreenYellow:{hex:"#ADFF2F"},SpringGreen:{hex:"#00FF7F"},MediumSpringGreen:{hex:"#00FA9A"},LightGreen:{hex:"#90EE90"},PaleGreen:{hex:"#98FB98"},DarkSeaGreen:{hex:"#8FBC8F"},MediumAquamarine:{hex:"#66CDAA"},MediumSeaGreen:{hex:"#3CB371"},SeaGreen:{hex:"#2E8B57"},ForestGreen:{hex:"#228B22"},Green:{hex:"#008000"},DarkGreen:{hex:"#006400"},Aqua:{hex:"#00FFFF"},Cyan:{hex:"#00FFFF"},LightCyan:{hex:"#E0FFFF"},PaleTurquoise:{hex:"#AFEEEE"},Aquamarine:{hex:"#7FFFD4"},Turquoise:{hex:"#40E0D0"},DarkTurquoise:{hex:"#00CED1"},MediumTurquoise:{hex:"#48D1CC"},LightSeaGreen:{hex:"#20B2AA"},CadetBlue:{hex:"#5F9EA0"},DarkCyan:{hex:"#008B8B"},Teal:{hex:"#008080"},LightSteelBlue:{hex:"#B0C4DE"},PowderBlue:{hex:"#B0E0E6"},LightBlue:{hex:"#ADD8E6"},SkyBlue:{hex:"#87CEEB"},LightSkyBlue:{hex:"#87CEFA"},DeepSkyBlue:{hex:"#00BFFF"},DodgerBlue:{hex:"#1E90FF"},Cornflower:{hex:"#6495ED"},SteelBlue:{hex:"#4682B4"},RoyalBlue:{hex:"#4169E1"},Blue:{hex:"#0000FF"},MediumBlue:{hex:"#0000CD"},DarkBlue:{hex:"#00008B"},Navy:{hex:"#000080"},MidnightBlue:{hex:"#191970"},Lavender:{hex:"#E6E6FA"},Thistle:{hex:"#D8BFD8"},Plum:{hex:"#DDA0DD"},Violet:{hex:"#EE82EE"},Orchid:{hex:"#DA70D6"},Fuchsia:{hex:"#FF00FF"},Magenta:{hex:"#FF00FF"},MediumOrchid:{hex:"#BA55D3"},MediumPurple:{hex:"#9370DB"},BlueViolet:{hex:"#8A2BE2"},DarkViolet:{hex:"#9400D3"},DarkOrchid:{hex:"#9932CC"},DarkMagenta:{hex:"#8B008B"},Purple:{hex:"#800080"},RebeccaPurple:{hex:"#663399"},Indigo:{hex:"#4B0082"},DarkSlateBlue:{hex:"#483D8B"},SlateBlue:{hex:"#6A5ACD"},MediumSlateBlue:{hex:"#7B68EE"},White:{hex:"#FFFFFF"},Snow:{hex:"#FFFAFA"},Honeydew:{hex:"#F0FFF0"},MintCream:{hex:"#F5FFFA"},Azure:{hex:"#F0FFFF"},AliceBlue:{hex:"#F0F8FF"},GhostWhite:{hex:"#F8F8FF"},WhiteSmoke:{hex:"#F5F5F5"},Seashell:{hex:"#FFF5EE"},Beige:{hex:"#F5F5DC"},OldLace:{hex:"#FDF5E6"},FloralWhite:{hex:"#FFFAF0"},Ivory:{hex:"#FFFFF0"},AntiqueWhite:{hex:"#FAEBD7"},Linen:{hex:"#FAF0E6"},LavenderBlush:{hex:"#FFF0F5"},MistyRose:{hex:"#FFE4E1"},Gainsboro:{hex:"#DCDCDC"},LightGray:{hex:"#D3D3D3"},Silver:{hex:"#C0C0C0"},DarkGray:{hex:"#A9A9A9"},Gray:{hex:"#808080"},DimGray:{hex:"#696969"},LightSlateGray:{hex:"#778899"},SlateGray:{hex:"#708090"},DarkSlateGray:{hex:"#2F4F4F"},Black:{hex:"#000000"}},Bt=[];for(var Dt in Ct){var i=Ct[Dt];for(var Ot in i){var j=ze(i[Ot]);j&&(i.rgb=j,i.hsl=Oe(i.rgb.r,i.rgb.g,i.rgb.b)),Bt.push({name:Dt,rgb:i.rgb,hex:i.hex,hsl:i.hsl})}}Bt.sort(Fe);var Ft=/*#__PURE__*/Object.freeze({getColorNearest:function(e){var t=Bt.slice(),n=t.findIndex(function(t){return t.hex===e});if(-1!==n)return t[n];var i=De(e);return i?(t.push({name:"",hsl:i,rgb:{r:-1,g:-1,b:-1},hex:""}),t.sort(Fe),n=t.findIndex(function(e){return""===e.name}),t[it(n+1,t.length-1)]):""},getByColorName:Me,formatRGB:Ge,parseRGBA:Pe,convertRGBtoHex:He,convertHextoRGB:ze,parseHex:function(e){if(""!==e){e=e.trim();var t=Pe(e);if(0<t.length&&(e=t[0]),"#"===e.charAt(0)&&/^#[a-zA-Z0-9]{3,6}$/.test(e))return 4===e.length?Pe(Ge({rgb:ze(e)}))[0]:e}return""},reduceHexToRGB:function(e,t){var n=ze(e);if(n){var i=0>t?0:255;return t=nt(t),"rgb(".concat(ot((i-n.r)*t)+n.r,", ").concat(ot((i-n.g)*t)+n.g,", ").concat(ot((i-n.b)*t)+n.b,")")}return e}}),Mt=/*#__PURE__*/function(){function e(t){l(this,e),this.file=t}return o(e,[{key:"addFile",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"";this.file.addFile(e,t,n,i)}},{key:"reset",value:function(){for(var t in e.STORED)e.STORED[t]=new Map;this.file.reset()}},{key:"setBoxSpacing",value:function(){var e=this;this.cache.elements.each(function(t){if(!t.hasBit("excludeResource",ft.BOX_SPACING)&&(!ge(t.element,"boxSpacing")||e.settings.alwaysReevaluateResources)){var n=Ee(t.element),i={};for(var a in n)i[a]=t.inlineStatic&&("marginTop"==a||"marginBottom"==a)?"0px":F(n[a],t.css("fontSize"));ue(t.element,"boxSpacing",i)}})}},{key:"setBoxStyle",value:function(){var e=this;this.cache.elements.each(function(t){if(!t.hasBit("excludeResource",ft.BOX_STYLE)&&(!ge(t.element,"boxStyle")||e.settings.alwaysReevaluateResources)){var n={borderTop:e.parseBorderStyle,borderRight:e.parseBorderStyle,borderBottom:e.parseBorderStyle,borderLeft:e.parseBorderStyle,borderRadius:e.parseBorderRadius,backgroundColor:e.parseBackgroundColor,backgroundImage:!t.hasBit("excludeResource",ft.IMAGE_SOURCE),backgroundSize:e.parseBoxDimensions,backgroundRepeat:!0,backgroundPosition:!0},i={};for(var a in n){var l=t.css(a);i[a]="function"==typeof n[a]?n[a](l,t,a):!0===n[a]?l:""}if(Array.isArray(i.backgroundColor)&&!t.has("backgroundColor")&&(t.cssParent("backgroundColor",!1,!0)===i.backgroundColor[1]||t.documentParent.visible&&ve(t.element,"backgroundColor"))&&(i.backgroundColor.length=0),"none"!==i.borderTop.style){var r=JSON.stringify(i.borderTop);r===JSON.stringify(i.borderRight)&&r===JSON.stringify(i.borderBottom)&&r===JSON.stringify(i.borderLeft)&&(i.border=i.borderTop)}ue(t.element,"boxStyle",i)}})}},{key:"setFontStyle",value:function(){var e=this;this.cache.each(function(t){if(!t.hasBit("excludeResource",ft.FONT_STYLE)&&(!ge(t.element,"fontStyle")||e.settings.alwaysReevaluateResources)){var n=e.hasDrawableBackground(ge(t.element,"boxStyle"));if(0<t.length||t.imageElement||"HR"===t.tagName||t.inlineText&&!n&&!t.preserveWhiteSpace&&""===t.element.innerHTML.trim())return;var i=Pe(t.css("color"),t.css("opacity")),a=Pe(t.css("backgroundColor"),t.css("opacity"));0<a.length&&(n||t.cssParent("backgroundColor",!1,!0)===a[1]&&(t.plainText||a[1]!==t.styleMap.backgroundColor)||!t.has("backgroundColor")&&ve(t.element,"backgroundColor"))&&(a.length=0);var l=t.css("fontWeight"),r=t.css("fontSize");0===D(r)&&("xx-small"===r?r="8px":"x-small"===r?r="10px":"small"===r?r="13px":"medium"===r?r="16px":"large"===r?r="18px":"x-large"===r?r="24px":"xx-large"===r?r="32px":void 0),U(l)||(l="lighter"===l?"200":"bold"===l?"700":"bolder"===l?"900":"400");var o={fontFamily:t.css("fontFamily"),fontStyle:t.css("fontStyle"),fontSize:r,fontWeight:l,color:i,backgroundColor:a};ue(t.element,"fontStyle",o)}})}},{key:"setValueString",value:function(){function e(e,t){switch(e.multiLine&&(t=t.replace(/^\s*\n/,"")),e.css("whiteSpace")){case"nowrap":t=t.replace(/\n/g," ");break;case"pre":case"pre-wrap":t=t.replace(/\n/g,"\\n"),t=t.replace(/\s/g,"&#160;");break;case"pre-line":t=t.replace(/\n/g,"\\n"),t=t.replace(/\s+/g," ");break;default:return Le(e.element.previousSibling)&&(t=t.replace(/^\s+/,"")),Le(e.element.nextSibling)&&(t=t.replace(/\s+$/,"")),[t,!1];}return[t,!0]}var t=this;this.cache.visible.each(function(n){var i=n.element;if(!n.hasBit("excludeResource",ft.VALUE_STRING)&&(!ge(i,"valueString")||t.settings.alwaysReevaluateResources)){var a="",l="",r=!1,o=!0;if(i instanceof HTMLInputElement)switch(i.type){case"text":case"number":case"email":case"search":case"submit":case"reset":case"button":l=i.value.trim();break;default:n.companion&&(l=n.companion.textContent.trim());}else if(i instanceof HTMLTextAreaElement)l=i.value.trim();else if(i instanceof HTMLElement){if("BUTTON"===i.tagName)l=i.innerText;else if(n.inlineText){a=n.textContent.trim(),l=Ce(0<i.children.length||"CODE"===i.tagName?i.innerHTML:n.textContent);var d=e(n,l),s=v(d,2);l=s[0],r=s[1],l=l.replace(/\s*<br\s*\/?>\s*/g,"\\n"),l=l.replace(/\s+(class|style)=".*?"/g,"")}else""===i.innerText.trim()&&t.hasDrawableBackground(ge(i,"boxStyle"))&&(l=Ce(i.innerText),o=!1);}else if(n.plainText){a=n.textContent.trim(),l=Ce(n.textContent),l=l.replace(/&[A-Za-z]+;/g,function(e){return e.replace("&","&amp;")});var h=e(n,l),u=v(h,2);l=u[0],r=u[1]}if(""!==l){if(o){var g=n.previousSibling(),c=n.nextSibling(),p=!1;if(!g||g.multiLine||g.lineBreak?l=l.replace(/^\s+/,""):p=/\s+$/.test(g.element.innerText||g.element.textContent||""),r){var m=l;l=l.trim(),!g||g.block||g.lineBreak||p||!/^\s+/.test(m)||(l="&#160;"+l),c&&!c.lineBreak&&/\s+$/.test(m)&&(l+="&#160;")}else /^\s+$/.test(l)?0<l.length&&(l="&#160;"+l.substring(1)):(l=l.replace(/^\s+/,g&&(g.block||g.lineBreak||g.element instanceof HTMLElement&&1<g.element.innerText.length&&p||n.multiLine&&ke(i))?"":"&#160;"),l=l.replace(/\s+$/,c&&c.lineBreak?"":"&#160;"))}""!==l&&ue(i,"valueString",{name:a,value:l})}}})}},{key:"setOptionArray",value:function(){var e=this;this.cache.filter(function(e){return e.visible&&"SELECT"===e.tagName&&!e.hasBit("excludeResource",ft.OPTION_ARRAY)}).each(function(t){var n=t.element;if(!ge(n,"optionArray")||e.settings.alwaysReevaluateResources){for(var a=[],l=[],r=-1;++r<n.children.length;){var o=n.children[r],d=o.text.trim();if(""!==d)if(l&&0===a.length&&U(d))l.push(d);else{if(l&&0<l.length){r=-1,l=null;continue}""!==d&&a.push(d)}}ue(n,"optionArray",{stringArray:0<a.length?a:null,numberArray:l&&0<l.length?l:null})}})}},{key:"borderVisible",value:function(e){return null!=e&&"none"!==e.style&&"0px"!==e.width}},{key:"hasDrawableBackground",value:function(e){return null!=e&&(this.borderVisible(e.borderTop)||this.borderVisible(e.borderRight)||this.borderVisible(e.borderBottom)||this.borderVisible(e.borderLeft)||""!==e.backgroundImage&&"none"!==e.backgroundImage||0<e.borderRadius.length)}},{key:"parseBorderStyle",value:function(e,t,n){var i=t.css("".concat(n,"Color"));"initial"===i&&(i=e);var a=t.css("".concat(n,"Style"))||"none",l=t.css("".concat(n,"Width"))||"1px",r="none"===a?[]:Pe(i,t.css("opacity"));return"inset"===a&&"0px"===l&&(l="1px"),{style:a,width:l,color:0<r.length?r:["#000000","rgb(0, 0, 0)","0"]}}},{key:"parseBorderRadius",value:function(e,t){var n=[t.css("borderTopLeftRadius"),t.css("borderTopRightRadius"),t.css("borderBottomLeftRadius"),t.css("borderBottomRightRadius")],i=n[0],a=n[1],l=n[2],r=n[3];return i===a&&a===l&&l===r?""===i||"0px"===i?[]:[i]:[i,a,l,r]}},{key:"parseBackgroundColor",value:function(e,t){return Pe(e,t.css("opacity"))}},{key:"parseBoxDimensions",value:function(e,t){var n=t.css("fontSize");if("auto"!==e&&"initial"!==e){var i=e.match(/^([0-9\.]+(?:px|pt|em|%)|auto)(?: ([0-9\.]+(?:px|pt|em|%)|auto))?(?: ([0-9\.]+(?:px|pt|em)))?(?: ([0-9\.]+(?:px|pt|em)))?$/);if(i)return"0px"===i[1]&&null==i[2]||"auto"===i[1]&&"auto"===i[2]?[]:"auto"===i[1]||"auto"===i[2]?["auto"===i[1]?"":F(i[1],n),"auto"===i[2]?"":F(i[2],n)]:V(i[1])&&null==i[3]?[i[1],i[2]]:null==i[2]||i[1]===i[2]&&i[1]===i[3]&&i[1]===i[4]?[F(i[1],n)]:null==i[3]||i[1]===i[3]&&i[2]===i[4]?[F(i[1],n),F(i[2],n)]:[F(i[1],n),F(i[2],n),F(i[3],n),F(i[4],n)]}return[]}}],[{key:"insertStoredAsset",value:function(t,n,a){var l=e.STORED[t];if(l){var r="",o=!0,d=!1,s=void 0;try{for(var h=l.entries()[Symbol.iterator](),u;!(o=(u=h.next()).done);o=!0){var g=v(u.value,2),c=g[0],p=g[1];if(JSON.stringify(a)===JSON.stringify(p)){r=c;break}}}catch(e){d=!0,s=e}finally{try{o||null==h.return||h.return()}finally{if(d)throw s}}if(""===r&&(U(n)&&(n="__".concat(n)),ae(a))){var m=0;do r=n,0<m&&(r+="_".concat(m)),l.has(r)||l.set(r,a),m++;while(l.has(r)&&l.get(r)!==a)}return r}return""}}]),e}();Mt.STORED={strings:new Map,arrays:new Map,fonts:new Map,colors:new Map,styles:new Map,dimens:new Map,drawables:new Map,images:new Map};var Gt=/*#__PURE__*/function(){function e(t,n,i){l(this,e),this._directory=t,this._processingTime=n,this.appName="",this.queue=[],this._compression="zip",i&&(this._compression=i)}return o(e,[{key:"addFile",value:function(e,t,n,i){if(""!==n||""!==i){var a=this.queue.findIndex(function(n){return n.pathname===e&&n.filename===t});-1===a?this.queue.push({pathname:e,filename:t,content:n,uri:i}):(this.queue[a].content=n||"",this.queue[a].uri=i||"")}}},{key:"reset",value:function(){this.queue.length=0}},{key:"saveToDisk",value:function(e){var t=this;return location.protocol.startsWith("http")?void(Array.isArray(e)&&0<e.length&&(e.push.apply(e,I(this.queue)),fetch("/api/savetodisk?directory=".concat(encodeURIComponent(K(this._directory,"/")),"&appname=").concat(encodeURIComponent(this.appName.trim()),"&filetype=").concat(this._compression.toLocaleLowerCase(),"&processingtime=").concat(this._processingTime.toString().trim()),{method:"POST",body:JSON.stringify(e),headers:new Headers({Accept:"application/json, text/plain, */*","Content-Type":"application/json"})}).then(function(e){return e.json()}).then(function(e){e&&(e.zipname?fetch("/api/downloadtobrowser?filename=".concat(encodeURIComponent(e.zipname))).then(function(e){return e.blob()}).then(function(n){return t.downloadToDisk(n,te(e.zipname))}):e.system&&alert("".concat(e.application,"\n\n").concat(e.system)))}).catch(function(e){return alert("ERROR: ".concat(e))}))):void alert("SERVER (required): See README for instructions")}},{key:"downloadToDisk",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",i=new Blob([e],{type:n||"application/octet-stream"});if("undefined"!=typeof window.navigator.msSaveBlob)return void window.navigator.msSaveBlob(i,t);var a=window.URL.createObjectURL(i),l=document.createElement("a");l.style.display="none",l.href=a,l.setAttribute("download",t),"undefined"==typeof l.download&&l.setAttribute("target","_blank"),document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(function(){return window.URL.revokeObjectURL(a)},100)}}]),e}(),Pt=/*#__PURE__*/function(){function e(t,n,i,a){l(this,e),this.name=t,this.framework=n,this.options={},this.tagNames=[],this.documentRoot=!1,this.dependencies=[],this.subscribers=new Set,this.subscribersChild=new Set,Array.isArray(i)&&(this.tagNames=i.map(function(e){return e.trim().toUpperCase()})),a&&Object.assign(this.options,a)}return o(e,[{key:"setTarget",value:function(e,t,n){this.node=e,this.parent=t,this.element=n||this.node.element}},{key:"is",value:function(e){return e.hasElement&&(0===this.tagNames.length||this.tagNames.includes(e.tagName))}},{key:"require",value:function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];this.dependencies.push({name:e,init:t})}},{key:"included",value:function(e){return e||(e=this.element),!!e&&Y(e.dataset.ext,this.name)}},{key:"beforeInit",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];!t&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.beforeInit(!0))})}},{key:"init",value:function(){return!1}},{key:"afterInit",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];!t&&this.included()&&this.dependencies.filter(function(e){return e.init}).forEach(function(t){var n=e.application.getExtension(t.name);n&&(n.setTarget(e.node,e.parent,e.element),n.afterInit(!0))})}},{key:"condition",value:function(){var e=this.node;if(e&&e.element instanceof HTMLElement){var t=e.dataset.ext;return t?this.included():0<this.tagNames.length}return!1}},{key:"processNode",value:function(){return{output:"",complete:!1}}},{key:"processChild",value:function(){return{output:"",complete:!1}}},{key:"afterRender",value:function(){}},{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"finalize",value:function(){}},{key:"getData",value:function(){var e={};if(this.element instanceof HTMLElement){var t=S(this.name,"\\.");for(var n in this.element.dataset)n.length>t.length&&n.startsWith(t)&&(e[B(n.substring(t.length),!1)]=this.element.dataset[n])}return e}}]),e}(),Ht=/*#__PURE__*/function(e){function t(e,n,i,a){return l(this,t),E(this,u(t).call(this,e,n,i,a))}return h(t,e),o(t,[{key:"afterInit",value:function(){var e=!0,t=!1,n=void 0;try{for(var i=function(){var e=l.value;if(!e.hasBit("excludeProcedure",yt.ACCESSIBILITY)){var t=e.element;if(t instanceof HTMLInputElement)switch(t.type){case"radio":case"checkbox":[e.nextElementSibling,e.previousElementSibling].some(function(n){var i=pe(n),a=n&&n.parentElement&&"LABEL"===n.parentElement.tagName?pe(n.parentElement):null;return!!(i&&i.visible&&i.pageflow&&(ae(n.htmlFor)&&n.htmlFor===t.id?e.companion=i:i.textElement&&a&&(e.companion=i,a.renderAs=e),e.companion))&&(i.hide(),!0)});}}},a=this.application.cache.elements[Symbol.iterator](),l;!(e=(l=a.next()).done);e=!0)i()}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}}]),t}(Pt),zt=/*#__PURE__*/function(e){function t(e,n,i,a){return l(this,t),E(this,u(t).call(this,e,n,i,a))}return h(t,e),o(t,[{key:"is",value:function(e){return x(u(t.prototype),"is",this).call(this,e)&&("INPUT"!==e.tagName||["button","file","image","reset","search","submit"].includes(e.element.type))}},{key:"condition",value:function(){return this.included()}}]),t}(Pt),Ut=/*#__PURE__*/function(e){function t(e,n,i,a){var r;return l(this,t),r=E(this,u(t).call(this,e,n,i,a)),r.require(At.EXTERNAL,!0),r}return h(t,e),o(t,[{key:"processNode",value:function(){var e=this,t=this.node,n=this.parent,i=this.getData(),a="";return i.tag&&(a=0<t.children.length?this.application.viewController.renderGroup(t,n,i.tag):this.application.viewController.renderNode(t,n,i.tag),t.nodeType=t.blockStatic?Et.BLOCK:Et.INLINE),i.tagChild&&t.each(function(t){t.hasElement&&(t.dataset.ext=e.name,t.dataset.andromeCustomTag=i.tagChild)}),{output:a,complete:!1}}}]),t}(Pt),Xt=/*#__PURE__*/function(e){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length?arguments[2]:void 0,a=3<arguments.length?arguments[3]:void 0;return l(this,t),E(this,u(t).call(this,e,n,i,a))}return h(t,e),o(t,[{key:"beforeInit",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(this.element&&(e||this.included())&&!ge(this.element,"andromeExternalDisplay")){for(var t=[],n=this.element;n;)t.push(ye(n).display),n.style.display="block",n=n.parentElement;ue(this.element,"andromeExternalDisplay",t)}}},{key:"init",value:function(e){return this.included(e)&&this.application.elements.add(e),!1}},{key:"afterInit",value:function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];if(this.element&&(e||this.included())){var t=ge(this.element,"andromeExternalDisplay");if(t){for(var n=this.element,a=0;n;)n.style.display=t[a],n=n.parentElement,a++;ce(this.element,"andromeExternalDisplay")}}}},{key:"is",value:function(){return!1}},{key:"condition",value:function(){return!1}}]),t}(Pt),Wt=/*#__PURE__*/function(e){function t(e,n,i,a){return l(this,t),E(this,u(t).call(this,e,n,i,a))}return h(t,e),o(t,[{key:"condition",value:function(){var e=this.node;return this.included()||1<e.children.length&&("table"===e.display&&e.children.every(function(e){return"table-row"===e.display&&e.children.every(function(e){return"table-cell"===e.display})})||e.children.every(function(e){return e.pageflow&&!e.has("backgroundColor")&&!e.has("backgroundImage")&&0===e.borderTopWidth+e.borderRightWidth+e.borderBottomWidth+e.borderLeftWidth&&(!e.inlineElement||e.blockStatic)})&&("none"===e.css("listStyle")||e.children.every(function(e){return"list-item"===e.display&&"none"===e.css("listStyleType")})||!ae(e.dataset.ext)&&!e.flex.enabled&&1<e.children.length&&e.children.some(function(e){return 1<e.children.length})&&!e.children.some(function(e){return"list-item"===e.display||e.textElement})))}},{key:"processNode",value:function(e){var t=this.node,i=this.parent,a=this.options.columnBalance,r="",o=[],d={padding:se(),columnEnd:[],columnCount:0};if(a){var s=[];t.each(function(e,t){var n=e.children;s[t]=[];for(var i=0;i<n.length;i++)s[t].push(n[i].bounds.width);o.push(n)});var h=o[s.findIndex(function(e){var t=s.reduce(function(e,t){if(e.length===t.length){var n=e.reduce(function(e,t){return e+t},0),i=t.reduce(function(e,t){return e+t},0);return n<i?e:t}return e.length<t.length?e:t});return e===t})];if(h&&1<h.length)for(var u=-1,g=[],c=!1,p=function(e){var t=h[e].bounds,n=[];if(e<h.length-1)for(var i=function(i){if(o[i]===h)n.push(e);else{var a=o[i].findIndex(function(n,a){return a>=e&&rt(n.bounds.width)===rt(t.width)&&a<o[i].length-1});if(-1!==a)n.push(a);else return n.length=0,"break"}},a=0,l;a<o.length&&(l=i(a),"break"!==l);a++);else for(var a=0;a<o.length;a++)if(o[a].length>h.length){var r=o[a].splice(g[a]+(c?2:1),o[a].length-h.length);o[a][g[a]+(c?1:0)].data(At.GRID,"siblings",I(r))}if(n.length===o.length){var d=n.reduce(function(e,t){return it(e,t)});if(u=n.reduce(function(e,t){return lt(e,t)}),u>d)for(var s=0;s<o.length;s++)if(n[s]>d){var p=o[s].splice(d,n[s]-d);o[s][g[s]+(c?1:0)].data(At.GRID,"siblings",I(p))}g=n,c=!0}else g=Array(o.length).fill(e),c=!1},f=0;f<h.length;f++)p(f);else o.length=0}else{var y=e[t.depth+2],E=y?Object.keys(y):[],b=[];if(1<E.length){for(var x=[],f=0,T;f<E.length;f++){if(T=oe(y[parseInt(E[f])].filter(function(e){return e.documentParent.documentParent.id===t.id}),"linear.top"),0==f&&0===T.length)return{output:"",complete:!1};x[f]=0==f?0:x[f-1];for(var v=function(e){function t(){return o[0].findIndex(function(e){return le(e.linear.top,i.linear.top)||i.linear.top>=e.linear.top&&i.linear.bottom<=e.linear.bottom})}var i=T[e],a=[i.linear.left,i.linear.right],l=a[0],r=a[1],d=f;if(0<d&&i.element instanceof HTMLElement&&"right"===i.float){i.element.style.cssFloat="left";var s=i.element.getBoundingClientRect();if(s.left-i.marginLeft!==l){l=s.left-i.marginLeft,r=s.right+i.marginRight;for(var h=1;h<x.length&&(d=h,!(l>x[h-1]));h++);}i.element.style.cssFloat="right"}if(!(0===d||l>=x[d-1])){var u=o.length-1;if(o[u]){var g=o[u].reduce(function(e,t){return it(e,t.linear.left)},Number.MAX_VALUE),c=o[u].reduce(function(e,t){return lt(e,t.linear.right)},0);if(l>g&&r>c){var p=o.filter(function(e){return e}),m=t();-1!==m&&null==p[p.length-1][m]&&(o[u].length=0)}}}else if(null==o[d]&&(o[d]=[]),0===d||o[0].length===T.length)o[d][e]=i;else{var y=t();-1!==y&&(o[d][y]=i)}x[f]=lt(i.linear.right,x[f])},A=0;A<T.length;A++)v(A)}for(var k=0,A=-1;k<x.length;k++)if(-1==A&&null==o[k])A=k-1;else if(null==o[k]){-1!=A&&k==x.length-1&&(x[A]=x[k]);continue}else-1!=A&&(x[A]=x[k-1],A=-1);for(var L=0;L<o.length;L++)o[L]&&b.push(x[L]);o=o.filter(function(e){return e&&0<e.length});for(var N=o.reduce(function(e,t){return lt(e,t.length)},0),R=0;R<N;R++)for(var _=0;_<o.length;_++)null==o[_][R]&&(o[_][R]={spacer:1})}0<b.length&&(d.columnEnd=b,d.columnEnd[d.columnEnd.length-1]=t.box.right)}if(1<o.length&&o[0].length===t.children.length){d.columnCount=a?o[0].length:o.length,r=this.application.writeGridLayout(t,i,d.columnCount),t.children.length=0;for(var w=0,S=0,C;w<o.length;w++){C=0;for(var B=0,D=0,O;B<o[w].length;B++)if(O=o[w][B],!O.spacer){O.parent.hide(),O.parent=t;var F={inherit:!0,rowSpan:0,columnSpan:0,index:-1,cellFirst:!1,cellLast:!1,rowEnd:!1,rowStart:!1};if(a)F.rowStart=0==B,F.rowEnd=B==o[w].length-1,F.cellFirst=0==w&&0==B,F.cellLast=w==o.length-1&&F.rowEnd,F.index=B;else{for(var M=1,G=1+C,P=w+1;P<o.length&&1===o[P][B].spacer;P++)G++,o[P][B].spacer=2;if(1===G)for(var H=B+1;H<o[w].length&&1===o[w][H].spacer;H++)M++,o[w][H].spacer=2;F.rowSpan=M,F.columnSpan=G,F.rowStart=0==D++,F.rowEnd=G+w===o.length,F.cellFirst=0==S++,F.cellLast=F.rowEnd&&B==o[w].length-1,F.index=w,C=0}O.data(At.GRID,"cellData",F)}else 1===O.spacer&&C++}oe(t.children,"documentParent.siblingIndex","siblingIndex"),"table"===t.display&&"collapse"===t.css("borderCollapse")&&(t.modifyBox(bt.PADDING_TOP,null),t.modifyBox(bt.PADDING_RIGHT,null),t.modifyBox(bt.PADDING_BOTTOM,null),t.modifyBox(bt.PADDING_LEFT,null)),t.data(At.GRID,"mainData",d),t.render(i)}return{output:r,complete:!0}}},{key:"processChild",value:function(){var e=this.node,t=this.parent,n=t.data(At.GRID,"mainData"),i=e.data(At.GRID,"cellData"),a="";if(n&&i){var l;if(this.options.columnBalance)l=e.data(At.GRID,"siblings");else{var r=n.columnEnd[it(i.index+(i.columnSpan-1),n.columnEnd.length-1)];l=Array.from(e.documentParent.element.children).map(function(t){var n=pe(t);return n&&n.visible&&!n.excluded&&!n.rendered&&n.linear.left>=e.linear.right&&n.linear.right<=r?n:null}).filter(function(e){return e})}if(l&&0<l.length){l.unshift(e);var o=[Nt.linearX(l),Nt.linearY(l)],d=o[0],s=o[1],h=this.application.viewController.createGroup(t,e,l);return d||s?(a=this.application.writeLinearLayout(h,t,d),h.alignmentType|=mt.SEGMENTED):a=this.application.writeConstraintLayout(h,t),{output:a,parent:h,complete:!0}}}return{output:a,complete:!0}}}]),t}(Pt),Vt=/*#__PURE__*/function(e){function t(e,n,i,a){return l(this,t),E(this,u(t).call(this,e,n,i,a))}return h(t,e),o(t,[{key:"condition",value:function(){var e=this,n=this.node.children,i=new Set(n.slice(1).map(function(e){return e.float}));return x(u(t.prototype),"condition",this).call(this)&&0<n.length&&(n.every(function(e){return e.blockStatic})||n.every(function(e){return e.inlineElement})||n.every(function(e,t){return!e.floating&&(0===t||t===n.length-1||e.blockStatic||e.inlineElement&&n[t-1].blockStatic&&n[t+1].blockStatic)})||n.every(function(e){return"none"!==e.float&&e.float===n[0].float})&&1===i.size&&(i.has("none")||i.has(n[0].float)))&&(n.some(function(t){return"list-item"===t.display&&("none"!==t.css("listStyleType")||e.hasSingleImage(t))})||n.every(function(t){return"LI"!==t.tagName&&"none"===t.styleMap.listStyleType&&e.hasSingleImage(t)}))}},{key:"processNode",value:function(){var e=this,t=this.node,n=this.parent,a="";a=Nt.linearY(t.children)?this.application.writeGridLayout(t,n,t.children.some(function(e){return"inside"===e.css("listStylePosition")})?3:2):this.application.writeLinearLayout(t,n,!0);var l=0;return t.each(function(t){var n={ordinal:"",imageSrc:"",imagePosition:""};if("list-item"===t.display||t.has("listStyleType")||e.hasSingleImage(t)){var i=t.css("listStyleImage");if(i&&"none"!==i)n.imageSrc=i;else switch(t.css("listStyleType")){case"disc":n.ordinal="\u25CF";break;case"square":n.ordinal="\u25A0";break;case"decimal":n.ordinal="".concat((l+1).toString(),".");break;case"decimal-leading-zero":n.ordinal="".concat((9>l?"0":"")+(l+1).toString(),".");break;case"lower-alpha":case"lower-latin":n.ordinal="".concat(P(l).toLowerCase(),".");break;case"upper-alpha":case"upper-latin":n.ordinal="".concat(P(l),".");break;case"lower-roman":n.ordinal="".concat(H(l+1).toLowerCase(),".");break;case"upper-roman":n.ordinal="".concat(H(l+1),".");break;case"none":i="";var a="",r=t.css("backgroundRepeat");"no-repeat"===r&&(i=t.css("backgroundImage"),a=t.css("backgroundPosition")),i&&"none"!==i&&(n.imageSrc=i,n.imagePosition=a,t.excludeResource|=ft.IMAGE_SOURCE);break;default:n.ordinal="\u25CB";}l++}t.data(At.LIST,"mainData",n)}),{output:a,complete:!0}}},{key:"afterRender",value:function(){var e=!0,t=!1,n=void 0;try{for(var i=this.subscribers[Symbol.iterator](),a,l;!(e=(a=i.next()).done);e=!0)l=a.value,l.modifyBox(bt.MARGIN_LEFT,null),l.modifyBox(bt.PADDING_LEFT,null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"hasSingleImage",value:function(e){return"none"!==e.css("backgroundImage")&&"no-repeat"===e.css("backgroundRepeat")}}]),t}(Pt),jt=/*#__PURE__*/function(e){function t(e,n,i,a){var r;return l(this,t),r=E(this,u(t).call(this,e,n,i,a)),r.require(At.EXTERNAL,!0),r}return h(t,e),o(t,[{key:"init",value:function(e){if(this.included(e)){var t=!1;if(0<e.children.length){var n=e.children[0].tagName;t=Array.from(e.children).every(function(e){return e.tagName===n});for(var i=e.parentElement;i;){if("NAV"===i.tagName&&this.application.elements.has(i)){t=!1;break}i=i.parentElement}}t&&(Array.from(e.querySelectorAll("NAV")).forEach(function(t){var n=ye(e);"none"===n.display&&(ue(t,"andromeExternalDisplay","none"),t.style.display="block")}),this.application.elements.add(e))}return!1}},{key:"afterRender",value:function(){var e=this.node;this.included(e.element)&&Array.from(e.element.querySelectorAll("NAV")).forEach(function(e){var t=ge(e,"andromeExternalDisplay");t&&(e.style.display=t,ce(e,"andromeExternalDisplay"))})}}]),t}(Pt),Yt=/*#__PURE__*/function(e){function t(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=2<arguments.length?arguments[2]:void 0,a=3<arguments.length?arguments[3]:void 0;return l(this,t),E(this,u(t).call(this,e,n,i,a))}return h(t,e),o(t,[{key:"afterInit",value:function(){var e=this,t=!0,n=!1,i=void 0;try{for(var a=function(){var t=r.value;if(t.children.some(function(e){if(e.pageflow)return"right"!==e.float&&0>e.marginLeft&&t.marginLeft>=nt(e.marginLeft)&&(nt(e.marginLeft)>=e.bounds.width||t.documentRoot);var n=e.toInt("left"),i=e.toInt("right");return 0>n&&t.marginLeft>=nt(n)||0>i&&nt(i)>=e.bounds.width})){var n=[],i=[];if(t.each(function(e){var a=0;if(e.pageflow){var l=e.marginLeft;0>l&&t.marginLeft>=nt(l)&&(a=1)}else{var r=D(e.left)+e.marginLeft,o=D(e.right);0>r?t.marginLeft>=nt(r)&&(a=2):0>o&&nt(o)>=e.bounds.width&&i.push(e)}n.push(a)}),0<i.length){var a=new androme.lib.base.NodeList(t.children).partition(function(e){return!i.includes(e)}),l=v(a,2),o=l[0],d=l[1];if(0<o.length&&0<d.length){t.autoMarginLeft&&t.css("marginLeft",t.style.marginLeft),t.modifyBox(bt.MARGIN_RIGHT,null);var s=t.has("width",xt.UNIT)?t.toInt("width"):lt.apply(null,d.list.map(function(e){return e.bounds.width})),h=lt.apply(null,d.list.map(function(e){return nt(e.toInt("right"))}));o.each(function(e){e.pageflow&&!e.hasWidth&&e.css(e.textElement?"maxWidth":"width",G(s))}),t.css("width",G(s+h))}}var u=lt.apply(null,n);0<u&&(t.each(function(i,a){if(2===n[a]){var l=i.toInt("left")+t.marginLeft;i.css("left",G(lt(l,0))),0>l&&(i.css("marginLeft",G(i.marginLeft+l)),e.modifyMarginLeft(i,l))}else(2===u||i.pageflow&&!i.plainText&&n.includes(1))&&e.modifyMarginLeft(i,t.marginLeft)}),t.has("width",xt.UNIT)&&t.css("width",G(t.toInt("width")+t.marginLeft)),e.modifyMarginLeft(t,t.marginLeft,!0))}},l=this.application.cache.elements[Symbol.iterator](),r;!(t=(r=l.next()).done);t=!0)a()}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}}},{key:"modifyMarginLeft",value:function(e,t){var n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];e.bounds.left-=t,e.bounds.width+=lt(0>e.marginLeft?e.marginLeft+t:t,0),e.css("marginLeft",G(e.marginLeft+t*(n?-1:1))),e.setBounds(!0)}}]),t}(Pt),Zt=/*#__PURE__*/function(e){function t(e,n,i,a){return l(this,t),E(this,u(t).call(this,e,n,i,a))}return h(t,e),o(t,[{key:"processNode",value:function(){function e(e){e.data(At.TABLE,"percent","".concat(ot(100*(e.bounds.width/n.bounds.width)),"%")),e.data(At.TABLE,"expand",!0)}function t(e){e.css("width",G(e.bounds.width))}var n=this.node,a=this.parent,r=[],o=n.children.filter(function(e){return"THEAD"===e.tagName}),d=n.children.filter(function(e){return"TBODY"===e.tagName}),s=n.children.filter(function(e){return"TFOOT"===e.tagName}),h=Array.from(n.element.children).find(function(e){return"COLGROUP"===e.tagName}),u=n.css("width");0<o.length&&(o[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(o[0],"styleMap")}),r.push.apply(r,I(o[0].children)),o.forEach(function(e){return e.hide()})),0<d.length&&d.forEach(function(e){r.push.apply(r,I(e.children)),e.hide()}),0<s.length&&(s[0].cascade().filter(function(e){return"TH"===e.tagName||"TD"===e.tagName}).forEach(function(e){return e.inherit(s[0],"styleMap")}),r.push.apply(r,I(s[0].children)),s.forEach(function(e){return e.hide()}));var g="fixed"===n.css("tableLayout"),c="collapse"===n.css("borderCollapse"),p=c?[0,0]:n.css("borderSpacing").split(" ").map(function(e){return parseInt(e)}),f=v(p,2),y=f[0],E=f[1];0<y?(n.modifyBox(bt.PADDING_LEFT,y),n.modifyBox(bt.PADDING_RIGHT,y)):(n.modifyBox(bt.PADDING_LEFT,null),n.modifyBox(bt.PADDING_RIGHT,null)),0<E?(n.modifyBox(bt.PADDING_TOP,E),n.modifyBox(bt.PADDING_BOTTOM,E)):(n.modifyBox(bt.PADDING_TOP,null),n.modifyBox(bt.PADDING_BOTTOM,null));for(var b=G(1<y?ot(y/2):y),x=G(1<E?ot(E/2):E),T=[],A=[],L=Array(r.length).fill(0),N=!1,R=0,_;R<r.length;R++){_=r[R];for(var w=0;w<_.children.length;w++){for(var S=_.children[w],C=_.children[w].element,B=0,F;B<C.rowSpan-1;B++)F=R+1+B,null!=L[F]&&(L[F]+=C.colSpan);if(!S.has("background")&&!S.has("backgroundColor")){var M=S.element;if(h){var P=ye(h.children[L[R]]);P.background?M.style.background=P.background:P.backgroundColor&&(M.style.backgroundColor=P.backgroundColor)}else{var H=xe(M,"background","TABLE",["rgba(0, 0, 0, 0)"]);""===H?(H=xe(M,"backgroundColor","TABLE",["rgba(0, 0, 0, 0)"]),""!==H&&(M.style.backgroundColor=H)):M.style.background=H}}var U=S.styleMap.width,X=L[R];if(0==R||null==T[X]||!g)if(!U||"auto"===U)null==T[X]&&(T[X]=U||"0px",A[X]=0);else{var m=V(U),Y=W(T[X]);(null==T[X]||S.bounds.width<A[X]||S.bounds.width===A[X]&&("auto"===T[X]&&(m||Y)||m&&Y||m&&V(T[X])&&O(U)>O(T[X])||Y&&W(U)&&D(U)>D(T[X])))&&(T[X]=U),1===C.colSpan&&(A[X]=S.bounds.width)}S.css({marginTop:0==R?"0px":x,marginRight:w<_.children.length-1?b:"0px",marginBottom:R+C.rowSpan-1>=r.length-1?"0px":x,marginLeft:0===L[R]?"0px":b}),N||(N=S.multiLine),L[R]+=C.colSpan}}var Z=lt.apply(null,L),q=r.length;if(T.every(function(e){return V(e)})&&1<T.reduce(function(e,t){return e+parseFloat(t)},0)){var Q=100;T.forEach(function(e,t){var n=parseFloat(e);0>=Q?T[t]="0px":0>Q-n&&(T[t]="".concat(Q,"%")),Q-=n})}else if(T.every(function(e){return W(e)})){var K=T.reduce(function(e,t){return e+parseInt(t)},0);V(u)&&"100%"!==u||K<n.viewWidth?T.filter(function(e){return"0px"!==e}).forEach(function(e,t){return T[t]="".concat(100*(parseInt(e)/K),"%")}):"auto"===u?T.filter(function(e){return"0px"!==e}).forEach(function(e,t){return T[t]=null==A[t]?"undefined":"".concat(100*(A[t]/n.bounds.width),"%")}):K>n.viewWidth&&(n.css("width","auto"),!g&&n.cascade().forEach(function(e){return e.css("width","auto")}))}var J=T.reduce(function(e,t){return e+(V(t)?parseFloat(t):0)},0),$=function(){if(T.some(function(e){return V(e)})||T.every(function(e){return W(e)&&"0px"!==e}))return 3;if(T.every(function(e){return e===T[0]})){if(N)return n.children.some(function(e){return e.has("height")})?2:3;if("auto"===T[0])return n.has("width")?3:0;if(n.hasWidth)return 2}return T.every(function(e){return"auto"===e||W(e)&&"0px"!==e})?1:0}();(N||2===$&&!n.hasWidth)&&n.data(At.TABLE,"expand",!0);var ee=n.children.find(function(e){return"CAPTION"===e.tagName});n.children.length=0,ee&&(!ee.has("textAlign",xt.LEFT)&&ee.css("textAlign","center"),q++,ee.data(At.TABLE,"colSpan",Z),ee.parent=n),L=Array(r.length).fill(0);for(var te=0,ne=0;ne<r.length;ne++){for(var ie=r[ne],ae=ie.children.slice(),le=0;le<ae.length;le++){for(var re=ae[le],oe=re.element,de=0,se;de<oe.rowSpan-1;de++)se=ne+1+de,null!=L[se]&&(L[se]+=oe.colSpan);1<oe.rowSpan&&re.data(At.TABLE,"rowSpan",oe.rowSpan),1<oe.colSpan&&re.data(At.TABLE,"colSpan",oe.colSpan),re.has("verticalAlign")||re.css("verticalAlign","middle"),0==ne&&re.has("borderTopStyle")&&0<D(re.css("borderTopWidth"))&&(te|=2),0==le&&re.has("borderLeftStyle")&&0<D(re.css("borderLeftWidth"))&&(te|=4),le==ae.length-1&&re.has("borderRightStyle")&&0<D(re.css("borderRightWidth"))&&(te|=8),ne==r.length-1&&re.has("borderBottomStyle")&&0<D(re.css("borderBottomWidth"))&&(te|=16);var he=T[L[ne]];"undefined"!==he&&(3===$?"auto"===he?1<=J?(t(re),re.data(At.TABLE,"exceed",!0),re.data(At.TABLE,"downsized",!0)):e(re):V(he)?(re.data(At.TABLE,"percent",he),re.data(At.TABLE,"expand",!0)):W(he)&&0<parseInt(he)?re.bounds.width>=parseInt(he)?(t(re),re.data(At.TABLE,"expand",!1),re.data(At.TABLE,"downsized",!1)):g?(e(re),re.data(At.TABLE,"downsized",!0)):(t(re),re.data(At.TABLE,"expand",!1)):((!re.has("width")||re.has("width",xt.PERCENT))&&t(re),re.data(At.TABLE,"expand",!1)):2===$?re.css("width","0px"):1===$?"auto"===he?re.css("width","0px"):(g?re.data(At.TABLE,"downsized",!0):t(re),re.data(At.TABLE,"expand",!1)):void 0),L[ne]+=oe.colSpan,re.parent=n}if(L[ne]<Z){var ue=ae[ae.length-1];ue.data(At.TABLE,"spaceSpan",Z-L[ne])}ie.hide()}c&&0!==te&&n.css({borderTopWidth:z(te,2)?"0px":"",borderRightWidth:z(te,8)?"0px":"",borderBottomWidth:z(te,16)?"0px":"",borderLeftWidth:z(te,4)?"0px":""});var ge=this.application.writeGridLayout(n,a,Z,q);return{output:ge,complete:!0}}}]),t}(Pt),qt,Qt;e.settings={},e.system={};var Kt=new Set,Jt=new Map,$t={base:{extensions:{Accessibility:Ht,Button:zt,Custom:Ut,External:Xt,Grid:Wt,List:Vt,Nav:jt,Origin:Yt,Table:Zt},Node:Lt,NodeList:Nt,NodeGroup:Rt,Application:wt,Controller:St,Resource:Mt,File:Gt,Extension:Pt},enumeration:Tt,constant:kt,util:ut,dom:gt,xml:_t,color:Ft};return e.setFramework=We,e.parseDocument=Ve,e.registerExtension=je,e.configureExtension=Ye,e.getExtension=Ze,e.ext=qe,e.ready=Qe,e.close=Ke,e.reset=Je,e.saveAllToDisk=$e,e.toString=et,e.lib=$t,e}({});
